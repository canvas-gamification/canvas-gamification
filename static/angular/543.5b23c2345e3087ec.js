"use strict";var et=Object.defineProperty,tt=Object.defineProperties,nt=Object.getOwnPropertyDescriptors,B=Object.getOwnPropertySymbols,U=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,q=(v,y,m)=>y in v?et(v,y,{enumerable:!0,configurable:!0,writable:!0,value:m}):v[y]=m,Z=(v,y)=>{for(var m in y||(y={}))U.call(y,m)&&q(v,m,y[m]);if(B)for(var m of B(y))X.call(y,m)&&q(v,m,y[m]);return v},Q=(v,y)=>tt(v,nt(y)),ee=(v,y)=>{var m={};for(var u in v)U.call(v,u)&&y.indexOf(u)<0&&(m[u]=v[u]);if(null!=v&&B)for(var u of B(v))y.indexOf(u)<0&&X.call(v,u)&&(m[u]=v[u]);return m};(self.webpackChunkcanvas_gamification_ui=self.webpackChunkcanvas_gamification_ui||[]).push([[543],{42543:(v,y,m)=>{m.r(y),m.d(y,{default:()=>Qe});var u=m(71157);const te=/^\s*>\s$/,ne=u.Node.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:e}){return["blockquote",(0,u.mergeAttributes)(this.options.HTMLAttributes,e),0]},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,u.wrappingInputRule)({find:te,type:this.type})]}}),re=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,se=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,ie=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,oe=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,ae=u.Mark.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],renderHTML({HTMLAttributes:e}){return["strong",(0,u.mergeAttributes)(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,u.markInputRule)({find:re,type:this.type}),(0,u.markInputRule)({find:ie,type:this.type})]},addPasteRules(){return[(0,u.markPasteRule)({find:se,type:this.type}),(0,u.markPasteRule)({find:oe,type:this.type})]}}),ue=/^\s*([-+*])\s$/,le=u.Node.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:e}){return["ul",(0,u.mergeAttributes)(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[(0,u.wrappingInputRule)({find:ue,type:this.type})]}}),de=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,pe=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,ce=u.Mark.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:e}){return["code",(0,u.mergeAttributes)(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,u.markInputRule)({find:de,type:this.type})]},addPasteRules(){return[(0,u.markPasteRule)({find:pe,type:this.type})]}});var M=m(10647);const he=/^```([a-z]+)?[\s\n]$/,fe=/^~~~([a-z]+)?[\s\n]$/,me=u.Node.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options;return[...(null===(t=e.firstElementChild)||void 0===t?void 0:t.classList)||[]].filter(i=>i.startsWith(n)).map(i=>i.replace(n,""))[0]||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:e,HTMLAttributes:t}){return["pre",(0,u.mergeAttributes)(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection;return!(!e||t.parent.type.name!==this.name)&&!(1!==t.pos&&t.parent.textContent.length)&&this.editor.commands.clearNodes()},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,i=r.parent.textContent.endsWith("\n\n");return!(!o||!i)&&e.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:s,empty:o}=n;if(!o||s.parent.type!==this.type||s.parentOffset!==s.parent.nodeSize-2)return!1;const a=s.after();return void 0!==a&&!r.nodeAt(a)&&e.commands.exitCode()}}},addInputRules(){return[(0,u.textblockTypeInputRule)({find:he,type:this.type,getAttributes:e=>({language:e[1]})}),(0,u.textblockTypeInputRule)({find:fe,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new M.Sy({key:new M.H$("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,o=null==s?void 0:s.mode;if(!n||!o)return!1;const{tr:i}=e.state;return i.replaceSelectionWith(this.type.create({language:o})),i.setSelection(M.Bs.near(i.doc.resolve(Math.max(0,i.selection.from-2)))),i.insertText(n.replace(/\r\n?/g,"\n")),i.setMeta("paste",!0),e.dispatch(i),!0}}})]}}),ge=u.Node.create({name:"doc",topNode:!0,content:"block+"});var V=m(99163),A=function(t,n){var r=this;this.editorView=t,this.width=n.width||1,this.color=n.color||"black",this.class=n.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map(function(s){var o=function(i){return r[s](i)};return t.dom.addEventListener(s,o),{name:s,handler:o}})};A.prototype.destroy=function(){var t=this;this.handlers.forEach(function(n){return t.editorView.dom.removeEventListener(n.name,n.handler)})},A.prototype.update=function(t,n){null!=this.cursorPos&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())},A.prototype.setCursor=function(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},A.prototype.updateOverlay=function(){var n,t=this.editorView.state.doc.resolve(this.cursorPos);if(!t.parent.inlineContent){var r=t.nodeBefore,s=t.nodeAfter;if(r||s){var o=this.editorView.nodeDOM(this.cursorPos-(r?r.nodeSize:0)).getBoundingClientRect(),i=r?o.bottom:o.top;r&&s&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),n={left:o.left,right:o.right,top:i-this.width/2,bottom:i+this.width/2}}}if(!n){var a=this.editorView.coordsAtPos(this.cursorPos);n={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}var d,h,l=this.editorView.dom.offsetParent;if(this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),!l||l==document.body&&"static"==getComputedStyle(l).position)d=-pageXOffset,h=-pageYOffset;else{var p=l.getBoundingClientRect();d=p.left-l.scrollLeft,h=p.top-l.scrollTop}this.element.style.left=n.left-d+"px",this.element.style.top=n.top-h+"px",this.element.style.width=n.right-n.left+"px",this.element.style.height=n.bottom-n.top+"px"},A.prototype.scheduleRemoval=function(t){var n=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){return n.setCursor(null)},t)},A.prototype.dragover=function(t){if(this.editorView.editable){var n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,o="function"==typeof s?s(this.editorView,n):s;if(n&&!o){var i=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&null==(i=(0,V.nj)(this.editorView.state.doc,i,this.editorView.dragging.slice)))return this.setCursor(null);this.setCursor(i),this.scheduleRemoval(5e3)}}},A.prototype.dragend=function(){this.scheduleRemoval(20)},A.prototype.drop=function(){this.scheduleRemoval(20)},A.prototype.dragleave=function(t){(t.target==this.editorView.dom||!this.editorView.dom.contains(t.relatedTarget))&&this.setCursor(null)};const ye=u.Extension.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:null}),addProseMirrorPlugins(){return[(e=this.options,void 0===e&&(e={}),new M.Sy({view:function(n){return new A(n,e)}}))];var e}});var Me=m(74136),R=m(94242),K=m(90805),w=function(e){function t(n){e.call(this,n,n)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.map=function(r,s){var o=r.resolve(s.map(this.head));return t.valid(o)?new t(o):e.near(o)},t.prototype.content=function(){return R.p2.empty},t.prototype.eq=function(r){return r instanceof t&&r.head==this.head},t.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},t.fromJSON=function(r,s){if("number"!=typeof s.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new t(r.resolve(s.pos))},t.prototype.getBookmark=function(){return new S(this.anchor)},t.valid=function(r){var s=r.parent;if(s.isTextblock||!function be(e){for(var t=e.depth;t>=0;t--){var n=e.index(t),r=e.node(t);if(0!=n)for(var s=r.child(n-1);;s=s.lastChild){if(0==s.childCount&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(r)||!function ke(e){for(var t=e.depth;t>=0;t--){var n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(var s=r.child(n);;s=s.firstChild){if(0==s.childCount&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(r))return!1;var o=s.type.spec.allowGapCursor;if(null!=o)return o;var i=s.contentMatchAt(r.index()).defaultType;return i&&i.isTextblock},t.findFrom=function(r,s,o){e:for(;;){if(!o&&t.valid(r))return r;for(var i=r.pos,a=null,l=r.depth;;l--){var d=r.node(l);if(s>0?r.indexAfter(l)<d.childCount:r.index(l)>0){a=d.child(s>0?r.indexAfter(l):r.index(l)-1);break}if(0==l)return null;var h=r.doc.resolve(i+=s);if(t.valid(h))return h}for(;;){var p=s>0?a.firstChild:a.lastChild;if(!p){if(a.isAtom&&!a.isText&&!M.qv.isSelectable(a)){r=r.doc.resolve(i+a.nodeSize*s),o=!1;continue e}break}a=p;var f=r.doc.resolve(i+=s);if(t.valid(f))return f}return null}},t}(M.Y1);w.prototype.visible=!1,M.Y1.jsonID("gapcursor",w);var S=function(t){this.pos=t};S.prototype.map=function(t){return new S(t.map(this.pos))},S.prototype.resolve=function(t){var n=t.resolve(this.pos);return w.valid(n)?new w(n):M.Y1.near(n)};var Te=(0,Me.$)({ArrowLeft:E("horiz",-1),ArrowRight:E("horiz",1),ArrowUp:E("vert",-1),ArrowDown:E("vert",1)});function E(e,t){var n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(r,s,o){var i=r.selection,a=t>0?i.$to:i.$from,l=i.empty;if(i instanceof M.Bs){if(!o.endOfTextblock(n)||0==a.depth)return!1;l=!1,a=r.doc.resolve(t>0?a.after():a.before())}var d=w.findFrom(a,t,l);return!!d&&(s&&s(r.tr.setSelection(new w(d))),!0)}}function Ae(e,t,n){if(!e.editable)return!1;var r=e.state.doc.resolve(t);if(!w.valid(r))return!1;var o=e.posAtCoords({left:n.clientX,top:n.clientY}).inside;return!(o>-1&&M.qv.isSelectable(e.state.doc.nodeAt(o))||(e.dispatch(e.state.tr.setSelection(new w(r))),0))}function Ce(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof w))return!1;var r=e.state.selection.$from,s=r.parent.contentMatchAt(r.index()).findWrapping(e.state.schema.nodes.text);if(!s)return!1;for(var o=R.HY.empty,i=s.length-1;i>=0;i--)o=R.HY.from(s[i].createAndFill(null,o));var a=e.state.tr.replace(r.pos,r.pos,new R.p2(o,0,0));return a.setSelection(M.Bs.near(a.doc.resolve(r.pos+1))),e.dispatch(a),!1}function Ie(e){if(!(e.selection instanceof w))return null;var t=document.createElement("div");return t.className="ProseMirror-gapcursor",K.EH.create(e.doc,[K.p.widget(e.selection.head,t,{key:"gapcursor"})])}const _e=u.Extension.create({name:"gapCursor",addProseMirrorPlugins:()=>[new M.Sy({props:{decorations:Ie,createSelectionBetween:function(t,n,r){if(n.pos==r.pos&&w.valid(r))return new w(r)},handleClick:Ae,handleKeyDown:Te,handleDOMEvents:{beforeinput:Ce}}})],extendNodeSchema(e){var t;return{allowGapCursor:null!==(t=(0,u.callOrReturn)((0,u.getExtensionField)(e,"allowGapCursor",{name:e.name,options:e.options,storage:e.storage})))&&void 0!==t?t:null}}}),Le=u.Node.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:e}){return["br",(0,u.mergeAttributes)(this.options.HTMLAttributes,e)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:s,storedMarks:o}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:a}=r.extensionManager,l=o||s.$to.parentOffset&&s.$from.marks();return t().insertContent({type:this.name}).command(({tr:d,dispatch:h})=>{if(h&&l&&i){const p=l.filter(f=>a.includes(f.type.name));d.ensureMarks(p)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),xe=u.Node.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,(0,u.mergeAttributes)(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.setNode(this.name,e),toggleHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>Q(Z({},e),{[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>(0,u.textblockTypeInputRule)({find:new RegExp(`^(#{1,${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}});var O=200,b=function(){};b.prototype.append=function(t){return t.length?(t=b.from(t),!this.length&&t||t.length<O&&this.leafAppend(t)||this.length<O&&t.leafPrepend(this)||this.appendInner(t)):this},b.prototype.prepend=function(t){return t.length?b.from(t).append(this):this},b.prototype.appendInner=function(t){return new He(this,t)},b.prototype.slice=function(t,n){return void 0===t&&(t=0),void 0===n&&(n=this.length),t>=n?b.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))},b.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},b.prototype.forEach=function(t,n,r){void 0===n&&(n=0),void 0===r&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)},b.prototype.map=function(t,n,r){void 0===n&&(n=0),void 0===r&&(r=this.length);var s=[];return this.forEach(function(o,i){return s.push(t(o,i))},n,r),s},b.from=function(t){return t instanceof b?t:t&&t.length?new $(t):b.empty};var $=function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(s,o){return 0==s&&o==this.length?this:new t(this.values.slice(s,o))},t.prototype.getInner=function(s){return this.values[s]},t.prototype.forEachInner=function(s,o,i,a){for(var l=o;l<i;l++)if(!1===s(this.values[l],a+l))return!1},t.prototype.forEachInvertedInner=function(s,o,i,a){for(var l=o-1;l>=i;l--)if(!1===s(this.values[l],a+l))return!1},t.prototype.leafAppend=function(s){if(this.length+s.length<=O)return new t(this.values.concat(s.flatten()))},t.prototype.leafPrepend=function(s){if(this.length+s.length<=O)return new t(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(b);b.empty=new $([]);var He=function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,s,o,i){var a=this.left.length;if(s<a&&!1===this.left.forEachInner(r,s,Math.min(o,a),i)||o>a&&!1===this.right.forEachInner(r,Math.max(s-a,0),Math.min(this.length,o)-a,i+a))return!1},t.prototype.forEachInvertedInner=function(r,s,o,i){var a=this.left.length;if(s>a&&!1===this.right.forEachInvertedInner(r,s-a,Math.max(o,a)-a,i+a)||o<a&&!1===this.left.forEachInvertedInner(r,Math.min(s,a),o,i))return!1},t.prototype.sliceInner=function(r,s){if(0==r&&s==this.length)return this;var o=this.left.length;return s<=o?this.left.slice(r,s):r>=o?this.right.slice(r-o,s-o):this.left.slice(r,o).append(this.right.slice(0,s-o))},t.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new t(this.left,s)},t.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new t(s,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t}(b);const z=b;var k=function(t,n){this.items=t,this.eventCount=n};k.prototype.popEvent=function(t,n){var i,a,r=this;if(0==this.eventCount)return null;for(var s=this.items.length;;s--)if(this.items.get(s-1).selection){--s;break}n&&(i=this.remapping(s,this.items.length),a=i.maps.length);var d,h,l=t.tr,p=[],f=[];return this.items.forEach(function(c,T){if(!c.step)return i||(i=r.remapping(s,T+1),a=i.maps.length),a--,void f.push(c);if(i){f.push(new C(c.map));var _,L=c.step.map(i.slice(a));L&&l.maybeStep(L).doc&&p.push(new C(_=l.mapping.maps[l.mapping.maps.length-1],null,null,p.length+f.length)),a--,_&&i.appendMap(_,a)}else l.maybeStep(c.step);return c.selection?(d=i?c.selection.map(i.slice(a)):c.selection,h=new k(r.items.slice(0,s).append(f.reverse().concat(p)),r.eventCount-1),!1):void 0},this.items.length,0),{remaining:h,transform:l,selection:d}},k.prototype.addTransform=function(t,n,r,s){for(var o=[],i=this.eventCount,a=this.items,l=!s&&a.length?a.get(a.length-1):null,d=0;d<t.steps.length;d++){var f,h=t.steps[d].invert(t.docs[d]),p=new C(t.mapping.maps[d],h,n);(f=l&&l.merge(p))&&(p=f,d?o.pop():a=a.slice(0,a.length-1)),o.push(p),n&&(i++,n=null),s||(l=p)}var c=i-r.depth;return c>Oe&&(a=function Ee(e,t){var n;return e.forEach(function(r,s){if(r.selection&&0==t--)return n=s,!1}),e.slice(n)}(a,c),i-=c),new k(a.append(o),i)},k.prototype.remapping=function(t,n){var r=new V.vs;return this.items.forEach(function(s,o){r.appendMap(s.map,null!=s.mirrorOffset&&o-s.mirrorOffset>=t?r.maps.length-s.mirrorOffset:null)},t,n),r},k.prototype.addMaps=function(t){return 0==this.eventCount?this:new k(this.items.append(t.map(function(n){return new C(n)})),this.eventCount)},k.prototype.rebased=function(t,n){if(!this.eventCount)return this;var r=[],s=Math.max(0,this.items.length-n),o=t.mapping,i=t.steps.length,a=this.eventCount;this.items.forEach(function(c){c.selection&&a--},s);var l=n;this.items.forEach(function(c){var T=o.getMirror(--l);if(null!=T){i=Math.min(i,T);var L=o.maps[T];if(c.step){var _=t.steps[T].invert(t.docs[T]),H=c.selection&&c.selection.map(o.slice(l+1,T));H&&a++,r.push(new C(L,_,H))}else r.push(new C(L))}},s);for(var d=[],h=n;h<i;h++)d.push(new C(o.maps[h]));var p=this.items.slice(0,s).append(d).append(r),f=new k(p,a);return f.emptyItemCount()>500&&(f=f.compress(this.items.length-r.length)),f},k.prototype.emptyItemCount=function(){var t=0;return this.items.forEach(function(n){n.step||t++}),t},k.prototype.compress=function(t){void 0===t&&(t=this.items.length);var n=this.remapping(0,t),r=n.maps.length,s=[],o=0;return this.items.forEach(function(i,a){if(a>=t)s.push(i),i.selection&&o++;else if(i.step){var l=i.step.map(n.slice(r)),d=l&&l.getMap();if(r--,d&&n.appendMap(d,r),l){var h=i.selection&&i.selection.map(n.slice(r));h&&o++;var f,p=new C(d.invert(),l,h),c=s.length-1;(f=s.length&&s[c].merge(p))?s[c]=f:s.push(p)}}else i.map&&r--},this.items.length,0),new k(z.from(s.reverse()),o)},k.empty=new k(z.empty,0);var C=function(t,n,r,s){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=s};C.prototype.merge=function(t){if(this.step&&t.step&&!t.selection){var n=t.step.merge(this.step);if(n)return new C(n.getMap().invert(),n,this.selection)}};var x=function(t,n,r,s){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=s},Oe=20;function G(e){var t=[];return e.forEach(function(n,r,s,o){return t.push(s,o)}),t}function N(e,t){if(!e)return null;for(var n=[],r=0;r<e.length;r+=2){var s=t.map(e[r],1),o=t.map(e[r+1],-1);s<=o&&n.push(s,o)}return n}function F(e,t,n,r){var s=P(t),o=I.get(t).spec.config,i=(r?e.undone:e.done).popEvent(t,s);if(i){var a=i.selection.resolve(i.transform.doc),l=(r?e.done:e.undone).addTransform(i.transform,t.selection.getBookmark(),o,s),d=new x(r?l:i.remaining,r?i.remaining:l,null,0);n(i.transform.setSelection(a).setMeta(I,{redo:r,historyState:d}).scrollIntoView())}}var D=!1,W=null;function P(e){var t=e.plugins;if(W!=t){D=!1,W=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){D=!0;break}}return D}var I=new M.H$("history"),j=new M.H$("closeHistory");function Y(e,t){var n=I.getState(e);return!(!n||0==n.done.eventCount||(t&&F(n,e,t,!1),0))}function J(e,t){var n=I.getState(e);return!(!n||0==n.undone.eventCount||(t&&F(n,e,t,!0),0))}const De=u.Extension.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:e,dispatch:t})=>Y(e,t),redo:()=>({state:e,dispatch:t})=>J(e,t)}),addProseMirrorPlugins(){return[(e=this.options,new M.Sy({key:I,state:{init:function(){return new x(k.empty,k.empty,null,0)},apply:function(n,r,s){return function Pe(e,t,n,r){var o,s=n.getMeta(I);if(s)return s.historyState;n.getMeta(j)&&(e=new x(e.done,e.undone,null,0));var i=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(i&&i.getMeta(I))return i.getMeta(I).redo?new x(e.done.addTransform(n,null,r,P(t)),e.undone,G(n.mapping.maps[n.steps.length-1]),e.prevTime):new x(e.done,e.undone.addTransform(n,null,r,P(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||i&&!1===i.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new x(e.done.rebased(n,o),e.undone.rebased(n,o),N(e.prevRanges,n.mapping),e.prevTime):new x(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),N(e.prevRanges,n.mapping),e.prevTime);var a=0==e.prevTime||!i&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function Be(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach(function(r,s){for(var o=0;o<t.length;o+=2)r<=t[o+1]&&s>=t[o]&&(n=!0)}),n}(n,e.prevRanges)),l=i?N(e.prevRanges,n.mapping):G(n.mapping.maps[n.steps.length-1]);return new x(e.done.addTransform(n,a?t.selection.getBookmark():null,r,P(t)),k.empty,l,n.time)}(r,s,n,e)}},config:e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},props:{handleDOMEvents:{beforeinput:function(n,r){var s="historyUndo"==r.inputType?Y(n.state,n.dispatch):"historyRedo"==r.inputType&&J(n.state,n.dispatch);return s&&r.preventDefault(),s}}}}))];var e},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-\u044f":()=>this.editor.commands.undo(),"Shift-Mod-\u044f":()=>this.editor.commands.redo()}}}),Ve=u.Node.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:e}){return["hr",(0,u.mergeAttributes)(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e})=>e().insertContent({type:this.name}).command(({tr:t,dispatch:n})=>{var r;if(n){const{$to:s}=t.selection,o=s.end();if(s.nodeAfter)t.setSelection(M.Bs.create(t.doc,s.pos));else{const i=null===(r=s.parent.type.contentMatch.defaultType)||void 0===r?void 0:r.create();i&&(t.insert(o,i),t.setSelection(M.Bs.create(t.doc,o)))}t.scrollIntoView()}return!0}).run()}},addInputRules(){return[(0,u.nodeInputRule)({find:/^(?:---|\u2014-|___\s|\*\*\*\s)$/,type:this.type})]}}),Ke=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,$e=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,ze=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,Ge=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,Fe=u.Mark.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=italic"}],renderHTML({HTMLAttributes:e}){return["em",(0,u.mergeAttributes)(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,u.markInputRule)({find:Ke,type:this.type}),(0,u.markInputRule)({find:ze,type:this.type})]},addPasteRules(){return[(0,u.markPasteRule)({find:$e,type:this.type}),(0,u.markPasteRule)({find:Ge,type:this.type})]}}),We=u.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:e}){return["li",(0,u.mergeAttributes)(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),je=/^(\d+)\.\s$/,Ye=u.Node.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:e}){const r=e,{start:t}=r,n=ee(r,["start"]);return 1===t?["ol",(0,u.mergeAttributes)(this.options.HTMLAttributes,n),0]:["ol",(0,u.mergeAttributes)(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[(0,u.wrappingInputRule)({find:je,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]})]}}),Je=u.Node.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:e}){return["p",(0,u.mergeAttributes)(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),qe=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,Ue=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,Xe=u.Mark.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("line-through")&&{}}],renderHTML({HTMLAttributes:e}){return["s",(0,u.mergeAttributes)(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,u.markInputRule)({find:qe,type:this.type})]},addPasteRules(){return[(0,u.markPasteRule)({find:Ue,type:this.type})]}}),Ze=u.Node.create({name:"text",group:"inline"}),Qe=u.Extension.create({name:"starterKit",addExtensions(){var e,t,n,r,s,o,i,a,l,d,h,p,f,c,T,L,_,H;const g=[];return!1!==this.options.blockquote&&g.push(ne.configure(null===(e=this.options)||void 0===e?void 0:e.blockquote)),!1!==this.options.bold&&g.push(ae.configure(null===(t=this.options)||void 0===t?void 0:t.bold)),!1!==this.options.bulletList&&g.push(le.configure(null===(n=this.options)||void 0===n?void 0:n.bulletList)),!1!==this.options.code&&g.push(ce.configure(null===(r=this.options)||void 0===r?void 0:r.code)),!1!==this.options.codeBlock&&g.push(me.configure(null===(s=this.options)||void 0===s?void 0:s.codeBlock)),!1!==this.options.document&&g.push(ge.configure(null===(o=this.options)||void 0===o?void 0:o.document)),!1!==this.options.dropcursor&&g.push(ye.configure(null===(i=this.options)||void 0===i?void 0:i.dropcursor)),!1!==this.options.gapcursor&&g.push(_e.configure(null===(a=this.options)||void 0===a?void 0:a.gapcursor)),!1!==this.options.hardBreak&&g.push(Le.configure(null===(l=this.options)||void 0===l?void 0:l.hardBreak)),!1!==this.options.heading&&g.push(xe.configure(null===(d=this.options)||void 0===d?void 0:d.heading)),!1!==this.options.history&&g.push(De.configure(null===(h=this.options)||void 0===h?void 0:h.history)),!1!==this.options.horizontalRule&&g.push(Ve.configure(null===(p=this.options)||void 0===p?void 0:p.horizontalRule)),!1!==this.options.italic&&g.push(Fe.configure(null===(f=this.options)||void 0===f?void 0:f.italic)),!1!==this.options.listItem&&g.push(We.configure(null===(c=this.options)||void 0===c?void 0:c.listItem)),!1!==this.options.orderedList&&g.push(Ye.configure(null===(T=this.options)||void 0===T?void 0:T.orderedList)),!1!==this.options.paragraph&&g.push(Je.configure(null===(L=this.options)||void 0===L?void 0:L.paragraph)),!1!==this.options.strike&&g.push(Xe.configure(null===(_=this.options)||void 0===_?void 0:_.strike)),!1!==this.options.text&&g.push(Ze.configure(null===(H=this.options)||void 0===H?void 0:H.text)),g}})}}]);