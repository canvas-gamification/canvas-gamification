(self.webpackChunkcanvas_gamification_ui=self.webpackChunkcanvas_gamification_ui||[]).push([[337],{58337:(E,W,f)=>{"use strict";f.r(W),f.d(W,{CourseModule:()=>Ts});var p={};f.r(p),f.d(p,{ellipseWithEllipse:()=>Fo,ellipseWithLine:()=>ua,exists:()=>La,lineWithLine:()=>fi,pathWithEllipse:()=>_,pathWithLine:()=>y,pathWithPath:()=>le,pathWithPolygon:()=>Y,pathWithPolyline:()=>D,pathWithRect:()=>R,polygonWithEllipse:()=>ke,polygonWithLine:()=>ge,polygonWithPolygon:()=>d,polygonWithPolyline:()=>l,polygonWithRect:()=>Se,polylineWithEllipse:()=>N,polylineWithLine:()=>_o,polylineWithPolyline:()=>ae,polylineWithRect:()=>Z,rectWithEllipse:()=>Rn,rectWithLine:()=>Vn,rectWithRect:()=>la});var g={};f.r(g),f.d(g,{Curve:()=>yn,Ellipse:()=>Or,Line:()=>gt,Path:()=>It,Point:()=>ye,Polygon:()=>Ar,Polyline:()=>fn,Rect:()=>ct,bezier:()=>eo,ellipse:()=>ts,intersection:()=>qn,line:()=>Li,normalizeAngle:()=>zr,point:()=>Pr,random:()=>Ki,rect:()=>ui,scale:()=>xo,snapToGrid:()=>Mi,toDeg:()=>xi,toRad:()=>Lr,types:()=>Jt});var w={};f.r(w),f.d(w,{absolute:()=>Ls,bottom:()=>Vf,ellipse:()=>cu,ellipseSpread:()=>Bf,fn:()=>lu,left:()=>Nf,line:()=>us,right:()=>Df,top:()=>Ff});var S={};f.r(S),f.d(S,{bottom:()=>Uf,inside:()=>Wf,insideOriented:()=>Gf,left:()=>En,manual:()=>Gi,outside:()=>zf,outsideOriented:()=>Ha,radial:()=>$f,radialOriented:()=>Yf,right:()=>Hf,top:()=>jf});var x={};f.r(x),f.d(x,{manhattan:()=>wu,metro:()=>hc,normal:()=>ga,oneSide:()=>ac,orthogonal:()=>ll});var A={};f.r(A),f.d(A,{curve:()=>Hs,jumpover:()=>Eu,normal:()=>vl,rounded:()=>mc,smooth:()=>yc});var k={};f.r(k),f.d(k,{addClass:()=>Pc,mask:()=>vd,opacity:()=>Mu,stroke:()=>Pi});var M={};f.r(M),f.d(M,{connectionClosest:()=>Cl,connectionLength:()=>md,connectionPerpendicular:()=>kc,connectionRatio:()=>Ac,resolveRef:()=>Wo});var F={};f.r(F),f.d(F,{anchor:()=>xd,bbox:()=>Oc,boundary:()=>Rc,rectangle:()=>$o});var H={};f.r(H),f.d(H,{bottom:()=>Sl,bottomLeft:()=>Gt,bottomRight:()=>Nu,center:()=>_d,left:()=>Tl,midSide:()=>$a,modelCenter:()=>wd,perpendicular:()=>Pl,right:()=>El,top:()=>Yo,topLeft:()=>Ru,topRight:()=>vs});var O=f(69808),X=f(75197),te=f(6741),fe=f(54064),i=f(5e3),se=f(21137),ve=f(17448),he=f(25635),ne=f(93075),xe=f(9419),Ae=f(46421);let Fe=(()=>{class e{transform(n,r){return n.is_teacher||r.is_registered}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=i.\u0275\u0275definePipe({name:"userHasCourseViewPermissions",type:e,pure:!0}),e})();function C(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-island",7),i.\u0275\u0275pipe(2,"userHasCourseViewPermissions"),i.\u0275\u0275elementContainerEnd()),2&e){const n=t.$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("course",n)("hasViewPermission",i.\u0275\u0275pipeBind2(2,2,r.user,n))}}function He(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,C,3,5,"ng-container",6),i.\u0275\u0275elementContainerEnd()),2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",n.allCourses)}}function nt(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-island",8),i.\u0275\u0275elementContainerEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("skeleton",!0))}const et=function(){return[0,0,0,0,0,0]};function ot(e,t){1&e&&i.\u0275\u0275template(0,nt,2,1,"ng-container",6),2&e&&i.\u0275\u0275property("ngForOf",i.\u0275\u0275pureFunction0(1,et))}let lt=(()=>{class e{constructor(n,r,o){this.authenticationService=n,this.route=r,this.courseService=o,this.STATUS=fe.Q,this.courseNameSearch="",this.matchCourseName=(u,c)=>""===c||u.name.toLowerCase().includes(c.toLowerCase()),this.authenticationService.currentUser.subscribe(u=>this.user=u)}ngOnInit(){this.courseService.getCourses().subscribe(n=>{this.allCourses=n})}}return e.\u0275fac=function(n){return new(n||e)(i.\u0275\u0275directiveInject(se.$),i.\u0275\u0275directiveInject(te.gz),i.\u0275\u0275directiveInject(ve.N))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-list"]],decls:9,vars:4,consts:[[1,"tui-container","tui-container_fullwidth"],[1,"tui-text_h3","tui-space_vertical-10"],["icon","tuiIconSearchLarge","aria-label","Search Courses",1,"tui-space_bottom-4",3,"ngModel","tuiTextfieldCleaner","ngModelChange"],[1,"course-islands"],[4,"ngIf","ngIfElse"],["skeletons",""],[4,"ngFor","ngForOf"],[3,"course","hasViewPermission"],[3,"skeleton"]],template:function(n,r){if(1&n&&(i.\u0275\u0275elementStart(0,"section",0),i.\u0275\u0275elementStart(1,"h1",1),i.\u0275\u0275text(2,"Course List"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"tui-input",2),i.\u0275\u0275listener("ngModelChange",function(u){return r.courseNameSearch=u}),i.\u0275\u0275text(4," Search Courses "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",3),i.\u0275\u0275template(6,He,2,1,"ng-container",4),i.\u0275\u0275template(7,ot,1,2,"ng-template",null,5,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&n){const o=i.\u0275\u0275reference(8);i.\u0275\u0275advance(3),i.\u0275\u0275property("ngModel",r.courseNameSearch)("tuiTextfieldCleaner",!0),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",r.allCourses)("ngIfElse",o)}},directives:[he.K3,he.wU,ne.NgControlStatus,ne.NgModel,xe.be,O.O5,O.sg,Ae.V],pipes:[Fe],styles:[".course-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:2rem}"]}),e})();class pt{static createNameForm(){return(new ne.FormBuilder).group({nameControl:new ne.FormControl("",[ne.Validators.required])})}static createConfirmNameForm(){return(new ne.FormBuilder).group({confirmNameControl:new ne.FormControl("")})}static createStudentNumberForm(){return(new ne.FormBuilder).group({studentNumberControl:new ne.FormControl("",[ne.Validators.required])})}static createVerifyForm(){return(new ne.FormBuilder).group({verifyControl:new ne.FormControl("",[ne.Validators.required])})}}var At=f(83325),Xt=f(769),$t=f(46693);function nn(e,t){1&e&&i.\u0275\u0275projection(0,0,["*ngIf","visible"])}const vr=["*"];let Ur=(()=>{class e{constructor(){this.visible=!1}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-registration-step"]],ngContentSelectors:vr,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(n,r){1&n&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,nn,1,0,"ng-content",0)),2&n&&i.\u0275\u0275property("ngIf",r.visible)},directives:[O.O5],styles:[""]}),e})();var ze=f(52014),wn=f(28634),tr=f(34530),nr=f(14335),Yn=f(35640),be=f(73442),Je=f(19014),ut=f(41065),ht=f(84620),Rt=f(35379),pn=f(18583),kn=f(92198);function or(e,t){1&e&&i.\u0275\u0275elementContainer(0)}const mi=["*"],un=["tuiStep",""];function Kt(e,t){if(1&e&&i.\u0275\u0275element(0,"tui-svg",4),2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275property("src",n.icon)}}let B=(()=>{let e=class{constructor(){this.steps=wn.Mm,this.orientation="horizontal",this.activeItemIndex=0,this.activeItemIndexChange=new i.EventEmitter}get changes$(){return(0,tr.Fp)(this.steps).pipe((0,pn.g)(0))}onHorizontal(n,r){"horizontal"!==this.orientation||!n.target||(n.preventDefault(),this.moveFocus(n.target,r))}onVertical(n,r){"vertical"!==this.orientation||!n.target||(n.preventDefault(),this.moveFocus(n.target,r))}indexOf(n){return(0,nr.ct)(this.steps).findIndex(({nativeElement:r})=>r===n)}isActive(n){return n===this.activeItemIndex}activate(n){this.activeItemIndex!==n&&(this.activeItemIndex=n,this.activeItemIndexChange.emit(n))}moveFocus(n,r){const o=(0,nr.ct)(this.steps).map(({nativeElement:u})=>u);(0,Yn.pr)(o.indexOf(n),o,r)}};return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-stepper"],["nav","tuiStepper",""]],contentQueries:function(n,r,o){if(1&n&&i.\u0275\u0275contentQuery(o,z,4,i.ElementRef),2&n){let u;i.\u0275\u0275queryRefresh(u=i.\u0275\u0275loadQuery())&&(r.steps=u)}},hostVars:1,hostBindings:function(n,r){1&n&&i.\u0275\u0275listener("keydown.arrowRight",function(u){return r.onHorizontal(u,1)})("keydown.arrowLeft",function(u){return r.onHorizontal(u,-1)})("keydown.arrowDown",function(u){return r.onVertical(u,1)})("keydown.arrowUp",function(u){return r.onVertical(u,-1)}),2&n&&i.\u0275\u0275attribute("data-orientation",r.orientation)},inputs:{orientation:"orientation",activeItemIndex:"activeItemIndex"},outputs:{activeItemIndexChange:"activeItemIndexChange"},ngContentSelectors:mi,decls:3,vars:3,consts:[[4,"ngIf"]],template:function(n,r){1&n&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,or,1,0,"ng-container",0),i.\u0275\u0275pipe(1,"async"),i.\u0275\u0275projection(2)),2&n&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,r.changes$))},directives:[O.O5],pipes:[O.Ov],styles:["[_nghost-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;overflow:auto;counter-reset:steps}[_nghost-%COMP%]::-webkit-scrollbar, [_nghost-%COMP%]::-webkit-scrollbar-thumb{background:0 0;width:0;height:0}[data-orientation=vertical][_nghost-%COMP%]{flex-direction:column}"],changeDetection:0}),(0,ze.gn)([(0,i.ContentChildren)((0,i.forwardRef)(()=>z),{read:i.ElementRef})],e.prototype,"steps",void 0),(0,ze.gn)([(0,i.Input)(),(0,i.HostBinding)("attr.data-orientation"),(0,be.TH)()],e.prototype,"orientation",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"activeItemIndex",void 0),(0,ze.gn)([(0,i.Output)()],e.prototype,"activeItemIndexChange",void 0),(0,ze.gn)([be.UM],e.prototype,"changes$",null),(0,ze.gn)([(0,i.HostListener)("keydown.arrowRight",["$event","1"]),(0,i.HostListener)("keydown.arrowLeft",["$event","-1"])],e.prototype,"onHorizontal",null),(0,ze.gn)([(0,i.HostListener)("keydown.arrowDown",["$event","1"]),(0,i.HostListener)("keydown.arrowUp",["$event","-1"])],e.prototype,"onVertical",null),e})(),z=(()=>{let e=class{constructor(n,r,o,u){this.stepper=o,this.elementRef=u,this.state="normal",this.icon="",this.focusVisible=!1,r.pipe((0,kn.h)(Rt.y)).subscribe(()=>{this.activate()}),n.subscribe(c=>{this.focusVisible=c})}get isActive(){return this.stepper.isActive(this.index)}get isVertical(){return"vertical"===this.stepper.orientation}get tabIndex(){return this.isActive?0:-1}get index(){return this.stepper.indexOf(this.elementRef.nativeElement)}activate(){this.stepper.activate(this.index)}};return e.\u0275fac=function(n){return new(n||e)(i.\u0275\u0275directiveInject(Je.ku),i.\u0275\u0275directiveInject(ut.Ok),i.\u0275\u0275directiveInject(B),i.\u0275\u0275directiveInject(i.ElementRef))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["button","tuiStep",""],["a","tuiStep","",3,"routerLink",""],["a","tuiStep","","routerLink","","routerLinkActive",""]],hostAttrs:["type","button"],hostVars:8,hostBindings:function(n,r){1&n&&i.\u0275\u0275listener("click",function(){return r.activate()}),2&n&&(i.\u0275\u0275hostProperty("tabIndex",r.tabIndex),i.\u0275\u0275attribute("data-state",r.state),i.\u0275\u0275classProp("_focus-visible",r.focusVisible)("_active",r.isActive)("_vertical",r.isVertical))},inputs:{state:"state",icon:"icon"},features:[i.\u0275\u0275ProvidersFeature([Je.a3,ut.Ok,Je.ku])],attrs:un,ngContentSelectors:mi,decls:5,vars:1,consts:[["class","marker marker_custom",3,"src",4,"ngIf"],["src","tuiIconWarningLarge",1,"marker","marker_error"],["src","tuiIconCheckLarge",1,"marker","marker_pass"],[1,"marker","marker_index"],[1,"marker","marker_custom",3,"src"]],template:function(n,r){1&n&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,Kt,1,1,"tui-svg",0),i.\u0275\u0275element(1,"tui-svg",1),i.\u0275\u0275element(2,"tui-svg",2),i.\u0275\u0275element(3,"div",3),i.\u0275\u0275projection(4)),2&n&&i.\u0275\u0275property("ngIf",r.icon)},directives:[O.O5,ht.P],styles:["[_nghost-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:0 0;font-size:inherit;line-height:inherit;position:relative;display:flex;align-items:center;flex-shrink:0;color:var(--tui-link);margin-right:2rem;outline:0;cursor:pointer;text-decoration:none;counter-increment:steps}[_nghost-%COMP%]:disabled{pointer-events:none;color:var(--tui-base-07)}[_nghost-%COMP%]:hover{color:var(--tui-link-hover)}[_nghost-%COMP%]:not(:last-of-type)._vertical{margin-bottom:1.25rem}._active[_nghost-%COMP%], ._active[_nghost-%COMP%]:hover{color:var(--tui-text-01);cursor:default}._focus-visible[_nghost-%COMP%]:before{content:'';position:absolute;left:2.75rem;right:0;top:50%;height:1.5rem;margin-top:-.75rem;background:var(--tui-selection)}.marker[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration,300ms);transition-timing-function:ease-in-out;display:flex;width:2rem;height:2rem;border-radius:100%;margin-right:.75rem;flex-shrink:0;align-items:center;justify-content:center;background:var(--tui-secondary);color:var(--tui-link)}[_nghost-%COMP%]:disabled   .marker[_ngcontent-%COMP%]{background:var(--tui-base-03);color:var(--tui-base-07)}.marker_index[_ngcontent-%COMP%]:before{content:counter(steps)}[_nghost-%COMP%]:hover   .marker_index[_ngcontent-%COMP%]{color:var(--tui-link-hover);background:var(--tui-secondary-hover)}._active[_nghost-%COMP%]   .marker_index[_ngcontent-%COMP%]{color:var(--tui-primary-text);background:var(--tui-primary)}[_nghost-%COMP%]:not(._active)   .marker_custom[_ngcontent-%COMP%] ~ .marker_index[_ngcontent-%COMP%], [_nghost-%COMP%]:not([data-state=normal]):not(._active)   .marker_index[_ngcontent-%COMP%]{display:none}.marker_error[_ngcontent-%COMP%]{background:var(--tui-error-bg);color:var(--tui-error-fill)}[_nghost-%COMP%]:hover   .marker_error[_ngcontent-%COMP%]{background:var(--tui-error-bg-hover);color:var(--tui-error-fill)}._active[_nghost-%COMP%]   .marker_error[_ngcontent-%COMP%], [_nghost-%COMP%]:not([data-state=error])   .marker_error[_ngcontent-%COMP%]{display:none}._active[_nghost-%COMP%]   .marker_pass[_ngcontent-%COMP%], [_nghost-%COMP%]:not([data-state=pass])   .marker_pass[_ngcontent-%COMP%]{display:none}._active[_nghost-%COMP%]   .marker_custom[_ngcontent-%COMP%], [_nghost-%COMP%]:not([data-state=normal])   .marker_custom[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]:hover   .marker_custom[_ngcontent-%COMP%]{color:var(--tui-link-hover);background:var(--tui-secondary-hover)}"],changeDetection:0}),(0,ze.gn)([(0,i.Input)(),(0,i.HostBinding)("attr.data-state"),(0,be.TH)()],e.prototype,"state",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"icon",void 0),(0,ze.gn)([(0,i.HostBinding)("class._focus-visible")],e.prototype,"focusVisible",void 0),(0,ze.gn)([(0,i.HostBinding)("class._active")],e.prototype,"isActive",null),(0,ze.gn)([(0,i.HostBinding)("class._vertical")],e.prototype,"isVertical",null),(0,ze.gn)([(0,i.HostBinding)("tabIndex")],e.prototype,"tabIndex",null),(0,ze.gn)([(0,i.HostListener)("click")],e.prototype,"activate",null),e=(0,ze.gn)([(0,ze.fM)(0,(0,i.Inject)(Je.ku)),(0,ze.fM)(1,(0,i.Inject)(ut.Ok)),(0,ze.fM)(2,(0,i.Inject)(B)),(0,ze.fM)(3,(0,i.Inject)(i.ElementRef))],e),e})(),re=(()=>{let e=class{};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[O.ez,ht.E]]}),e})();const Ce=["headerStep"];function We(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"button",2,3),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()),2&e){const n=t.$implicit;i.\u0275\u0275property("disabled",!0),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",n," ")}}const Ke=["*"];let bt=(()=>{class e{constructor(n){this.changeDetector=n,this.steps=[],this.currentStep=0}ngAfterContentInit(){this.setStep(this.currentStep)}ngAfterContentChecked(){this.changeDetector.detectChanges()}getStep(n){return this.tuiStepComponents.toArray()[n]}setStep(n){this.currentStep=n,this.stepComponents.toArray().forEach((r,o)=>r.visible=n===o)}setNextStep(){this.setStepComplete(this.currentStep),this.setStep(this.currentStep+1)}setPrevStep(){this.setStep(this.currentStep-1)}setStepComplete(n){this.getStep(n).state="pass",this.getStep(n).icon="tuiIconCheckLarge"}}return e.\u0275fac=function(n){return new(n||e)(i.\u0275\u0275directiveInject(i.ChangeDetectorRef))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-registration-stepper"]],contentQueries:function(n,r,o){if(1&n&&i.\u0275\u0275contentQuery(o,Ur,4),2&n){let u;i.\u0275\u0275queryRefresh(u=i.\u0275\u0275loadQuery())&&(r.stepComponents=u)}},viewQuery:function(n,r){if(1&n&&i.\u0275\u0275viewQuery(Ce,5),2&n){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.tuiStepComponents=o)}},inputs:{steps:"steps"},ngContentSelectors:Ke,decls:3,vars:2,consts:[[3,"activeItemIndex","activeItemIndexChange"],["tuiStep","",3,"disabled",4,"ngFor","ngForOf"],["tuiStep","",3,"disabled"],["headerStep",""]],template:function(n,r){1&n&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275elementStart(0,"tui-stepper",0),i.\u0275\u0275listener("activeItemIndexChange",function(u){return r.currentStep=u}),i.\u0275\u0275template(1,We,3,2,"button",1),i.\u0275\u0275elementEnd(),i.\u0275\u0275projection(2)),2&n&&(i.\u0275\u0275property("activeItemIndex",r.currentStep),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",r.steps))},directives:[B,O.sg,z],styles:[""],changeDetection:0}),e})();var Nt=f(96063),Ht=f(67795);const mn=["stepper"],On=function(e){return["/course",e]};function gn(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",3),i.\u0275\u0275text(2," You are already registered in this course "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",4),i.\u0275\u0275elementStart(4,"a",5),i.\u0275\u0275text(5," Open Course "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(4),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(1,On,n.courseId))}}function Qn(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",10),i.\u0275\u0275elementStart(2,"tui-input",21),i.\u0275\u0275text(3," Student Number\xa0"),i.\u0275\u0275element(4,"span",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(5,"tui-field-error",22),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiTextfieldCleaner",!0))}function Tr(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",10),i.\u0275\u0275elementStart(2,"tui-input",23),i.\u0275\u0275text(3," Please confirm that this is your name.\xa0"),i.\u0275\u0275element(4,"span",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(5,"tui-field-error",24),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiTextfieldCleaner",!0)("readOnly",!0))}function yi(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"span"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const n=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Attempts Remaining: ",n.attemptsRemaining," ")}}function jn(e,t){1&e&&(i.\u0275\u0275elementStart(0,"span"),i.\u0275\u0275text(1," You don't have any attempts remaining! Contact your instructor. "),i.\u0275\u0275elementEnd())}function ar(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-notification",25),i.\u0275\u0275template(1,yi,2,1,"span",2),i.\u0275\u0275template(2,jn,2,0,"span",2),i.\u0275\u0275elementEnd()),2&e){const n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.attemptsRemaining>=1),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.attemptsRemaining<1)}}const rr=function(){return["Enter Name","Confirm Identity","Verification","Registered"]};function cr(e,t){if(1&e){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",6),i.\u0275\u0275text(2," Before completing registration, make sure you are also registered in the same class on Canvas "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"app-course-registration-stepper",7,8),i.\u0275\u0275elementStart(5,"app-course-registration-step"),i.\u0275\u0275elementStart(6,"form",9),i.\u0275\u0275listener("ngSubmit",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onNameFormSubmit()}),i.\u0275\u0275elementStart(7,"div",10),i.\u0275\u0275elementStart(8,"tui-input",11),i.\u0275\u0275text(9," Enter your full name as it appears on Canvas\xa0"),i.\u0275\u0275element(10,"span",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(11,"tui-field-error",13),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(12,"div",4),i.\u0275\u0275elementStart(13,"button",14),i.\u0275\u0275text(14," Prev "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(15,"button",15),i.\u0275\u0275text(16," Next "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"app-course-registration-step"),i.\u0275\u0275elementStart(18,"form",9),i.\u0275\u0275listener("ngSubmit",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onConfirmationFormSubmit()}),i.\u0275\u0275template(19,Qn,6,1,"ng-container",2),i.\u0275\u0275template(20,Tr,6,2,"ng-container",2),i.\u0275\u0275elementStart(21,"div",4),i.\u0275\u0275elementStart(22,"button",16),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275reference(4).setPrevStep()}),i.\u0275\u0275text(23,"Prev "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(24,"button",15),i.\u0275\u0275text(25," Next "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(26,"app-course-registration-step"),i.\u0275\u0275elementStart(27,"form",9),i.\u0275\u0275listener("ngSubmit",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onVerificationFormSubmit()}),i.\u0275\u0275elementStart(28,"div",10),i.\u0275\u0275elementStart(29,"tui-input",17),i.\u0275\u0275text(30," Verification Code\xa0"),i.\u0275\u0275element(31,"span",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(32,"tui-field-error",18),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(33,"div",19),i.\u0275\u0275template(34,ar,3,2,"tui-notification",20),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(35,"div",4),i.\u0275\u0275elementStart(36,"button",14),i.\u0275\u0275text(37," Prev "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(38,"button",15),i.\u0275\u0275text(39," Next "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(40,"app-course-registration-step"),i.\u0275\u0275elementStart(41,"p",10),i.\u0275\u0275text(42,"Registration Complete."),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(43,"div",4),i.\u0275\u0275elementStart(44,"button",14),i.\u0275\u0275text(45," Prev "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(46,"a",5),i.\u0275\u0275text(47," Open Course "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(3),i.\u0275\u0275property("steps",i.\u0275\u0275pureFunction0(17,rr)),i.\u0275\u0275advance(3),i.\u0275\u0275property("formGroup",n.nameForm),i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiTextfieldCleaner",!0),i.\u0275\u0275advance(5),i.\u0275\u0275property("disabled",!0),i.\u0275\u0275advance(2),i.\u0275\u0275property("showLoader",n.loadingContent),i.\u0275\u0275advance(3),i.\u0275\u0275property("formGroup",n.needsStudentNumber?n.studentNumberForm:n.confirmNameForm),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.needsStudentNumber),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!n.needsStudentNumber),i.\u0275\u0275advance(4),i.\u0275\u0275property("showLoader",n.loadingContent),i.\u0275\u0275advance(3),i.\u0275\u0275property("formGroup",n.verifyForm),i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiTextfieldCleaner",!0)("textMask",n.verificationNumberMask),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngIf",n.attemptsRemaining),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",!0),i.\u0275\u0275advance(2),i.\u0275\u0275property("showLoader",n.loadingContent),i.\u0275\u0275advance(6),i.\u0275\u0275property("disabled",!0),i.\u0275\u0275advance(2),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(18,On,n.courseId))}}let ai=(()=>{class e{constructor(n,r,o,u){this.route=n,this.courseService=r,this.changeDetector=o,this.notificationsService=u,this.verificationNumberMask={guide:!0,mask:[/\d/,/\d/]},this.courseId=this.route.snapshot.params.courseId,this.needsStudentNumber=!1,this.loadingContent=!1}ngOnInit(){this.nameForm=pt.createNameForm(),this.confirmNameForm=pt.createConfirmNameForm(),this.studentNumberForm=pt.createStudentNumberForm(),this.verifyForm=pt.createVerifyForm(),this.getRegistrationStatus(),this.getCourseName()}getCourseName(){this.courseService.getCourse(this.courseId).subscribe(n=>{this.courseName=n.name})}getRegistrationStatus(){this.courseService.getCourseRegistrationStatus(this.courseId).subscribe(n=>{n.message&&this.notificationsService.show(n.message,{status:"error"}).subscribe(),n.status===fe.m.REGISTERED?(this.notificationsService.show("You have already successfully registered in this course!",{status:"success"}).subscribe(),this.registered=!0):this.registered=!1})}onNameFormSubmit(){this.resetFormValues();const n=this.generateCourseRegistrationRequest();!n.name||(this.needsStudentNumber=!1,this.loadingContent=!0,this.registerAndUpdateStepper(n))}onConfirmationFormSubmit(){const n=this.generateCourseRegistrationRequest();!n.name&&!n.student_number||(this.loadingContent=!0,this.registerAndUpdateStepper(n))}onVerificationFormSubmit(){const n=this.generateCourseRegistrationRequest();!n.code||(this.loadingContent=!0,this.verifyRegistrationAndUpdateStepper(n))}registerAndUpdateStepper(n){this.courseService.register(this.courseId,n).subscribe(r=>{r.bad_request?this.sendErrorMessage():this.setStepperStatusFromRegistration(r),this.cleanUpLoadingContent()})}verifyRegistrationAndUpdateStepper(n){this.courseService.registerVerify(this.courseId,n).subscribe(r=>{r.bad_request?this.sendErrorMessage():this.setStepperStatusFromRegistration(r),this.cleanUpLoadingContent()})}cleanUpLoadingContent(){this.loadingContent=!1,this.changeDetector.detectChanges()}setStepperStatusFromRegistration(n){this.serverGuessedName=null==n?void 0:n.guessed_name,this.serverGuessedName&&this.confirmNameForm.get("confirmNameControl").setValue(null==n?void 0:n.guessed_name),this.attemptsRemaining=null==n?void 0:n.attempts_remaining,n.success?this.stepper.setNextStep():0===this.stepper.currentStep&&(this.needsStudentNumber=!0,this.stepper.setNextStep())}generateCourseRegistrationRequest(){return{name:this.nameForm.value.nameControl||null,confirmed_name:this.confirmNameForm.value.confirmNameControl||null,student_number:this.studentNumberForm.value.studentNumberControl||null,code:this.verifyForm.value.verifyControl||null}}sendErrorMessage(){this.notificationsService.show("Something went wrong. Check that your inputted values are accurate and try again.",{status:"error"}).subscribe()}resetFormValues(){this.serverGuessedName=null,this.confirmNameForm.reset(),this.studentNumberForm.reset(),this.verifyForm.reset()}}return e.\u0275fac=function(n){return new(n||e)(i.\u0275\u0275directiveInject(te.gz),i.\u0275\u0275directiveInject(ve.N),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(At.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-register"]],viewQuery:function(n,r){if(1&n&&i.\u0275\u0275viewQuery(mn,5),2&n){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.stepper=o.first)}},decls:5,vars:3,consts:[[1,"tui-container","tui-container_adaptive"],[1,"tui-text_h3","tui-space_vertical-10"],[4,"ngIf"],["status","success"],[1,"tui-form__buttons"],["tuiButton","","type","button","size","m",1,"tui-form__button",3,"routerLink"],["status","info",1,"tui-space_bottom-7"],[3,"steps"],["stepper",""],[3,"formGroup","ngSubmit"],[1,"tui-space_top-5"],["formControlName","nameControl","aria-label","Full Name on Canvas",3,"tuiTextfieldCleaner"],[1,"tui-required"],["formControlName","nameControl"],["tuiButton","","appearance","secondary","type","button","size","m","aria-label","Previous",1,"tui-form__button",3,"disabled"],["tuiButton","","type","submit","size","m","aria-label","Next",1,"tui-form__button",3,"showLoader"],["tuiButton","","appearance","secondary","type","button","size","m","aria-label","Previous",1,"tui-form__button",3,"click"],["formControlName","verifyControl","aria-label","Verification Code",3,"tuiTextfieldCleaner","textMask"],["formControlName","verifyControl"],[1,"tui-space_top-3"],["status","error",4,"ngIf"],["formControlName","studentNumberControl","aria-label","Student Number",3,"tuiTextfieldCleaner"],["formControlName","studentNumberControl"],["formControlName","confirmNameControl","aria-label","Confirm Name",3,"tuiTextfieldCleaner","readOnly"],["formControlName","confirmNameControl"],["status","error"]],template:function(n,r){1&n&&(i.\u0275\u0275elementStart(0,"section",0),i.\u0275\u0275elementStart(1,"h1",1),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,gn,6,3,"ng-container",2),i.\u0275\u0275template(4,cr,48,20,"ng-container",2),i.\u0275\u0275elementEnd()),2&n&&(i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1("Registration for ",r.courseName,""),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.registered),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!r.registered))},directives:[O.O5,Xt.Ls,$t.v0,te.yS,bt,Ur,ne.\u0275NgNoValidate,ne.NgControlStatusGroup,ne.FormGroupDirective,he.K3,he.wU,ne.NgControlStatus,ne.FormControlName,xe.be,Nt.y,Ht.hd],styles:[""]}),e})();var ir=f(89627),sr=f(37080),Sn=f(58259),Qa=f(59695),mo=f.n(Qa),Qo=f(85510),Xi=f.n(Qo),Wt=f(17489);const{round:Mo,floor:Ta,PI:yo}=Math,xo={linear:function(e,t,n){return(n-e[0])/(e[1]-e[0])*(t[1]-t[0])+t[0]||0}},zr=function(e){return e%360+(e<0?360:0)},Mi=function(e,t){return t*Mo(e/t)},xi=function(e){return 180*e/yo%360},Lr=function(e,t){return(e=(t=t||!1)?e:e%360)*yo/180},Ki=function(e,t){if(void 0===t)t=void 0===e?1:e,e=0;else if(t<e){const n=e;e=t,t=n}return Ta(Math.random()*(t-e+1)+e)},{cos:Er,sin:ko,atan2:Ea}=Math,si=function(e,t){var n=Lr(e.y),r=Lr(t.y),c=Lr(t.x-e.x),v=ko(c)*Er(r),m=Er(n)*ko(r)-ko(n)*Er(r)*Er(c),b=xi(Ea(v,m))-22.5;return b<0&&(b+=360),["NE","E","SE","S","SW","W","NW","N"][b=parseInt(b/45)]},Lo=function(e,t){var n=e.x,r=e.y;return(n-=t.x)*n+(r-=t.y)*r},Oo=function(e,t){return Math.sqrt(Lo(e,t))},Jt={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:Ro,cos:qo,sin:ki,sqrt:Pa,min:Aa,max:Ia,atan2:qa,round:es,pow:Ji,PI:Zi}=Math,ye=function(e,t){if(!(this instanceof ye))return new ye(e,t);if("string"==typeof e){var n=e.split(-1===e.indexOf("@")?" ":"@");e=parseFloat(n[0]),t=parseFloat(n[1])}else Object(e)===e&&(t=e.y,e=e.x);this.x=void 0===e?0:e,this.y=void 0===t?0:t};ye.fromPolar=function(e,t,n){n=new ye(n);var r=Ro(e*qo(t)),o=Ro(e*ki(t)),u=zr(xi(t));return u<90?o=-o:u<180?(r=-r,o=-o):u<270&&(r=-r),new ye(n.x+r,n.y+o)},ye.random=function(e,t,n,r){return new ye(Ki(e,t),Ki(n,r))},ye.prototype={type:Jt.Point,chooseClosest:function(e){var t=e.length;if(1===t)return new ye(e[0]);for(var n=null,r=1/0,o=0;o<t;o++){var u=new ye(e[o]),c=this.squaredDistance(u);c<r&&(n=u,r=c)}return n},adhereToRect:function(e){return e.containsPoint(this)||(this.x=Aa(Ia(this.x,e.x),e.x+e.width),this.y=Aa(Ia(this.y,e.y),e.y+e.height)),this},angleBetween:function(e,t){var n=this.equals(e)||this.equals(t)?NaN:this.theta(t)-this.theta(e);return n<0&&(n+=360),n},bearing:function(e){return si(this,e)},changeInAngle:function(e,t,n){return this.clone().offset(-e,-t).theta(n)-this.theta(n)},clone:function(){return new ye(this)},cross:function(e,t){return e&&t?(t.x-this.x)*(e.y-this.y)-(t.y-this.y)*(e.x-this.x):NaN},difference:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),new ye(this.x-(e||0),this.y-(t||0))},distance:function(e){return Oo(this,e)},dot:function(e){return e?this.x*e.x+this.y*e.y:NaN},equals:function(e){return!!e&&this.x===e.x&&this.y===e.y},lerp:function(e,t){return new ye((1-t)*this.x+t*e.x,(1-t)*this.y+t*e.y)},magnitude:function(){return Pa(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(e){return Ro(e.x-this.x)+Ro(e.y-this.y)},move:function(e,t){var n=Lr(new ye(e).theta(this));return this.offset(qo(n)*t,-ki(n)*t)},normalize:function(e){var t=(e||1)/this.magnitude();return this.scale(t,t)},offset:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),this.x+=e||0,this.y+=t||0,this},reflection:function(e){return new ye(e).move(this,this.distance(e))},rotate:function(e,t){if(0===t)return this;e=e||new ye(0,0),t=Lr(zr(-t));var n=qo(t),r=ki(t),u=r*(this.x-e.x)+n*(this.y-e.y)+e.y;return this.x=n*(this.x-e.x)-r*(this.y-e.y)+e.x,this.y=u,this},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=Ji(10,e)}return this.x=es(this.x*t)/t,this.y=es(this.y*t)/t,this},scale:function(e,t,n){return n=n&&new ye(n)||new ye(0,0),this.x=n.x+e*(this.x-n.x),this.y=n.y+t*(this.y-n.y),this},snapToGrid:function(e,t){return this.x=Mi(this.x,e),this.y=Mi(this.y,t||e),this},squaredDistance:function(e){return Lo(this,e)},theta:function(e){e=new ye(e);var r=qa(-(e.y-this.y),e.x-this.x);return r<0&&(r=2*Zi+r),180*r/Zi},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(e){e=e&&new ye(e)||new ye(0,0);var t=this.x,n=this.y;return this.x=Pa((t-e.x)*(t-e.x)+(n-e.y)*(n-e.y)),this.y=Lr(e.theta(new ye(t,n))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),this.x=e||0,this.y=t||0,this},vectorAngle:function(e){return new ye(0,0).angleBetween(this,e)}},ye.prototype.translate=ye.prototype.offset;const Pr=ye,{max:bi,min:ea}=Math,gt=function(e,t){return this instanceof gt?e instanceof gt?new gt(e.start,e.end):(this.start=new ye(e),void(this.end=new ye(t))):new gt(e,t)};gt.prototype={type:Jt.Line,angle:function(){var e=new ye(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)},bbox:function(){var e=ea(this.start.x,this.end.x),t=ea(this.start.y,this.end.y),n=bi(this.start.x,this.end.x),r=bi(this.start.y,this.end.y);return new ct(e,t,n-e,r-t)},bearing:function(){return si(this.start,this.end)},clone:function(){return new gt(this.start,this.end)},closestPoint:function(e){return this.pointAt(this.closestPointNormalizedLength(e))},closestPointLength:function(e){return this.closestPointNormalizedLength(e)*this.length()},closestPointNormalizedLength:function(e){var t=this.vector().dot(new gt(this.start,e).vector()),n=ea(1,bi(0,t/this.squaredLength()));return n!=n?0:n},closestPointTangent:function(e){return this.tangentAt(this.closestPointNormalizedLength(e))},containsPoint:function(e){var t=this.start,n=this.end;if(0!==t.cross(e,n))return!1;var r=this.length();return!(new gt(t,e).length()>r||new gt(e,n).length()>r)},divideAt:function(e){var t=this.pointAt(e);return[new gt(this.start,t),new gt(t,this.end)]},divideAtLength:function(e){var t=this.pointAtLength(e);return[new gt(this.start,t),new gt(t,this.end)]},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y},intersect:function(e,t){if(e&&e.intersectionWithLine){var n=e.intersectionWithLine(this,t);return n&&e instanceof gt&&(n=n[0]),n}return null},intersectionWithLine:function(e){var t=new ye(this.end.x-this.start.x,this.end.y-this.start.y),n=new ye(e.end.x-e.start.x,e.end.y-e.start.y),r=t.x*n.y-t.y*n.x,o=new ye(e.start.x-this.start.x,e.start.y-this.start.y),u=o.x*n.y-o.y*n.x,c=o.x*t.y-o.y*t.x;if(0===r||u*r<0||c*r<0)return null;if(r>0){if(u>r||c>r)return null}else if(u<r||c<r)return null;return[new ye(this.start.x+u*t.x/r,this.start.y+u*t.y/r)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return Oo(this.start,this.end)},midpoint:function(){return new ye((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(e){const t=this.clone();if(!this.isDifferentiable())return t;const{start:n,end:r}=t,o=n.clone().rotate(r,270),u=r.clone().rotate(n,90);return n.move(u,e),r.move(o,e),t},pointAt:function(e){var t=this.start,n=this.end;return e<=0?t.clone():e>=1?n.clone():t.lerp(n,e)},pointAtLength:function(e){var t=this.start,n=this.end,r=!0;e<0&&(r=!1,e=-e);var o=this.length();return e>=o?r?n.clone():t.clone():this.pointAt((r?e:o-e)/o)},pointOffset:function(e){e=new ye(e);var t=this.start,n=this.end;return((n.x-t.x)*(e.y-t.y)-(n.y-t.y)*(e.x-t.x))/this.length()},rotate:function(e,t){return this.start.rotate(e,t),this.end.rotate(e,t),this},round:function(e){return this.start.round(e),this.end.round(e),this},scale:function(e,t,n){return this.start.scale(e,t,n),this.end.scale(e,t,n),this},setLength:function(e){var t=this.length();if(!t)return this;var n=e/t;return this.scale(n,n,this.start)},squaredLength:function(){return Lo(this.start,this.end)},tangentAt:function(e){if(!this.isDifferentiable())return null;var t=this.start,n=this.end,r=this.pointAt(e),o=new gt(t,n);return o.translate(r.x-t.x,r.y-t.y),o},tangentAtLength:function(e){if(!this.isDifferentiable())return null;var t=this.start,n=this.end,r=this.pointAtLength(e),o=new gt(t,n);return o.translate(r.x-t.x,r.y-t.y),o},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(e,t){return this.start.translate(e,t),this.end.translate(e,t),this},vector:function(){return new ye(this.end.x-this.start.x,this.end.y-this.start.y)}},gt.prototype.intersection=gt.prototype.intersect;const Li=gt,{sqrt:br,round:Ci,pow:ta}=Math,Or=function(e,t,n){return this instanceof Or?e instanceof Or?new Or(new ye(e.x,e.y),e.a,e.b):(e=new ye(e),this.x=e.x,this.y=e.y,this.a=t,void(this.b=n)):new Or(e,t,n)};Or.fromRect=function(e){return e=new ct(e),new Or(e.center(),e.width/2,e.height/2)},Or.prototype={type:Jt.Ellipse,bbox:function(){return new ct(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new ye(this.x,this.y)},clone:function(){return new Or(this)},containsPoint:function(e){return this.normalizedDistance(e)<=1},equals:function(e){return!!e&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b},inflate:function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.a+=2*e,this.b+=2*t,this},intersectionWithLine:function(e){var t=[],n=e.start,r=e.end,o=this.a,u=this.b,c=e.vector(),v=n.difference(new ye(this)),m=new ye(c.x/(o*o),c.y/(u*u)),T=new ye(v.x/(o*o),v.y/(u*u)),I=c.dot(m),b=c.dot(T),ee=b*b-I*(v.dot(T)-1);if(ee<0)return null;if(ee>0){var oe=br(ee),Te=(-b-oe)/I,Pe=(-b+oe)/I;if((Te<0||1<Te)&&(Pe<0||1<Pe))return null;0<=Te&&Te<=1&&t.push(n.lerp(r,Te)),0<=Pe&&Pe<=1&&t.push(n.lerp(r,Pe))}else{var De=-b/I;if(!(0<=De&&De<=1))return null;t.push(n.lerp(r,De))}return t},intersectionWithLineFromCenterToPoint:function(e,t){e=new ye(e),t&&e.rotate(new ye(this.x,this.y),t);var o,n=e.x-this.x,r=e.y-this.y;if(0===n)return o=this.bbox().pointNearestToPoint(e),t?o.rotate(new ye(this.x,this.y),-t):o;var u=r/n,T=br(1/(1/(this.a*this.a)+u*u/(this.b*this.b)));return o=new ye(this.x+(T=n<0?-T:T),this.y+u*T),t?o.rotate(new ye(this.x,this.y),-t):o},normalizedDistance:function(e){var t=e.x,n=e.y,r=this.a,o=this.b,u=this.x,c=this.y;return(t-u)*(t-u)/(r*r)+(n-c)*(n-c)/(o*o)},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=ta(10,e)}return this.x=Ci(this.x*t)/t,this.y=Ci(this.y*t)/t,this.a=Ci(this.a*t)/t,this.b=Ci(this.b*t)/t,this},tangentTheta:function(e){var b,G,n=e.x,r=e.y,o=this.a,u=this.b,c=this.bbox().center(),v=c.x,m=c.y;return n>c.x+o/2||n<c.x-o/2?G=o*o/(n-v)-o*o*(r-m)*((b=n>c.x?r-30:r+30)-m)/(u*u*(n-v))+v:b=u*u/(r-m)-u*u*(n-v)*((G=r>c.y?n+30:n-30)-v)/(o*o*(r-m))+m,new ye(G,b).theta(e)},toString:function(){return new ye(this.x,this.y).toString()+" "+this.a+" "+this.b}};const ts=Or,{abs:Qi,cos:na,sin:bo,min:Oi,max:Ma,round:No,pow:Rr}=Math,ct=function(e,t,n,r){if(!(this instanceof ct))return new ct(e,t,n,r);Object(e)===e&&(t=e.y,n=e.width,r=e.height,e=e.x),this.x=void 0===e?0:e,this.y=void 0===t?0:t,this.width=void 0===n?0:n,this.height=void 0===r?0:r};ct.fromEllipse=function(e){return e=new Or(e),new ct(e.x-e.a,e.y-e.b,2*e.a,2*e.b)},ct.fromPointUnion=function(...e){if(0===e.length)return null;const t=new ye;let n,r,o,u;n=r=1/0,o=u=-1/0;for(let c=0;c<e.length;c++){t.update(e[c]);const v=t.x,m=t.y;v<n&&(n=v),v>o&&(o=v),m<r&&(r=m),m>u&&(u=m)}return new ct(n,r,o-n,u-r)},ct.fromRectUnion=function(...e){if(0===e.length)return null;const t=new ct;let n,r,o,u;n=r=1/0,o=u=-1/0;for(let c=0;c<e.length;c++){t.update(e[c]);const v=t.x,m=t.y,T=v+t.width,I=m+t.height;v<n&&(n=v),T>o&&(o=T),m<r&&(r=m),I>u&&(u=I)}return new ct(n,r,o-n,u-r)},ct.prototype={type:Jt.Rect,bbox:function(e){return this.clone().rotateAroundCenter(e)},rotateAroundCenter:function(e){if(!e)return this;const{width:t,height:n}=this,r=Lr(e),o=Qi(bo(r)),u=Qi(na(r)),c=t*u+n*o,v=t*o+n*u;return this.x+=(t-c)/2,this.y+=(n-v)/2,this.width=c,this.height=v,this},bottomLeft:function(){return new ye(this.x,this.y+this.height)},bottomLine:function(){return new gt(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new ye(this.x+this.width/2,this.y+this.height)},center:function(){return new ye(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new ct(this)},containsPoint:function(e){return(e=new ye(e)).x>=this.x&&e.x<=this.x+this.width&&e.y>=this.y&&e.y<=this.y+this.height},containsRect:function(e){var t=new ct(this).normalize(),n=new ct(e).normalize(),r=t.width,o=t.height,u=n.width,c=n.height;if(!(r&&o&&u&&c))return!1;var v=t.x,m=t.y,T=n.x,I=n.y;return u+=T,r+=v,c+=I,o+=m,v<=T&&u<=r&&m<=I&&c<=o},corner:function(){return new ye(this.x+this.width,this.y+this.height)},equals:function(e){var t=new ct(this).normalize(),n=new ct(e).normalize();return t.x===n.x&&t.y===n.y&&t.width===n.width&&t.height===n.height},inflate:function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this},intersect:function(e){var t=this.origin(),n=this.corner(),r=e.origin(),o=e.corner();if(o.x<=t.x||o.y<=t.y||r.x>=n.x||r.y>=n.y)return null;var u=Ma(t.x,r.x),c=Ma(t.y,r.y);return new ct(u,c,Oi(n.x,o.x)-u,Oi(n.y,o.y)-c)},intersectionWithLine:function(e){var u,c,t=this,n=[t.topLine(),t.rightLine(),t.bottomLine(),t.leftLine()],r=[],o=[],v=n.length;for(c=0;c<v;c++)null!==(u=e.intersect(n[c]))&&o.indexOf(u.toString())<0&&(r.push(u),o.push(u.toString()));return r.length>0?r:null},intersectionWithLineFromCenterToPoint:function(e,t){e=new ye(e);var r,n=new ye(this.x+this.width/2,this.y+this.height/2);t&&e.rotate(n,t);for(var o=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],u=new gt(n,e),c=o.length-1;c>=0;--c){var v=o[c].intersection(u);if(null!==v){r=v;break}}return r&&t&&r.rotate(n,-t),r},leftLine:function(){return new gt(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new ye(this.x,this.y+this.height/2)},maxRectScaleToFit:function(e,t){e=new ct(e),t||(t=e.center());var n,r,o,u,c,v,m,T,I=t.x,b=t.y;n=r=o=u=c=v=m=T=1/0;var G=e.topLeft();G.x<I&&(n=(this.x-I)/(G.x-I)),G.y<b&&(c=(this.y-b)/(G.y-b));var ee=e.bottomRight();ee.x>I&&(r=(this.x+this.width-I)/(ee.x-I)),ee.y>b&&(v=(this.y+this.height-b)/(ee.y-b));var oe=e.topRight();oe.x>I&&(o=(this.x+this.width-I)/(oe.x-I)),oe.y<b&&(m=(this.y-b)/(oe.y-b));var Te=e.bottomLeft();return Te.x<I&&(u=(this.x-I)/(Te.x-I)),Te.y>b&&(T=(this.y+this.height-b)/(Te.y-b)),{sx:Oi(n,r,o,u),sy:Oi(c,v,m,T)}},maxRectUniformScaleToFit:function(e,t){var n=this.maxRectScaleToFit(e,t);return Oi(n.sx,n.sy)},moveAndExpand:function(e){return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this},normalize:function(){var e=this.x,t=this.y,n=this.width,r=this.height;return this.width<0&&(e=this.x+this.width,n=-this.width),this.height<0&&(t=this.y+this.height,r=-this.height),this.x=e,this.y=t,this.width=n,this.height=r,this},offset:function(e,t){return ye.prototype.offset.call(this,e,t)},origin:function(){return new ye(this.x,this.y)},pointNearestToPoint:function(e){if(e=new ye(e),this.containsPoint(e))switch(this.sideNearestToPoint(e)){case"right":return new ye(this.x+this.width,e.y);case"left":return new ye(this.x,e.y);case"bottom":return new ye(e.x,this.y+this.height);case"top":return new ye(e.x,this.y)}return e.adhereToRect(this)},rightLine:function(){return new gt(this.topRight(),this.bottomRight())},rightMiddle:function(){return new ye(this.x+this.width,this.y+this.height/2)},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=Rr(10,e)}return this.x=No(this.x*t)/t,this.y=No(this.y*t)/t,this.width=No(this.width*t)/t,this.height=No(this.height*t)/t,this},scale:function(e,t,n){return n=this.origin().scale(e,t,n),this.x=n.x,this.y=n.y,this.width*=e,this.height*=t,this},sideNearestToPoint:function(e){e=new ye(e);var n=this.x+this.width-e.x,r=e.y-this.y,u=e.x-this.x,c="left";return n<u&&(u=n,c="right"),r<u&&(u=r,c="top"),this.y+this.height-e.y<u&&(c="bottom"),c},snapToGrid:function(e,t){var n=this.origin().snapToGrid(e,t),r=this.corner().snapToGrid(e,t);return this.x=n.x,this.y=n.y,this.width=r.x-n.x,this.height=r.y-n.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new gt(this.topLeft(),this.topRight())},topMiddle:function(){return new ye(this.x+this.width/2,this.y)},topRight:function(){return new ye(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(e){return ct.fromRectUnion(this,e)},update:function(e,t,n,r){return Object(e)===e&&(t=e.y,n=e.width,r=e.height,e=e.x),this.x=e||0,this.y=t||0,this.width=n||0,this.height=r||0,this}},ct.prototype.bottomRight=ct.prototype.corner,ct.prototype.topLeft=ct.prototype.origin,ct.prototype.translate=ct.prototype.offset;const ui=ct;function ra(e){if(""===(e=e.trim()))return[];const t=[],n=e.split(/\s*,\s*|\s+/),r=n.length;for(let o=0;o<r;o+=2)t.push({x:+n[o],y:+n[o+1]});return t}function Do(e){const t=e.length;if(0===t)return[];const n=[];for(let r=0;r<t;r++){const o=e[r].clone();n.push(o)}return n}function li(e){const{abs:t}=Math;var n,r,u,o=e.length;if(0===o)return[];for(n=0;n<o;n++)(void 0===u||e[n].y<u.y||e[n].y===u.y&&e[n].x>u.x)&&(u=e[n]);var c=[];for(n=0;n<o;n++){var v=u.theta(e[n]);0===v&&(v=360),c.push([e[n],n,v])}c.sort(function(dt,yt){var xt=dt[2]-yt[2];return 0===xt&&(xt=yt[1]-dt[1]),xt}),c.length>2&&c.unshift(c[c.length-1]);for(var G,ee,oe,Te,Pe,De,I={},b=[];0!==c.length;)if(ee=(G=c.pop())[0],!I.hasOwnProperty(G[0]+"@@"+G[1]))for(var Ne=!1;!Ne;)if(b.length<2)b.push(G),Ne=!0;else{Te=(oe=b.pop())[0];var L=(De=(Pe=b.pop())[0]).cross(Te,ee);if(L<0)b.push(Pe),b.push(oe),b.push(G),Ne=!0;else if(0===L){var K=Te.angleBetween(De,ee);t(K-180)<1e-10||Te.equals(ee)||De.equals(Te)?(I[oe[0]+"@@"+oe[1]]=Te,b.push(Pe)):t((K+1)%360-1)<1e-10&&(b.push(Pe),c.push(oe))}else I[oe[0]+"@@"+oe[1]]=Te,b.push(Pe)}b.length>2&&b.pop();var ie,pe=-1;for(r=b.length,n=0;n<r;n++){var Me=b[n][1];(void 0===ie||Me<ie)&&(ie=Me,pe=n)}var Oe=[];if(pe>0){var Ue=b.slice(pe),st=b.slice(0,pe);Oe=Ue.concat(st)}else Oe=b;var tt=[];for(r=Oe.length,n=0;n<r;n++)tt.push(Oe[n][0]);return tt}const fn=function(e){return this instanceof fn?"string"==typeof e?new fn.parse(e):void(this.points=Array.isArray(e)?e.map(ye):[]):new fn(e)};fn.parse=function(e){return new fn(ra(e))},fn.fromRect=function(e){return new fn([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft(),e.topLeft()])},fn.prototype={type:Jt.Polyline,bbox:function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,o=this.points,u=o.length;if(0===u)return null;for(var c=0;c<u;c++){var v=o[c],m=v.x,T=v.y;m<e&&(e=m),m>t&&(t=m),T<n&&(n=T),T>r&&(r=T)}return new ct(e,n,t-e,r-n)},clone:function(){return new fn(Do(this.points))},closestPoint:function(e){var t=this.closestPointLength(e);return this.pointAtLength(t)},closestPointLength:function(e){var t=this.lengthPoints(),n=t.length;if(0===n||1===n)return 0;for(var r,o=1/0,u=0,c=n-1,v=0;v<c;v++){var m=new gt(t[v],t[v+1]),T=m.length(),I=m.closestPointNormalizedLength(e),G=m.pointAt(I).squaredDistance(e);G<o&&(o=G,r=u+I*T),u+=T}return r},closestPointNormalizedLength:function(e){var t=this.closestPointLength(e);if(0===t)return 0;var n=this.length();return 0===n?0:t/n},closestPointTangent:function(e){var t=this.closestPointLength(e);return this.tangentAtLength(t)},containsPoint:function(e){var t=this.points,n=t.length;if(0===n)return!1;for(var r=e.x,o=e.y,u=n-1,c=0,v=0,m=new gt,T=new gt,I=new ye;c<n;c++){var b=t[u],G=t[c];if(e.equals(b)||(m.start=b,m.end=G,m.containsPoint(e)))return!0;if(o<=b.y&&o>G.y||o>b.y&&o<=G.y){var ee=b.x-r>G.x-r?b.x-r:G.x-r;ee>=0&&(I.x=r+ee,I.y=o,T.start=e,T.end=I,m.intersect(T)&&v++)}u=c}return v%2==1},close:function(){const{start:e,end:t,points:n}=this;return e&&t&&!e.equals(t)&&n.push(e.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new fn(li(this.points))},equals:function(e){if(!e)return!1;var t=this.points,r=t.length;if(e.points.length!==r)return!1;for(var o=0;o<r;o++)if(!t[o].equals(e.points[o]))return!1;return!0},intersectionWithLine:function(e){for(var t=new gt(e),n=[],r=this.lengthPoints(),o=new gt,u=0,c=r.length-1;u<c;u++){o.start=r[u],o.end=r[u+1];var v=t.intersectionWithLine(o);v&&n.push(v[0])}return n.length>0?n:null},isDifferentiable:function(){var e=this.points,t=e.length;if(0===t)return!1;for(var n=new gt,r=t-1,o=0;o<r;o++)if(n.start=e[o],n.end=e[o+1],n.isDifferentiable())return!0;return!1},length:function(){var e=this.lengthPoints(),t=e.length;if(0===t)return 0;for(var n=0,r=t-1,o=0;o<r;o++)n+=e[o].distance(e[o+1]);return n},pointAt:function(e){var t=this.lengthPoints(),n=t.length;if(0===n)return null;if(1===n||e<=0)return t[0].clone();if(e>=1)return t[n-1].clone();var r=this.length();return this.pointAtLength(r*e)},pointAtLength:function(e){var t=this.lengthPoints(),n=t.length;if(0===n)return null;if(1===n)return t[0].clone();var r=!0;e<0&&(r=!1,e=-e);for(var o=0,u=n-1,c=0;c<u;c++){var v=r?c:u-1-c,m=t[v],T=t[v+1],I=new gt(m,T),b=m.distance(T);if(e<=o+b)return I.pointAtLength((r?1:-1)*(e-o));o+=b}return(r?t[n-1]:t[0]).clone()},round:function(e){for(var t=this.points,n=t.length,r=0;r<n;r++)t[r].round(e);return this},scale:function(e,t,n){for(var r=this.points,o=r.length,u=0;u<o;u++)r[u].scale(e,t,n);return this},simplify:function(e={}){const t=this.points;if(t.length<3)return this;const n=e.threshold||0;let r=0;for(;t[r+2];){const u=r+1,m=t[u];new gt(t[r],t[r+2]).closestPoint(m).distance(m)<=n?t.splice(u,1):r+=1}return this},tangentAt:function(e){var n=this.lengthPoints().length;if(0===n||1===n)return null;e<0&&(e=0),e>1&&(e=1);var r=this.length();return this.tangentAtLength(r*e)},tangentAtLength:function(e){var t=this.lengthPoints(),n=t.length;if(0===n||1===n)return null;var r=!0;e<0&&(r=!1,e=-e);for(var o,u=0,c=n-1,v=0;v<c;v++){var m=r?v:c-1-v,T=t[m],I=t[m+1],b=new gt(T,I),G=T.distance(I);if(b.isDifferentiable()){if(e<=u+G)return b.tangentAtLength((r?1:-1)*(e-u));o=b}u+=G}return o?o.tangentAt(r?1:0):null},toString:function(){return this.points+""},translate:function(e,t){for(var n=this.points,r=n.length,o=0;o<r;o++)n[o].translate(e,t);return this},serialize:function(){var e=this.points,t=e.length;if(0===t)return"";for(var n="",r=0;r<t;r++){var o=e[r];n+=o.x+","+o.y+" "}return n.trim()}},Object.defineProperty(fn.prototype,"start",{configurable:!0,enumerable:!0,get:function(){return 0===this.points.length?null:this.points[0]}}),Object.defineProperty(fn.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.points.length;return 0===t?null:this.points[t-1]}});const{abs:Vi,sqrt:ia,min:Xr,max:Bi,pow:_i}=Math,yn=function(e,t,n,r){return this instanceof yn?e instanceof yn?new yn(e.start,e.controlPoint1,e.controlPoint2,e.end):(this.start=new ye(e),this.controlPoint1=new ye(t),this.controlPoint2=new ye(n),void(this.end=new ye(r))):new yn(e,t,n,r)};function qi(e){var t,n,r=[];for(n=arguments.length,t=1;t<n;t++)r.push(arguments[t]);if(!e)throw new Error("Missing a parent object.");var o=Object.create(e);for(n=r.length,t=0;t<n;t++){var c,v,u=r[t];for(v in u)u.hasOwnProperty(v)&&(delete o[v],c=Object.getOwnPropertyDescriptor(u,v),Object.defineProperty(o,v,c))}return o}yn.throughPoints=function(){function t(n){var r=n.length,o=[],u=[],c=2;o[0]=n[0]/c;for(var v=1;v<r;v++)u[v]=1/c,o[v]=(n[v]-o[v-1])/(c=(v<r-1?4:3.5)-u[v]);for(v=1;v<r;v++)o[r-v-1]-=u[r-v]*o[r-v];return o}return function(n){if(!n||Array.isArray(n)&&n.length<2)throw new Error("At least 2 points are required");for(var r=function e(n){var c,r=[],o=[],u=n.length-1;if(1==u)return r[0]=new ye((2*n[0].x+n[1].x)/3,(2*n[0].y+n[1].y)/3),o[0]=new ye(2*r[0].x-n[0].x,2*r[0].y-n[0].y),[r,o];var v=[];for(c=1;c<u-1;c++)v[c]=4*n[c].x+2*n[c+1].x;v[0]=n[0].x+2*n[1].x,v[u-1]=(8*n[u-1].x+n[u].x)/2;var m=t(v);for(c=1;c<u-1;++c)v[c]=4*n[c].y+2*n[c+1].y;v[0]=n[0].y+2*n[1].y,v[u-1]=(8*n[u-1].y+n[u].y)/2;var T=t(v);for(c=0;c<u;c++)r.push(new ye(m[c],T[c])),o.push(c<u-1?new ye(2*n[c+1].x-m[c+1],2*n[c+1].y-T[c+1]):new ye((n[u].x+m[u-1])/2,(n[u].y+T[u-1])/2));return[r,o]}(n),o=[],u=r[0].length,c=0;c<u;c++){var v=new ye(r[0][c].x,r[0][c].y),m=new ye(r[1][c].x,r[1][c].y);o.push(new yn(n[c],v,m,n[c+1]))}return o}}(),yn.prototype={type:Jt.Curve,bbox:function(){for(var Te,Pe,De,Ne,L,U,K,ie,e=this.start,t=this.controlPoint1,n=this.controlPoint2,r=this.end,o=e.x,u=e.y,c=t.x,v=t.y,m=n.x,T=n.y,I=r.x,b=r.y,G=new Array,ee=new Array,oe=[new Array,new Array],pe=0;pe<2;++pe)if(0===pe?(Pe=6*o-12*c+6*m,Te=-3*o+9*c-9*m+3*I,De=3*c-3*o):(Pe=6*u-12*v+6*T,Te=-3*u+9*v-9*T+3*b,De=3*v-3*u),Vi(Te)<1e-12){if(Vi(Pe)<1e-12)continue;0<(Ne=-De/Pe)&&Ne<1&&ee.push(Ne)}else ie=ia(K=Pe*Pe-4*De*Te),!(K<0)&&(0<(L=(-Pe+ie)/(2*Te))&&L<1&&ee.push(L),0<(U=(-Pe-ie)/(2*Te))&&U<1&&ee.push(U));for(var Ue,st,tt,Me=ee.length,Oe=Me;Me--;)oe[0][Me]=st=(Ue=1-(Ne=ee[Me]))*Ue*Ue*o+3*Ue*Ue*Ne*c+3*Ue*Ne*Ne*m+Ne*Ne*Ne*I,oe[1][Me]=tt=Ue*Ue*Ue*u+3*Ue*Ue*Ne*v+3*Ue*Ne*Ne*T+Ne*Ne*Ne*b,G[Me]={X:st,Y:tt};ee[Oe]=0,ee[Oe+1]=1,G[Oe]={X:o,Y:u},G[Oe+1]={X:I,Y:b},oe[0][Oe]=o,oe[1][Oe]=u,oe[0][Oe+1]=I,oe[1][Oe+1]=b,ee.length=Oe+2,oe[0].length=Oe+2,oe[1].length=Oe+2,G.length=Oe+2;var dt=Xr.apply(null,oe[0]),yt=Xr.apply(null,oe[1]),xt=Bi.apply(null,oe[0]),Lt=Bi.apply(null,oe[1]);return new ct(dt,yt,xt-dt,Lt-yt)},clone:function(){return new yn(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(e,t){return this.pointAtT(this.closestPointT(e,t))},closestPointLength:function(e,t){var n=void 0===(t=t||{}).precision?this.PRECISION:t.precision,o={precision:n,subdivisions:void 0===t.subdivisions?this.getSubdivisions({precision:n}):t.subdivisions};return this.lengthAtT(this.closestPointT(e,o),o)},closestPointNormalizedLength:function(e,t){var n=void 0===(t=t||{}).precision?this.PRECISION:t.precision,o={precision:n,subdivisions:void 0===t.subdivisions?this.getSubdivisions({precision:n}):t.subdivisions},u=this.closestPointLength(e,o);if(!u)return 0;var c=this.length(o);return 0===c?0:u/c},closestPointT:function(e,t){for(var o,u,c,v,m,T,I,n=void 0===(t=t||{}).precision?this.PRECISION:t.precision,r=void 0===t.subdivisions?this.getSubdivisions({precision:n}):t.subdivisions,b=r.length,G=b?1/b:0,ee=0;ee<b;ee++){var oe=r[ee],Te=oe.start.distance(e),Pe=oe.end.distance(e),De=Te+Pe;(!I||De<I)&&(o=oe,u=ee*G,c=(ee+1)*G,v=Te,m=Pe,T=oe.start.distance(oe.end),I=De)}for(var Ne=_i(10,-n);;){var L=v?Vi(v-m)/v:0,U=m?Vi(v-m)/m:0;if(L<Ne||U<Ne||!v||v<T*Ne||!m||m<T*Ne)return v<=m?u:c;var Oe=o.divide(.5);G/=2;var Ue=Oe[0].start.distance(e),st=Oe[0].end.distance(e),tt=Ue+st,dt=Oe[1].start.distance(e),yt=Oe[1].end.distance(e);tt<=dt+yt?(o=Oe[0],c-=G,v=Ue,m=st):(o=Oe[1],u+=G,v=dt,m=yt)}},closestPointTangent:function(e,t){return this.tangentAtT(this.closestPointT(e,t))},containsPoint:function(e,t){return this.toPolyline(t).containsPoint(e)},divideAt:function(e,t){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);var n=this.tAt(e,t);return this.divideAtT(n)},divideAtLength:function(e,t){var n=this.tAtLength(e,t);return this.divideAtT(n)},divideAtT:function(e){var t=this.start,n=this.controlPoint1,r=this.controlPoint2,o=this.end;if(e<=0)return[new yn(t,t,t,t),new yn(t,n,r,o)];if(e>=1)return[new yn(t,n,r,o),new yn(o,o,o,o)];var u=this.getSkeletonPoints(e),m=u.divider,T=u.dividerControlPoint1,I=u.dividerControlPoint2;return[new yn(t,u.startControlPoint1,u.startControlPoint2,m),new yn(m,T,I,o)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.controlPoint1.x===e.controlPoint1.x&&this.controlPoint1.y===e.controlPoint1.y&&this.controlPoint2.x===e.controlPoint2.x&&this.controlPoint2.y===e.controlPoint2.y&&this.end.x===e.end.x&&this.end.y===e.end.y},getSkeletonPoints:function(e){var t=this.start,n=this.controlPoint1,r=this.controlPoint2,o=this.end;if(e<=0)return{startControlPoint1:t.clone(),startControlPoint2:t.clone(),divider:t.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:r.clone()};if(e>=1)return{startControlPoint1:n.clone(),startControlPoint2:r.clone(),divider:o.clone(),dividerControlPoint1:o.clone(),dividerControlPoint2:o.clone()};var u=new gt(t,n).pointAt(e),c=new gt(n,r).pointAt(e),v=new gt(r,o).pointAt(e),m=new gt(u,c).pointAt(e),T=new gt(c,v).pointAt(e);return{startControlPoint1:u,startControlPoint2:m,divider:new gt(m,T).pointAt(e),dividerControlPoint1:T,dividerControlPoint2:v}},getSubdivisions:function(e){var t=void 0===(e=e||{}).precision?this.PRECISION:e.precision,n=[new yn(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===t)return n;for(var r=this.endpointDistance(),o=_i(10,-t),u=0;;){u+=1;for(var c=[],v=n.length,m=0;m<v;m++){var I=n[m].divide(.5);c.push(I[0],I[1])}for(var b=0,G=c.length,ee=0;ee<G;ee++)b+=c[ee].endpointDistance();if(u>1&&(0!==b?(b-r)/b:0)<o)return c;n=c,r=b}},isDifferentiable:function(){var t=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(this.start.equals(t)&&t.equals(n)&&n.equals(r))},length:function(e){for(var n=void 0===(e=e||{}).subdivisions?this.getSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.subdivisions,r=0,o=n.length,u=0;u<o;u++)r+=n[u].endpointDistance();return r},lengthAtT:function(e,t){if(e<=0)return 0;var n=void 0===(t=t||{}).precision?this.PRECISION:t.precision;return this.divide(e)[0].length({precision:n})},pointAt:function(e,t){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var n=this.tAt(e,t);return this.pointAtT(n)},pointAtLength:function(e,t){var n=this.tAtLength(e,t);return this.pointAtT(n)},pointAtT:function(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider},PRECISION:3,round:function(e){return this.start.round(e),this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,t,n){return this.start.scale(e,t,n),this.controlPoint1.scale(e,t,n),this.controlPoint2.scale(e,t,n),this.end.scale(e,t,n),this},tangentAt:function(e,t){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var n=this.tAt(e,t);return this.tangentAtT(n)},tangentAtLength:function(e,t){if(!this.isDifferentiable())return null;var n=this.tAtLength(e,t);return this.tangentAtT(n)},tangentAtT:function(e){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var t=this.getSkeletonPoints(e),n=t.startControlPoint2,o=t.divider,u=new gt(n,t.dividerControlPoint1);return u.translate(o.x-n.x,o.y-n.y),u},tAt:function(e,t){if(e<=0)return 0;if(e>=1)return 1;var n=void 0===(t=t||{}).precision?this.PRECISION:t.precision,o={precision:n,subdivisions:void 0===t.subdivisions?this.getSubdivisions({precision:n}):t.subdivisions},u=this.length(o);return this.tAtLength(u*e,o)},tAtLength:function(e,t){var n=!0;e<0&&(n=!1,e=-e);for(var c,v,m,T,I,r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,o=void 0===t.subdivisions?this.getSubdivisions({precision:r}):t.subdivisions,u={precision:r,subdivisions:o},b=0,G=o.length,ee=1/G,oe=0;oe<G;oe++){var Te=n?oe:G-1-oe,Pe=o[oe],De=Pe.endpointDistance();if(e<=b+De){c=Pe,v=Te*ee,m=(Te+1)*ee,T=n?e-b:De+b-e,I=n?De+b-e:e-b;break}b+=De}if(!c)return n?1:0;for(var Ne=this.length(u),L=_i(10,-r);;){if((0!==Ne?T/Ne:0)<L)return v;if((0!==Ne?I/Ne:0)<L)return m;var K,ie,pe=c.divide(.5);ee/=2;var Me=pe[0].endpointDistance(),Oe=pe[1].endpointDistance();T<=Me?(c=pe[0],m-=ee,ie=Me-(K=T)):(c=pe[1],v+=ee,ie=Oe-(K=T-Me)),T=K,I=ie}},toPoints:function(e){for(var n=void 0===(e=e||{}).subdivisions?this.getSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.subdivisions,r=[n[0].start.clone()],o=n.length,u=0;u<o;u++)r.push(n[u].end.clone());return r},toPolyline:function(e){return new fn(this.toPoints(e))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,t){return this.start.translate(e,t),this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t),this}},yn.prototype.divide=yn.prototype.divideAtT;const It=function(e){if(!(this instanceof It))return new It(e);if("string"==typeof e)return new It.parse(e);var t,n;if(this.segments=[],e)if(Array.isArray(e)&&0!==e.length)if(n=(e=e.reduce(function(v,m){return v.concat(m)},[])).length,e[0].isSegment)for(t=0;t<n;t++)this.appendSegment(e[t]);else{var o=null;for(t=0;t<n;t++){var u=e[t];if(!(u instanceof gt||u instanceof yn))throw new Error("Cannot construct a path segment from the provided object.");0===t&&this.appendSegment(It.createSegment("M",u.start)),o&&!o.end.equals(u.start)&&this.appendSegment(It.createSegment("M",u.start)),u instanceof gt?this.appendSegment(It.createSegment("L",u.end)):u instanceof yn&&this.appendSegment(It.createSegment("C",u.controlPoint1,u.controlPoint2,u.end)),o=u}}else if(e.isSegment)this.appendSegment(e);else if(e instanceof gt)this.appendSegment(It.createSegment("M",e.start)),this.appendSegment(It.createSegment("L",e.end));else if(e instanceof yn)this.appendSegment(It.createSegment("M",e.start)),this.appendSegment(It.createSegment("C",e.controlPoint1,e.controlPoint2,e.end));else{if(!(e instanceof fn))throw new Error("Cannot construct a path from the provided object.");if(!e.points||0===e.points.length)return;for(n=e.points.length,t=0;t<n;t++){this.appendSegment(It.createSegment(0===t?"M":"L",e.points[t]))}}};function Kr(e,t){return t.unshift(null),new(Function.prototype.bind.apply(e,t))}It.parse=function(e){if(!e)return new It;for(var t=new It,r=e.match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g),o=r.length,u=0;u<o;u++){var m=r[u].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g),T=It.createSegment.apply(this,m);t.appendSegment(T)}return t},It.createSegment=function(e){if(!e)throw new Error("Type must be provided.");var t=It.segmentTypes[e];if(!t)throw new Error(e+" is not a recognized path segment type.");for(var n=[],r=arguments.length,o=1;o<r;o++)n.push(arguments[o]);return Kr(t,n)},It.prototype={type:Jt.Path,appendSegment:function(e){var r,t=this.segments,n=t.length,o=0!==n?t[n-1]:null;if(Array.isArray(e)){if(!(e=e.reduce(function(T,I){return T.concat(I)},[]))[0].isSegment)throw new Error("Segments required.");for(var c=e.length,v=0;v<c;v++)r=this.prepareSegment(e[v],o,null),t.push(r),o=r}else{if(!e||!e.isSegment)throw new Error("Segment required.");r=this.prepareSegment(e,o,null),t.push(r)}},bbox:function(){var e=this.segments,t=e.length;if(0===t)return null;for(var n,r=0;r<t;r++){var o=e[r];if(o.isVisible){var u=o.bbox();n=n?n.union(u):u}}if(n)return n;var c=e[t-1];return new ct(c.end.x,c.end.y,0,0)},clone:function(){for(var e=this.segments,t=e.length,n=new It,r=0;r<t;r++){var o=e[r].clone();n.appendSegment(o)}return n},closestPoint:function(e,t){var n=this.closestPointT(e,t);return n?this.pointAtT(n):null},closestPointLength:function(e,t){var n=void 0===(t=t||{}).precision?this.PRECISION:t.precision,o={precision:n,segmentSubdivisions:void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):t.segmentSubdivisions},u=this.closestPointT(e,o);return u?this.lengthAtT(u,o):0},closestPointNormalizedLength:function(e,t){var n=void 0===(t=t||{}).precision?this.PRECISION:t.precision,o={precision:n,segmentSubdivisions:void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):t.segmentSubdivisions},u=this.closestPointLength(e,o);if(0===u)return 0;var c=this.length(o);return 0===c?0:u/c},closestPointT:function(e,t){var n=this.segments,r=n.length;if(0===r)return null;for(var c,o=void 0===(t=t||{}).precision?this.PRECISION:t.precision,u=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):t.segmentSubdivisions,v=1/0,m=0;m<r;m++){var T=n[m];if(T.isVisible){var b=T.closestPointT(e,{precision:o,subdivisions:u[m]}),G=T.pointAtT(b),ee=new gt(G,e).squaredLength();ee<v&&(c={segmentIndex:m,value:b},v=ee)}}return c||{segmentIndex:r-1,value:1}},closestPointTangent:function(e,t){var n=this.segments,r=n.length;if(0===r)return null;for(var c,o=void 0===(t=t||{}).precision?this.PRECISION:t.precision,u=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):t.segmentSubdivisions,v=1/0,m=0;m<r;m++){var T=n[m],I=u[m];if(T.isDifferentiable()){var b=T.closestPointT(e,{precision:o,subdivisions:I}),G=T.pointAtT(b),ee=new gt(G,e).squaredLength();ee<v&&(c=T.tangentAtT(b),v=ee)}}return c||null},containsPoint:function(e,t){var n=this.toPolylines(t);if(!n)return!1;for(var r=n.length,o=0,u=0;u<r;u++)n[u].containsPoint(e)&&o++;return o%2==1},divideAt:function(e,t){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var o=void 0===(t=t||{}).precision?this.PRECISION:t.precision,c={precision:o,segmentSubdivisions:void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):t.segmentSubdivisions},v=this.length(c);return this.divideAtLength(v*e,c)},divideAtLength:function(e,t){var n=this.segments.length;if(0===n)return null;var r=!0;e<0&&(r=!1,e=-e);var c,v,T,I,b,G,o=void 0===(t=t||{}).precision?this.PRECISION:t.precision,u=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):t.segmentSubdivisions,m=0;for(c=0;c<n;c++){var oe=r?c:n-1-c;v=this.getSegment(oe);var Te=u[oe],Pe=v.length({precision:o,subdivisions:Te});if(v.isDifferentiable()&&(b=v,G=oe,e<=m+Pe)){I=oe,T=v.divideAtLength((r?1:-1)*(e-m),{precision:o,subdivisions:Te});break}m+=Pe}if(!b)return null;T||(I=G,T=b.divideAtT(r?1:0));var De=this.clone();De.replaceSegment(I,T);var Ne=I,L=I+1,U=I+2;T[0].isDifferentiable()||(De.removeSegment(Ne),L-=1,U-=1);var K=De.getSegment(L).start;De.insertSegment(L,It.createSegment("M",K)),U+=1,T[1].isDifferentiable()||(De.removeSegment(U-1),U-=1);var ie=U-Ne-1;for(c=U;c<De.segments.length;c++){var pe=this.getSegment(c-ie);if("Z"===(v=De.getSegment(c)).type&&!pe.subpathStartSegment.end.equals(v.subpathStartSegment.end)){var Me=It.createSegment("L",pe.end);De.replaceSegment(c,Me)}}return[new It(De.segments.slice(0,L)),new It(De.segments.slice(L))]},equals:function(e){if(!e)return!1;var t=this.segments,n=e.segments,r=t.length;if(n.length!==r)return!1;for(var o=0;o<r;o++){var u=t[o],c=n[o];if(u.type!==c.type||!u.equals(c))return!1}return!0},getSegment:function(e){var t=this.segments,n=t.length;if(0===n)throw new Error("Path has no segments.");if(e<0&&(e=n+e),e>=n||e<0)throw new Error("Index out of range.");return t[e]},getSegmentSubdivisions:function(e){for(var t=this.segments,n=t.length,r=void 0===(e=e||{}).precision?this.PRECISION:e.precision,o=[],u=0;u<n;u++){var v=t[u].getSubdivisions({precision:r});o.push(v)}return o},getSubpaths:function(){const t=this.clone().validate().segments,n=t.length,r=[];for(let o=0;o<n;o++){const u=t[o];u.isSubpathStart?r.push(new It(u)):r[r.length-1].appendSegment(u)}return r},insertSegment:function(e,t){var n=this.segments,r=n.length;if(e<0&&(e=r+e+1),e>r||e<0)throw new Error("Index out of range.");var o,u=null,c=null;if(0!==r&&(c=e>=1?(u=n[e-1]).nextSegment:n[0]),Array.isArray(t)){if(!(t=t.reduce(function(I,b){return I.concat(b)},[]))[0].isSegment)throw new Error("Segments required.");for(var v=t.length,m=0;m<v;m++)o=this.prepareSegment(t[m],u,c),n.splice(e+m,0,o),u=o}else{if(!t||!t.isSegment)throw new Error("Segment required.");o=this.prepareSegment(t,u,c),n.splice(e,0,o)}},intersectionWithLine:function(e,t){var n=null,r=this.toPolylines(t);if(!r)return null;for(var o=0,u=r.length;o<u;o++){var v=e.intersect(r[o]);v&&(n||(n=[]),Array.isArray(v)?Array.prototype.push.apply(n,v):n.push(v))}return n},isDifferentiable:function(){for(var e=this.segments,t=e.length,n=0;n<t;n++)if(e[n].isDifferentiable())return!0;return!1},isValid:function(){var e=this.segments;return 0===e.length||"M"===e[0].type},length:function(e){var t=this.segments,n=t.length;if(0===n)return 0;for(var o=void 0===(e=e||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.segmentSubdivisions,u=0,c=0;c<n;c++)u+=t[c].length({subdivisions:o[c]});return u},lengthAtT:function(e,t){var n=this.segments,r=n.length;if(0===r)return 0;var o=e.segmentIndex;if(o<0)return 0;var u=e.value;o>=r?(o=r-1,u=1):u<0?u=0:u>1&&(u=1);for(var c=void 0===(t=t||{}).precision?this.PRECISION:t.precision,v=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:c}):t.segmentSubdivisions,T=0,I=0;I<o;I++){var b=n[I];T+=b.length({precisison:c,subdivisions:v[I]})}return T+(b=n[o]).lengthAtT(u,{precisison:c,subdivisions:v[o]})},pointAt:function(e,t){if(0===this.segments.length)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var o=void 0===(t=t||{}).precision?this.PRECISION:t.precision,c={precision:o,segmentSubdivisions:void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):t.segmentSubdivisions},v=this.length(c);return this.pointAtLength(v*e,c)},pointAtLength:function(e,t){var n=this.segments,r=n.length;if(0===r)return null;if(0===e)return this.start.clone();var o=!0;e<0&&(o=!1,e=-e);for(var v,u=void 0===(t=t||{}).precision?this.PRECISION:t.precision,c=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:u}):t.segmentSubdivisions,m=0,T=0;T<r;T++){var I=o?T:r-1-T,b=n[I],G=c[I],ee=b.length({precision:u,subdivisions:G});if(b.isVisible){if(e<=m+ee)return b.pointAtLength((o?1:-1)*(e-m),{precision:u,subdivisions:G});v=b}m+=ee}return v?o?v.end:v.start:n[r-1].end.clone()},pointAtT:function(e){var t=this.segments,n=t.length;if(0===n)return null;var r=e.segmentIndex;if(r<0)return t[0].pointAtT(0);if(r>=n)return t[n-1].pointAtT(1);var o=e.value;return o<0?o=0:o>1&&(o=1),t[r].pointAtT(o)},PRECISION:3,prepareSegment:function(e,t,n){e.previousSegment=t,e.nextSegment=n,t&&(t.nextSegment=e),n&&(n.previousSegment=e);var r=e;return e.isSubpathStart&&(e.subpathStartSegment=e,r=n),r&&this.updateSubpathStartSegment(r),e},removeSegment:function(e){var t=this.segments,n=t.length;if(0===n)throw new Error("Path has no segments.");if(e<0&&(e=n+e),e>=n||e<0)throw new Error("Index out of range.");var r=t.splice(e,1)[0],o=r.previousSegment,u=r.nextSegment;o&&(o.nextSegment=u),u&&(u.previousSegment=o),r.isSubpathStart&&u&&this.updateSubpathStartSegment(u)},replaceSegment:function(e,t){var n=this.segments,r=n.length;if(0===r)throw new Error("Path has no segments.");if(e<0&&(e=r+e),e>=r||e<0)throw new Error("Index out of range.");var o,u=n[e],c=u.previousSegment,v=u.nextSegment,m=u.isSubpathStart;if(Array.isArray(t)){if(!(t=t.reduce(function(G,ee){return G.concat(ee)},[]))[0].isSegment)throw new Error("Segments required.");n.splice(e,1);for(var T=t.length,I=0;I<T;I++)o=this.prepareSegment(t[I],c,v),n.splice(e+I,0,o),c=o,m&&o.isSubpathStart&&(m=!1)}else{if(!t||!t.isSegment)throw new Error("Segment required.");o=this.prepareSegment(t,c,v),n.splice(e,1,o),m&&o.isSubpathStart&&(m=!1)}m&&v&&this.updateSubpathStartSegment(v)},round:function(e){for(var t=this.segments,n=t.length,r=0;r<n;r++)t[r].round(e);return this},scale:function(e,t,n){for(var r=this.segments,o=r.length,u=0;u<o;u++)r[u].scale(e,t,n);return this},segmentAt:function(e,t){var n=this.segmentIndexAt(e,t);return n?this.getSegment(n):null},segmentAtLength:function(e,t){var n=this.segmentIndexAtLength(e,t);return n?this.getSegment(n):null},segmentIndexAt:function(e,t){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var o=void 0===(t=t||{}).precision?this.PRECISION:t.precision,c={precision:o,segmentSubdivisions:void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):t.segmentSubdivisions},v=this.length(c);return this.segmentIndexAtLength(v*e,c)},segmentIndexAtLength:function(e,t){var n=this.segments,r=n.length;if(0===r)return null;var o=!0;e<0&&(o=!1,e=-e);for(var u=void 0===(t=t||{}).precision?this.PRECISION:t.precision,c=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:u}):t.segmentSubdivisions,v=null,m=0,T=0;T<r;T++){var I=o?T:r-1-T,b=n[I],ee=b.length({precision:u,subdivisions:c[I]});if(b.isVisible){if(e<=m+ee)return I;v=I}m+=ee}return v},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(e,t){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var o=void 0===(t=t||{}).precision?this.PRECISION:t.precision,c={precision:o,segmentSubdivisions:void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):t.segmentSubdivisions},v=this.length(c);return this.tangentAtLength(v*e,c)},tangentAtLength:function(e,t){var n=this.segments,r=n.length;if(0===r)return null;var o=!0;e<0&&(o=!1,e=-e);for(var v,u=void 0===(t=t||{}).precision?this.PRECISION:t.precision,c=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:u}):t.segmentSubdivisions,m=0,T=0;T<r;T++){var I=o?T:r-1-T,b=n[I],G=c[I],ee=b.length({precision:u,subdivisions:G});if(b.isDifferentiable()){if(e<=m+ee)return b.tangentAtLength((o?1:-1)*(e-m),{precision:u,subdivisions:G});v=b}m+=ee}return v?v.tangentAtT(o?1:0):null},tangentAtT:function(e){var t=this.segments,n=t.length;if(0===n)return null;var r=e.segmentIndex;if(r<0)return t[0].tangentAtT(0);if(r>=n)return t[n-1].tangentAtT(1);var o=e.value;return o<0?o=0:o>1&&(o=1),t[r].tangentAtT(o)},toPoints:function(e){var t=this.segments,n=t.length;if(0===n)return null;for(var o=void 0===(e=e||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.segmentSubdivisions,u=[],c=[],v=0;v<n;v++){var m=t[v];if(m.isVisible){var T=o[v];if(T.length>0){var I=T.map(function(b){return b.start});Array.prototype.push.apply(c,I)}else c.push(m.start)}else c.length>0&&(c.push(t[v-1].end),u.push(c),c=[])}return c.length>0&&(c.push(this.end),u.push(c)),u},toPolylines:function(e){var t=[],n=this.toPoints(e);if(!n)return null;for(var r=0,o=n.length;r<o;r++)t.push(new fn(n[r]));return t},toString:function(){for(var e=this.segments,t=e.length,n="",r=0;r<t;r++)n+=e[r].serialize()+" ";return n.trim()},translate:function(e,t){for(var n=this.segments,r=n.length,o=0;o<r;o++)n[o].translate(e,t);return this},updateSubpathStartSegment:function(e){for(var t=e.previousSegment;e&&!e.isSubpathStart;)e.subpathStartSegment=t?t.subpathStartSegment:null,t=e,e=e.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,It.createSegment("M",0,0)),this}},Object.defineProperty(It.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,t=e.length;if(0===t)return null;for(var n=0;n<t;n++){var r=e[n];if(r.isVisible)return r.start}return e[t-1].end}}),Object.defineProperty(It.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,t=e.length;if(0===t)return null;for(var n=t-1;n>=0;n--){var r=e[n];if(r.isVisible)return r.end}return e[t-1].end}});var ci={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(e){if(e<=0)return 0;var t=this.length();return e>=1?t:t*e},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(ci,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(ci,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(ci,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var Cr=function(){for(var e=[],t=arguments.length,n=0;n<t;n++)e.push(arguments[n]);if(!(this instanceof Cr))return Kr(Cr,e);if(0===t)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var r;if(e[0]instanceof gt){if(1===t)return this.end=e[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+t+" lines provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(2===t)return this.end=new ye(+e[0],+e[1]),this;if(t<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+t+" coordinates provided).");var o;for(r=[],n=0;n<t;n+=2)o=e.slice(n,n+2),r.push(Kr(Cr,o));return r}if(1===t)return this.end=new ye(e[0]),this;for(r=[],n=0;n<t;n+=1)r.push(new Cr(e[n]));return r},oa={clone:function(){return new Cr(this.end)},divideAt:function(e){var n=new gt(this.start,this.end).divideAt(e);return[new Cr(n[0]),new Cr(n[1])]},divideAtLength:function(e){var n=new gt(this.start,this.end).divideAtLength(e);return[new Cr(n[0]),new Cr(n[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!!this.previousSegment&&!this.start.equals(this.end)},round:function(e){return this.end.round(e),this},scale:function(e,t,n){return this.end.scale(e,t,n),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(e,t){return this.end.translate(e,t),this}};Object.defineProperty(oa,"type",{configurable:!0,enumerable:!0,value:"L"}),Cr.prototype=qi(ci,gt.prototype,oa);var Jr=function(){for(var e=[],t=arguments.length,n=0;n<t;n++)e.push(arguments[n]);if(!(this instanceof Jr))return Kr(Jr,e);if(0===t)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var r,u;if(e[0]instanceof yn){if(1===t)return this.controlPoint1=e[0].controlPoint1.clone(),this.controlPoint2=e[0].controlPoint2.clone(),this.end=e[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" curves provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(6===t)return this.controlPoint1=new ye(+e[0],+e[1]),this.controlPoint2=new ye(+e[2],+e[3]),this.end=new ye(+e[4],+e[5]),this;if(t<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" coordinates provided).");var o;for(r=[],n=0;n<t;n+=6)o=e.slice(n,n+6),r.push(Kr(Jr,o));return r}if(3===t)return this.controlPoint1=new ye(e[0]),this.controlPoint2=new ye(e[1]),this.end=new ye(e[2]),this;if(t<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" points provided).");for(r=[],n=0;n<t;n+=3)u=e.slice(n,n+3),r.push(Kr(Jr,u));return r},ns={clone:function(){return new Jr(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(e,t){var r=new yn(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAt(e,t);return[new Jr(r[0]),new Jr(r[1])]},divideAtLength:function(e,t){var r=new yn(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtLength(e,t);return[new Jr(r[0]),new Jr(r[1])]},divideAtT:function(e){var n=new yn(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtT(e);return[new Jr(n[0]),new Jr(n[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var t=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(this.start.equals(t)&&t.equals(n)&&n.equals(r))},round:function(e){return this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,t,n){return this.controlPoint1.scale(e,t,n),this.controlPoint2.scale(e,t,n),this.end.scale(e,t,n),this},serialize:function(){var e=this.controlPoint1,t=this.controlPoint2,n=this.end;return this.type+" "+e.x+" "+e.y+" "+t.x+" "+t.y+" "+n.x+" "+n.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,t){return this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t),this}};Object.defineProperty(ns,"type",{configurable:!0,enumerable:!0,value:"C"}),Jr.prototype=qi(ci,yn.prototype,ns);var Hi=function(){for(var e=[],t=arguments.length,n=0;n<t;n++)e.push(arguments[n]);if(!(this instanceof Hi))return Kr(Hi,e);if(0===t)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var r,u;if(e[0]instanceof gt){if(1===t)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" lines provided).")}if(e[0]instanceof yn){if(1===t)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" curves provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(2===t)return this.end=new ye(+e[0],+e[1]),this;if(t<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" coordinates provided).");var o;for(r=[],n=0;n<t;n+=2)o=e.slice(n,n+2),r.push(Kr(0===n?Hi:Cr,o));return r}if(1===t)return this.end=new ye(e[0]),this;for(r=[],n=0;n<t;n+=1)u=e[n],r.push(0===n?new Hi(u):new Cr(u));return r},aa={bbox:function(){return null},clone:function(){return new Hi(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(e){return this.end.equals(e.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(e){return this.end.round(e),this},scale:function(e,t,n){return this.end.scale(e,t,n),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(e,t){return this.end.translate(e,t),this}};Object.defineProperty(aa,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(aa,"type",{configurable:!0,enumerable:!0,value:"M"}),Hi.prototype=qi(ci,aa);var Co=function(){for(var e=[],t=arguments.length,n=0;n<t;n++)e.push(arguments[n]);if(!(this instanceof Co))return Kr(Co,e);if(t>0)throw new Error("Closepath constructor expects no arguments.");return this},sa={clone:function(){return new Co},divideAt:function(e){var n=new gt(this.start,this.end).divideAt(e);return[n[1].isDifferentiable()?new Cr(n[0]):this.clone(),new Cr(n[1])]},divideAtLength:function(e){var n=new gt(this.start,this.end).divideAtLength(e);return[n[1].isDifferentiable()?new Cr(n[0]):this.clone(),new Cr(n[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!(!this.previousSegment||!this.subpathStartSegment||this.start.equals(this.end))},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(sa,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(sa,"type",{configurable:!0,enumerable:!0,value:"Z"}),Co.prototype=qi(ci,gt.prototype,sa);var ka=It.segmentTypes={L:Cr,C:Jr,M:Hi,Z:Co,z:Co};It.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(ka).join("")+",.]*$"),It.isDataSupported=function(e){return"string"==typeof e&&this.regexSupportedData.test(e)};const eo={curveThroughPoints:function(e){return console.warn("deprecated"),new It(yn.throughPoints(e)).serialize()},getCurveControlPoints:function(e){console.warn("deprecated");var o,t=[],n=[],r=e.length-1;if(1==r)return t[0]=new ye((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),n[0]=new ye(2*t[0].x-e[0].x,2*t[0].y-e[0].y),[t,n];var u=[];for(o=1;o<r-1;o++)u[o]=4*e[o].x+2*e[o+1].x;u[0]=e[0].x+2*e[1].x,u[r-1]=(8*e[r-1].x+e[r].x)/2;var c=this.getFirstControlPoints(u);for(o=1;o<r-1;++o)u[o]=4*e[o].y+2*e[o+1].y;u[0]=e[0].y+2*e[1].y,u[r-1]=(8*e[r-1].y+e[r].y)/2;var v=this.getFirstControlPoints(u);for(o=0;o<r;o++)t.push(new ye(c[o],v[o])),n.push(o<r-1?new ye(2*e[o+1].x-c[o+1],2*e[o+1].y-v[o+1]):new ye((e[r].x+c[r-1])/2,(e[r].y+v[r-1])/2));return[t,n]},getCurveDivider:function(e,t,n,r){console.warn("deprecated");var o=new yn(e,t,n,r);return function(c){var v=o.divide(c);return[{p0:v[0].start,p1:v[0].controlPoint1,p2:v[0].controlPoint2,p3:v[0].end},{p0:v[1].start,p1:v[1].controlPoint1,p2:v[1].controlPoint2,p3:v[1].end}]}},getFirstControlPoints:function(e){console.warn("deprecated");var t=e.length,n=[],r=[],o=2;n[0]=e[0]/o;for(var u=1;u<t;u++)r[u]=1/o,n[u]=(e[u]-n[u-1])/(o=(u<t-1?4:3.5)-r[u]);for(u=1;u<t;u++)n[t-u-1]-=r[t-u]*n[t-u];return n},getInversionSolver:function(e,t,n,r){console.warn("deprecated");var o=new yn(e,t,n,r);return function(c){return o.closestPointT(c)}}},Ar=function(e){return this instanceof Ar?"string"==typeof e?new Ar.parse(e):void(this.points=Array.isArray(e)?e.map(ye):[]):new Ar(e)};function La(e,t,n,r){switch(e.type){case Jt.Line:if(t.type===Jt.Line)return fi(e,t);break;case Jt.Ellipse:switch(t.type){case Jt.Line:return ua(e,t);case Jt.Ellipse:return Fo(e,t)}break;case Jt.Rect:switch(t.type){case Jt.Line:return Vn(e,t);case Jt.Ellipse:return Rn(e,t);case Jt.Rect:return la(e,t)}break;case Jt.Polyline:switch(t.type){case Jt.Line:return _o(e,t);case Jt.Ellipse:return N(e,t);case Jt.Rect:return Z(e,t);case Jt.Polyline:return ae(e,t)}break;case Jt.Polygon:switch(t.type){case Jt.Line:return ge(e,t);case Jt.Ellipse:return ke(e,t);case Jt.Rect:return Se(e,t);case Jt.Polyline:return l(e,t);case Jt.Polygon:return d(e,t)}break;case Jt.Path:switch(t.type){case Jt.Line:return y(e,t,n);case Jt.Ellipse:return _(e,t,n);case Jt.Rect:return R(e,t,n);case Jt.Polyline:return D(e,t,n);case Jt.Polygon:return Y(e,t,n);case Jt.Path:return le(e,t,n,r)}}switch(t.type){case Jt.Ellipse:case Jt.Rect:case Jt.Polyline:case Jt.Polygon:case Jt.Path:return La(t,e,r,n);default:throw Error(`The intersection for ${e} and ${t} could not be found.`)}}function fi(e,t){const n=e.start.x,r=e.start.y,c=t.start.x,v=t.start.y,I=e.end.x-n,b=e.end.y-r,G=t.end.x-c,ee=t.end.y-v,oe=n-c,Te=r-v,Pe=I*ee-G*b,De=(I*Te-b*oe)/Pe,Ne=(G*Te-ee*oe)/Pe;return De>=0&&De<=1&&Ne>=0&&Ne<=1}function ua(e,t){const n=e.a,r=e.b,o=e.x,u=e.y,c=t.start.x-o,m=t.start.y-u,I=n*n,b=r*r,G=t.end.x-o-c,ee=t.end.y-u-m,oe=G*G/I+ee*ee/b,Te=2*c*G/I+2*m*ee/b,De=Te*Te-4*oe*(c*c/I+m*m/b-1);if(0===De){const Ne=-Te/2/oe;return Ne>=0&&Ne<=1}if(De>0){const Ne=Math.sqrt(De),L=(-Te+Ne)/2/oe,U=(-Te-Ne)/2/oe;return L>=0&&L<=1||U>=0&&U<=1}return!1}function Fo(e,t){return function St(e,t,n,r){const{cos:o,sin:u}=Math,c=u(t),v=o(t),m=u(r),T=o(r),I=c*c,b=v*v,ee=m*m,oe=T*T,Pe=e.a*e.a,De=e.b*e.b,Ne=n.a*n.a,L=n.b*n.b,U=Pe*I+De*b,K=Ne*ee+L*oe,ie=Pe*b+De*I,pe=Ne*oe+L*ee;let Me=2*(De-Pe)*(c*v),Oe=2*(L-Ne)*(m*T),Ue=-2*U*e.x-Me*e.y,st=-2*K*n.x-Oe*n.y,tt=-Me*e.x-2*ie*e.y,dt=-Oe*n.x-2*pe*n.y;const yt=U*e.x*e.x+ie*e.y*e.y+Me*e.x*e.y-Pe*De,xt=K*n.x*n.x+pe*n.y*n.y+Oe*n.x*n.y-Ne*L;Me/=2,Oe/=2,Ue/=2,st/=2,tt/=2,dt/=2;const Lt=Pt([[U,Me,Ue],[Me,ie,tt],[Ue,tt,yt]]),Hn=Pt([[K,Oe,st],[Oe,pe,dt],[st,dt,xt]]),In=.33333333*(Pt([[K,Me,Ue],[Oe,ie,tt],[st,tt,yt]])+Pt([[U,Oe,Ue],[Me,pe,tt],[Ue,dt,yt]])+Pt([[U,Me,st],[Me,ie,dt],[Ue,tt,xt]])),Zn=.33333333*(Pt([[U,Oe,st],[Me,pe,dt],[Ue,dt,xt]])+Pt([[K,Me,st],[Oe,ie,dt],[st,tt,xt]])+Pt([[K,Oe,Ue],[Oe,pe,tt],[st,dt,yt]])),Vt=Yt([[Lt,In],[In,Zn]]),qt=Yt([[Lt,Zn],[In,Hn]]),Bt=Yt([[In,Zn],[Zn,Hn]]);return!(Yt([[2*Vt,qt],[qt,2*Bt]])>0&&(Zn>0||In>0))}(e,0,t,0)}function Vn(e,t){const{start:n,end:r}=t,{x:o,y:u,width:c,height:v}=e;return!(n.x>o+c&&r.x>o+c||n.x<o&&r.x<o||n.y>u+v&&r.y>u+v||n.y<u&&r.y<u)&&(!(!e.containsPoint(t.start)&&!e.containsPoint(t.end))||fi(e.topLine(),t)||fi(e.rightLine(),t)||fi(e.bottomLine(),t)||fi(e.leftLine(),t))}function Rn(e,t){return!!la(e,ct.fromEllipse(t))&&ke(Ar.fromRect(e),t)}function la(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function _o(e,t){return ue(e,t,{interior:!1})}function N(e,t){return Ie(e,t,{interior:!1})}function Z(e,t){return Ve(e,t,{interior:!1})}function ae(e,t){return Re(e,t,{interior:!1})}function ge(e,t){return ue(e,t,{interior:!0})}function ke(e,t){return Ie(e,t,{interior:!0})}function Se(e,t){return Ve(e,t,{interior:!0})}function l(e,t){return Re(e,t,{interior:!0})}function d(e,t){return $e(e,t,{interior:!0})}function y(e,t,n){return e.getSubpaths().some(r=>{const[o]=r.toPolylines(n),{type:u}=r.getSegment(-1);return"Z"===u?ge(o,t):_o(o,t)})}function _(e,t,n){return e.getSubpaths().some(r=>{const[o]=r.toPolylines(n),{type:u}=r.getSegment(-1);return"Z"===u?ke(o,t):N(o,t)})}function R(e,t,n){return Y(e,Ar.fromRect(t),n)}function D(e,t,n){return rt(e,t,n,{interior:!1})}function Y(e,t,n){return rt(e,t,n,{interior:!0})}function le(e,t,n,r){return e.getSubpaths().some(o=>{const[u]=o.toPolylines(n),{type:c}=o.getSegment(-1);return"Z"===c?Y(t,u,r):D(t,u,r)})}function ue(e,t,n={}){const{interior:r=!1}=n;let o;if(r){if(e.containsPoint(t.start))return!0;const{start:v,end:m,points:T}=e;o=m.equals(v)?T:[...T,v]}else o=e.points;const{length:u}=o,c=new gt;for(let v=0;v<u-1;v++)if(c.start=o[v],c.end=o[v+1],fi(t,c))return!0;return!1}function Ie(e,t,n={}){const{start:r,end:o,points:u}=e;if(t.containsPoint(r))return!0;let c;const{interior:v=!1}=n;if(v){if(e.containsPoint(t.center()))return!0;c=o.equals(r)?u:[...u,r]}else c=u;const{length:m}=c,T=new gt;for(let I=0;I<m-1;I++)if(T.start=c[I],T.end=c[I+1],ua(t,T))return!0;return!1}function Ve(e,t,n){return $e(e,Ar.fromRect(t),n)}function rt(e,t,n,r){return e.getSubpaths().some(o=>{const[u]=o.toPolylines(n),{type:c}=o.getSegment(-1);return"Z"===c?$e(t,u,r):Re(t,u,r)})}function Re(e,t,n={}){const{interior:r=!1}=n;let o;if(r){const{start:m}=t;if(e.containsPoint(m))return!0;o=e.clone().close()}else o=e;const u=t.points,{length:c}=u,v=new gt;for(let m=0;m<c-1;m++)if(v.start=u[m],v.end=u[m+1],_o(o,v))return!0;return!1}function $e(e,t,n){return t.containsPoint(e.start)||Re(e,t.clone().close(),n)}function Yt(e){return e[0][0]*e[1][1]-e[0][1]*e[1][0]}function Pt(e){return e[0][0]*e[1][1]*e[2][2]-e[0][0]*e[1][2]*e[2][1]-e[0][1]*e[1][0]*e[2][2]+e[0][1]*e[1][2]*e[2][0]+e[0][2]*e[1][0]*e[2][1]-e[0][2]*e[1][1]*e[2][0]}Ar.parse=function(e){return new Ar(ra(e))},Ar.fromRect=function(e){return new Ar([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft()])},Ar.prototype=qi(fn.prototype,{type:Jt.Polygon,clone:function(){return new Ar(Do(this.points))},convexHull:function(){return new Ar(li(this.points))},lengthPoints:function(){const{start:e,end:t,points:n}=this;return n.length<=1||e.equals(t)?n:[...n,e.clone()]}});const qn=p,je=function(){if("object"!=typeof window||!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))return function(){throw new Error("SVG is required to use Vectorizer.")};var t={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},r=Math,o=r.PI,u=r.atan2,c=r.sqrt,v=r.min,m=r.max,T=r.cos,I=r.sin,b=function(L,U,K){if(!(this instanceof b))return b.apply(Object.create(b.prototype),arguments);if(L){if(b.isV(L)&&(L=L.node),U=U||{},b.isString(L)){if("svg"===(L=L.trim()).toLowerCase())L=b.createSvgDocument();else if("<"===L[0]){var ie=b.createSvgDocument(L);if(ie.childNodes.length>1){var Me,Oe,pe=[];for(Me=0,Oe=ie.childNodes.length;Me<Oe;Me++){var Ue=ie.childNodes[Me];pe.push(new b(document.importNode(Ue,!0)))}return pe}L=document.importNode(ie.firstChild,!0)}else L=document.createElementNS(t.svg,L);b.ensureId(L)}return this.node=L,this.setAttributes(U),K&&this.append(K),this}},G=b.prototype;function oe(L,U,K){K||(K={});for(var ie=K.includeAnnotationIndices,pe=K.eol,Me=K.lineHeight,Oe=K.baseSize,Ue=0,st={},tt=U.length-1,dt=0;dt<=tt;dt++){var yt=U[dt],xt=null;if(b.isObject(yt)){var Lt=yt.attrs,Hn=b("tspan",Lt),In=Hn.node,Zn=yt.t;pe&&dt===tt&&(Zn+=pe),In.textContent=Zn;var Vt=Lt.class;Vt&&Hn.addClass(Vt),ie&&Hn.attr("annotations",yt.annotations),xt=parseFloat(Lt["font-size"]),isFinite(xt)||(xt=Oe),xt&&xt>Ue&&(Ue=xt)}else pe&&dt===tt&&(yt+=pe),In=document.createTextNode(yt||" "),Oe&&Oe>Ue&&(Ue=Oe);L.appendChild(In)}return Ue&&(st.maxFontSize=Ue),Me?st.lineHeight=Me:Ue&&(st.lineHeight=1.2*Ue),st}Object.defineProperty(G,"id",{enumerable:!0,get:function(){return this.node.id},set:function(L){this.node.id=L}}),G.getTransformToElement=function(L){var U=this.node;if(b.isSVGGraphicsElement(L)&&b.isSVGGraphicsElement(U)){var K=b.toNode(L).getScreenCTM(),ie=U.getScreenCTM();if(K&&ie)return K.inverse().multiply(ie)}return b.createSVGMatrix()},G.transform=function(L,U){var K=this.node;if(b.isUndefined(L))return b.transformStringToMatrix(this.attr("transform"));if(U&&U.absolute)return this.attr("transform",b.matrixToTransformString(L));var ie=b.createSVGTransform(L);return K.transform.baseVal.appendItem(ie),this},G.translate=function(L,U,K){K=K||{},U=U||0;var ie=this.attr("transform")||"",pe=b.parseTransformString(ie);return ie=pe.value,b.isUndefined(L)?pe.translate:(ie=ie.replace(/translate\([^)]*\)/g,"").trim(),this.attr("transform",("translate("+(K.absolute?L:pe.translate.tx+L)+","+(K.absolute?U:pe.translate.ty+U)+") "+ie).trim()),this)},G.rotate=function(L,U,K,ie){ie=ie||{};var pe=this.attr("transform")||"",Me=b.parseTransformString(pe);return pe=Me.value,b.isUndefined(L)?Me.rotate:(pe=pe.replace(/rotate\([^)]*\)/g,"").trim(),L%=360,this.attr("transform",(pe+" rotate("+(ie.absolute?L:Me.rotate.angle+L)+(void 0!==U&&void 0!==K?","+U+","+K:"")+")").trim()),this)},G.scale=function(L,U){U=b.isUndefined(U)?L:U;var K=this.attr("transform")||"",ie=b.parseTransformString(K);return K=ie.value,b.isUndefined(L)?ie.scale:(K=K.replace(/scale\([^)]*\)/g,"").trim(),this.attr("transform",(K+" scale("+L+","+U+")").trim()),this)},G.bbox=function(L,U){var K,ie=this.node,pe=ie.ownerSVGElement;if(!pe)return new ct(0,0,0,0);try{K=ie.getBBox()}catch(Oe){K={x:ie.clientLeft,y:ie.clientTop,width:ie.clientWidth,height:ie.clientHeight}}if(L)return new ct(K);var Me=this.getTransformToElement(U||pe);return b.transformRect(K,Me)},G.getBBox=function(L){var K,U={},ie=this.node;if(!ie.ownerSVGElement||!b.isSVGGraphicsElement(ie))return new ct(0,0,0,0);if(L&&(L.target&&(U.target=b.toNode(L.target)),L.recursive&&(U.recursive=L.recursive)),U.recursive){var Oe=this.children(),Ue=Oe.length;if(0===Ue)return this.getBBox({target:U.target,recursive:!1});U.target||(U.target=this);for(var st=0;st<Ue;st++){var dt,tt=Oe[st];dt=0===tt.children().length?tt.getBBox({target:U.target,recursive:!1}):tt.getBBox({target:U.target,recursive:!0}),K=K?K.union(dt):dt}return K}try{K=ie.getBBox()}catch(yt){K={x:ie.clientLeft,y:ie.clientTop,width:ie.clientWidth,height:ie.clientHeight}}if(U.target){var Me=this.getTransformToElement(U.target);return b.transformRect(K,Me)}return new ct(K)};var Te=/em$/;function Pe(L,U){var K=parseFloat(L);return Te.test(L)?K*U:K}G.text=function(L,U){if(L&&"string"!=typeof L)throw new Error("Vectorizer: text() expects the first argument to be a string.");L=b.sanitizeText(L),U||(U={});var K=U.displayEmpty,ie=U.eol,pe=U.textPath,Me=U.textVerticalAnchor,Oe="middle"===Me||"bottom"===Me||"top"===Me,Ue=U.x;void 0===Ue&&(Ue=this.attr("x")||0);var st=U.includeAnnotationIndices,tt=U.annotations;tt&&!b.isArray(tt)&&(tt=[tt]);var dt=U.lineHeight,yt="auto"===dt,xt=yt?"1.5em":dt||"1em";this.empty(),this.attr({"xml:space":"preserve",display:L||K?null:"none"});var Lt=parseFloat(this.attr("font-size"));Lt||(Lt=16,(Oe||tt)&&this.attr("font-size",Lt));var In,Hn=document;pe?("string"==typeof pe&&(pe={d:pe}),In=function ee(L,U){L||(L={});var K=b("textPath"),ie=L.d;if(ie&&void 0===L["xlink:href"]){var pe=b("path").attr("d",ie).appendTo(U.defs());K.attr("xlink:href","#"+pe.id)}return b.isObject(L)&&K.attr(L),K.node}(pe,this)):In=Hn.createDocumentFragment();for(var Bt,Zn=0,Vt=L.split("\n"),qt=[],zt=0,xn=Vt.length-1;zt<=xn;zt++){var Mn,$n=xt,cn="v-line",hn=Hn.createElementNS(t.svg,"tspan"),gr=Vt[zt];if(gr)if(tt){var Cn=(Mn=oe(hn,b.annotateString(gr,tt,{offset:-Zn,includeAnnotationIndices:st}),{includeAnnotationIndices:st,eol:zt!==xn&&ie,lineHeight:yt?null:xt,baseSize:Lt})).lineHeight;Cn&&yt&&0!==zt&&($n=Cn),0===zt&&(Bt=.8*Mn.maxFontSize)}else ie&&zt!==xn&&(gr+=ie),hn.textContent=gr;else{hn.textContent="-",cn+=" v-empty-line";var Ft=hn.style;Ft.fillOpacity=0,Ft.strokeOpacity=0,tt&&(Mn={})}Mn&&qt.push(Mn),zt>0&&hn.setAttribute("dy",$n),(zt>0||pe)&&hn.setAttribute("x",Ue),hn.className.baseVal=cn,In.appendChild(hn),Zn+=gr.length+1}if(Oe)if(tt)$n=function De(L,U,K,ie){if(!Array.isArray(U))return 0;var pe=U.length;if(!pe)return 0;for(var Me=U[0],Oe=Pe(Me.maxFontSize,K)||K,Ue=0,st=Pe(ie,K),tt=1;tt<pe;tt++)Ue+=Pe((Me=U[tt]).lineHeight,K)||st;var xt,yt=Pe(Me.maxFontSize,K)||K;switch(L){case"middle":xt=Oe/2-.15*yt-Ue/2;break;case"bottom":xt=-.25*yt-Ue;break;default:xt=.8*Oe}return xt}(Me,qt,Lt,xt);else if("top"===Me)$n="0.8em";else{var Ct;switch(xn>0?(Ct=parseFloat(xt)||1,Ct*=xn,Te.test(xt)||(Ct/=Lt)):Ct=0,Me){case"middle":$n=.3-Ct/2+"em";break;case"bottom":$n=-Ct-.3+"em"}}else 0===Me?$n="0em":Me?$n=Me:($n=0,null===this.attr("y")&&this.attr("y",Bt||"0.8em"));return In.firstChild.setAttribute("dy",$n),this.append(In),this},G.removeAttr=function(L){var U=b.qualifyAttr(L),K=this.node;return U.ns?K.hasAttributeNS(U.ns,U.local)&&K.removeAttributeNS(U.ns,U.local):K.hasAttribute(L)&&K.removeAttribute(L),this},G.attr=function(L,U){if(b.isUndefined(L)){for(var K=this.node.attributes,ie={},pe=0;pe<K.length;pe++)ie[K[pe].name]=K[pe].value;return ie}if(b.isString(L)&&b.isUndefined(U))return this.node.getAttribute(L);if("object"==typeof L)for(var Me in L)L.hasOwnProperty(Me)&&this.setAttribute(Me,L[Me]);else this.setAttribute(L,U);return this},G.normalizePath=function(){return"PATH"===this.tagName()&&this.attr("d",b.normalizePathData(this.attr("d"))),this},G.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},G.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},G.setAttributes=function(L){for(var U in L)L.hasOwnProperty(U)&&this.setAttribute(U,L[U]);return this},G.append=function(L){b.isArray(L)||(L=[L]);for(var U=0,K=L.length;U<K;U++)this.node.appendChild(b.toNode(L[U]));return this},G.prepend=function(L){var U=this.node.firstChild;return U?b(U).before(L):this.append(L)},G.before=function(L){var U=this.node,K=U.parentNode;if(K){b.isArray(L)||(L=[L]);for(var ie=0,pe=L.length;ie<pe;ie++)K.insertBefore(b.toNode(L[ie]),U)}return this},G.appendTo=function(L){return b.toNode(L).appendChild(this.node),this},G.svg=function(){return this.node instanceof window.SVGSVGElement?this:b(this.node.ownerSVGElement)},G.tagName=function(){return this.node.tagName.toUpperCase()},G.defs=function(){var L=this.svg()||this,U=L.node.getElementsByTagName("defs")[0];return U?b(U):b("defs").appendTo(L)},G.clone=function(){var L=b(this.node.cloneNode(!0));return L.node.id=b.uniqueId(),L},G.findOne=function(L){var U=this.node.querySelector(L);return U?b(U):void 0},G.find=function(L){var U=[],K=this.node.querySelectorAll(L);if(K)for(var ie=0;ie<K.length;ie++)U.push(b(K[ie]));return U},G.children=function(){for(var L=this.node.childNodes,U=[],K=0;K<L.length;K++)1===L[K].nodeType&&U.push(b(L[K]));return U},G.parent=function(){return b(this.node.parentNode)||null},G.index=function(){for(var L=0,U=this.node.previousSibling;U;)1===U.nodeType&&L++,U=U.previousSibling;return L},G.findParentByClass=function(L,U){for(var K=this.node.ownerSVGElement,ie=this.node.parentNode;ie&&ie!==U&&ie!==K;){var pe=b(ie);if(pe.hasClass(L))return pe;ie=ie.parentNode}return null},G.contains=function(L){var U=this.node,K=b.toNode(L),ie=K&&K.parentNode;return U===ie||!!(ie&&1===ie.nodeType&&16&U.compareDocumentPosition(ie))},G.toLocalPoint=function(L,U){var K=this.svg().node,ie=K.createSVGPoint();ie.x=L,ie.y=U;try{var pe=ie.matrixTransform(K.getScreenCTM().inverse()),Me=this.getTransformToElement(K).inverse()}catch(Oe){return ie}return pe.matrixTransform(Me)},G.translateCenterToPoint=function(L){var K=this.getBBox({target:this.svg()}).center();return this.translate(L.x-K.x,L.y-K.y),this},G.translateAndAutoOrient=function(L,U,K){L=new ye(L),U=new ye(U),K||(K=this.svg());var ie=this.scale();this.attr("transform","");var pe=this.getBBox({target:K}).scale(ie.sx,ie.sy),Me=b.createSVGTransform();Me.setTranslate(-pe.x-pe.width/2,-pe.y-pe.height/2);var Oe=b.createSVGTransform(),Ue=L.angleBetween(U,L.clone().offset(1,0));Ue&&Oe.setRotate(Ue,0,0);var st=b.createSVGTransform(),tt=L.clone().move(U,pe.width/2);st.setTranslate(2*L.x-tt.x,2*L.y-tt.y);var dt=this.getTransformToElement(K),yt=b.createSVGTransform();return yt.setMatrix(st.matrix.multiply(Oe.matrix.multiply(Me.matrix.multiply(dt.scale(ie.sx,ie.sy))))),this.attr("transform",b.matrixToTransformString(yt.matrix)),this},G.animateAlongPath=function(L,U){U=b.toNode(U);var K=b.ensureId(U),ie=b("animateMotion",L),pe=b("mpath",{"xlink:href":"#"+K});ie.append(pe),this.append(ie);try{ie.node.beginElement()}catch(xt){if("fake"===document.documentElement.getAttribute("smiling")){var Me=ie.node;Me.animators=[];var Oe=Me.getAttribute("id");Oe&&(id2anim[Oe]=Me);for(var Ue=getTargets(Me),st=0,tt=Ue.length;st<tt;st++){var yt=new Animator(Me,Ue[st],st);animators.push(yt),Me.animators[st]=yt,yt.register()}}}return this},G.hasClass=function(L){return new RegExp("(\\s|^)"+L+"(\\s|$)").test(this.node.getAttribute("class"))},G.addClass=function(L){if(L&&!this.hasClass(L)){var U=this.node.getAttribute("class")||"";this.node.setAttribute("class",(U+" "+L).trim())}return this},G.removeClass=function(L){if(L&&this.hasClass(L)){var U=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+L+"(\\s|$)","g"),"$2");this.node.setAttribute("class",U)}return this},G.toggleClass=function(L,U){return(b.isUndefined(U)?this.hasClass(L):!U)?this.removeClass(L):this.addClass(L),this},G.sample=function(L){L=L||1;for(var Me,U=this.node,K=U.getTotalLength(),ie=[],pe=0;pe<K;)Me=U.getPointAtLength(pe),ie.push({x:Me.x,y:Me.y,distance:pe}),pe+=L;return ie},G.convertToPath=function(){var L=b("path");L.attr(this.attr());var U=this.convertToPathData();return U&&L.attr("d",U),L},G.convertToPathData=function(){var L=this.tagName();switch(L){case"PATH":return this.attr("d");case"LINE":return b.convertLineToPathData(this.node);case"POLYGON":return b.convertPolygonToPathData(this.node);case"POLYLINE":return b.convertPolylineToPathData(this.node);case"ELLIPSE":return b.convertEllipseToPathData(this.node);case"CIRCLE":return b.convertCircleToPathData(this.node);case"RECT":return b.convertRectToPathData(this.node)}throw new Error(L+" cannot be converted to PATH.")},b.prototype.toGeometryShape=function(){var L,U,K,ie,pe,Me,Oe,Ue,st,tt,dt,yt,xt,Lt,Hn;switch(this.tagName()){case"RECT":return L=parseFloat(this.attr("x"))||0,U=parseFloat(this.attr("y"))||0,K=parseFloat(this.attr("width"))||0,ie=parseFloat(this.attr("height"))||0,new ct(L,U,K,ie);case"CIRCLE":return pe=parseFloat(this.attr("cx"))||0,Me=parseFloat(this.attr("cy"))||0,Oe=parseFloat(this.attr("r"))||0,new Or({x:pe,y:Me},Oe,Oe);case"ELLIPSE":return pe=parseFloat(this.attr("cx"))||0,Me=parseFloat(this.attr("cy"))||0,Ue=parseFloat(this.attr("rx"))||0,st=parseFloat(this.attr("ry"))||0,new Or({x:pe,y:Me},Ue,st);case"POLYLINE":return tt=b.getPointsFromSvgNode(this),new fn(tt);case"POLYGON":return(tt=b.getPointsFromSvgNode(this)).length>1&&tt.push(tt[0]),new fn(tt);case"PATH":return dt=this.attr("d"),It.isDataSupported(dt)||(dt=b.normalizePathData(dt)),new It(dt);case"LINE":return yt=parseFloat(this.attr("x1"))||0,Lt=parseFloat(this.attr("y1"))||0,xt=parseFloat(this.attr("x2"))||0,Hn=parseFloat(this.attr("y2"))||0,new gt({x:yt,y:Lt},{x:xt,y:Hn})}return this.getBBox()},G.findIntersection=function(L,U){var K=this.svg().node,ie=this.getBBox({target:U=U||K}),pe=ie.center();if(ie.intersectionWithLineFromCenterToPoint(L)){var Me,Oe=this.tagName();if("RECT"===Oe){var Ue=new ct(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),st=this.getTransformToElement(U),tt=b.decomposeMatrix(st),dt=K.createSVGTransform();dt.setRotate(-tt.rotation,pe.x,pe.y);var yt=b.transformRect(Ue,dt.matrix.multiply(st));Me=new ct(yt).intersectionWithLineFromCenterToPoint(L,tt.rotation)}else if("PATH"===Oe||"POLYGON"===Oe||"POLYLINE"===Oe||"CIRCLE"===Oe||"ELLIPSE"===Oe){var Zn,Vt,qt,zt,xn,Lt=("PATH"===Oe?this:this.convertToPath()).sample(),Hn=1/0,In=[];for(Zn=0;Zn<Lt.length;Zn++)qt=(qt=b.createSVGPoint((Vt=Lt[Zn]).x,Vt.y)).matrixTransform(this.getTransformToElement(U)),(xn=(Vt=new ye(qt)).distance(pe)+(zt=1.1*Vt.distance(L)))<Hn?(Hn=xn,In=[{sample:Vt,refDistance:zt}]):xn<Hn+1&&In.push({sample:Vt,refDistance:zt});In.sort(function($n,cn){return $n.refDistance-cn.refDistance}),In[0]&&(Me=In[0].sample)}return Me}},G.setAttribute=function(L,U){var K=this.node;if(null===U)return this.removeAttr(L),this;var ie=b.qualifyAttr(L);return ie.ns?K.setAttributeNS(ie.ns,L,U):"id"===L?K.id=U:K.setAttribute(L,U),this},b.createSvgDocument=function(L){if(L){const K=`<svg xmlns="${t.svg}" xmlns:xlink="${t.xlink}" version="1.1">${L}</svg>`,{documentElement:ie}=b.parseXML(K,{async:!1});return ie}const U=document.createElementNS(t.svg,"svg");return U.setAttributeNS(t.xmlns,"xmlns:xlink",t.xlink),U.setAttribute("version","1.1"),U},b.createSVGStyle=function(L){const{node:U}=b("style",{type:"text/css"},[b.createCDATASection(L)]);return U},b.createCDATASection=function(L=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(L)},b.idCounter=0,b.uniqueId=function(){return"v-"+ ++b.idCounter},b.toNode=function(L){return b.isV(L)?L.node:L.nodeName&&L||L[0]},b.ensureId=function(L){return(L=b.toNode(L)).id||(L.id=b.uniqueId())},b.sanitizeText=function(L){return(L||"").replace(/ /g,"\xa0")},b.isUndefined=function(L){return void 0===L},b.isString=function(L){return"string"==typeof L},b.isObject=function(L){return L&&"object"==typeof L},b.isArray=Array.isArray,b.parseXML=function(L,U){var K;U=U||{};try{var ie=new DOMParser;b.isUndefined(U.async)||(ie.async=U.async),K=ie.parseFromString(L,"text/xml")}catch(pe){K=void 0}if(!K||K.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+L);return K},b.qualifyAttr=function(L){if(-1!==L.indexOf(":")){var U=L.split(":");return{ns:t[U[0]],local:U[1]}}return{ns:null,local:L}},b.transformRegex=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,b.transformSeparatorRegex=/[ ,]+/,b.transformationListRegex=/^(\w+)\((.*)\)/,b.transformStringToMatrix=function(L){var U=b.createSVGMatrix(),K=L&&L.match(b.transformRegex);if(!K)return U;for(var ie=0,pe=K.length;ie<pe;ie++){var Oe=K[ie].match(b.transformationListRegex);if(Oe){var Ue,st,tt,dt,yt,xt=b.createSVGMatrix(),Lt=Oe[2].split(b.transformSeparatorRegex);switch(Oe[1].toLowerCase()){case"scale":Ue=parseFloat(Lt[0]),st=void 0===Lt[1]?Ue:parseFloat(Lt[1]),xt=xt.scaleNonUniform(Ue,st);break;case"translate":tt=parseFloat(Lt[0]),dt=parseFloat(Lt[1]),xt=xt.translate(tt,dt);break;case"rotate":yt=parseFloat(Lt[0]),tt=parseFloat(Lt[1])||0,dt=parseFloat(Lt[2])||0,xt=0!==tt||0!==dt?xt.translate(tt,dt).rotate(yt).translate(-tt,-dt):xt.rotate(yt);break;case"skewx":yt=parseFloat(Lt[0]),xt=xt.skewX(yt);break;case"skewy":yt=parseFloat(Lt[0]),xt=xt.skewY(yt);break;case"matrix":xt.a=parseFloat(Lt[0]),xt.b=parseFloat(Lt[1]),xt.c=parseFloat(Lt[2]),xt.d=parseFloat(Lt[3]),xt.e=parseFloat(Lt[4]),xt.f=parseFloat(Lt[5]);break;default:continue}U=U.multiply(xt)}}return U},b.matrixToTransformString=function(L){return L||(L=!0),"matrix("+(void 0!==L.a?L.a:1)+","+(void 0!==L.b?L.b:0)+","+(void 0!==L.c?L.c:0)+","+(void 0!==L.d?L.d:1)+","+(void 0!==L.e?L.e:0)+","+(void 0!==L.f?L.f:0)+")"},b.parseTransformString=function(L){var U,K,ie;if(L){var pe=b.transformSeparatorRegex;if(L.trim().indexOf("matrix")>=0){var Me=b.transformStringToMatrix(L),Oe=b.decomposeMatrix(Me);ie=[Oe.scaleX,Oe.scaleY],K=[Oe.rotation];var Ue=[];(0!==(U=[Oe.translateX,Oe.translateY])[0]||0!==U[1])&&Ue.push("translate("+U+")"),(1!==ie[0]||1!==ie[1])&&Ue.push("scale("+ie+")"),0!==K[0]&&Ue.push("rotate("+K+")"),L=Ue.join(" ")}else{var st=L.match(/translate\((.*?)\)/);st&&(U=st[1].split(pe));var tt=L.match(/rotate\((.*?)\)/);tt&&(K=tt[1].split(pe));var dt=L.match(/scale\((.*?)\)/);dt&&(ie=dt[1].split(pe))}}var yt=ie&&ie[0]?parseFloat(ie[0]):1;return{value:L,translate:{tx:U&&U[0]?parseInt(U[0],10):0,ty:U&&U[1]?parseInt(U[1],10):0},rotate:{angle:K&&K[0]?parseInt(K[0],10):0,cx:K&&K[1]?parseInt(K[1],10):void 0,cy:K&&K[2]?parseInt(K[2],10):void 0},scale:{sx:yt,sy:ie&&ie[1]?parseFloat(ie[1]):yt}}},b.deltaTransformPoint=function(L,U){return{x:U.x*L.a+U.y*L.c+0,y:U.x*L.b+U.y*L.d+0}},b.decomposeMatrix=function(L){var U=b.deltaTransformPoint(L,{x:0,y:1}),K=b.deltaTransformPoint(L,{x:1,y:0}),ie=180/o*u(U.y,U.x)-90,pe=180/o*u(K.y,K.x);return{translateX:L.e,translateY:L.f,scaleX:c(L.a*L.a+L.b*L.b),scaleY:c(L.c*L.c+L.d*L.d),skewX:ie,skewY:pe,rotation:ie}},b.matrixToScale=function(L){var U,K,ie,pe;return L?(U=b.isUndefined(L.a)?1:L.a,pe=b.isUndefined(L.d)?1:L.d,K=L.b,ie=L.c):U=pe=1,{sx:K?c(U*U+K*K):U,sy:ie?c(ie*ie+pe*pe):pe}},b.matrixToRotate=function(L){var U={x:0,y:1};return L&&(U=b.deltaTransformPoint(L,U)),{angle:zr(xi(u(U.y,U.x))-90)}},b.matrixToTranslate=function(L){return{tx:L&&L.e||0,ty:L&&L.f||0}},b.isV=function(L){return L instanceof b},b.isVElement=b.isV,b.isSVGGraphicsElement=function(L){return!!L&&(L=b.toNode(L))instanceof SVGElement&&"function"==typeof L.getScreenCTM};var Ne=b("svg").node;return b.createSVGMatrix=function(L){var U=Ne.createSVGMatrix();for(var K in L)U[K]=L[K];return U},b.createSVGTransform=function(L){return b.isUndefined(L)?Ne.createSVGTransform():(L instanceof SVGMatrix||(L=b.createSVGMatrix(L)),Ne.createSVGTransformFromMatrix(L))},b.createSVGPoint=function(L,U){var K=Ne.createSVGPoint();return K.x=L,K.y=U,K},b.transformRect=function(L,U){var K=Ne.createSVGPoint();K.x=L.x,K.y=L.y;var ie=K.matrixTransform(U);K.x=L.x+L.width,K.y=L.y;var pe=K.matrixTransform(U);K.x=L.x+L.width,K.y=L.y+L.height;var Me=K.matrixTransform(U);K.x=L.x,K.y=L.y+L.height;var Oe=K.matrixTransform(U),Ue=v(ie.x,pe.x,Me.x,Oe.x),st=m(ie.x,pe.x,Me.x,Oe.x),tt=v(ie.y,pe.y,Me.y,Oe.y),dt=m(ie.y,pe.y,Me.y,Oe.y);return new ct(Ue,tt,st-Ue,dt-tt)},b.transformPoint=function(L,U){return new ye(b.createSVGPoint(L.x,L.y).matrixTransform(U))},b.transformLine=function(L,U){return new gt(b.transformPoint(L.start,U),b.transformPoint(L.end,U))},b.transformPolyline=function(L,U){var K=L instanceof fn?L.points:L;b.isArray(K)||(K=[]);for(var ie=[],pe=0,Me=K.length;pe<Me;pe++)ie[pe]=b.transformPoint(K[pe],U);return new fn(ie)},b.styleToObject=function(L){for(var U={},K=L.split(";"),ie=0;ie<K.length;ie++){var Me=K[ie].split("=");U[Me[0].trim()]=Me[1].trim()}return U},b.createSlicePathData=function(L,U,K,ie){var pe=2*o-1e-6,Me=L,Oe=U,Ue=K,st=ie,tt=(st<Ue&&(tt=Ue,Ue=st,st=tt),st-Ue),dt=tt<o?"0":"1",yt=T(Ue),xt=I(Ue),Lt=T(st),Hn=I(st);return tt>=pe?Me?"M0,"+Oe+"A"+Oe+","+Oe+" 0 1,1 0,"+-Oe+"A"+Oe+","+Oe+" 0 1,1 0,"+Oe+"M0,"+Me+"A"+Me+","+Me+" 0 1,0 0,"+-Me+"A"+Me+","+Me+" 0 1,0 0,"+Me+"Z":"M0,"+Oe+"A"+Oe+","+Oe+" 0 1,1 0,"+-Oe+"A"+Oe+","+Oe+" 0 1,1 0,"+Oe+"Z":Me?"M"+Oe*yt+","+Oe*xt+"A"+Oe+","+Oe+" 0 "+dt+",1 "+Oe*Lt+","+Oe*Hn+"L"+Me*Lt+","+Me*Hn+"A"+Me+","+Me+" 0 "+dt+",0 "+Me*yt+","+Me*xt+"Z":"M"+Oe*yt+","+Oe*xt+"A"+Oe+","+Oe+" 0 "+dt+",1 "+Oe*Lt+","+Oe*Hn+"L0,0Z"},b.mergeAttrs=function(L,U){for(var K in U)L[K]="class"===K?L[K]?L[K]+" "+U[K]:U[K]:"style"===K?b.isObject(L[K])&&b.isObject(U[K])?b.mergeAttrs(L[K],U[K]):b.isObject(L[K])?b.mergeAttrs(L[K],b.styleToObject(U[K])):b.isObject(U[K])?b.mergeAttrs(b.styleToObject(L[K]),U[K]):b.mergeAttrs(b.styleToObject(L[K]),b.styleToObject(U[K])):U[K];return L},b.annotateString=function(L,U,K){U=U||[];for(var Me,Ue,st,ie=(K=K||{}).offset||0,pe=[],Oe=[],tt=0;tt<L.length;tt++){Ue=Oe[tt]=L[tt];for(var dt=0;dt<U.length;dt++){var yt=U[dt];tt>=yt.start+ie&&tt<yt.end+ie&&(b.isObject(Ue)?Ue.attrs=b.mergeAttrs(b.mergeAttrs({},Ue.attrs),yt.attrs):Ue=Oe[tt]={t:L[tt],attrs:yt.attrs},K.includeAnnotationIndices&&(Ue.annotations||(Ue.annotations=[])).push(dt))}(st=Oe[tt-1])?b.isObject(Ue)&&b.isObject(st)?JSON.stringify(Ue.attrs)===JSON.stringify(st.attrs)?Me.t+=Ue.t:(pe.push(Me),Me=Ue):b.isObject(Ue)||b.isObject(st)?(pe.push(Me),Me=Ue):Me=(Me||"")+Ue:Me=Ue}return Me&&pe.push(Me),pe},b.findAnnotationsAtIndex=function(L,U){var K=[];return L&&L.forEach(function(ie){ie.start<U&&U<=ie.end&&K.push(ie)}),K},b.findAnnotationsBetweenIndexes=function(L,U,K){var ie=[];return L&&L.forEach(function(pe){(U>=pe.start&&U<pe.end||K>pe.start&&K<=pe.end||pe.start>=U&&pe.end<K)&&ie.push(pe)}),ie},b.shiftAnnotations=function(L,U,K){return L&&L.forEach(function(ie){ie.start<U&&ie.end>=U?ie.end+=K:ie.start>=U&&(ie.start+=K,ie.end+=K)}),L},b.convertLineToPathData=function(L){return["M",(L=b(L)).attr("x1"),L.attr("y1"),"L",L.attr("x2"),L.attr("y2")].join(" ")},b.convertPolygonToPathData=function(L){var U=b.getPointsFromSvgNode(L);return 0===U.length?null:b.svgPointsToPath(U)+" Z"},b.convertPolylineToPathData=function(L){var U=b.getPointsFromSvgNode(L);return 0===U.length?null:b.svgPointsToPath(U)},b.svgPointsToPath=function(L){for(var U=0,K=L.length;U<K;U++)L[U]=L[U].x+" "+L[U].y;return"M "+L.join(" L")},b.getPointsFromSvgNode=function(L){var U=[],K=(L=b.toNode(L)).points;if(K)for(var ie=0,pe=K.numberOfItems;ie<pe;ie++)U.push(K.getItem(ie));return U},b.KAPPA=.551784,b.convertCircleToPathData=function(L){L=b(L);var U=parseFloat(L.attr("cx"))||0,K=parseFloat(L.attr("cy"))||0,ie=parseFloat(L.attr("r")),pe=ie*b.KAPPA;return["M",U,K-ie,"C",U+pe,K-ie,U+ie,K-pe,U+ie,K,"C",U+ie,K+pe,U+pe,K+ie,U,K+ie,"C",U-pe,K+ie,U-ie,K+pe,U-ie,K,"C",U-ie,K-pe,U-pe,K-ie,U,K-ie,"Z"].join(" ")},b.convertEllipseToPathData=function(L){L=b(L);var U=parseFloat(L.attr("cx"))||0,K=parseFloat(L.attr("cy"))||0,ie=parseFloat(L.attr("rx")),pe=parseFloat(L.attr("ry"))||ie,Me=ie*b.KAPPA,Oe=pe*b.KAPPA;return["M",U,K-pe,"C",U+Me,K-pe,U+ie,K-Oe,U+ie,K,"C",U+ie,K+Oe,U+Me,K+pe,U,K+pe,"C",U-Me,K+pe,U-ie,K+Oe,U-ie,K,"C",U-ie,K-Oe,U-Me,K-pe,U,K-pe,"Z"].join(" ")},b.convertRectToPathData=function(L){return L=b(L),b.rectToPath({x:parseFloat(L.attr("x"))||0,y:parseFloat(L.attr("y"))||0,width:parseFloat(L.attr("width"))||0,height:parseFloat(L.attr("height"))||0,rx:parseFloat(L.attr("rx"))||0,ry:parseFloat(L.attr("ry"))||0})},b.rectToPath=function(L){var K=L.x,ie=L.y,pe=L.width,Me=L.height,Oe=v(L.rx||L["top-rx"]||0,pe/2),Ue=v(L.rx||L["bottom-rx"]||0,pe/2),st=v(L.ry||L["top-ry"]||0,Me/2),tt=v(L.ry||L["bottom-ry"]||0,Me/2);return(Oe||Ue||st||tt?["M",K,ie+st,"v",Me-st-tt,"a",Ue,tt,0,0,0,Ue,tt,"h",pe-2*Ue,"a",Ue,tt,0,0,0,Ue,-tt,"v",-(Me-tt-st),"a",Oe,st,0,0,0,-Oe,-st,"h",-(pe-2*Oe),"a",Oe,st,0,0,0,-Oe,st,"Z"]:["M",K,ie,"H",K+pe,"V",ie+Me,"H",K,"V",ie,"Z"]).join(" ")},b.normalizePathData=function(){var L="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",U=new RegExp("([a-z])["+L+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+L+"]*,?["+L+"]*)+)","ig"),K=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+L+"]*,?["+L+"]*","ig"),ie=Math,pe=ie.PI,Me=ie.sin,Oe=ie.cos,Ue=ie.tan,st=ie.asin,tt=ie.sqrt,dt=ie.abs;function yt(Vt,qt,Bt,zt,xn,$n){var cn=1/3,hn=2/3;return[cn*Vt+hn*Bt,cn*qt+hn*zt,cn*xn+hn*Bt,cn*$n+hn*zt,xn,$n]}function xt(Vt,qt,Bt){return{x:Vt*Oe(Bt)-qt*Me(Bt),y:Vt*Me(Bt)+qt*Oe(Bt)}}function Lt(Vt,qt,Bt,zt,xn,$n,cn,hn,gr,Mn){var Ct,an=120*pe/180,Cn=pe/180*(+xn||0),Ft=[];if(Mn)ei=Mn[0],xr=Mn[1],qs=Mn[2],eu=Mn[3];else{qt=(Ct=xt(Vt,qt,-Cn)).y;var Hr=((Vt=Ct.x)-(hn=(Ct=xt(hn,gr,-Cn)).x))/2,oi=(qt-(gr=Ct.y))/2,Jo=Hr*Hr/(Bt*Bt)+oi*oi/(zt*zt);Jo>1&&(Bt*=Jo=tt(Jo),zt*=Jo);var ql=Bt*Bt,ec=zt*zt,tc=($n==cn?-1:1)*tt(dt((ql*ec-ql*oi*oi-ec*Hr*Hr)/(ql*oi*oi+ec*Hr*Hr))),qs=tc*Bt*oi/zt+(Vt+hn)/2,eu=tc*-zt*Hr/Bt+(qt+gr)/2,ei=st(((qt-eu)/zt).toFixed(9)),xr=st(((gr-eu)/zt).toFixed(9));(ei=Vt<qs?pe-ei:ei)<0&&(ei=2*pe+ei),(xr=hn<qs?pe-xr:xr)<0&&(xr=2*pe+xr),cn&&ei>xr&&(ei-=2*pe),!cn&&xr>ei&&(xr-=2*pe)}var tu=xr-ei;if(dt(tu)>an){var Ep=xr,Pp=hn,Ap=gr;Ft=Lt(hn=qs+Bt*Oe(xr=ei+an*(cn&&xr>ei?1:-1)),gr=eu+zt*Me(xr),Bt,zt,xn,0,cn,Pp,Ap,[xr,Ep,qs,eu])}tu=xr-ei;var Ip=Oe(ei),Mp=Me(ei),kp=Oe(xr),Lp=Me(xr),Af=Ue(tu/4),If=4/3*(Bt*Af),Mf=4/3*(zt*Af),kf=[Vt,qt],Es=[Vt+If*Mp,qt-Mf*Ip],Lf=[hn+If*Lp,gr-Mf*kp],Of=[hn,gr];if(Es[0]=2*kf[0]-Es[0],Es[1]=2*kf[1]-Es[1],Mn)return[Es,Lf,Of].concat(Ft);for(var Rf=[],Op=(Ft=[Es,Lf,Of].concat(Ft).join().split(",")).length,Sa=0;Sa<Op;Sa++)Rf[Sa]=Sa%2?xt(Ft[Sa-1],Ft[Sa],Cn).y:xt(Ft[Sa],Ft[Sa+1],Cn).x;return Rf}function Zn(Vt){var qt=function In(Vt){if((!Array.isArray(Vt)||!Array.isArray(Vt&&Vt[0]))&&(Vt=function Hn(Vt){if(!Vt)return null;var qt={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},Bt=[];return String(Vt).replace(U,function(zt,xn,$n){var cn=[],hn=xn.toLowerCase();for($n.replace(K,function(gr,Mn){Mn&&cn.push(+Mn)}),"m"===hn&&cn.length>2&&(Bt.push([xn].concat(cn.splice(0,2))),hn="l",xn="m"===xn?"l":"L");cn.length>=qt[hn]&&(Bt.push([xn].concat(cn.splice(0,qt[hn]))),qt[hn]););}),Bt}(Vt)),!Vt||!Vt.length)return[["M",0,0]];for(var hn,qt=[],Bt=0,zt=0,xn=0,$n=0,gr=Vt.length,Mn=0;Mn<gr;Mn++){var an=[];qt.push(an);var Ft,Ct,Cn=Vt[Mn];if((hn=Cn[0])!=hn.toUpperCase())switch(an[0]=hn.toUpperCase(),an[0]){case"A":an[1]=Cn[1],an[2]=Cn[2],an[3]=Cn[3],an[4]=Cn[4],an[5]=Cn[5],an[6]=+Cn[6]+Bt,an[7]=+Cn[7]+zt;break;case"V":an[1]=+Cn[1]+zt;break;case"H":an[1]=+Cn[1]+Bt;break;case"M":for(xn=+Cn[1]+Bt,$n=+Cn[2]+zt,Ft=Cn.length,Ct=1;Ct<Ft;Ct++)an[Ct]=+Cn[Ct]+(Ct%2?Bt:zt);break;default:for(Ft=Cn.length,Ct=1;Ct<Ft;Ct++)an[Ct]=+Cn[Ct]+(Ct%2?Bt:zt)}else for(var Hr=Cn.length,oi=0;oi<Hr;oi++)an[oi]=Cn[oi];switch(an[0]){case"Z":Bt=+xn,zt=+$n;break;case"H":Bt=an[1];break;case"V":zt=an[1];break;case"M":xn=an[an.length-2],$n=an[an.length-1],Bt=an[an.length-2],zt=an[an.length-1];break;default:Bt=an[an.length-2],zt=an[an.length-1]}}return qt}(Vt),Bt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function zt(Ft,Ct,Hr){var oi,Jo;if(!Ft)return["C",Ct.x,Ct.y,Ct.x,Ct.y,Ct.x,Ct.y];switch(Ft[0]in{T:1,Q:1}||(Ct.qx=null,Ct.qy=null),Ft[0]){case"M":Ct.X=Ft[1],Ct.Y=Ft[2];break;case"A":Ft=0===parseFloat(Ft[1])||0===parseFloat(Ft[2])?["L",Ft[6],Ft[7]]:["C"].concat(Lt.apply(0,[Ct.x,Ct.y].concat(Ft.slice(1))));break;case"S":"C"===Hr||"S"===Hr?(oi=2*Ct.x-Ct.bx,Jo=2*Ct.y-Ct.by):(oi=Ct.x,Jo=Ct.y),Ft=["C",oi,Jo].concat(Ft.slice(1));break;case"T":"Q"===Hr||"T"===Hr?(Ct.qx=2*Ct.x-Ct.qx,Ct.qy=2*Ct.y-Ct.qy):(Ct.qx=Ct.x,Ct.qy=Ct.y),Ft=["C"].concat(yt(Ct.x,Ct.y,Ct.qx,Ct.qy,Ft[1],Ft[2]));break;case"Q":Ct.qx=Ft[1],Ct.qy=Ft[2],Ft=["C"].concat(yt(Ct.x,Ct.y,Ft[1],Ft[2],Ft[3],Ft[4]));break;case"H":Ft=["L"].concat(Ft[1],Ct.y);break;case"V":Ft=["L"].concat(Ct.x,Ft[1])}return Ft}function xn(Ft,Ct){if(Ft[Ct].length>7){Ft[Ct].shift();for(var Hr=Ft[Ct];Hr.length;)$n[Ct]="A",Ft.splice(Ct++,0,["C"].concat(Hr.splice(0,6)));Ft.splice(Ct,1),gr=qt.length}}for(var $n=[],cn="",hn="",gr=qt.length,Mn=0;Mn<gr;Mn++){qt[Mn]&&(cn=qt[Mn][0]),"C"!==cn&&($n[Mn]=cn,Mn>0&&(hn=$n[Mn-1])),qt[Mn]=zt(qt[Mn],Bt,hn),"A"!==$n[Mn]&&"C"===cn&&($n[Mn]="C"),xn(qt,Mn);var an=qt[Mn],Cn=an.length;Bt.x=an[Cn-2],Bt.y=an[Cn-1],Bt.bx=parseFloat(an[Cn-4])||Bt.x,Bt.by=parseFloat(an[Cn-3])||Bt.y}return(!qt[0][0]||"M"!==qt[0][0])&&qt.unshift(["M",0,0]),qt}return function(Vt){return Zn(Vt).join(",").split(",").join(" ")}}(),b.namespace=t,b.g=g,b}(),Mt={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},kt=function(e){return e&&e.toString().split(" ").map(function(t){return t.substr(0,Mt.classNamePrefix.length)!==Mt.classNamePrefix&&(t=Mt.classNamePrefix+t),t}).join(" ")},Gr=function(e){return e&&e.toString().split(" ").map(function(t){return t.substr(0,Mt.classNamePrefix.length)===Mt.classNamePrefix&&(t=t.substr(Mt.classNamePrefix.length)),t}).join(" ")},bn=function(e,t){for(var n={},r={},o=je.namespace.svg,u=t||o,c=document.createDocumentFragment(),v=[e,c,u];v.length>0;){u=v.pop();for(var m=v.pop(),T=v.pop(),I=0,b=T.length;I<b;I++){var G=T[I];if(!G.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");var ee=G.tagName;G.hasOwnProperty("namespaceURI")&&(u=G.namespaceURI);var oe=document.createElementNS(u,ee),Te=u===o,Pe=Te?je:Sn,De=G.attributes;De&&Pe(oe).attr(De);var Ne=G.style;if(Ne&&Sn(oe).css(Ne),G.hasOwnProperty("className")){var L=G.className;Te?oe.className.baseVal=L:oe.className=L}if(G.hasOwnProperty("textContent")&&(oe.textContent=G.textContent),G.hasOwnProperty("selector")){var U=G.selector;if(n[U])throw new Error("json-dom-parser: selector must be unique");n[U]=oe,Pe(oe).attr("joint-selector",U)}if(G.hasOwnProperty("groupSelector")){var K=G.groupSelector;Array.isArray(K)||(K=[K]);for(var ie=0,pe=K.length;ie<pe;ie++){var Me=K[ie],Oe=r[Me];Oe||(Oe=r[Me]=[]),Oe.push(oe)}}m.appendChild(oe);var Ue=G.children;Array.isArray(Ue)&&v.push(Ue,oe,u)}}return{fragment:c,selectors:n,groupSelectors:r}},Xn=function(e){let t=0;if(0===e.length)return t;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t},to=function(e,t,n){for(var o,r=Array.isArray(t)?t:t.split(n||"/"),u=0,c=r.length;u<c;){if(o=r[u++],Object(e)!==e||!(o in e))return;e=e[o]}return e},Oa=function(e,t){return"string"!=typeof t&&"number"!=typeof t&&(t=String(t)),!("constructor"===t&&"function"==typeof e[t]||"__proto__"===t)},ti=function(e,t,n,r){const o=Array.isArray(t)?t:t.split(r||"/"),u=o.length-1;let c=e,v=0;for(;v<u;v++){const m=o[v];if(!Oa(c,m))return e;c=c[m]||(c[m]={})}return c[o[u]]=n,e},no=function(e,t,n){const r=Array.isArray(t)?t:t.split(n||"/"),o=r.length-1;let u=e,c=0;for(;c<o;c++){const v=r[c];if(!Oa(u,v))return e;const m=u[v];if(!m)return e;u=m}return delete u[r[o]],e},wi=function(e){return wi.id=wi.id||1,e.id=void 0===e.id?"j_"+wi.id++:e.id,e.id},di=function(e){return e.replace(/[A-Z]/g,"-$&").toLowerCase()},ur=function(e){var t=e,n=e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0];if(n){for(var r in e)void 0===n[r]&&(n[r]=e[r]);t=n}var o=t.target;if(o){var u=o.correspondingUseElement;u&&(t.target=u)}return t},ca=function(){var e;if("undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!e){var t=0;e=function(n){var r=(new Date).getTime(),o=Math.max(0,16-(r-t)),u=setTimeout(function(){n(r+o)},o);return t=r+o,u}}return function(n,r,...o){return e(void 0!==r?n.bind(r,...o):n)}}(),Ri=((t="undefined"!=typeof window)&&(e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),e=e||clearTimeout,t?e.bind(window):e),ln=function(e){return Et(e)&&"%"===e.slice(-1)},ro=function(e,t){var r=parseFloat(e);if(Number.isNaN(r))return null;var u,o={};if(o.value=r,null==t)u="[A-Za-z]*";else if(Array.isArray(t)){if(0===t.length)return null;u=t.join("|")}else Et(t)&&(u=t);var c=function n(v){var m=new RegExp("(?:\\d+(?:\\.\\d+)*)("+v+")$").exec(e);return m?m[1]:null}(u);return null===c?null:(o.unit=c,o)},io=function(e){if(Object(e)!==e){var t=0;return isFinite(e)&&(t=+e),{top:t,right:t,bottom:t,left:t}}var n,r,o,u;return n=r=o=u=0,isFinite(e.vertical)&&(n=o=+e.vertical),isFinite(e.horizontal)&&(r=u=+e.horizontal),isFinite(e.top)&&(n=+e.top),isFinite(e.right)&&(r=+e.right),isFinite(e.bottom)&&(o=+e.bottom),isFinite(e.left)&&(u=+e.left),{top:n,right:r,bottom:o,left:u}},Qu={linear:function(e){return e},quad:function(e){return e*e},cubic:function(e){return e*e*e},inout:function(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)},exponential:function(e){return Math.pow(2,10*(e-1))},bounce:function(e){for(var t=0,n=1;;t+=n,n/=2)if(e>=(7-4*t)/11){var r=(11-6*t-11*e)/4;return-r*r+n*n}},reverse:function(e){return function(t){return 1-e(1-t)}},reflect:function(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}},clamp:function(e,t,n){return t=t||0,n=n||1,function(r){var o=e(r);return o<t?t:o>n?n:o}},back:function(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}},elastic:function(e){return e||(e=1.5),function(t){return Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*e/3*t)}}},ou={number:function(e,t){var n=t-e;return function(r){return e+n*r}},object:function(e,t){var n=Object.keys(e);return function(r){var o,u,c={};for(o=n.length-1;-1!=o;o--)c[u=n[o]]=e[u]+(t[u]-e[u])*r;return c}},hexColor:function(e,t){var n=parseInt(e.slice(1),16),r=parseInt(t.slice(1),16),o=255&n,u=(255&r)-o,c=65280&n,v=(65280&r)-c,m=16711680&n,T=(16711680&r)-m;return function(I){return"#"+(1<<24|o+u*I&255|c+v*I&65280|m+T*I&16711680).toString(16).slice(1)}},unit:function(e,t){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=n.exec(e),o=n.exec(t),u=o[1].indexOf("."),c=u>0?o[1].length-u-1:0,v=+o[1]-(e=+r[1]),m=r[2];return function(T){return(e+v*T).toFixed(c)+m}}},qu={outline:function(e){var n=Number.isFinite(e.margin)?e.margin:2,r=Number.isFinite(e.width)?e.width:1;return Qr('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:e.color||"blue",opacity:Number.isFinite(e.opacity)?e.opacity:1,outerRadius:n+r,innerRadius:n})},highlight:function(e){return Qr('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:e.color||"red",width:Number.isFinite(e.width)?e.width:1,blur:Number.isFinite(e.blur)?e.blur:0,opacity:Number.isFinite(e.opacity)?e.opacity:1})},blur:function(e){var t=Number.isFinite(e.x)?e.x:2;return Qr('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(e.y)?[t,e.y]:t})},dropShadow:function(e){var t="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return Qr(t)({dx:e.dx||0,dy:e.dy||0,opacity:Number.isFinite(e.opacity)?e.opacity:1,color:e.color||"black",blur:Number.isFinite(e.blur)?e.blur:4})},grayscale:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return Qr('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},sepia:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return Qr('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},saturate:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return Qr('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-t})},hueRotate:function(e){return Qr('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:e.angle||0})},invert:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return Qr('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:t,amount2:1-t})},brightness:function(e){return Qr('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(e.amount)?e.amount:1})},contrast:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return Qr('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:t,amount2:.5-t/2})}},Qr=function(e){var t=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(n){return n=n||{},e.replace(t,function(r){for(var o=Array.from(arguments),u=o.slice(1,4).find(function(m){return!!m}),c=u.split("."),v=n[c.shift()];void 0!==v&&c.length;)v=v[c.shift()];return void 0!==v?v:""})}},jt=Wt.assign,Si=Wt.defaults,Un=Wt.defaultsDeep,Mr=Wt.invokeMap||Wt.invoke,dr=Wt.sortedIndexBy||Wt.sortedIndex,qr=Wt.uniqBy||Wt.uniq,Ti=Wt.clone,hi=Wt.cloneDeep,So=Wt.isEmpty,os=Wt.isEqual,Nn=Wt.isFunction,Jn=Wt.isPlainObject,me=Wt.toArray,Be=Wt.groupBy,Zt=Wt.flattenDeep,Dn=Wt.without,hr=Wt.difference,fa=Wt.union,so=Wt.has,J=Wt.result,ce=Wt.omit,we=Wt.pick,Ee=Wt.forIn,Ze=Wt.camelCase,Ge=Wt.uniqueId,at=function(){if(Wt.mergeWith){var e=Array.from(arguments),t=e[e.length-1],n=Nn(t)?t:on;return e.push(function(r,o){var u=n(r,o);return void 0!==u?u:Array.isArray(r)&&!Array.isArray(o)?o:void 0}),Wt.mergeWith.apply(this,e)}return Wt.merge.apply(this,arguments)},vt=function(e){return!!e&&("object"==typeof e||"function"==typeof e)},Tt=function(e){return"number"==typeof e||!!e&&"object"==typeof e&&"[object Number]"===Object.prototype.toString.call(e)},Et=function(e){return"string"==typeof e||!!e&&"object"==typeof e&&"[object String]"===Object.prototype.toString.call(e)},on=function(){};var e,t,rn=f(71066);function Ot(e){e=qr(e);const t=me(e).reduce(function(n,r){return n[r.id]=r.clone(),n},{});return me(e).forEach(function(n){const r=t[n.id];if(r.isLink()){const c=r.source(),v=r.target();c.id&&t[c.id]&&r.prop("source/id",t[c.id].id),v.id&&t[v.id]&&r.prop("target/id",t[v.id].id)}const o=n.get("parent");o&&t[o]&&r.set("parent",t[o].id);const u=me(n.get("embeds")).reduce(function(c,v){return t[v]&&c.push(t[v].id),c},[]);So(u)||r.set("embeds",u)}),t}const Bn={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},Dr=Object.keys(Bn).map(e=>Bn[e]).join(""),Fr="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",er=/\s/g,Vo=new RegExp(`^(${Fr}\\*)?([${Dr}])([-+]{1,2}${Fr})?$`,"g");function uo(e){throw new Error(`Invalid calc() expression: ${e}`)}function ni(e,t){const n=Vo.exec(e.replace(er,""));n||uo(e),Vo.lastIndex=0;const[,r=1,o,u=0]=n,{x:c,y:v,width:m,height:T}=t;let I=0;switch(o){case Bn.width:I=m;break;case Bn.height:I=T;break;case Bn.x:I=c;break;case Bn.y:I=v;break;case Bn.minimum:I=Math.min(T,m);break;case Bn.maximum:I=Math.max(T,m);break;case Bn.diagonal:I=Math.sqrt(T*T+m*m)}return parseFloat(r)*I+function Is(e){if(!e)return 0;const[t]=e;switch(t){case"+":return parseFloat(e.substr(1));case"-":return-parseFloat(e.substr(1))}return parseFloat(e)}(u)}function Bo(e){return"string"==typeof e&&e.includes("calc")}const rc="calc(".length;function el(e,t){let n=e,r=0;for(;;){let o=n.indexOf("calc(",r);if(-1===o)return n;let u=o+rc,c=1;e:for(;;){switch(n[u]){case"(":c++;break;case")":if(c--,0===c)break e;break;case void 0:uo(n)}u++}let v=n.slice(o+rc,u);Bo(v)&&(v=el(v,t));const m=String(ni(v,t));n=n.slice(0,o)+m+n.slice(u+1),r=o+m.length}}function da(e,t){return function(n,r){var o=ln(n);n=parseFloat(n),o&&(n/=100);var u={};if(isFinite(n)){var c=o||n>=0&&n<=1?n*r[t]:Math.max(n+r[t],0);u[e]=c}return u}}function Na(e,t,n){return function(r,o){var c,u=ln(r);if(r=parseFloat(r),u&&(r/=100),isFinite(r)){var v=o[n]();c=u||r>0&&r<1?v[e]+o[t]*r:v[e]+r}var m=ye();return m[e]=c||0,m}}function ks(e,t,n){return function(r,o){var u;u="middle"===r?o[t]/2:r===n?o[t]:isFinite(r)?r>-1&&r<1?-o[t]*r:-r:ln(r)?o[t]*parseFloat(r)/100:0;var c=ye();return c[e]=-(o[e]+u),c}}function su(e,t){var n="joint-shape",r=t&&t.resetOffset;return function(o,u,c){var v=Sn(c),m=v.data(n);if(!m||m.value!==o){var T=e(o);m={value:o,shape:T,shapeBBox:T.bbox()},v.data(n,m)}var I=m.shape.clone(),b=m.shapeBBox.clone(),G=b.origin(),ee=u.origin();b.x=ee.x,b.y=ee.y;var oe=u.maxRectScaleToFit(b,ee);return I.scale(0===b.width||0===u.width?1:oe.sx,0===b.height||0===u.height?1:oe.sy,G),r&&I.translate(-G.x,-G.y),I}}function ic(e){var n=su(function t(r){return new It(je.normalizePathData(r))},e);return function(r,o,u){return{d:n(r,o,u).serialize()}}}function tl(e){var t=su(fn,e);return function(n,r,o){return{points:t(n,r,o).serialize()}}}function uu(e,t){var n=new ye(1,0);return function(r){var o,u,c=this[e](r);return c?(u=t.rotate?c.vector().vectorAngle(n):0,o=c.start):(o=this.path.start,u=0),0===u?{transform:"translate("+o.x+","+o.y+")"}:{transform:"translate("+o.x+","+o.y+") rotate("+u+")"}}}function as(e,t,n){return void 0!==n.text}function mr(){return this.model.isLink()}function Wr(e){var t={},n=e.stroke;"string"==typeof n&&(t.stroke=n,t.fill=n);var r=e.strokeOpacity;return void 0===r&&(r=e["stroke-opacity"]),void 0===r&&(r=e.opacity),void 0!==r&&(t["stroke-opacity"]=r,t["fill-opacity"]=r),t}function oc(e){const{paper:t}=this;return`url(#${"pattern"===e.type?t.definePattern(e):t.defineGradient(e)})`}const Tn={xlinkHref:{set:"xlink:href"},xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},filter:{qualify:Jn,set:function(e){return"url(#"+this.paper.defineFilter(e)+")"}},fill:{qualify:Jn,set:oc},stroke:{qualify:Jn,set:oc},sourceMarker:{qualify:Jn,set:function(e,t,n,r){return e=jt(Wr(r),e),{"marker-start":"url(#"+this.paper.defineMarker(e)+")"}}},targetMarker:{qualify:Jn,set:function(e,t,n,r){return e=jt(Wr(r),{transform:"rotate(180)"},e),{"marker-end":"url(#"+this.paper.defineMarker(e)+")"}}},vertexMarker:{qualify:Jn,set:function(e,t,n,r){return e=jt(Wr(r),e),{"marker-mid":"url(#"+this.paper.defineMarker(e)+")"}}},text:{qualify:function(e,t,n){return!n.textWrap||!Jn(n.textWrap)},set:function(e,t,n,r){var o=Sn(n),u="joint-text",c=o.data(u),v=we(r,"lineHeight","annotations","textPath","x","textVerticalAnchor","eol","displayEmpty");const{x:m}=v;Bo(m)&&(v.x=el(m,t));var T=v.fontSize=r["font-size"]||r.fontSize,I=JSON.stringify([e,v]);if(void 0===c||c!==I){T&&n.setAttribute("font-size",T);var b=v.textPath;if(vt(b)){var G=b.selector;if("string"==typeof G){var ee=this.findBySelector(G)[0];ee instanceof SVGPathElement&&(v.textPath=jt({"xlink:href":"#"+ee.id},b))}}je(n).text(""+e,v),o.data(u,I)}}},textWrap:{qualify:Jn,set:function(e,t,n,r){var o=e.width||0,u={};u.width=ln(o)?t.width*parseFloat(o)/100:o<=0?t.width+o:o;var c=e.height||0;u.height=ln(c)?t.height*parseFloat(c)/100:c<=0?t.height+c:c;var v,m=e.text;void 0===m&&(m=r.text),v=void 0!==m?function(e,t,n={},r={}){var o=t.width,u=t.height,c=r.svgDocument||je("svg").node,v=je("tspan").node,m=je("text").attr(n).append(v).node,T=document.createTextNode("");m.style.opacity=0,m.style.display="block",v.style.display="block",v.appendChild(T),c.appendChild(m),r.svgDocument||document.body.appendChild(c);var I=r.separator||" ",b=r.eol||"\n",G=r.hyphen?new RegExp(r.hyphen):/[^\w\d]/,ee=r.maxLineCount;Tt(ee)||(ee=1/0);for(var De,Ne,L,oe=e.split(I),Te=[],Pe=[],U=0,K=0,ie=oe.length;U<ie;U++){var pe=oe[U];if(pe){var Me=!1;if(b&&pe.indexOf(b)>=0){if(pe.length>1){for(var Oe=pe.split(b),Ue=0,st=Oe.length-1;Ue<st;Ue++)Oe.splice(2*Ue+1,0,b);oe.splice(U,1,...Oe.filter(Bt=>""!==Bt)),U--,ie=oe.length;continue}Pe[++K]="",Me=!0}if(!Me)if(T.data=Pe[K]?Pe[K]+" "+pe:pe,v.getComputedTextLength()<=o)Pe[K]=T.data,(De||Ne)&&(Te[K++]=!0,De=0,Ne=0);else{if(!Pe[K]||De){var tt=!!De;if(De=pe.length-1,tt||!De){if(!De){if(!Pe[K]){Pe=[];break}oe.splice(U,2,pe+oe[U+1]),ie--,Te[K++]=!0,U--;continue}oe[U]=pe.substring(0,De),oe[U+1]=pe.substring(De)+(void 0===oe[U+1]?"":oe[U+1])}else{if(Ne)oe.splice(U,2,oe[U]+oe[U+1]),Ne=0;else{var dt=pe.search(G);dt>-1&&dt!==pe.length-1&&0!==dt&&(Ne=dt+1,De=0),oe.splice(U,1,pe.substring(0,Ne||De),pe.substring(Ne||De)),ie++}K&&!Te[K-1]&&K--}U--;continue}K++,U--}var yt=null;if(Pe.length>ee)yt=ee-1;else if(void 0!==u){var xt;void 0===L&&(L=(xt="auto"===n.lineHeight?{value:1.5,unit:"em"}:ro(n.lineHeight,["em"])||{value:1,unit:"em"}).value,"em"===xt.unit&&(L*=m.getBBox().height)),L*Pe.length>u&&(yt=Math.floor(u/L)-1)}if(null!==yt){Pe.splice(yt+1);var Lt=r.ellipsis;if(!Lt||yt<0)break;"string"!=typeof Lt&&(Lt="\u2026");var Hn=Pe[yt];if(!Hn&&!Me)break;var Zn,Vt,In=Hn.length;do{if(Vt=Hn[In],Zn=Hn.substring(0,In),Vt?Vt.match(I)&&(Zn+=Vt):Zn+="string"==typeof I?I:" ",T.data=Zn+=Lt,v.getComputedTextLength()<=o){Pe[yt]=Zn;break}In--}while(In>=0);break}}}return r.svgDocument?c.removeChild(m):document.body.removeChild(c),Pe.join(b)}(""+m,u,{"font-weight":r["font-weight"]||r.fontWeight,"font-size":r["font-size"]||r.fontSize,"font-family":r["font-family"]||r.fontFamily,lineHeight:r.lineHeight,"letter-spacing":"letter-spacing"in r?r["letter-spacing"]:r.letterSpacing},{svgDocument:this.paper.svg,ellipsis:e.ellipsis,hyphen:e.hyphen,maxLineCount:e.maxLineCount}):"",Tn.text.set.call(this,v,t,n,r)}},title:{qualify:function(e,t){return t instanceof SVGElement},set:function(e,t,n){var r=Sn(n),o="joint-title",u=r.data(o);if(void 0===u||u!==e){r.data(o,e);var c=n.firstChild;if(c&&"TITLE"===c.tagName.toUpperCase())c.textContent=e;else{var v=document.createElementNS(n.namespaceURI,"title");v.textContent=e,n.insertBefore(v,c)}}}},lineHeight:{qualify:as},textVerticalAnchor:{qualify:as},textPath:{qualify:as},annotations:{qualify:as},eol:{qualify:as},displayEmpty:{qualify:as},port:{set:function(e){return null===e||void 0===e.id?e:e.id}},style:{qualify:Jn,set:function(e,t,n){Sn(n).css(e)}},html:{set:function(e,t,n){Sn(n).html(e+"")}},ref:{},refX:{position:Na("x","width","origin")},refY:{position:Na("y","height","origin")},refDx:{position:Na("x","width","corner")},refDy:{position:Na("y","height","corner")},refWidth:{set:da("width","width")},refHeight:{set:da("height","height")},refRx:{set:da("rx","width")},refRy:{set:da("ry","height")},refRInscribed:{set:function(e){var t=da("r","width"),n=da("r","height");return function(r,o){return(o.height>o.width?t:n)(r,o)}}()},refRCircumscribed:{set:function(e,t){var n=ln(e);e=parseFloat(e),n&&(e/=100);var o,r=Math.sqrt(t.height*t.height+t.width*t.width);return isFinite(e)&&(o=n||e>=0&&e<=1?e*r:Math.max(e+r,0)),{r:o}}},refCx:{set:da("cx","width")},refCy:{set:da("cy","height")},xAlignment:{offset:ks("x","width","right")},yAlignment:{offset:ks("y","height","bottom")},resetOffset:{offset:function(e,t){return e?{x:-t.x,y:-t.y}:{x:0,y:0}}},refDResetOffset:{set:ic({resetOffset:!0})},refDKeepOffset:{set:ic({resetOffset:!1})},refPointsResetOffset:{set:tl({resetOffset:!0})},refPointsKeepOffset:{set:tl({resetOffset:!1})},connection:{qualify:mr,set:function({stubs:e=0}){let t;if(isFinite(e)&&0!==e){let n;n=e<0?(this.getConnectionLength()+e)/2:e;const r=this.getConnection(),o=r.divideAtLength(n),u=r.divideAtLength(-n);o&&u&&(t=`${o[0].serialize()} ${u[1].serialize()}`)}return{d:t||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:mr,set:uu("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:mr,set:uu("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:mr,set:uu("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:mr,set:uu("getTangentAtRatio",{rotate:!1})}};["transform","d","points","width","height","cx","cy","r","rx","ry","x1","x2","y1","y2","x","y","dx","dy"].forEach(e=>{Tn[e]={qualify:Bo,set:function(n,r){return{[e]:el(n,r)}}}}),Tn.refR=Tn.refRInscribed,Tn.refD=Tn.refDResetOffset,Tn.refPoints=Tn.refPointsResetOffset,Tn.atConnectionLength=Tn.atConnectionLengthKeepGradient,Tn.atConnectionRatio=Tn.atConnectionRatioKeepGradient,Tn.refX2=Tn.refX,Tn.refY2=Tn.refY,Tn.refWidth2=Tn.refWidth,Tn.refHeight2=Tn.refHeight,Tn["ref-x"]=Tn.refX,Tn["ref-y"]=Tn.refY,Tn["ref-dy"]=Tn.refDy,Tn["ref-dx"]=Tn.refDx,Tn["ref-width"]=Tn.refWidth,Tn["ref-height"]=Tn.refHeight,Tn["x-alignment"]=Tn.xAlignment,Tn["y-alignment"]=Tn.yAlignment;const nl=Tn,To=rn.Model.extend({constructor:function(e,t){var n,r=e||{};"function"==typeof this.preinitialize&&this.preinitialize.apply(this,arguments),this.cid=Ge("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(r=this.parse(r,t)||{}),(n=J(this,"defaults"))&&(r=at({},n,r)),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},translate:function(e,t,n){throw new Error("Must define a translate() method.")},toJSON:function(){const t=J(this.constructor.prototype,"defaults").attrs||{},r={};Ee(this.attributes.attrs,function(u,c){const v=t[c];Ee(u,function(m,T){vt(m)&&!Array.isArray(m)?Ee(m,function(I,b){(!v||!v[T]||!os(v[T][b],I))&&(r[c]=r[c]||{},(r[c][T]||(r[c][T]={}))[b]=I)}):(!v||!os(v[T],m))&&(r[c]=r[c]||{},r[c][T]=m)})});const o=hi(ce(this.attributes,"attrs"));return o.attrs=r,o},initialize:function(e){(!e||!e.id)&&this.set("id",this.generateId(),{silent:!0}),this._transitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},generateId:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},processPorts:function(){var e=this.ports,t={};Ee(this.get("attrs"),function(u,c){u&&u.port&&(void 0!==u.port.id?t[u.port.id]=u.port:t[u.port]={id:u.port})});var n={};Ee(e,function(u,c){t[c]||(n[c]=!0)}),this.graph&&!So(n)&&(this.graph.getConnectedLinks(this,{inbound:!0}).forEach(function(u){n[u.get("target").port]&&u.remove()}),this.graph.getConnectedLinks(this,{outbound:!0}).forEach(function(u){n[u.get("source").port]&&u.remove()})),this.ports=t},remove:function(e={}){const{graph:t,collection:n}=this;if(!t)return n&&n.remove(this,e),this;t.startBatch("remove");const r=this.getParentCell();r&&r.unembed(this,e);const o=this.getEmbeddedCells();for(let u=0,c=o.length;u<c;u++){const v=o[u];v&&v.remove(e)}return this.trigger("remove",this,t.attributes.cells,e),t.stopBatch("remove"),this},toFront:function(e){var t=this.graph;if(t){e=e||{};var r,n=t.maxZIndex();e.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==e.breadthFirst})).unshift(this):r=[this],n=n-r.length+1;var o=t.get("cells"),u=o.indexOf(this)!==o.length-r.length;u||(u=r.some(function(c,v){return c.get("z")!==n+v})),u&&(this.startBatch("to-front"),n+=r.length,r.forEach(function(c,v){c.set("z",n+v,e)}),this.stopBatch("to-front"))}return this},toBack:function(e){var t=this.graph;if(t){e=e||{};var r,n=t.minZIndex();e.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==e.breadthFirst})).unshift(this):r=[this];var u=0!==t.get("cells").indexOf(this);u||(u=r.some(function(c,v){return c.get("z")!==n+v})),u&&(this.startBatch("to-back"),n-=r.length,r.forEach(function(c,v){c.set("z",n+v,e)}),this.stopBatch("to-back"))}return this},parent:function(e,t){return void 0===e?this.get("parent"):this.set("parent",e,t)},embed:function(e,t){const n=Array.isArray(e)?e:[e];if(!this.canEmbed(n))throw new Error("Recursive embedding not allowed.");return this._embedCells(n,t),this},unembed:function(e,t){const n=Array.isArray(e)?e:[e];return this._unembedCells(n,t),this},canEmbed:function(e){return(Array.isArray(e)?e:[e]).every(n=>this!==n&&!this.isEmbeddedIn(n))},_embedCells:function(e,t){const n="embed";this.startBatch(n);const r=jt([],this.get("embeds"));e.forEach(o=>{r[o.isLink()?"unshift":"push"](o.id),o.parent(this.id,t)}),this.set("embeds",qr(r),t),this.stopBatch(n)},_unembedCells:function(e,t){const n="unembed";this.startBatch(n),e.forEach(r=>r.unset("parent",t)),this.set("embeds",Dn(this.get("embeds"),...e.map(r=>r.id)),t),this.stopBatch(n)},getParentCell:function(){var e=this.parent(),t=this.graph;return e&&t&&t.getCell(e)||null},getAncestors:function(){var e=[];if(!this.graph)return e;for(var t=this.getParentCell();t;)e.push(t),t=t.getParentCell();return e},getEmbeddedCells:function(e){if(e=e||{},this.graph){var t;if(e.deep)if(e.breadthFirst){t=[];for(var n=this.getEmbeddedCells();n.length>0;){var r=n.shift();t.push(r),n.push.apply(n,r.getEmbeddedCells())}}else(t=this.getEmbeddedCells()).forEach(function(o){t.push.apply(t,o.getEmbeddedCells(e))});else t=me(this.get("embeds")).map(this.graph.getCell,this.graph);return t}return[]},isEmbeddedIn:function(e,t){var n=Et(e)?e:e.id,r=this.parent();if(t=Si({deep:!0},t),this.graph&&t.deep){for(;r;){if(r===n)return!0;r=this.graph.getCell(r).parent()}return!1}return r===n},isEmbedded:function(){return!!this.parent()},clone:function(e){if((e=e||{}).deep)return me(Ot([this].concat(this.getEmbeddedCells({deep:!0}))));var t=rn.Model.prototype.clone.apply(this,arguments);return t.set("id",this.generateId()),t.unset("embeds"),t.unset("parent"),t},prop:function(e,t,n){var r="/",o=Et(e);if(o||Array.isArray(e)){if(arguments.length>1){var u,c;o?c=(u=e).split("/"):(u=e.join(r),c=e.slice());var v=c[0],m=c.length;if((n=n||{}).propertyPath=u,n.propertyValue=t,n.propertyPathArray=c,1===m)return this.set(v,t,n);for(var T={},I=T,b=v,G=1;G<m;G++){var ee=c[G],oe=Number.isFinite(o?Number(ee):ee);I=I[b]=oe?[]:{},b=ee}T=ti(T,c,t,"/");var Te=at({},this.attributes);n.rewrite&&no(Te,u,"/");var Pe=at(Te,T);return this.set(v,Pe[v],n)}return to(this.attributes,e,r)}return this.set(at({},this.attributes,e),t)},removeProp:function(e,t){t=t||{};var n=Array.isArray(e)?e:e.split("/"),r=n[0];if("attrs"===r&&(t.dirty=!0),1===n.length)return this.unset(e,t);var o=n.slice(1),u=hi(this.get(r));return no(u,o,"/"),this.set(r,u,t)},attr:function(e,t,n){var r=Array.from(arguments);return 0===r.length?this.get("attrs"):(r[0]=Array.isArray(e)?["attrs"].concat(e):Et(e)?"attrs/"+e:{attrs:e},this.prop.apply(this,r))},removeAttr:function(e,t){return Array.isArray(e)?this.removeProp(["attrs"].concat(e)):this.removeProp("attrs/"+e,t)},transition:function(e,t,n,r){r=r||"/",n=jt({duration:100,delay:10,timingFunction:Qu.linear,valueFunction:ou.number},n);var c,u=0,v=function(I){var b,G,ee;(G=(I-=u=u||I)/n.duration)<1?this._transitionIds[e]=b=ca(v):(G=1,delete this._transitionIds[e]),ee=c(n.timingFunction(G)),n.transitionId=b,this.prop(e,ee,n),b||this.trigger("transition:end",this,e)}.bind(this),m=function(I){this.stopTransitions(e),c=n.valueFunction(to(this.attributes,e,r),t),this._transitionIds[e]=ca(I),this.trigger("transition:start",this,e)}.bind(this),T=setTimeout(m,n.delay,v);return this._transitionIds[e]=T,T},getTransitions:function(){return Object.keys(this._transitionIds)},stopTransitions:function(e,t="/"){const{_transitionIds:n}=this;let r=Object.keys(n);if(e){const o=e.split(t);r=r.filter(u=>os(o,u.split(t).slice(0,o.length)))}return r.forEach(o=>{const u=n[o];Ri(u),clearTimeout(u),delete n[o],this.trigger("transition:end",this,u)}),this},addTo:function(e,t){return e.addCell(this,t),this},findView:function(e){return e.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(e,t){return this.graph&&this.graph.startBatch(e,jt({},t,{cell:this})),this},stopBatch:function(e,t){return this.graph&&this.graph.stopBatch(e,jt({},t,{cell:this})),this},getChangeFlag:function(e){var t=0;if(!e)return t;for(var n in e)!e.hasOwnProperty(n)||!this.hasChanged(n)||(t|=e[n]);return t},angle:function(){return 0},position:function(){return new ye(0,0)},getPointFromConnectedLink:function(){return new ye},getBBox:function(){return new ct(0,0,0,0)},getPointRotatedAroundCenter(e,t,n){const r=new ye(t,n);return e&&r.rotate(this.getBBox().center(),e),r},getAbsolutePointFromRelative(e,t){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(e,t))},getRelativePointFromAbsolute(e,t){return this.getPointRotatedAroundCenter(this.angle(),e,t).difference(this.position())}},{getAttributeDefinition:function(e){var t=this.attributes;return t&&t[e]||nl[e]},define:function(e,t,n,r){n=jt({defaults:Un({type:e},t,this.prototype.defaults)},n);var o=this.extend(n,r);return"undefined"!=typeof joint&&so(joint,"shapes")&&ti(joint.shapes,e,o,"."),o}}),ha=To.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(e){return this.set({source:{x:0,y:0},target:{x:0,y:0}},e)},source:function(e,t,n){return void 0===e?Ti(this.get("source")):e instanceof To?((r=Ti(t)||{}).id=e.id,this.set("source",r,n)):Jn(e)?this.set("source",r=e,t):((r=Ti(t)||{}).x=e.x,r.y=e.y,this.set("source",r,n));var r},target:function(e,t,n){return void 0===e?Ti(this.get("target")):e instanceof To?((r=Ti(t)||{}).id=e.id,this.set("target",r,n)):Jn(e)?this.set("target",r=e,t):((r=Ti(t)||{}).x=e.x,r.y=e.y,this.set("target",r,n));var r},router:function(e,t,n){if(void 0===e){var r=this.get("router");return r?"object"==typeof r?Ti(r):r:this.get("manhattan")?{name:"orthogonal"}:null}var o="object"==typeof e||"function"==typeof e;return this.set("router",o?e:{name:e,args:t},o?t:n)},connector:function(e,t,n){if(void 0===e){var r=this.get("connector");return r?"object"==typeof r?Ti(r):r:this.get("smooth")?{name:"smooth"}:null}var o="object"==typeof e||"function"==typeof e;return this.set("connector",o?e:{name:e,args:t},o?t:n)},label:function(e,t,n){var r=this.labels();return(e=isFinite(e)&&null!==e?0|e:0)<0&&(e=r.length+e),arguments.length<=1?this.prop(["labels",e]):this.prop(["labels",e],t,n)},labels:function(e,t){return 0===arguments.length?(e=this.get("labels"),Array.isArray(e)?e.slice():[]):(Array.isArray(e)||(e=[]),this.set("labels",e,t))},hasLabels:function(){const{labels:e}=this.attributes;return Array.isArray(e)&&e.length>0},insertLabel:function(e,t,n){if(!t)throw new Error("dia.Link: no label provided");var r=this.labels(),o=r.length;return(e=isFinite(e)&&null!==e?0|e:o)<0&&(e=o+e+1),r.splice(e,0,t),this.labels(r,n)},appendLabel:function(e,t){return this.insertLabel(-1,e,t)},removeLabel:function(e,t){var n=this.labels();return e=isFinite(e)&&null!==e?0|e:-1,n.splice(e,1),this.labels(n,t)},vertex:function(e,t,n){var r=this.vertices();if((e=isFinite(e)&&null!==e?0|e:0)<0&&(e=r.length+e),arguments.length<=1)return this.prop(["vertices",e]);var o=this._normalizeVertex(t);return this.prop(["vertices",e],o,n)},vertices:function(e,t){if(0===arguments.length)return e=this.get("vertices"),Array.isArray(e)?e.slice():[];Array.isArray(e)||(e=[]);for(var n=[],r=0;r<e.length;r++){var o=e[r],u=this._normalizeVertex(o);n.push(u)}return this.set("vertices",n,t)},insertVertex:function(e,t,n){if(!t)throw new Error("dia.Link: no vertex provided");var r=this.vertices(),o=r.length;(e=isFinite(e)&&null!==e?0|e:o)<0&&(e=o+e+1);var u=this._normalizeVertex(t);return r.splice(e,0,u),this.vertices(r,n)},removeVertex:function(e,t){var n=this.vertices();return e=isFinite(e)&&null!==e?0|e:-1,n.splice(e,1),this.vertices(n,t)},_normalizeVertex:function(e){return Jn(e)?e:{x:e.x,y:e.y}},translate:function(e,t,n){return(n=n||{}).translateBy=n.translateBy||this.id,n.tx=e,n.ty=t,this.applyToPoints(function(r){return{x:(r.x||0)+e,y:(r.y||0)+t}},n)},scale:function(e,t,n,r){return this.applyToPoints(function(o){return ye(o).scale(e,t,n).toJSON()},r)},applyToPoints:function(e,t){if(!Nn(e))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var n={},{source:r,target:o}=this.attributes;r.id||(n.source=e(r)),o.id||(n.target=e(o));var u=this.vertices();return u.length>0&&(n.vertices=u.map(e)),this.set(n,t)},getSourcePoint:function(){var e=this.getSourceCell();return e?e.getPointFromConnectedLink(this,"source"):new ye(this.source())},getTargetPoint:function(){var e=this.getTargetCell();return e?e.getPointFromConnectedLink(this,"target"):new ye(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const e=[this.getSourcePoint(),...this.vertices().map(ye),this.getTargetPoint()];return new fn(e)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(e){var t;if(this.graph){var n=this.getSourceElement(),r=this.getTargetElement(),o=this.getParentCell();n&&r&&(t=n===r||n.isEmbeddedIn(r)?r:r.isEmbeddedIn(n)?n:this.graph.getCommonAncestor(n,r)),o&&(!t||t.id!==o.id)&&o.unembed(this,e),t&&t.embed(this,e)}return t},hasLoop:function(e){e=e||{};var{source:t,target:n}=this.attributes,r=t.id,o=n.id;if(!r||!o)return!1;var u=r===o;if(!u&&e.deep&&this.graph){var c=this.getSourceCell(),v=this.getTargetCell();u=c.isEmbeddedIn(v)||v.isEmbeddedIn(c)}return u},getSourceCell:function(){const{graph:e,attributes:t}=this;var n=t.source;return n&&n.id&&e&&e.getCell(n.id)||null},getSourceElement:function(){var e=this,t={};do{if(t[e.id])return null;t[e.id]=!0,e=e.getSourceCell()}while(e&&e.isLink());return e},getTargetCell:function(){const{graph:e,attributes:t}=this;var n=t.target;return n&&n.id&&e&&e.getCell(n.id)||null},getTargetElement:function(){var e=this,t={};do{if(t[e.id])return null;t[e.id]=!0,e=e.getTargetCell()}while(e&&e.isLink());return e},getRelationshipAncestor:function(){var e;if(this.graph){var t=[this,this.getSourceElement(),this.getTargetElement()].filter(function(n){return!!n});e=this.graph.getCommonAncestor.apply(this.graph,t)}return e||null},isRelationshipEmbeddedIn:function(e){var t=Et(e)||Tt(e)?e:e.id,n=this.getRelationshipAncestor();return!!n&&(n.id===t||n.isEmbeddedIn(t))},_getDefaultLabel:function(){var e=this.get("defaultLabel")||this.defaultLabel||{},t={};return t.markup=e.markup||this.get("labelMarkup")||this.labelMarkup,t.position=e.position,t.attrs=e.attrs,t.size=e.size,t}},{endsEqual:function(e,t){return e.id===t.id&&(e.port===t.port||!e.port&&!t.port)}});function ss(e,t,n){var r=e.toJSON();return r.angle=t||0,Si({},n,r)}function Da(e,t,n){return e.map(function(r,o,u){var c=this.pointAt((o+.5)/u.length);return(r.dx||r.dy)&&c.offset(r.dx||0,r.dy||0),ss(c.round(),0,r)},Li(t,n))}function Fa(e,t,n,r){var o=t.center(),u=t.width/t.height,c=t.topMiddle(),v=Or.fromRect(t);return e.map(function(m,T,I){var b=n+r(T,I.length),G=c.clone().rotate(o,-b).scale(u,1,o),ee=m.compensateRotation?-v.tangentTheta(G):0;return(m.dx||m.dy)&&G.offset(m.dx||0,m.dy||0),m.dr&&G.move(o,m.dr),ss(G.round(),ee,m)})}function Va(e,t){var n=t.x;Et(n)&&(n=parseFloat(n)/100*e.width);var r=t.y;return Et(r)&&(r=parseFloat(r)/100*e.height),Pr(n||0,r||0)}const Ls=function(e,t,n){return e.map(Va.bind(null,t))},lu=function(e,t,n){return n.fn(e,t,n)},us=function(e,t,n){return Da(e,Va(t,n.start||t.origin()),Va(t,n.end||t.corner()))},Nf=function(e,t,n){return Da(e,t.origin(),t.bottomLeft())},Df=function(e,t,n){return Da(e,t.topRight(),t.corner())},Ff=function(e,t,n){return Da(e,t.origin(),t.topRight())},Vf=function(e,t,n){return Da(e,t.bottomLeft(),t.corner())},Bf=function(e,t,n){var o=n.step||360/e.length;return Fa(e,t,n.startAngle||0,function(u){return u*o})},cu=function(e,t,n){var o=n.step||20;return Fa(e,t,n.startAngle||0,function(u,c){return(u+.5-c/2)*o})};function zi(e,t){return Un({},e,t,{x:0,y:0,angle:0,attrs:{".":{y:"0","text-anchor":"start"}}})}function rl(e,t,n,r){r=Si({},r,{offset:15});var c,v,m,T,o=t.center().theta(e),u=Q(t),I=r.offset,b=0;o<u[1]||o>u[2]?(m=".3em",c=I,v=0,T="start"):o<u[0]?(m="0",c=0,v=-I,n?(b=-90,T="start"):T="middle"):o<u[3]?(m=".3em",c=-I,v=0,T="end"):(m=".6em",c=0,v=I,n?(b=90,T="start"):T="middle");var G=Math.round;return zi({x:G(c),y:G(v),angle:b,attrs:{".":{y:m,"text-anchor":T}}})}function Q(e){var t=e.center(),n=t.theta(e.origin()),r=t.theta(e.bottomLeft()),o=t.theta(e.corner());return[n,t.theta(e.topRight()),o,r]}function Ba(e,t,n,r){var u,c,v,m,o=t.center().theta(e),T=(r=Si({},r,{offset:15})).offset,I=0,b=Q(t);o<b[1]||o>b[2]?(v=".3em",u=-T,c=0,m="end"):o<b[0]?(v=".6em",u=0,c=T,n?(I=90,m="start"):m="middle"):o<b[3]?(v=".3em",u=T,c=0,m="start"):(v="0em",u=0,c=-T,n?(I=-90,m="start"):m="middle");var G=Math.round;return zi({x:G(u),y:G(c),angle:I,attrs:{".":{y:v,"text-anchor":m}}})}function Os(e,t,n){n=Si({},n,{offset:20});var m,r=Pr(0,0),o=-e.theta(r),u=o,c=e.clone().move(r,n.offset).difference(e).round(),v=".3em";(o+90)%180==0?(m=t?"end":"middle",!t&&-270===o&&(v="0em")):o>-270&&o<-90?(m="start",u=o-180):m="end";var T=Math.round;return zi({x:T(c.x),y:T(c.y),angle:t?u:0,attrs:{".":{y:v,"text-anchor":m}}})}const Gi=function(e,t,n){return zi(n,t)},En=function(e,t,n){return zi(n,{x:-15,attrs:{".":{y:".3em","text-anchor":"end"}}})},Hf=function(e,t,n){return zi(n,{x:15,attrs:{".":{y:".3em","text-anchor":"start"}}})},jf=function(e,t,n){return zi(n,{y:-15,attrs:{".":{"text-anchor":"middle"}}})},Uf=function(e,t,n){return zi(n,{y:15,attrs:{".":{y:".6em","text-anchor":"middle"}}})},Ha=function(e,t,n){return rl(e,t,!0,n)},zf=function(e,t,n){return rl(e,t,!1,n)},Gf=function(e,t,n){return Ba(e,t,!0,n)},Wf=function(e,t,n){return Ba(e,t,!1,n)},$f=function(e,t,n){return Os(e.difference(t.center()),!1,n)},Yf=function(e,t,n){return Os(e.difference(t.center()),!0,n)};var Eo=function(e){var t=hi(e)||{};this.ports=[],this.groups={},this.portLayoutNamespace=w,this.portLabelLayoutNamespace=S,this._init(t)};Eo.prototype={getPorts:function(){return this.ports},getGroup:function(e){return this.groups[e]||{}},getPortsByGroup:function(e){return this.ports.filter(function(t){return t.group===e})},getGroupPortsMetrics:function(e,t){var n=this.getGroup(e),r=this.getPortsByGroup(e),o=n.position||{},u=o.name,c=this.portLayoutNamespace;c[u]||(u="left");var v=o.args||{},m=r.map(function(b){return b&&b.position&&b.position.args}),T=c[u](m,t,v),I={ports:r,result:[]};return me(T).reduce(function(b,G,ee){var oe=b.ports[ee];return b.result.push({portId:oe.id,portTransformation:G,labelTransformation:this._getPortLabelLayout(oe,ye(G),t),portAttrs:oe.attrs,portSize:oe.size,labelSize:oe.label.size}),b}.bind(this),I),I.result},_getPortLabelLayout:function(e,t,n){var r=this.portLabelLayoutNamespace,o=e.label.position.name||"left";return r[o]?r[o](t,n,e.label.position.args):null},_init:function(e){if(vt(e.groups))for(var t=Object.keys(e.groups),n=0,r=t.length;n<r;n++){var o=t[n];this.groups[o]=this._evaluateGroup(e.groups[o])}for(var u=me(e.items),c=0,v=u.length;c<v;c++)this.ports.push(this._evaluatePort(u[c]))},_evaluateGroup:function(e){return at(e,{position:this._getPosition(e.position,!0),label:this._getLabel(e,!0)})},_evaluatePort:function(e){var t=jt({},e),n=this.getGroup(e.group);return t.markup=t.markup||n.markup,t.attrs=at({},n.attrs,t.attrs),t.position=this._createPositionNode(n,t),t.label=at({},n.label,this._getLabel(t)),t.z=this._getZIndex(n,t),t.size=jt({},n.size,t.size),t},_getZIndex:function(e,t){return Tt(t.z)?t.z:Tt(e.z)||"auto"===e.z?e.z:"auto"},_createPositionNode:function(e,t){return at({name:"left",args:{}},e.position,{args:t.args})},_getPosition:function(e,t){var r,n={};Nn(e)?(r="fn",n.fn=e):Et(e)?r=e:void 0===e?r=t?"left":null:Array.isArray(e)?(r="absolute",n.x=e[0],n.y=e[1]):vt(e)&&(r=e.name,jt(n,e.args));var o={args:n};return r&&(o.name=r),o},_getLabel:function(e,t){var n=e.label||{},r=n;return r.position=this._getPosition(n.position,t),r}};const Xf={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var e=this.get("ports")||{},t={};me(e.items).forEach(function(v){t[v.id]=!0});var n=this.previous("ports")||{},r={};me(n.items).forEach(function(v){t[v.id]||(r[v.id]=!0)});var o=this.graph;o&&!So(r)&&(o.getConnectedLinks(this,{inbound:!0}).forEach(function(v){r[v.get("target").port]&&v.remove()}),o.getConnectedLinks(this,{outbound:!0}).forEach(function(v){r[v.get("source").port]&&v.remove()}))},hasPorts:function(){var e=this.prop("ports/items");return Array.isArray(e)&&e.length>0},hasPort:function(e){return-1!==this.getPortIndex(e)},getPorts:function(){return hi(this.prop("ports/items"))||[]},getGroupPorts:function(e){const t=me(this.prop(["ports","items"])).filter(n=>n.group===e);return hi(t)},getPort:function(e){return hi(me(this.prop("ports/items")).find(function(t){return t.id&&t.id===e}))},getPortsPositions:function(e){return this._portSettingsData.getGroupPortsMetrics(e,ct(this.size())).reduce(function(n,r){var o=r.portTransformation;return n[r.portId]={x:o.x,y:o.y,angle:o.angle},n},{})},getPortIndex:function(e){var t=vt(e)?e.id:e;return this._isValidPortId(t)?me(this.prop("ports/items")).findIndex(function(n){return n.id===t}):-1},addPort:function(e,t){if(!vt(e)||Array.isArray(e))throw new Error("Element: addPort requires an object.");var n=jt([],this.prop("ports/items"));return n.push(e),this.prop("ports/items",n,t),this},insertPort:function(e,t,n){const r="number"==typeof e?e:this.getPortIndex(e);if(!vt(t)||Array.isArray(t))throw new Error("dia.Element: insertPort requires an object.");const o=jt([],this.prop("ports/items"));return o.splice(r,0,t),this.prop("ports/items",o,n),this},portProp:function(e,t,n,r){var o=this.getPortIndex(e);if(-1===o)throw new Error("Element: unable to find port with id "+e);var u=Array.prototype.slice.call(arguments,1);return Array.isArray(t)?u[0]=["ports","items",o].concat(t):Et(t)?u[0]=["ports/items/",o,"/",t].join(""):(u=["ports/items/"+o],Jn(t)&&(u.push(t),u.push(n))),this.prop.apply(this,u)},_validatePorts:function(){var e=this.get("ports")||{},t=[],n=me((e=e||{}).items);return n.forEach(function(r){"object"!=typeof r&&t.push("Element: invalid port ",r),this._isValidPortId(r.id)||(r.id=this.generatePortId())},this),qr(n,"id").length!==n.length&&t.push("Element: found id duplicities in ports."),t},generatePortId:function(){return this.generateId()},_isValidPortId:function(e){return null!=e&&!vt(e)},addPorts:function(e,t){return e.length&&this.prop("ports/items",jt([],this.prop("ports/items")).concat(e),t),this},removePort:function(e,t){const n=t||{},r=this.getPortIndex(e);if(-1!==r){const o=jt([],this.prop(["ports","items"]));o.splice(r,1),n.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],o,n),this.stopBatch("port-remove")}return this},removePorts:function(e,t){let n,r;if(Array.isArray(e)){if(n=t||{},0===e.length)return this.this;r=jt([],this.prop(["ports","items"])).filter(function(u){return!e.some(function(c){const v=vt(c)?c.id:c;return u.id===v})})}else n=e||{},r=[];return this.startBatch("port-remove"),n.rewrite=!0,this.prop(["ports","items"],r,n),this.stopBatch("port-remove"),this},_createPortData:function(){var t,e=this._validatePorts();if(e.length>0)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));this._portSettingsData&&(t=this._portSettingsData.getPorts()),this._portSettingsData=new Eo(this.get("ports"));var n=this._portSettingsData.getPorts();if(t){var r=n.filter(function(u){if(!t.find(function(c){return c.id===u.id}))return u}),o=t.filter(function(u){if(!n.find(function(c){return c.id===u.id}))return u});o.length>0&&this.trigger("ports:remove",this,o),r.length>0&&this.trigger("ports:add",this,r)}}},Kf={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var e=[],t=this._getContainerElement(),n=0,r=t.node.childNodes.length;n<r;n++)e.push(t.node.childNodes[n]);var o=Be(this.model._portSettingsData.getPorts(),"z"),u="auto";me(o[u]).forEach(function(I){var b=this._getPortElement(I);t.append(b),e.push(b)},this);for(var c=Object.keys(o),v=0;v<c.length;v++){var m=c[v];if(m!==u){var T=parseInt(m,10);this._appendPorts(o[m],T,e)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(e,t,n){var r=this._getContainerElement(),o=me(e).map(this._getPortElement,this);n[t]||t<0?je(n[Math.max(t,0)]).before(o):r.append(o)},_getPortElement:function(e){return this._portElementsCache[e.id]?this._portElementsCache[e.id].portElement:this._createPortElement(e)},findPortNode:function(e,t){const n=this._portElementsCache[e];if(!n)return null;const r=n.portContentElement.node,o=n.portContentSelectors,[u=null]=this.findBySelector(t,r,o);return u},_updatePorts:function(){this._updatePortGroup(void 0),Object.keys(this.model._portSettingsData.groups).forEach(this._updatePortGroup,this)},_removePorts:function(){Mr(this._portElementsCache,"portElement.remove")},_createPortElement:function(e){let t,n,r,o;var u=je(this.portContainerMarkup).addClass("joint-port"),c=this._getPortMarkup(e);if(Array.isArray(c)){var v=this.parseDOMJSON(c,u.node),m=v.fragment;t=m.childNodes.length>1?je("g").append(m):je(m.firstChild),o=v.selectors}else t=je(c),Array.isArray(t)&&(t=je("g").append(t));if(!t)throw new Error("ElementView: Invalid port markup.");t.attr({port:e.id,"port-group":e.group});const T=this._getPortLabelMarkup(e.label);if(Array.isArray(T)){const{fragment:G,selectors:ee}=this.parseDOMJSON(T,u.node),oe=G.childNodes.length;oe>0&&(r=ee,n=1===oe?je(G.firstChild):je("g").append(G))}else n=je(T),Array.isArray(n)&&(n=je("g").append(n));var I;if(o&&r){for(var b in r)if(o[b]&&b!==this.selector)throw new Error("ElementView: selectors within port must be unique.");I=jt({},o,r)}else I=o||r;return u.append(t.addClass("joint-port-body")),n&&u.append(n.addClass("joint-port-label")),this._portElementsCache[e.id]={portElement:u,portLabelElement:n,portSelectors:I,portLabelSelectors:r,portContentElement:t,portContentSelectors:o},u},_updatePortGroup:function(e){for(var t=ct(this.model.size()),n=this.model._portSettingsData.getGroupPortsMetrics(e,t),r=0,o=n.length;r<o;r++){var u=n[r],v=this._portElementsCache[u.portId]||{},m=u.portTransformation;this.applyPortTransform(v.portElement,m),this.updateDOMSubtreeAttributes(v.portElement.node,u.portAttrs,{rootBBox:new ct(u.portSize),selectors:v.portSelectors});var T=u.labelTransformation;T&&v.portLabelElement&&(this.applyPortTransform(v.portLabelElement,T,-m.angle||0),this.updateDOMSubtreeAttributes(v.portLabelElement.node,T.attrs,{rootBBox:new ct(u.labelSize),selectors:v.portLabelSelectors}))}},applyPortTransform:function(e,t,n){var r=je.createSVGMatrix().rotate(n||0).translate(t.x||0,t.y||0).rotate(t.angle||0);e.transform(r,{absolute:!0})},_getPortMarkup:function(e){return e.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(e){return e.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},pi=To.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),To.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(e,t,n){const r=Tt(t);n=(r?n:e)||{};const{parentRelative:o,deep:u,restrictedArea:c}=n;let v;if(o){if(!this.graph)throw new Error("Element must be part of a graph.");const m=this.getParentCell();m&&!m.isLink()&&(v=m.get("position"))}if(r){if(v&&(e+=v.x,t+=v.y),u||c){const{x:m,y:T}=this.get("position");this.translate(e-m,t-T,n)}else this.set("position",{x:e,y:t},n);return this}{const m=ye(this.get("position"));return o?m.difference(v):m}},translate:function(e,t,n){if(t=t||0,0===(e=e||0)&&0===t)return this;(n=n||{}).translateBy=n.translateBy||this.id;var r=this.get("position")||{x:0,y:0},o=n.restrictedArea;if(o&&n.translateBy===this.id)if("function"==typeof o){var u=o.call(this,r.x+e,r.y+t,n);e=u.x-r.x,t=u.y-r.y}else{var c=this.getBBox({deep:!0}),v=r.x-c.x,m=r.y-c.y,T=Math.max(o.x+v,Math.min(o.x+o.width+v-c.width,r.x+e)),I=Math.max(o.y+m,Math.min(o.y+o.height+m-c.height,r.y+t));e=T-r.x,t=I-r.y}var b={x:r.x+e,y:r.y+t};return n.tx=e,n.ty=t,n.transition?(vt(n.transition)||(n.transition={}),this.transition("position",b,jt({},n.transition,{valueFunction:ou.object})),Mr(this.getEmbeddedCells(),"translate",e,t,n)):(this.startBatch("translate",n),this.set("position",b,n),Mr(this.getEmbeddedCells(),"translate",e,t,n),this.stopBatch("translate",n)),this},size:function(e,t,n){var r=this.get("size");return void 0===e?{width:r.width,height:r.height}:(vt(e)&&(n=t,t=Tt(e.height)?e.height:r.height,e=Tt(e.width)?e.width:r.width),this.resize(e,t,n))},resize:function(e,t,n){if(this.startBatch("resize",n=n||{}),n.direction){var r=this.get("size");switch(n.direction){case"left":case"right":t=r.height;break;case"top":case"bottom":e=r.width}var c,o=zr(this.get("angle")||0),u=this.getBBox();if(o){var v={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[n.direction];n.absolute&&(v+=Math.floor((o+45)/90),v%=4);var m=u[["bottomLeft","corner","topRight","origin"][v]](),T=ye(m).rotate(u.center(),-o),I=Math.sqrt(e*e+t*t)/2,b=v*Math.PI/2;b+=Math.atan(v%2==0?t/e:e/t),b-=Lr(o);var G=ye.fromPolar(I,b,T);c=ye(G).offset(e/-2,t/-2)}else switch(c=u.topLeft(),n.direction){case"top":case"top-right":c.offset(0,u.height-t);break;case"left":case"bottom-left":c.offset(u.width-e,0);break;case"top-left":c.offset(u.width-e,u.height-t)}this.set("size",{width:e,height:t},n),this.position(c.x,c.y,n)}else this.set("size",{width:e,height:t},n);return this.stopBatch("resize",n),this},scale:function(e,t,n,r){var o=this.getBBox().scale(e,t,n);return this.startBatch("scale",r),this.position(o.x,o.y,r),this.resize(o.width,o.height,r),this.stopBatch("scale"),this},fitEmbeds:function(e={}){const{graph:t}=this;if(!t)throw new Error("Element must be part of a graph.");const n=this.getEmbeddedCells().filter(b=>b.isElement());if(0===n.length)return this;this.startBatch("fit-embeds",e),e.deep&&Mr(n,"fitEmbeds",e);const{left:r,right:o,top:u,bottom:c}=io(e.padding);let{x:v,y:m,width:T,height:I}=t.getCellsBBox(n);return v-=r,m-=u,T+=r+o,I+=c+u,this.set({position:{x:v,y:m},size:{width:T,height:I}},e),this.stopBatch("fit-embeds"),this},rotate:function(e,t,n,r){if(n){var o=this.getBBox().center(),u=this.get("size"),c=this.get("position");o.rotate(n,this.get("angle")-e);var v=o.x-u.width/2-c.x,m=o.y-u.height/2-c.y;this.startBatch("rotate",{angle:e,absolute:t,origin:n}),this.position(c.x+v,c.y+m,r),this.rotate(e,t,null,r),this.stopBatch("rotate")}else this.set("angle",t?e:(this.get("angle")+e)%360,r);return this},angle:function(){return zr(this.get("angle")||0)},getBBox:function(e={}){const{graph:t,attributes:n}=this,{deep:r,rotate:o}=e;if(r&&t){const b=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return b.push(this),t.getCellsBBox(b,e)}const{angle:u=0,position:{x:c,y:v},size:{width:m,height:T}}=n,I=new ct(c,v,m,T);return o&&I.rotateAroundCenter(u),I},getPointFromConnectedLink:function(e,t){var n=this.getBBox(),r=n.center(),o=e.get(t);if(!o)return r;var u=o.port;if(!u||!this.hasPort(u))return r;var c=this.portProp(u,["group"]),v=this.getPortsPositions(c),m=new ye(v[u]).offset(n.origin()),T=this.angle();return T&&m.rotate(r,-T),m}});jt(pi.prototype,Xf);const il={cells:function(e){return function(){var t=Array.from(arguments),n=t.length,r=n>0&&t[0]||[],o=n>1&&t[n-1]||{};return Array.isArray(r)||(o instanceof To?r=t:r instanceof To&&(t.length>1&&t.pop(),r=t)),o instanceof To&&(o={}),e.call(this,r,o)}}},Ho=rn.Collection.extend({initialize:function(e,t){this.cellNamespace=t.cellNamespace?t.cellNamespace:"undefined"!=typeof joint&&so(joint,"shapes")?joint.shapes:null,this.graph=t.graph},model:function(e,t){var n=t.collection,u=new("link"===e.type?ha:to(n.cellNamespace,e.type,".")||pi)(e,t);return t.dry||(u.graph=n.graph),u},comparator:function(e){return e.get("z")||0}}),jo=rn.Model.extend({initialize:function(e,t){var n=new Ho([],{model:(t=t||{}).cellModel,cellNamespace:t.cellNamespace,graph:this});rn.Model.prototype.set.call(this,"cells",n),n.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},n.on("add",this._restructureOnAdd,this),n.on("remove",this._restructureOnRemove,this),n.on("reset",this._restructureOnReset,this),n.on("change:source",this._restructureOnChangeSource,this),n.on("change:target",this._restructureOnChangeTarget,this),n.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(e){if(e.isLink()){this._edges[e.id]=!0;var{source:t,target:n}=e.attributes;t.id&&((this._out[t.id]||(this._out[t.id]={}))[e.id]=!0),n.id&&((this._in[n.id]||(this._in[n.id]={}))[e.id]=!0)}else this._nodes[e.id]=!0},_restructureOnRemove:function(e){if(e.isLink()){delete this._edges[e.id];var{source:t,target:n}=e.attributes;t.id&&this._out[t.id]&&this._out[t.id][e.id]&&delete this._out[t.id][e.id],n.id&&this._in[n.id]&&this._in[n.id][e.id]&&delete this._in[n.id][e.id]}else delete this._nodes[e.id]},_restructureOnReset:function(e){e=e.models,this._out={},this._in={},this._nodes={},this._edges={},e.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(e){var t=e.previous("source");t.id&&this._out[t.id]&&delete this._out[t.id][e.id];var n=e.attributes.source;n.id&&((this._out[n.id]||(this._out[n.id]={}))[e.id]=!0)},_restructureOnChangeTarget:function(e){var t=e.previous("target");t.id&&this._in[t.id]&&delete this._in[t.id][e.id];var n=e.get("target");n.id&&((this._in[n.id]||(this._in[n.id]={}))[e.id]=!0)},getOutboundEdges:function(e){return this._out&&this._out[e]||{}},getInboundEdges:function(e){return this._in&&this._in[e]||{}},toJSON:function(){var e=rn.Model.prototype.toJSON.apply(this,arguments);return e.cells=this.get("cells").toJSON(),e},fromJSON:function(e,t){if(!e.cells)throw new Error("Graph JSON must contain cells array.");return this.set(e,t)},set:function(e,t,n){var r;return"object"==typeof e?(r=e,n=t):(r={})[e]=t,r.hasOwnProperty("cells")&&(this.resetCells(r.cells,n),r=ce(r,"cells")),rn.Model.prototype.set.call(this,r,n)},clear:function(e){e=jt({},e,{clear:!0});var t=this.get("cells");if(0===t.length)return this;this.startBatch("clear",e);var n=t.sortBy(function(r){return r.isLink()?1:2});do{n.shift().remove(e)}while(n.length>0);return this.stopBatch("clear"),this},_prepareCell:function(e,t){var n;if(e instanceof rn.Model?(n=e.attributes,!e.graph&&(!t||!t.dry)&&(e.graph=this)):n=e,!Et(n.type))throw new TypeError("dia.Graph: cell type must be a string.");return e},minZIndex:function(){var e=this.get("cells").first();return e&&e.get("z")||0},maxZIndex:function(){var e=this.get("cells").last();return e&&e.get("z")||0},addCell:function(e,t){return Array.isArray(e)?this.addCells(e,t):(e instanceof rn.Model?e.has("z")||e.set("z",this.maxZIndex()+1):void 0===e.z&&(e.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(e,t),t||{}),this)},addCells:function(e,t){return 0===e.length||(e=Zt(e),t.maxPosition=t.position=e.length-1,this.startBatch("add",t),e.forEach(function(n){this.addCell(n,t),t.position--},this),this.stopBatch("add",t)),this},resetCells:function(e,t){var n=me(e).map(function(r){return this._prepareCell(r,t)},this);return this.get("cells").reset(n,t),this},removeCells:function(e,t){return e.length&&(this.startBatch("remove"),Mr(e,"remove",t),this.stopBatch("remove")),this},_removeCell:function(e,t,n){(n=n||{}).clear||(n.disconnectLinks?this.disconnectLinks(e,n):this.removeLinks(e,n)),this.get("cells").remove(e,{silent:!0}),e.graph===this&&(e.graph=null)},getCell:function(e){return this.get("cells").get(e)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(e=>e.isElement())},getLinks:function(){return this.get("cells").filter(e=>e.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(e,t){var n=(t=t||{}).indirect,r=t.inbound,o=t.outbound;void 0===r&&void 0===o&&(r=o=!0);var u=[],c={};function v(b,G){if(Ee(b.getOutboundEdges(G.id),function(oe,Te){if(!c[Te]){var Pe=b.getCell(Te);u.push(Pe),c[Te]=!0,n&&(r&&m(b,Pe),o&&v(b,Pe))}}.bind(b)),n&&G.isLink()){var ee=G.getTargetCell();ee&&ee.isLink()&&(c[ee.id]||(u.push(ee),v(b,ee)))}}function m(b,G){if(Ee(b.getInboundEdges(G.id),function(oe,Te){if(!c[Te]){var Pe=b.getCell(Te);u.push(Pe),c[Te]=!0,n&&(r&&m(b,Pe),o&&v(b,Pe))}}.bind(b)),n&&G.isLink()){var ee=G.getSourceCell();ee&&ee.isLink()&&(c[ee.id]||(u.push(ee),m(b,ee)))}}if(o&&v(this,e),r&&m(this,e),t.deep){var T=e.getEmbeddedCells({deep:!0}),I={};T.forEach(function(b){b.isElement()&&(I[b.id]=!0)}),T.forEach(function(b){b.isLink()||(o&&Ee(this.getOutboundEdges(b.id),function(G,ee){if(!c[ee]){var oe=this.getCell(ee),{source:Te,target:Pe}=oe.attributes,De=Te.id,Ne=Pe.id;if(!t.includeEnclosed&&De&&I[De]&&Ne&&I[Ne])return;u.push(this.getCell(ee)),c[ee]=!0}}.bind(this)),r&&Ee(this.getInboundEdges(b.id),function(G,ee){if(!c[ee]){var oe=this.getCell(ee),{source:Te,target:Pe}=oe.attributes,De=Te.id,Ne=Pe.id;if(!t.includeEnclosed&&De&&I[De]&&Ne&&I[Ne])return;u.push(this.getCell(ee)),c[ee]=!0}}.bind(this)))},this)}return u},getNeighbors:function(e,t){t||(t={});var n=t.inbound,r=t.outbound;void 0===n&&void 0===r&&(n=r=!0);var o=this.getConnectedLinks(e,t).reduce(function(v,m){var{source:T,target:I}=m.attributes,b=m.hasLoop(t);if(n&&so(T,"id")&&!v[T.id]){var G=this.getCell(T.id);G.isElement()&&(b||G&&G!==e&&(!t.deep||!G.isEmbeddedIn(e)))&&(v[T.id]=G)}if(r&&so(I,"id")&&!v[I.id]){var ee=this.getCell(I.id);ee.isElement()&&(b||ee&&ee!==e&&(!t.deep||!ee.isEmbeddedIn(e)))&&(v[I.id]=ee)}return v}.bind(this),{});if(e.isLink()){if(n){var u=e.getSourceCell();u&&u.isElement()&&!o[u.id]&&(o[u.id]=u)}if(r){var c=e.getTargetCell();c&&c.isElement()&&!o[c.id]&&(o[c.id]=c)}}return me(o)},getCommonAncestor:function(){var e=Array.from(arguments).map(function(n){for(var r=[],o=n.get("parent");o;)r.push(o),o=this.getCell(o).get("parent");return r},this);e=e.sort(function(n,r){return n.length-r.length});var t=me(e.shift()).find(function(n){return e.every(function(r){return r.includes(n)})});return this.getCell(t)},getSuccessors:function(e,t){var n=[];return this.search(e,function(r){r!==e&&n.push(r)},jt({},t=t||{},{outbound:!0})),n},cloneCells:Ot,cloneSubgraph:function(e,t){var n=this.getSubgraph(e,t);return this.cloneCells(n)},getSubgraph:function(e,t){t=t||{};var n=[],r={},o=[],u=[];return me(e).forEach(function(c){r[c.id]||(n.push(c),r[c.id]=c,c.isLink()?u.push(c):o.push(c)),t.deep&&c.getEmbeddedCells({deep:!0}).forEach(function(m){r[m.id]||(n.push(m),r[m.id]=m,m.isLink()?u.push(m):o.push(m))})}),u.forEach(function(c){var{source:v,target:m}=c.attributes;if(v.id&&!r[v.id]){var T=this.getCell(v.id);n.push(T),r[T.id]=T,o.push(T)}if(m.id&&!r[m.id]){var I=this.getCell(m.id);n.push(this.getCell(m.id)),r[I.id]=I,o.push(I)}},this),o.forEach(function(c){this.getConnectedLinks(c,t).forEach(function(m){var{source:T,target:I}=m.attributes;!r[m.id]&&T.id&&r[T.id]&&I.id&&r[I.id]&&(n.push(m),r[m.id]=m)})},this),n},getPredecessors:function(e,t){var n=[];return this.search(e,function(r){r!==e&&n.push(r)},jt({},t=t||{},{inbound:!0})),n},search:function(e,t,n){(n=n||{}).breadthFirst?this.bfs(e,t,n):this.dfs(e,t,n)},bfs:function(e,t,n={}){const r={},o={},u=[];for(u.push(e),o[e.id]=0;u.length>0;){var c=u.shift();if(r[c.id]||(r[c.id]=!0,!1===t.call(this,c,o[c.id])))continue;const v=this.getNeighbors(c,n);for(let m=0,T=v.length;m<T;m++){const I=v[m];o[I.id]=o[c.id]+1,u.push(I)}}},dfs:function(e,t,n={}){const r={},o={},u=[];for(u.push(e),o[e.id]=0;u.length>0;){const c=u.pop();if(r[c.id]||(r[c.id]=!0,!1===t.call(this,c,o[c.id])))continue;const v=this.getNeighbors(c,n),m=u.length;for(let T=0,I=v.length;T<I;T++){const b=v[T];o[b.id]=o[c.id]+1,u.splice(m,0,b)}}},getSources:function(){var e=[];return Ee(this._nodes,function(t,n){(!this._in[n]||So(this._in[n]))&&e.push(this.getCell(n))}.bind(this)),e},getSinks:function(){var e=[];return Ee(this._nodes,function(t,n){(!this._out[n]||So(this._out[n]))&&e.push(this.getCell(n))}.bind(this)),e},isSource:function(e){return!this._in[e.id]||So(this._in[e.id])},isSink:function(e){return!this._out[e.id]||So(this._out[e.id])},isSuccessor:function(e,t){var n=!1;return this.search(e,function(r){if(r===t&&r!==e)return n=!0,!1},{outbound:!0}),n},isPredecessor:function(e,t){var n=!1;return this.search(e,function(r){if(r===t&&r!==e)return n=!0,!1},{inbound:!0}),n},isNeighbor:function(e,t,n){var r=(n=n||{}).inbound,o=n.outbound;void 0===r&&void 0===o&&(r=o=!0);var u=!1;return this.getConnectedLinks(e,n).forEach(function(c){var{source:v,target:m}=c.attributes;if(r&&so(v,"id")&&v.id===t.id||o&&so(m,"id")&&m.id===t.id)return u=!0,!1}),u},disconnectLinks:function(e,t){this.getConnectedLinks(e).forEach(function(n){n.set(n.attributes.source.id===e.id?"source":"target",{x:0,y:0},t)})},removeLinks:function(e,t){Mr(this.getConnectedLinks(e),"remove",t)},findModelsFromPoint:function(e){return this.getElements().filter(t=>t.getBBox({rotate:!0}).containsPoint(e))},findModelsInArea:function(e,t={}){const n=new ct(e),{strict:r=!1}=t,o=r?"containsRect":"intersect";return this.getElements().filter(u=>n[o](u.getBBox({rotate:!0})))},findModelsUnderElement:function(e,t={}){const{searchBy:n="bbox"}=t,r=e.getBBox().rotateAroundCenter(e.angle());return("bbox"===n?this.findModelsInArea(r):this.findModelsFromPoint(r[n]())).filter(u=>e.id!==u.id&&!u.isEmbeddedIn(e))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(e,t={}){const{rotate:n=!0}=t;return me(e).reduce(function(r,o){const u=o.getBBox({rotate:n});return u?r?r.union(u):u:r},null)},translate:function(e,t,n){var r=this.getCells().filter(function(o){return!o.isEmbedded()});return Mr(r,"translate",e,t,n),this},resize:function(e,t,n){return this.resizeCells(e,t,this.getCells(),n)},resizeCells:function(e,t,n,r){var o=this.getCellsBBox(n);if(o){var u=Math.max(e/o.width,0),c=Math.max(t/o.height,0);Mr(n,"scale",u,c,o.origin(),r)}return this},startBatch:function(e,t){return t=t||{},this._batches[e]=(this._batches[e]||0)+1,this.trigger("batch:start",jt({},t,{batchName:e}))},stopBatch:function(e,t){return t=t||{},this._batches[e]=(this._batches[e]||0)-1,this.trigger("batch:stop",jt({},t,{batchName:e}))},hasActiveBatch:function(e){const t=this._batches;let n;return n=0===arguments.length?Object.keys(t):Array.isArray(e)?e:[e],n.some(r=>t[r]>0)}},{validations:{multiLinks:function(e,t){var{source:n,target:r}=t.attributes;if(n.id&&r.id){var o=t.getSourceCell();if(o&&e.getConnectedLinks(o,{outbound:!0}).filter(function(v){var{source:m,target:T}=v.attributes;return m&&m.id===n.id&&(!m.port||m.port===n.port)&&T&&T.id===r.id&&(!T.port||T.port===r.port)}).length>1)return!1}return!0},linkPinning:function(e,t){var{source:n,target:r}=t.attributes;return n.id&&r.id}}});!function(e,t,n){if(Et(n)){if(!il[n])throw new Error('Unknown wrapper: "'+n+'"');n=il[n]}if(!Nn(n))throw new Error("Wrapper must be a function.");me(["resetCells","addCells","removeCells"]).forEach(function(r){e[r]=n(e[r])})}(jo.prototype,0,il.cells);const Rs={exportElement:function(e){return e.size()},exportLink:function(e){var t=e.get("labelSize")||{};return{minLen:e.get("minLen")||1,weight:e.get("weight")||1,labelpos:e.get("labelPosition")||"c",labeloffset:e.get("labelOffset")||0,width:t.width||0,height:t.height||0}},importElement:function(e,t,n){var r=this.getCell(t),o=n.node(t);e.setPosition?e.setPosition(r,o):r.set("position",{x:o.x-o.width/2,y:o.y-o.height/2})},importLink:function(e,t,n){const o=this.getCell(t.name),u=n.edge(t),c=u.points||[],v=new fn(c);if(e.setVertices||e.setLinkVertices)if(Nn(e.setVertices))e.setVertices(o,c);else{v.simplify({threshold:.001});const m=v.points.map(I=>I.toJSON());o.set("vertices",m.slice(1,m.length-1))}if(e.setLabels&&"x"in u&&"y"in u){const m={x:u.x,y:u.y};if(Nn(e.setLabels))e.setLabels(o,m,c);else{const T=v.closestPointLength(m),I=v.pointAtLength(T),b=T/v.length(),G=new ye(m).difference(I).toJSON();o.label(0,{position:{distance:b,offset:G}})}}},layout:function(e,t){var n;n=e instanceof jo?e:(new jo).resetCells(e,{dry:!0,sort:!1}),e=null;const r=(t=Si(t||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink})).dagre||("undefined"!=typeof dagre?dagre:void 0);if(void 0===r)throw new Error('The the "dagre" utility is a mandatory dependency.');var o=Rs.toGraphLib(n,{graphlib:t.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:t.exportElement,setEdgeLabel:t.exportLink,setEdgeName:function(I){return I.id}}),u={},c=t.marginX||0,v=t.marginY||0;if(t.rankDir&&(u.rankdir=t.rankDir),t.align&&(u.align=t.align),t.nodeSep&&(u.nodesep=t.nodeSep),t.edgeSep&&(u.edgesep=t.edgeSep),t.rankSep&&(u.ranksep=t.rankSep),t.ranker&&(u.ranker=t.ranker),c&&(u.marginx=c),v&&(u.marginy=v),o.setGraph(u),r.layout(o,{debugTiming:!!t.debugTiming}),n.startBatch("layout"),Rs.fromGraphLib(o,{importNode:this.importElement.bind(n,t),importEdge:this.importLink.bind(n,t)}),t.resizeClusters){var m=o.nodes().filter(function(I){return o.children(I).length>0}).map(n.getCell.bind(n)).sort(function(I,b){return b.getAncestors().length-I.getAncestors().length});Mr(m,"fitEmbeds",{padding:t.clusterPadding})}n.stopBatch("layout");var T=o.graph();return new ct(c,v,Math.abs(T.width-2*c),Math.abs(T.height-2*v))},fromGraphLib:function(e,t){var n=(t=t||{}).importNode||on,r=t.importEdge||on,o=this instanceof jo?this:new jo;return e.nodes().forEach(function(u){n.call(o,u,e,o,t)}),e.edges().forEach(function(u){r.call(o,u,e,o,t)}),o},toGraphLib:function(e,t){const n=(t=t||{}).graphlib||("undefined"!=typeof graphlib?graphlib:void 0);if(void 0===n)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var r=we(t,"directed","compound","multigraph"),o=new n.Graph(r),u=t.setNodeLabel||on,c=t.setEdgeLabel||on,v=t.setEdgeName||on,m=e.get("cells"),T=0,I=m.length;T<I;T++){var b=m.at(T);if(b.isLink()){var G=b.get("source"),ee=b.get("target");if(!G.id||!ee.id)break;o.setEdge(G.id,ee.id,c(b),v(b))}else if(o.setNode(b.id,u(b)),o.isCompound()&&b.has("parent")){var oe=b.get("parent");m.has(oe)&&o.setParent(b.id,oe)}}return o}};jo.prototype.toGraphLib=function(e){return Rs.toGraphLib(this,e)},jo.prototype.fromGraphLib=function(e,t){return Rs.fromGraphLib.call(this,e,t)};const Zf={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(e,t){return this._tests[e]=t},test:function(e){var t=this._tests[e];if(!t)throw new Error('Test not defined ("'+e+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var n=this._results[e];if(void 0!==n)return n;try{n=t()}catch(r){n=!1}return this._results[e]=n,n}},ja=(pi.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),pi.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),pi.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}));pi.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),pi.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),pi.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),pi.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),pi.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),pi.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),pi.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),pi.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]}),pi.define("standard.Cylinder",{attrs:{body:{lateralArea:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:10,refRx:"50%",ry:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(e,t){if(void 0===e)return this.attr("body/lateralArea");var n=ln(e);return this.attr({body:{lateralArea:e},top:n?{refCy:e,refRy:e,cy:null,ry:null}:{refCy:null,refRy:null,cy:e,ry:e}},t)}},{attributes:{lateralArea:{set:function(e,t){var n=ln(e);n&&(e=parseFloat(e)/100);var r=t.x,o=t.y,u=t.width,c=t.height,m=n?c*e:e,T=je.KAPPA,I=T*(u/2),b=T*(n?c*e:e),ee=r+u/2,oe=r+u,Te=o+m,Pe=Te-m,De=o+c-m,Ne=o+c;return{d:["M",r,Te,"L",r,De,"C",r,De+b,ee-I,Ne,ee,Ne,"C",ee+I,Ne,oe,De+b,oe,De,"L",oe,Te,"C",oe,Te-b,ee+I,Pe,ee,Pe,"C",ee-I,Pe,r,Te-b,r,Te,"Z"].join(" ")}}}}});var ol=Zf.test("svgforeignobject")?{tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}};pi.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},ol]},{attributes:{text:{set:function(e,t,n,r){if(!(n instanceof HTMLElement)){var o=r.style||{},u={text:e,width:-5,height:"100%"},c=jt({textVerticalAnchor:"middle"},o);return nl.textWrap.set.call(this,u,t,n,c),{fill:o.color||null}}n.textContent=e},position:function(e,t,n){if(n instanceof SVGElement)return t.center()}}}});const hu=ha.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),Ua=(ha.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),ha.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),{}),Ei=rn.View.extend({options:{},theme:null,themeClassNamePrefix:kt("theme-"),requireSetThemeOverride:!1,defaultTheme:Mt.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,constructor:function(e){this.requireSetThemeOverride=e&&!!e.theme,this.options=jt({},this.options,e),rn.View.call(this,e)},initialize:function(){Ua[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},renderChildren:function(e){if(e||(e=J(this,"children")),e){var t=this.svgElement,r=bn(e,je.namespace[t?"svg":"xhtml"]);(t?this.vel:this.$el).empty().append(r.fragment),this.childNodes=r.selectors}return this},findAttribute:function(e,t){for(var n=t;n&&1===n.nodeType;){var r=n.getAttribute(e);if(r)return r;if(n===this.el)return null;n=n.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(J(this,"el"));else{var e=J(this,"tagName"),t=jt({},J(this,"attributes")),n=jt({},J(this,"style"));this.id&&(t.id=J(this,"id")),this.setElement(this._createElement(e)),this._setAttributes(t),this._setStyle(n)}this._ensureElClassName()},_setAttributes:function(e){this.svgElement?this.vel.attr(e):this.$el.attr(e)},_setStyle:function(e){this.$el.css(e)},_createElement:function(e){return this.svgElement?document.createElementNS(je.namespace.svg,e):document.createElement(e)},_setElement:function(e){this.$el=e instanceof rn.$?e:rn.$(e),this.el=this.$el[0],this.svgElement&&(this.vel=je(this.el))},_ensureElClassName:function(){var e=J(this,"className");if(e){var t=kt(e);this.svgElement?this.vel.removeClass(e).addClass(t):this.$el.removeClass(e).addClass(t)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(e,t){return t=t||{},this.theme&&this.requireSetThemeOverride&&!t.override||(this.removeThemeClassName(),this.addThemeClassName(e),this.onSetTheme(this.theme,e),this.theme=e),this},addThemeClassName:function(e){if(!(e=e||this.theme))return this;var t=this.themeClassNamePrefix+e;return this.svgElement?this.vel.addClass(t):this.$el.addClass(t),this},removeThemeClassName:function(e){var t=this.themeClassNamePrefix+(e=e||this.theme);return this.svgElement?this.vel.removeClass(t):this.$el.removeClass(t),this},onSetTheme:function(e,t){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),Ua[this.cid]=null,rn.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(e,t,n){if(!t)return this;n||(n={});var r=this.getEventNamespace();for(var o in t){var u=t[o];"function"!=typeof u&&(u=this[u]),u&&Sn(e).on(o+r,n,u.bind(this))}return this},undelegateElementEvents:function(e){return Sn(e).off(this.getEventNamespace()),this},delegateDocumentEvents:function(e,t){return e||(e=J(this,"documentEvents")),this.delegateElementEvents(document,e,t)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(e,t){if(!e)throw new Error("eventData(): event object required.");var n=e.data,r="__"+this.cid+"__";return void 0===t?n&&n[r]||{}:(n||(n=e.data={}),n[r]||(n[r]={}),jt(n[r],t),this)},stopPropagation:function(e){return this.eventData(e,{propagationStopped:!0}),this},isPropagationStopped:function(e){return!!this.eventData(e).propagationStopped}},{extend:function(){var e=Array.from(arguments),t=e[0]&&jt({},e[0])||{},n=e[1]&&jt({},e[1])||{},r=t.render||this.prototype&&this.prototype.render||null;return t.render=function(){return"function"==typeof r&&r.apply(this,arguments),this.render.__render__===r&&this.onRender(),this},t.render.__render__=r,rn.View.extend.call(this,t,n)}});if(Sn.event&&!("dbltap"in Sn.event.special)){const e=Mt.doubleTapInterval,t=30;Sn.event.special.dbltap={bindType:"touchend",delegateType:"touchend",handle:function(n,...r){const{handleObj:o,target:u}=n,c=Sn.data(u),v=(new Date).getTime(),m="lastTouch"in c?v-c.lastTouch:0;m<e&&m>t?(c.lastTouch=null,n.type=o.origType,o.handler.call(this,n,...r)):c.lastTouch=v}}}function Uo(e){return e?Array.isArray(e)?e:[e]:[]}const Vr=Ei.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,transformGroup:null,requestUpdate(e,t){const{paper:n}=e;this.cellView=e,this.nodeSelector=t,n&&(this.updateRequested=!0,n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:e,nodeSelector:t}=this;return this.update(e,t),this.mount(),this.transform(),0},findNode(e,t=null){let n;if("string"==typeof t)[n]=e.findBySelector(t);else if(Jn(t)){const r=e.model.isLink(),{label:o=null,port:u,selector:c}=t;r&&null!==o?n=e.findLabelNode(o,c):!r&&u?n=e.findPortNode(u,c):[n]=e.findBySelector(c)}else t&&(n=je.toNode(t),n instanceof SVGElement||(n=null));return n||null},mount(){const{MOUNTABLE:e,cellView:t,el:n,options:r,transformGroup:o}=this;if(!e||o)return;const{vel:u,paper:c}=t,{layer:v}=r;if(v){const m=this.transformGroup=je("g").addClass("highlight-transform").append(n);c.getLayerView(v).insertSortedNode(m.node,r.z)}else(!n.parentNode||n.nextSibling)&&u.append(n)},unmount(){const{MOUNTABLE:e,transformGroup:t,vel:n}=this;!e||(t?(this.transformGroup=null,t.remove()):n.remove())},transform(){const{transformGroup:e,cellView:t,updateRequested:n}=this;if(!e||t.model.isLink()||n)return;const r=t.getRootTranslateMatrix(),o=t.getRootRotateMatrix(),u=r.multiply(o);e.attr("transform",je.matrixToTransformString(u))},update(){const{node:e,cellView:t,nodeSelector:n,updateRequested:r,id:o}=this;if(r)return;const u=this.node=this.findNode(t,n);e&&this.unhighlight(t,e),u?(this.highlight(t,u),this.mount()):(this.unmount(),t.notify("cell:highlight:invalid",o,this))},onRemove(){const{node:e,cellView:t,id:n,constructor:r}=this;e&&this.unhighlight(t,e),this.unmount(),r._removeRef(t,n)},highlight(e,t){},unhighlight(e,t){}},{_views:{},highlight:function(e,t,n){const r=this.uniqueId(t,n);this.add(e,t,r,n)},unhighlight:function(e,t,n){const r=this.uniqueId(t,n);this.remove(e,r)},get(e,t=null){const{cid:n}=e,{_views:r}=this,o=r[n];if(null===t){const u=[];if(!o)return u;for(let c in o){const v=o[c];v instanceof this&&u.push(v)}return u}if(!o)return null;if(t in o){const u=o[t];if(u instanceof this)return u}return null},add(e,t,n,r={}){if(!n)throw new Error("dia.HighlighterView: An ID required.");const o=Vr.get(e,n);o&&o.remove();const u=new this(r);return u.id=n,this._addRef(e,n,u),u.requestUpdate(e,t),u},_addRef(e,t,n){const{cid:r}=e,{_views:o}=this;let u=o[r];u||(u=o[r]={}),u[t]=n},_removeRef(e,t){const{cid:n}=e,{_views:r}=this,o=r[n];if(o){t&&delete o[t];for(let u in o)return;delete r[n]}},remove(e,t=null){Uo(this.get(e,t)).forEach(n=>{n.remove()})},update(e,t=null,n=!1){Uo(this.get(e,t)).forEach(r=>{(n||r.UPDATABLE)&&r.update()})},transform(e,t=null){Uo(this.get(e,t)).forEach(n=>{n.UPDATABLE&&n.transform()})},uniqueId:(e,t="")=>je.ensureId(e)+JSON.stringify(t)}),ls={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},Pn=Ei.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var e=["cell"],t=this.model.get("type");return t&&t.toLowerCase().split(".").forEach(function(n,r,o){e.push("type-"+o.slice(0,r+1).join("-"))}),e.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var r,o,u,e={},t={},n=0,c=J(this,"presentationAttributes");for(var v in c)if(c.hasOwnProperty(v)){var m=c[v];for(Array.isArray(m)||(m=[m]),r=0,o=m.length;r<o;r++){var T=e[u=m[r]];T||(T=e[u]=1<<n++),t[v]|=T}}var I=J(this,"initFlag");for(Array.isArray(I)||(I=[I]),r=0,o=I.length;r<o;r++)e[u=I[r]]||(e[u]=1<<n++);if(n>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=e,this._presentationAttributes=t},hasFlag:function(e,t){return e&this.getFlag(t)},removeFlag:function(e,t){return e^e&this.getFlag(t)},getFlag:function(e){var t=this._flags;if(!t)return 0;var n=0;if(Array.isArray(e))for(var r=0,o=e.length;r<o;r++)n|=t[e[r]];else n|=t[e];return n},attributes:function(){var e=this.model;return{"model-id":e.id,"data-type":e.attributes.type}},constructor:function(e){e.id=e.id||wi(this),Ei.call(this,e)},initialize:function(){this.setFlags(),Ei.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},onMount(){},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(e,t){var n=e.getChangeFlag(this._presentationAttributes);t.updateHandled||!n||(t.dirty&&this.hasFlag(n,"UPDATE")&&(n|=this.getFlag("RENDER")),t.tool&&(t.async=!1),this.requestUpdate(n,t))},requestUpdate:function(e,t){const{paper:n}=this;n&&e>0&&n.requestViewUpdate(this,e,this.UPDATE_PRIORITY,t)},parseDOMJSON:function(e,t){var n=bn(e),r=n.selectors,o=n.groupSelectors;for(var u in o){if(r[u])throw new Error("dia.CellView: ambiguous group selector");r[u]=o[u]}if(t){var c=this.selector;if(r[c])throw new Error("dia.CellView: ambiguous root selector.");r[c]=t}return{fragment:n.fragment,selectors:r}},can:function(e){var t=Nn(this.options.interactive)?this.options.interactive(this):this.options.interactive;return vt(t)&&!1!==t[e]||function(e){return!0===e||!1===e||!!e&&"object"==typeof e&&"[object Boolean]"===Object.prototype.toString.call(e)}(t)&&!1!==t},findBySelector:function(e,t,n){if(t||(t=this.el),n||(n=this.selectors),!e||"."===e)return[t];if(n){var r=n[e];if(r)return Array.isArray(r)?r:[r]}return Mt.useCSSSelectors?Sn(t).find(e).toArray():[]},notify:function(e){if(this.paper){var t=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[e].concat(t)),this.paper.trigger.apply(this.paper,[e,this].concat(t))}},getBBox:function(e){var t;if(e&&e.useModelGeometry){var n=this.model;t=n.getBBox().bbox(n.angle())}else t=this.getNodeBBox(this.el);return this.paper.localToPaperRect(t)},getNodeBBox:function(e){var t=this.getNodeBoundingRect(e),n=this.getNodeMatrix(e),r=this.getRootTranslateMatrix(),o=this.getRootRotateMatrix();return je.transformRect(t,r.multiply(o).multiply(n))},getNodeUnrotatedBBox:function(e){var t=this.getNodeBoundingRect(e),n=this.getNodeMatrix(e),r=this.getRootTranslateMatrix();return je.transformRect(t,r.multiply(n))},getRootTranslateMatrix:function(){var t=this.model.position();return je.createSVGMatrix().translate(t.x,t.y)},getRootRotateMatrix:function(){var e=je.createSVGMatrix(),t=this.model,n=t.angle();if(n){var r=t.getBBox(),o=r.width/2,u=r.height/2;e=e.translate(o,u).rotate(n).translate(-o,-u)}return e},_notifyHighlight:function(e,t,n={}){const{el:r}=this;let o;if([o=r]="string"==typeof t?this.findBySelector(t):this.$(t),n.partial=o!==r,void 0===n.type){let u;switch(!0){case n.embedding:u=ls.EMBEDDING;break;case n.connecting:u=ls.CONNECTING;break;case n.magnetAvailability:u=ls.MAGNET_AVAILABILITY;break;case n.elementAvailability:u=ls.ELEMENT_AVAILABILITY;break;default:u=ls.DEFAULT}n.type=u}return this.notify(e,o,n),this},highlight:function(e,t){return this._notifyHighlight("cell:highlight",e,t)},unhighlight:function(e,t={}){return this._notifyHighlight("cell:unhighlight",e,t)},findMagnet:function(e){const t=this.el;let n=this.$(e)[0];n||(n=t);do{const r=n.getAttribute("magnet"),o=n===t;if((r||o)&&"false"!==r)return n;if(o)return;n=n.parentNode}while(n)},findProxyNode:function(e,t){e||(e=this.el);const n=e.getAttribute(`${t}-selector`);if(n){const[r]=this.findBySelector(n);if(r)return r}return e},getSelector:function(e,t){var n;if(e===this.el)return"string"==typeof t&&(n="> "+t),n;if(e){var r=je(e).index()+1;n=e.tagName+":nth-child("+r+")",t&&(n+=" > "+t),n=this.getSelector(e.parentNode,n)}return n},addLinkFromMagnet:function(e,t,n){var r=this.paper,o=r.model,u=r.getDefaultLink(this,e);return u.set({source:this.getLinkEnd(e,t,n,u,"source"),target:{x:t,y:n}}).addTo(o,{async:!1,ui:!0}),u.findView(r)},getLinkEnd:function(e,...t){var n=this.model,r=n.id,o=this.findAttribute("port",e),u=e.getAttribute("joint-selector"),c={id:r};return null!=u&&(c.magnet=u),null!=o?(c.port=o,!n.hasPort(o)&&!u&&(c.selector=this.getSelector(e))):null==u&&this.el!==e&&(c.selector=this.getSelector(e)),this.customizeLinkEnd(c,e,...t)},customizeLinkEnd:function(e,t,n,r,o,u){const{paper:c}=this,{connectionStrategy:v}=c.options;if("function"==typeof v){var m=v.call(c,e,this,t,new ye(n,r),o,u,c);if(m)return m}return e},getMagnetFromLinkEnd:function(e){var u,t=this.el,n=e.port,r=e.magnet,o=this.model;return null!=n&&o.isElement()&&o.hasPort(n)?u=this.findPortNode(n,r)||t:(r||(r=e.selector),!r&&null!=n&&(r='[port="'+n+'"]'),u=this.findBySelector(r,t,this.selectors)[0]),this.findProxyNode(u,"magnet")},dragLinkStart:function(e,t,n,r){this.model.startBatch("add-link");const o=this.addLinkFromMagnet(t,n,r);o.notifyPointerdown(e,n,r),o.eventData(e,o.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(e,{linkView:o})},dragLink:function(e,t,n){var r=this.eventData(e),o=r.linkView;if(o)o.pointermove(e,t,n);else{var u=this.paper,c=u.options.magnetThreshold,v=this.getEventTarget(e),m=r.targetMagnet;if("onleave"===c){if(m===v||je(m).contains(v))return}else if(u.eventData(e).mousemoved<=c)return;this.dragLinkStart(e,m,t,n)}},dragLinkEnd:function(e,t,n){var o=this.eventData(e).linkView;!o||(o.pointerup(e,t,n),this.model.stopBatch("add-link"))},getAttributeDefinition:function(e){return this.model.constructor.getAttributeDefinition(e)},setNodeAttributes:function(e,t){So(t)||(e instanceof SVGElement?je(e).attr(t):Sn(e).attr(t))},processNodeAttributes:function(e,t){var n,r,o,u,c,v,m,T,I,b=[];for(n in t)!t.hasOwnProperty(n)||(r=t[n],!(o=this.getAttributeDefinition(n))||Nn(o.qualify)&&!o.qualify.call(this,r,e,t)?(v||(v={}),v[di(n)]=r):(Et(o.set)&&(v||(v={}),v[o.set]=r),null!==r&&b.push(n,o)));for(u=0,c=b.length;u<c;u+=2)r=t[n=b[u]],Nn((o=b[u+1]).set)&&(m||(m={}),m[n]=r),Nn(o.position)&&(T||(T={}),T[n]=r),Nn(o.offset)&&(I||(I={}),I[n]=r);return{raw:t,normal:v,set:m,position:T,offset:I}},updateRelativeAttributes:function(e,t,n,r){r||(r={});var o,u,v=t.raw||{},m=t.normal||{},T=t.set,I=t.position,b=t.offset;for(o in T){u=T[o];var G=this.getAttributeDefinition(o).set.call(this,u,n.clone(),e,v);vt(G)?jt(m,G):void 0!==G&&(m[o]=G)}if(e instanceof HTMLElement)this.setNodeAttributes(e,m);else{var Pe,De,Ne,ee=m.transform,oe=je.transformStringToMatrix(ee),Te=ye(oe.e,oe.f);if(ee&&(m=ce(m,"transform"),oe.e=oe.f=0),I||b){var L=this.getNodeScale(e,r.scalableNode);Pe=L.sx,De=L.sy}var U=!1;for(o in I)u=I[o],(Ne=this.getAttributeDefinition(o).position.call(this,u,n.clone(),e,v))&&(Te.offset(ye(Ne).scale(Pe,De)),U||(U=!0));this.setNodeAttributes(e,m);var K=!1;if(b){var ie=this.getNodeBoundingRect(e);if(ie.width>0&&ie.height>0){var pe=je.transformRect(ie,oe).scale(1/Pe,1/De);for(o in b)u=b[o],(Ne=this.getAttributeDefinition(o).offset.call(this,u,pe,e,v))&&(Te.offset(ye(Ne).scale(Pe,De)),K||(K=!0))}}(void 0!==ee||U||K)&&(Te.round(1),oe.e=Te.x,oe.f=Te.y,e.setAttribute("transform",je.matrixToTransformString(oe)))}},getNodeScale:function(e,t){var n,r;if(t&&t.contains(e)){var o=t.scale();n=1/o.sx,r=1/o.sy}else n=1,r=1;return{sx:n,sy:r}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(e){var t=this.metrics;if(!t)return{};var n=je.ensureId(e),r=t[n];return r||(r=t[n]={}),r},getNodeData:function(e){var t=this.nodeCache(e);return t.data||(t.data={}),t.data},getNodeBoundingRect:function(e){var t=this.nodeCache(e);return void 0===t.boundingRect&&(t.boundingRect=je(e).getBBox()),new ct(t.boundingRect)},getNodeMatrix:function(e){var t=this.nodeCache(e);if(void 0===t.magnetMatrix){var n=this.rotatableNode||this.el;t.magnetMatrix=je(e).getTransformToElement(n)}return je.createSVGMatrix(t.magnetMatrix)},getNodeShape:function(e){var t=this.nodeCache(e);return void 0===t.geometryShape&&(t.geometryShape=je(e).toGeometryShape()),t.geometryShape.clone()},isNodeConnection:function(e){return this.model.isLink()&&(!e||e===this.el)},findNodesAttributes:function(e,t,n,r){var o,u,c,v,m={},T=[];for(var I in e)if(e.hasOwnProperty(I)&&Jn(c=e[I])){var b=n[I]=this.findBySelector(I,t,r);for(o=0,u=b.length;o<u;o++){var G=b[o];v=je.ensureId(G);var ee=r&&r[I]===G,oe=m[v];if(oe){oe.array||(T.push(v),oe.array=!0,oe.attributes=[oe.attributes],oe.selectedLength=[oe.selectedLength]);var Te=oe.attributes,Pe=oe.selectedLength;if(ee)Te.unshift(c),Pe.unshift(-1);else{var De=dr(Pe,u);Te.splice(De,0,c),Pe.splice(De,0,u)}}else m[v]={attributes:c,selectedLength:ee?-1:u,node:G,array:!1}}}for(o=0,u=T.length;o<u;o++)(c=m[v=T[o]]).attributes=at({},...c.attributes.reverse());return m},getEventTarget:function(e,t={}){const{target:n,type:r,clientX:o=0,clientY:u=0}=e;return t.fromPoint||"touchmove"===r||"touchend"===r?document.elementFromPoint(o,u):n},updateDOMSubtreeAttributes:function(e,t,n){n||(n={}),n.rootBBox||(n.rootBBox=ct()),n.selectors||(n.selectors=this.selectors);var v,m,T,I,b,r={},o={},u=[],c=[],G=n.roAttributes,ee=this.findNodesAttributes(G||t,e,r,n.selectors),oe=G?this.findNodesAttributes(t,e,r,n.selectors):ee;for(var Te in ee)if((b=this.processNodeAttributes(m=(I=ee[Te]).node,T=I.attributes)).set||b.position||b.offset){var Ne,Pe=oe[Te]&&oe[Te].attributes,De=Pe&&void 0===T.ref?Pe.ref:T.ref;if(De){if(!(Ne=(r[De]||this.findBySelector(De,e,n.selectors))[0]))throw new Error('dia.CellView: "'+De+'" reference does not exist.')}else Ne=null;if(v={node:m,refNode:Ne,processedAttributes:b,allAttributes:Pe},Ne){var L=c.findIndex(function(dt){return dt.refNode===m});L>-1?c.splice(L,0,v):c.push(v)}else u.push(v)}else this.setNodeAttributes(m,b.normal);u.push(...c);for(var U,K=0,ie=u.length;K<ie;K++){m=(v=u[K]).node,Ne=v.refNode;var pe=je(n.rotatableNode),Me=Ne?je.ensureId(Ne):"",Oe=!!pe&&!!Ne&&pe.contains(Ne),Ue=o[Me];if(!Ue){var st=Oe?pe:e;Ue=o[Me]=Ne?je(Ne).getBBox({target:st}):n.rootBBox}G?(b=this.processNodeAttributes(m,v.allAttributes),this.mergeProcessedAttributes(b,v.processedAttributes)):b=v.processedAttributes;var tt=Ue;Oe&&!pe.contains(m)&&(U||(U=je.transformStringToMatrix(pe.attr("transform"))),tt=je.transformRect(Ue,U)),this.updateRelativeAttributes(m,b,tt,n)}},mergeProcessedAttributes:function(e,t){e.set||(e.set={}),e.position||(e.position={}),e.offset||(e.offset={}),jt(e.set,t.set),jt(e.position,t.position),jt(e.offset,t.offset);var n=e.normal&&e.normal.transform;void 0!==n&&t.normal&&(t.normal.transform=n),e.normal=t.normal},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(e){var t=this._toolsView;return!(!t||e&&t.getName()!==e)},addTools:function(e){return this.removeTools(),e&&(this._toolsView=e,e.configure({relatedView:this}),e.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},updateTools:function(e){var t=this._toolsView;return t&&t.update(e),this},removeTools:function(){var e=this._toolsView;return e&&(e.remove(),this._toolsView=null),this},hideTools:function(){var e=this._toolsView;return e&&e.hide(),this},showTools:function(){var e=this._toolsView;return e&&e.show(),this},onToolEvent:function(e){switch(e){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools()}},removeHighlighters:function(){Vr.remove(this)},updateHighlighters:function(e=!1){Vr.update(this,null,e)},transformHighlighters:function(){Vr.transform(this)},pointerdblclick:function(e,t,n){this.notify("cell:pointerdblclick",e,t,n)},pointerclick:function(e,t,n){this.notify("cell:pointerclick",e,t,n)},contextmenu:function(e,t,n){this.notify("cell:contextmenu",e,t,n)},pointerdown:function(e,t,n){const{model:r}=this,{graph:o}=r;o&&(r.startBatch("pointer"),this.eventData(e,{graph:o})),this.notify("cell:pointerdown",e,t,n)},pointermove:function(e,t,n){this.notify("cell:pointermove",e,t,n)},pointerup:function(e,t,n){const{graph:r}=this.eventData(e);this.notify("cell:pointerup",e,t,n),r&&r.stopBatch("pointer",{cell:this.model})},mouseover:function(e){this.notify("cell:mouseover",e)},mouseout:function(e){this.notify("cell:mouseout",e)},mouseenter:function(e){this.notify("cell:mouseenter",e)},mouseleave:function(e){this.notify("cell:mouseleave",e)},mousewheel:function(e,t,n,r){this.notify("cell:mousewheel",e,t,n,r)},onevent:function(e,t,n,r){this.notify(t,e,n,r)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(e){const{paper:t}=this;t.isAsync()&&t.dumpView(this);const n=this.getEventTarget(e,{fromPoint:!0}),r=t.findView(n);r!==this&&(this.mouseleave(e),r&&r.mouseenter(e))},setInteractivity:function(e){this.options.interactive=e}},{Highlighting:ls,addPresentationAttributes:function(e){return at({},J(this.prototype,"presentationAttributes"),e,function(t,n){if(t&&n&&("string"==typeof t&&(t=[t]),"string"==typeof n&&(n=[n]),Array.isArray(t)&&Array.isArray(n)))return qr(t.concat(n))})}}),An={UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",TOOLS:"TOOLS",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},pa=Pn.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var e=Pn.prototype.className.apply(this).split(" ");return e.push("element"),e.join(" ")},initialize:function(){Pn.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[An.UPDATE],position:[An.TRANSLATE,An.TOOLS],size:[An.RESIZE,An.PORTS,An.TOOLS],angle:[An.ROTATE,An.TOOLS],markup:[An.RENDER],ports:[An.PORTS]},initFlag:[An.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(e,t){const{useCSSSelectors:n}=Mt;this.hasFlag(e,An.PORTS)&&(this._removePorts(),this._cleanPortsCache());let r=!1;if(this.hasFlag(e,An.RENDER))this.render(),this.updateTools(t),this.updateHighlighters(!0),r=!0,e=this.removeFlag(e,[An.RENDER,An.UPDATE,An.RESIZE,An.TRANSLATE,An.ROTATE,An.PORTS,An.TOOLS]);else{let o=!1;this.hasFlag(e,An.RESIZE)&&(this.resize(t),o=!0,e=this.removeFlag(e,[An.RESIZE,An.UPDATE])),this.hasFlag(e,An.UPDATE)&&(this.update(this.model,null,t),e=this.removeFlag(e,An.UPDATE),o=!0,n&&(e=this.removeFlag(e,An.PORTS))),this.hasFlag(e,An.TRANSLATE)&&(this.translate(),e=this.removeFlag(e,An.TRANSLATE),r=!0),this.hasFlag(e,An.ROTATE)&&(this.rotate(),e=this.removeFlag(e,An.ROTATE),r=!0),this.hasFlag(e,An.PORTS)&&(this._renderPorts(),o=!0,e=this.removeFlag(e,An.PORTS)),o&&this.updateHighlighters(!1)}return r&&this.transformHighlighters(),this.hasFlag(e,An.TOOLS)&&(this.updateTools(t),e=this.removeFlag(e,An.TOOLS)),e},_initializePorts:function(){},update:function(e,t){this.cleanNodesCache();const{useCSSSelectors:n}=Mt;n&&this._removePorts();var r=this.model,o=r.attr();this.updateDOMSubtreeAttributes(this.el,o,{rootBBox:new ct(r.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:t===o?null:t}),n&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var e=this.model,t=e.get("markup")||e.markup;if(!t)throw new Error("dia.ElementView: markup required");if(Array.isArray(t))return this.renderJSONMarkup(t);if("string"==typeof t)return this.renderStringMarkup(t);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(e){var t=this.parseDOMJSON(e,this.el),n=this.selectors=t.selectors;this.rotatableNode=je(n[this.rotatableSelector])||null,this.scalableNode=je(n[this.scalableSelector])||null,this.vel.append(t.fragment)},renderStringMarkup:function(e){var t=this.vel;t.append(je(e)),this.rotatableNode=t.findOne(".rotatable"),this.scalableNode=t.findOne(".scalable"),(this.selectors={})[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),Mt.useCSSSelectors||this._renderPorts(),this},resize:function(e){if(this.scalableNode)return this.sgResize(e);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode)return this.rgRotate(),void this.update();this.updateTransformation()},updateTransformation:function(){var e=this.getTranslateString(),t=this.getRotateString();t&&(e+=" "+t),this.vel.attr("transform",e)},getTranslateString:function(){var e=this.model.attributes.position;return"translate("+e.x+","+e.y+")"},getRotateString:function(){var e=this.model.attributes,t=e.angle;if(!t)return null;var n=e.size;return"rotate("+t+","+n.width/2+","+n.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(e){var t=this.model,n=t.angle(),r=t.size(),o=this.scalableNode,u=!1;o.node.getElementsByTagName("path").length>0&&(u=!0);var c=o.getBBox({recursive:u});o.attr("transform","scale("+r.width/(c.width||1)+","+r.height/(c.height||1)+")");var T=this.rotatableNode,I=T&&T.attr("transform");if(I){T.attr("transform",I+" rotate("+-n+","+r.width/2+","+r.height/2+")");var b=o.getBBox({target:this.paper.cells});t.set("position",{x:b.x,y:b.y},jt({updateHandled:!0},e)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(e={}){const t=e.model||this.model,r=(e.paper||this.paper).model,o=e.initialZIndices={},u=t.getEmbeddedCells({deep:!0}),c=r.getConnectedLinks(t,{deep:!0,includeEnclosed:!0});[t,...u,...c].forEach(T=>o[T.id]=T.attributes.z),t.startBatch("to-front"),t.toFront({deep:!0,ui:!0});const v=r.getElements().reduce((T,I)=>Math.max(T,I.attributes.z||0),0);c.forEach(T=>{T.attributes.z<=v&&T.set("z",v+1,{ui:!0})}),t.stopBatch("to-front");const m=t.parent();m?(r.getCell(m).unembed(t,{ui:!0}),e.initialParentId=m):e.initialParentId=null},processEmbedding:function(e={},t,n,r){const o=e.model||this.model,u=e.paper||this.paper,c=u.model,{findParentBy:v,frontParentOnly:m,validateEmbedding:T}=u.options;let I;I=Nn(v)?me(v.call(c,this,t,n,r)):"pointer"===v?me(c.findModelsFromPoint({x:n,y:r})):c.findModelsUnderElement(o,{searchBy:v}),I=I.filter(ee=>ee instanceof To&&o.id!==ee.id&&!ee.isEmbeddedIn(o)),m&&(I=I.slice(-1));let b=null;const G=e.candidateEmbedView;for(let ee=I.length-1;ee>=0;ee--){const oe=I[ee];if(G&&G.model.id==oe.id){b=G;break}{const Te=oe.findView(u);if(!Nn(T)||T.call(u,this,Te)){b=Te;break}}}b&&b!=G&&(this.clearEmbedding(e),e.candidateEmbedView=b.highlight(b.findProxyNode(null,"container"),{embedding:!0})),!b&&G&&this.clearEmbedding(e)},clearEmbedding:function(e){e||(e={});var t=e.candidateEmbedView;t&&(t.unhighlight(t.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null)},finalizeEmbedding:function(e={}){const t=e.candidateEmbedView,n=e.model||this.model,r=e.paper||this.paper;if(t)t.model.embed(n,{ui:!0}),t.unhighlight(t.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null;else{const{validateUnembedding:o}=r.options,{initialParentId:u}=e;if(u&&"function"==typeof o&&!o.call(r,this))return void this._disallowUnembed(e)}r.model.getConnectedLinks(n,{deep:!0}).forEach(o=>{o.reparent({ui:!0})})},_disallowUnembed:function(e){const{model:t,whenNotAllowed:n="revert"}=e,r=t||this.model,u=(e.paper||this.paper).model;switch(n){case"remove":r.remove({ui:!0});break;case"revert":{const{initialParentId:c,initialPosition:v,initialZIndices:m}=e;if(v){const{x:I,y:b}=v;r.position(I,b,{deep:!0,ui:!0})}m&&Object.keys(m).forEach(I=>{const b=u.getCell(I);b&&b.set("z",m[I],{ui:!0})});const T=u.getCell(c);T&&T.embed(r,{ui:!0});break}}},getDelegatedView:function(){for(var e=this,t=e.model,n=e.paper;e&&!t.isLink();){if(!t.isEmbedded()||e.can("stopDelegation"))return e;t=t.getParentCell(),e=n.findViewByModel(t)}return null},findProxyNode:function(e,t){e||(e=this.el);const n=e.getAttribute(`${t}-selector`);if(n){const r=this.findAttribute("port",e);if(r){const o=this.findPortNode(r,n);if(o)return o}else{const[o]=this.findBySelector(n);if(o)return o}}return e},notifyPointerdown(e,t,n){Pn.prototype.pointerdown.call(this,e,t,n),this.notify("element:pointerdown",e,t,n)},notifyPointermove(e,t,n){Pn.prototype.pointermove.call(this,e,t,n),this.notify("element:pointermove",e,t,n)},notifyPointerup(e,t,n){this.notify("element:pointerup",e,t,n),Pn.prototype.pointerup.call(this,e,t,n)},pointerdblclick:function(e,t,n){Pn.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",e,t,n)},pointerclick:function(e,t,n){Pn.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",e,t,n)},contextmenu:function(e,t,n){Pn.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",e,t,n)},pointerdown:function(e,t,n){this.isPropagationStopped(e)||(this.notifyPointerdown(e,t,n),this.dragStart(e,t,n))},pointermove:function(e,t,n){var r=this.eventData(e);switch(r.action){case"magnet":this.dragMagnet(e,t,n);break;case"move":(r.delegatedView||this).drag(e,t,n);default:this.notifyPointermove(e,t,n)}this.eventData(e,r)},pointerup:function(e,t,n){var r=this.eventData(e);switch(r.action){case"magnet":this.dragMagnetEnd(e,t,n);break;case"move":(r.delegatedView||this).dragEnd(e,t,n);default:this.notifyPointerup(e,t,n)}var o=r.targetMagnet;o&&this.magnetpointerclick(e,o,t,n),this.checkMouseleave(e)},mouseover:function(e){Pn.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",e)},mouseout:function(e){Pn.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",e)},mouseenter:function(e){Pn.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",e)},mouseleave:function(e){Pn.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",e)},mousewheel:function(e,t,n,r){Pn.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",e,t,n,r)},onmagnet:function(e,t,n){this.dragMagnetStart(e,t,n)},magnetpointerdblclick:function(e,t,n,r){this.notify("element:magnet:pointerdblclick",e,t,n,r)},magnetcontextmenu:function(e,t,n,r){this.notify("element:magnet:contextmenu",e,t,n,r)},dragStart:function(e,t,n){var r=this.getDelegatedView();if(!r||!r.can("elementMove"))return;this.eventData(e,{action:"move",delegatedView:r});const o=r.model.position();r.eventData(e,{initialPosition:o,pointerOffset:o.difference(t,n),restrictedArea:this.paper.getRestrictedArea(r,t,n)})},dragMagnetStart:function(e,t,n){if(this.can("addLinkFromMagnet")){var r=e.currentTarget,o=this.paper;this.eventData(e,{targetMagnet:r}),e.stopPropagation(),o.options.validateMagnet(this,r,e)?(o.options.magnetThreshold<=0&&this.dragLinkStart(e,r,t,n),this.eventData(e,{action:"magnet"}),this.stopPropagation(e)):this.pointerdown(e,t,n),o.delegateDragEvents(this,e.data)}},drag:function(e,t,n){var r=this.paper,o=r.options.gridSize,u=this.model,c=this.eventData(e),{pointerOffset:v,restrictedArea:m,embedding:T}=c,I=Mi(t+v.x,o),b=Mi(n+v.y,o);u.position(I,b,{restrictedArea:m,deep:!0,ui:!0}),r.options.embeddingMode&&(T||(this.prepareEmbedding(c),T=!0),this.processEmbedding(c,e,t,n)),this.eventData(e,{embedding:T})},dragMagnet:function(e,t,n){this.dragLink(e,t,n)},dragEnd:function(e,t,n){var r=this.eventData(e);r.embedding&&this.finalizeEmbedding(r)},dragMagnetEnd:function(e,t,n){this.dragLinkEnd(e,t,n)},magnetpointerclick:function(e,t,n,r){var o=this.paper;o.eventData(e).mousemoved>o.options.clickThreshold||this.notify("element:magnet:pointerclick",e,t,n,r)}},{Flags:An});jt(pa.prototype,Kf);const ga=function(e,t,n){return e},ac=function(e,t,n){var T,I,b,r=t.side||"bottom",o=io(t.padding||40),u=n.sourceBBox,c=n.targetBBox,v=u.center(),m=c.center();switch(r){case"bottom":b=1,T="y",I="height";break;case"top":b=-1,T="y",I="height";break;case"left":b=-1,T="x",I="width";break;case"right":b=1,T="x",I="width";break;default:throw new Error("Router: invalid side")}return v[T]+=b*(u[I]/2+o[r]),m[T]+=b*(c[I]/2+o[r]),b*(v[T]-m[T])>0?m[T]=v[T]:v[T]=m[T],[v].concat(e,m)};var nd={N:"S",S:"N",E:"W",W:"E"},gu={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function vu(e,t,n){var r=new ye(e.x,t.y);return n.containsPoint(r)&&(r=new ye(t.x,e.y)),r}function mu(e,t){return e["W"===t||"E"===t?"width":"height"]}function zn(e,t){return e.x===t.x?e.y>t.y?"N":"S":e.y===t.y?e.x>t.x?"W":"E":null}function cs(e){return new ct(e.x,e.y,0,0)}function Ns(e){var t=io(e.padding||e.elementPadding||20);return{x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}function lo(e,t){return e.sourceBBox.clone().moveAndExpand(Ns(t))}function yu(e,t){return e.targetBBox.clone().moveAndExpand(Ns(t))}function al(e,t,n){var r=new ye(e.x,t.y),o=new ye(t.x,e.y),u=zn(e,r),c=zn(e,o),v=nd[n],m=u===n||u!==v&&(c===v||c!==n)?r:o;return{points:[m],direction:zn(m,t)}}function $r(e,t,n){var r=vu(e,t,n);return{points:[r],direction:zn(r,t)}}function sl(e,t,n,r){var m,o={},u=[new ye(e.x,t.y),new ye(t.x,e.y)],c=u.filter(function(b){return!n.containsPoint(b)}),v=c.filter(function(b){return zn(b,e)!==r});if(v.length>0)m=v.filter(function(b){return zn(e,b)===r}).pop(),o.points=[m=m||v[0]],o.direction=zn(m,t);else{m=hr(u,c)[0];var T=new ye(t).move(m,-mu(n,r)/2),I=vu(T,e,n);o.points=[I,T],o.direction=zn(T,t)}return o}function rd(e,t,n,r){var o=$r(t,e,r),u=o.points[0];if(n.containsPoint(u)){var c=(o=$r(e,t,n)).points[0];if(r.containsPoint(c)){var v=new ye(e).move(c,-mu(n,zn(e,c))/2),m=new ye(t).move(u,-mu(r,zn(t,u))/2),T=new gt(v,m).midpoint(),I=$r(e,T,n),b=al(T,t,I.direction);o.points=[I.points[0],b.points[0]],o.direction=b.direction}}return o}function ul(e,t,n,r,o){var I,b,G,u={},c=n.union(r).inflate(1),v=c.center().distance(t)>c.center().distance(e),m=v?t:e,T=v?e:t;return o?(I=ye.fromPolar(c.width+c.height,gu[o],m),I=c.pointNearestToPoint(I).move(I,-1)):I=c.pointNearestToPoint(m).move(m,1),b=vu(I,T,c),I.round().equals(b.round())?(b=ye.fromPolar(c.width+c.height,Lr(I.theta(m))+Math.PI/2,T),G=vu(I,b=c.pointNearestToPoint(b).move(T,1).round(),c),u.points=v?[b,G,I]:[I,G,b]):u.points=v?[b,I]:[I,b],u.direction=zn(v?I:b,t),u}function ll(e,t,n){var r=lo(n,t),o=yu(n,t),u=function xu(e,t){return e.sourceAnchor?e.sourceAnchor:lo(e,t).center()}(n,t),c=function za(e,t){return e.targetAnchor?e.targetAnchor:yu(e,t).center()}(n,t);r=r.union(cs(u)),o=o.union(cs(c)),(e=me(e).map(ye)).unshift(u),e.push(c);for(var v,m=[],T=0,I=e.length-1;T<I;T++){var b=null,G=e[T],ee=e[T+1],oe=!!zn(G,ee);if(0===T)T+1===I?r.intersect(o.clone().inflate(1))?b=ul(G,ee,r,o):oe||(b=rd(G,ee,r,o)):r.containsPoint(ee)?b=ul(G,ee,r,cs(ee).moveAndExpand(Ns(t))):oe||(b=$r(G,ee,r));else if(T+1===I){var Te=oe&&zn(ee,G)===v;o.containsPoint(G)||Te?b=ul(G,ee,cs(G).moveAndExpand(Ns(t)),o,v):oe||(b=sl(G,ee,o,v))}else oe||(b=al(G,ee,v));b?(Array.prototype.push.apply(m,b.points),v=b.direction):v=zn(G,ee),T+1<I&&m.push(ee)}return m}var bu={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var e=this.step,t=this.cost();return[{offsetX:e,offsetY:0,cost:t},{offsetX:-e,offsetY:0,cost:t},{offsetX:0,offsetY:e,cost:t},{offsetX:0,offsetY:-e,cost:t}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var e=this.step;return{x:-e,y:-e,width:2*e,height:2*e}},isPointObstacle:null,fallbackRouter:function(e,t,n){if(!Nn(ll))throw new Error("Manhattan requires the orthogonal router as default fallback.");return ll(e,jt({},bu,t),n)},fallbackRoute:function(e,t,n){return null},draggingRoute:null};function cl(e){this.map={},this.options=e,this.mapGridSize=100}function co(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function fl(e,t){return t&&t.paddingBox?e.sourceBBox.clone().moveAndExpand(t.paddingBox):e.sourceBBox.clone()}function sc(e,t){return t&&t.paddingBox?e.targetBBox.clone().moveAndExpand(t.paddingBox):e.targetBBox.clone()}function uc(e,t){return e.sourceAnchor?e.sourceAnchor:fl(e,t).center()}function dl(e,t,n,r,o){var u=360/n,c=e.theta(function id(e,t,n,r){var o=r.step;return new ye(e.x+(t.x-e.x)/n.x*o,e.y+(t.y-e.y)/n.y*o)}(e,t,r,o)),v=zr(c+u/2);return u*Math.floor(v/u)}function Cu(e,t){var n=Math.abs(e-t);return n>180?360-n:n}function cc(e,t){if(!e)return t;var n=Math.abs(e),r=Math.round(n/t);return r?t+(n-r*t)/r:n}function fs(e,t){return e.round(t)}function ds(e,t,n){return fs(function ad(e,t){var n=t.source,r=Mi(e.x-n.x,t.x)+n.x,o=Mi(e.y-n.y,t.y)+n.y;return new ye(r,o)}(e.clone(),t),n)}function Fs(e){return e.clone().toString()}function Vs(e){return new ye(0===e.x?0:Math.abs(e.x)/e.x,0===e.y?0:Math.abs(e.y)/e.y)}function fc(e,t,n,r,o,u,c){for(var b,v=[],m=Vs(o.difference(n)),T=Fs(n),I=e[T];I;){var G=Vs((b=t[T]).difference(I));G.equals(m)||(v.unshift(b),m=G),I=e[T=Fs(I)]}var ee=t[T];return Vs(ee.difference(r)).equals(m)||v.unshift(ee),v}function hl(e,t){for(var n=1/0,r=0,o=t.length;r<o;r++){var u=e.manhattanDistance(t[r]);u<n&&(n=u)}return n}function pl(e,t,n,r,o){var u=o.precision,c=o.directionMap,v=e.difference(t.center()),m=vt(c)?Object.keys(c):[],T=me(n),I=m.reduce(function(b,G){if(T.includes(G)){for(var Ne,ee=c[G],oe=new ye(e.x+ee.x*(Math.abs(v.x)+t.width),e.y+ee.y*(Math.abs(v.y)+t.height)),Pe=new gt(e,oe).intersect(t)||[],De=Pe.length,L=null,U=0;U<De;U++){var K=Pe[U],ie=e.squaredDistance(K);(void 0===Ne||ie>Ne)&&(Ne=ie,L=K)}if(L){var pe=ds(L,r,u);t.containsPoint(pe)&&(pe=ds(pe.offset(ee.x*r.x,ee.y*r.y),r,u)),b.push(pe)}}return b},[]);return t.containsPoint(e)||I.push(ds(e,r,u)),I}function _u(e,t,n,r){var u,c,o=r.precision;u=fs(e instanceof ct?uc(this,r).clone():e.clone(),o),c=fs(t instanceof ct?function Ds(e,t){return e.targetAnchor?e.targetAnchor:sc(e,t).center()}(this,r).clone():t.clone(),o);var m,T,I,b,v=function od(e,t,n){return{source:t.clone(),x:cc(n.x-t.x,e),y:cc(n.y-t.y,e)}}(r.step,u,c);if(I=e instanceof ct?pl(m=u,e,r.startDirections,v,r):[m=u],t instanceof ct?(T=c,b=pl(c,t,r.endDirections,v,r)):b=[T=c],I=I.filter(Cn=>!n(Cn)),b=b.filter(Cn=>!n(Cn)),I.length>0&&b.length>0){for(var G=new co,ee={},oe={},Te={},Pe=0,De=I.length;Pe<De;Pe++){var Ne=I[Pe],L=Fs(Ne);G.add(L,hl(Ne,b)),ee[L]=Ne,Te[L]=0}var ie,pe,U=r.previousDirectionAngle,K=void 0===U,Me=r.directions;!function lc(e,t,n){var r=n.step;me(n.directions).forEach(function(o){o.gridOffsetX=o.offsetX/r*t.x,o.gridOffsetY=o.offsetY/r*t.y})}(0,v,r);for(var Oe=Me.length,Ue=me(b).reduce(function(Cn,Ft){var Ct=Fs(Ft);return Cn.push(Ct),Cn},[]),st=r.maximumLoops;!G.isEmpty()&&st>0;){var In,tt=G.pop(),dt=ee[tt],yt=oe[tt],xt=Te[tt],Lt=void 0===yt,Hn=dt.equals(m);In=Lt?K?Hn?null:dl(m,dt,Oe,v,r):U:dl(yt,dt,Oe,v,r);var Zn=I.length===b.length;if(Zn)for(var Vt=0;Vt<I.length;Vt++)if(!I[Vt].equals(b[Vt])){Zn=!1;break}if((!Lt||!Zn)&&Ue.indexOf(tt)>=0)return r.previousDirectionAngle=In,fc(oe,ee,dt,m,T);for(Pe=0;Pe<Oe;Pe++){var Bt=(ie=Me[Pe]).angle;if(pe=Cu(In,Bt),K&&Hn||!(pe>r.maxAllowedDirectionChange)){var zt=ds(dt.clone().offset(ie.gridOffsetX,ie.gridOffsetY),v,o),xn=Fs(zt);if(!G.isClose(xn)&&!n(zt)){if(Ue.indexOf(xn)>=0&&!zt.equals(T)&&Cu(Bt,dl(zt,T,Oe,v,r))>r.maxAllowedDirectionChange)continue;var an=xt+ie.cost+(Hn?0:r.penalties[pe]);(!G.isOpen(xn)||an<Te[xn])&&(ee[xn]=zt,oe[xn]=dt,Te[xn]=an,G.add(xn,an+hl(zt,b)))}}}st--}}return r.fallbackRoute.call(this,m,T,r)}cl.prototype.build=function(e,t){var n=this.options,r=me(n.excludeEnds).reduce(function(m,T){var I=t.get(T);if(I){var b=e.getCell(I.id);b&&m.push(b)}return m},[]),o=[],u=e.getCell(t.get("source").id);u&&(o=fa(o,u.getAncestors().map(function(m){return m.id})));var c=e.getCell(t.get("target").id);c&&(o=fa(o,c.getAncestors().map(function(m){return m.id})));var v=this.mapGridSize;return e.getElements().reduce(function(m,T){var I=me(n.excludeTypes).includes(T.get("type")),b=r.find(function(U){return U.id===T.id}),G=o.includes(T.id);if(!(I||b||G))for(var oe=T.getBBox().moveAndExpand(n.paddingBox),Te=oe.origin().snapToGrid(v),Pe=oe.corner().snapToGrid(v),De=Te.x;De<=Pe.x;De+=v)for(var Ne=Te.y;Ne<=Pe.y;Ne+=v){var L=De+"@"+Ne;m[L]=m[L]||[],m[L].push(oe)}return m},this.map),this},cl.prototype.isPointAccessible=function(e){var t=e.clone().snapToGrid(this.mapGridSize).toString();return me(this.map[t]).every(function(n){return!n.containsPoint(e)})},co.prototype.add=function(e,t){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=this.OPEN,this.values[e]=t;var n=dr(this.items,e,function(r){return this.values[r]}.bind(this));this.items.splice(n,0,e)},co.prototype.remove=function(e){this.hash[e]=this.CLOSE},co.prototype.isOpen=function(e){return this.hash[e]===this.OPEN},co.prototype.isClose=function(e){return this.hash[e]===this.CLOSE},co.prototype.isEmpty=function(){return 0===this.items.length},co.prototype.pop=function(){var e=this.items.shift();return this.remove(e),e};const wu=function(e,t,n){return function dc(e,t,n){(function sd(e){if(e.directions=J(e,"directions"),e.penalties=J(e,"penalties"),e.paddingBox=J(e,"paddingBox"),e.padding=J(e,"padding"),e.padding){var t=io(e.padding);e.paddingBox={x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}me(e.directions).forEach(function(n){var r=new ye(0,0),o=new ye(n.offsetX,n.offsetY);n.angle=zr(r.theta(o))})})(t),n.options.perpendicular=!!t.perpendicular;var r=fl(n,t),o=sc(n,t),u=uc(n,t);let c;if("function"==typeof t.isPointObstacle)c=t.isPointObstacle;else{const L=new cl(t);L.build(n.paper.model,n.model),c=U=>!L.isPointAccessible(U)}for(var I,b,v=me(e).map(ye),m=[],T=u,G=0,ee=v.length;G<=ee;G++){var oe=null;if(b=I||r,!(I=v[G])&&(I=o,(!n.model.get("source").id||!n.model.get("target").id)&&Nn(t.draggingRoute))){var Pe=b===r?u:b,De=I.origin();oe=t.draggingRoute.call(n,Pe,De,t)}if(null===(oe=oe||_u.call(n,b,I,c,t)))return t.fallbackRouter(e,t,n);var Ne=oe[0];Ne&&Ne.equals(T)&&oe.shift(),T=oe[oe.length-1]||T,Array.prototype.push.apply(m,oe)}return m}(e,jt({},bu,t),n)};var ud={maxAllowedDirectionChange:45,diagonalCost:function(){var e=this.step;return Math.ceil(Math.sqrt(e*e<<1))},directions:function(){var e=this.step,t=this.cost(),n=this.diagonalCost();return[{offsetX:e,offsetY:0,cost:t},{offsetX:e,offsetY:e,cost:n},{offsetX:0,offsetY:e,cost:t},{offsetX:-e,offsetY:e,cost:n},{offsetX:-e,offsetY:0,cost:t},{offsetX:-e,offsetY:-e,cost:n},{offsetX:0,offsetY:-e,cost:t},{offsetX:e,offsetY:-e,cost:n}]},fallbackRoute:function(e,t,n){var r=e.theta(t),o=[],u={x:t.x,y:e.y},c={x:e.x,y:t.y};if(r%180>90){var v=u;u=c,c=v}var m=r%90<45?u:c,T=new gt(e,m),I=90*Math.ceil(r/90),b=ye.fromPolar(T.squaredLength(),Lr(I+135),m),G=new gt(t,b),ee=T.intersection(G),oe=ee||t,Pe=360/n.directions.length,De=(ee?oe:e).theta(t),Ne=zr(De+Pe/2),L=Pe*Math.floor(Ne/Pe);return n.previousDirectionAngle=L,oe&&o.push(oe.round()),o.push(t),o}};const hc=function(e,t,n){if(!Nn(wu))throw new Error("Metro requires the manhattan router.");return wu(e,jt({},ud,t),n)};var Su=["arc","gap","cubic"],cd=["smooth"],hs=1/3,dn=2/3;function gl(e,t,n){var r=[].concat(e,n,t);return r.reduce(function(o,u,c){var v=r[c+1];return null!=v&&(o[c]=Li(u,v)),o},[])}function vc(e,t){return Li(e,t).squaredLength()}function Ni(e,t,n,r){var u,o=new It;return u=It.createSegment("M",e[0].start),o.appendSegment(u),me(e).forEach(function(c,v){if(c.isJump){var m,T,I,b;if("arc"===n){m=-90,T=c.start.difference(c.end);var G=Number(T.x<0||0===T.x&&T.y<0);G&&(m+=180);var Te,ee=c.midpoint(),oe=new gt(ee,c.end).rotate(ee,m);I=(Te=new gt(c.start,ee)).pointAt(2/3).rotate(c.start,m),b=oe.pointAt(1/3).rotate(oe.end,-m),u=It.createSegment("C",I,b,oe.end),o.appendSegment(u),Te=new gt(ee,c.end),I=oe.pointAt(1/3).rotate(oe.end,m),b=Te.pointAt(1/3).rotate(c.end,-m),u=It.createSegment("C",I,b,c.end),o.appendSegment(u)}else if("gap"===n)u=It.createSegment("M",c.end),o.appendSegment(u);else if("cubic"===n){m=c.start.theta(c.end);var Pe=.6*t,De=1.35*t;T=c.start.difference(c.end),(G=Number(T.x<0||0===T.x&&T.y<0))&&(De*=-1),I=ye(c.start.x+Pe,c.start.y+De).rotate(c.start,m),b=ye(c.end.x-Pe,c.end.y+De).rotate(c.end,m),u=It.createSegment("C",I,b,c.end),o.appendSegment(u)}}else{var Ne=e[v+1];0==r||!Ne||Ne.isJump?(u=It.createSegment("L",c.end),o.appendSegment(u)):function hd(e,t,n,r,o){var ee,u=n.distance(r)/2,c=n.distance(o)/2,v=-Math.min(e,u),m=-Math.min(e,c),T=n.clone().move(r,v).round(),I=n.clone().move(o,m).round(),b=new ye(hs*T.x+dn*n.x,dn*n.y+hs*T.y),G=new ye(hs*I.x+dn*n.x,dn*n.y+hs*I.y);ee=It.createSegment("L",T),t.appendSegment(ee),ee=It.createSegment("C",b,G,I),t.appendSegment(ee)}(r,o,c.end,c.start,Ne.end)}}),o}const Eu=function(e,t,n,r){!function fd(e){var t=e.paper,n=t._jumpOverUpdateList;if(null==n){n=t._jumpOverUpdateList=[];var r=t.model;r.on("batch:stop",function(){this.hasActiveBatch()||function Bs(e){for(var t=e._jumpOverUpdateList,n=0;n<t.length;n++){const r=t[n],o=r.getFlag(r.constructor.Flags.CONNECTOR);r.requestUpdate(o)}}(t)}),r.on("reset",function(){n=t._jumpOverUpdateList=[]})}n.indexOf(e)<0&&(n.push(e),e.listenToOnce(e.model,"change:connector remove",function(){n.splice(n.indexOf(e),1)}))}(this);var o=r.raw,u=r.size||5,c=r.jump&&(""+r.jump).toLowerCase(),v=r.radius||0,m=r.ignoreConnectors||cd;-1===Su.indexOf(c)&&(c=Su[0]);var T=this.paper,b=T.model.getLinks();if(1===b.length)return Ni(gl(e,t,n),u,c,v);var G=this.model,ee=b.indexOf(G),oe=T.options.defaultConnector||{},Te=b.filter(function(K,ie){var pe=K.get("connector")||oe;return!(me(m).includes(pe.name)||ie>ee&&"jumpover"===pe.name)}),Pe=Te.map(function(K){return T.findViewByModel(K)}),De=gl(e,t,n),Ne=Pe.map(function(K){return null==K?[]:K===this?De:gl(K.sourcePoint,K.targetPoint,K.route)},this),L=De.reduce(function(K,ie){var pe=Te.reduce(function(Me,Oe,Ue){if(Oe!==G){var st=function gc(e,t){return me(t).reduce(function(n,r){var o=e.intersection(r);return o&&n.push(o),n},[])}(ie,Ne[Ue]);Me.push.apply(Me,st)}return Me},[]).sort(function(Me,Oe){return vc(ie.start,Me)-vc(ie.start,Oe)});return pe.length>0?K.push.apply(K,function dd(e,t,n){return t.reduce(function(r,o,u){if(!0===o.skip)return r;var c=r.pop()||e,v=Pr(o).move(c.start,-n),m=Pr(o).move(c.start,+n),T=t[u+1];if(null!=T){var I=m.distance(T);I<=n&&(m=T.move(c.start,I),T.skip=!0)}else if(v.distance(c.end)<2*n+1)return r.push(c),r;if(m.distance(c.start)<2*n+1)return r.push(c),r;var ee=Li(v,m);return ee.isJump=!0,r.push(Li(c.start,v),ee,Li(m,c.end)),r},[])}(ie,pe,u)):K.push(ie),K},[]),U=Ni(L,u,c,v);return o?U:U.serialize()},vl=function(e,t,n,r){var o=r&&r.raw,u=[e].concat(n).concat([t]),c=new fn(u),v=new It(c);return o?v:v.serialize()},mc=function(e,t,n,r){r||(r={});var v,o=r.radius||10,u=r.raw,c=new It;v=It.createSegment("M",e),c.appendSegment(v);for(var I,b,G,ee,oe,Te,Pe,De,Ne,L,U,m=1/3,T=2/3,K=0,ie=n.length;K<ie;K++)I=new ye(n[K]),b=n[K-1]||e,G=n[K+1]||t,ee=oe||I.distance(b)/2,oe=I.distance(G)/2,Te=-Math.min(o,ee),Pe=-Math.min(o,oe),De=I.clone().move(b,Te).round(),Ne=I.clone().move(G,Pe).round(),L=new ye(m*De.x+T*I.x,T*I.y+m*De.y),U=new ye(m*Ne.x+T*I.x,T*I.y+m*Ne.y),v=It.createSegment("L",De),c.appendSegment(v),v=It.createSegment("C",L,U,Ne),c.appendSegment(v);return v=It.createSegment("L",t),c.appendSegment(v),u?c:c.serialize()},yc=function(e,t,n,r){var u,o=r&&r.raw;if(n&&0!==n.length){var c=[e].concat(n).concat([t]),v=yn.throughPoints(c);u=new It(v)}else{var m;if(u=new It,m=It.createSegment("M",e),u.appendSegment(m),Math.abs(e.x-t.x)>=Math.abs(e.y-t.y)){var T=(e.x+t.x)/2;m=It.createSegment("C",T,e.y,T,t.y,t.x,t.y),u.appendSegment(m)}else{var I=(e.y+t.y)/2;m=It.createSegment("C",e.x,I,t.x,I,t.x,t.y),u.appendSegment(m)}}return o?u:u.serialize()},pr={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},_r={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Hs=function(e,t,n=[],r={},o){const u=Boolean(r.raw),{direction:c=pr.AUTO,precision:v=3}=r,m={coeff:r.distanceCoefficient||.6,angleTangentCoefficient:r.angleTangentCoefficient||80,tau:r.tension||.5,sourceTangent:r.sourceTangent?new ye(r.sourceTangent):null,targetTangent:r.targetTangent?new ye(r.targetTangent):null};m.sourceDirection="string"==typeof r.sourceDirection?r.sourceDirection:"number"==typeof r.sourceDirection?new ye(1,0).rotate(null,r.sourceDirection):r.sourceDirection?new ye(r.sourceDirection).normalize():null,m.targetDirection="string"==typeof r.targetDirection?r.targetDirection:"number"==typeof r.targetDirection?new ye(1,0).rotate(null,r.targetDirection):r.targetDirection?new ye(r.targetDirection).normalize():null;const T=[e,...n.map(Te=>new ye(Te)),t];let I,b;if(m.sourceTangent)I=m.sourceTangent;else{const Te=function _c(e,t,n,r){if(r.sourceDirection)switch(r.sourceDirection){case _r.UP:return new ye(0,-1);case _r.DOWN:return new ye(0,1);case _r.LEFT:return new ye(-1,0);case _r.RIGHT:return new ye(0,1);case _r.AUTO:return yl(e,t);case _r.CLOSEST_POINT:return Iu(0,t);case _r.OUTWARDS:return Cc(e,t);default:return r.sourceDirection}switch(n){case pr.HORIZONTAL:return function xc(e,t,n){const{sourceBBox:r}=e;let o;return"left"===(o=r.width&&r.height?r.sideNearestToPoint(t[0]):r.x>t[1].x?"right":"left",o)?new ye(-1,0):new ye(1,0)}(e,t);case pr.VERTICAL:return function bc(e,t,n){const{sourceBBox:r}=e;let o;return"top"===(o=r.width&&r.height?r.sideNearestToPoint(t[0]):r.y>t[1].y?"bottom":"top",o)?new ye(0,-1):new ye(0,1)}(e,t);case pr.CLOSEST_POINT:return Iu(0,t);case pr.OUTWARDS:return Cc(e,t);default:return yl(e,t)}}(o,T,c,m),Pe=T[0].distance(T[1])*m.coeff,Ne=bl(Te,T[1].difference(T[0]).normalize());if(Ne>Math.PI/4){const L=Pe+(Ne-Math.PI/4)*m.angleTangentCoefficient;I=Te.clone().scale(L,L)}else I=Te.clone().scale(Pe,Pe)}if(m.targetTangent)b=m.targetTangent;else{const Te=function wc(e,t,n,r){if(r.targetDirection)switch(r.targetDirection){case _r.UP:return new ye(0,-1);case _r.DOWN:return new ye(0,1);case _r.LEFT:return new ye(-1,0);case _r.RIGHT:return new ye(0,1);case _r.AUTO:return Au(e,t);case _r.CLOSEST_POINT:return zo(0,t);case _r.OUTWARDS:return Go(e,t);default:return r.targetDirection}switch(n){case pr.HORIZONTAL:return function Pu(e,t,n){const{targetBBox:r}=e;let o;return"left"===(o=r.width&&r.height?r.sideNearestToPoint(t[t.length-1]):r.x>t[t.length-2].x?"left":"right",o)?new ye(-1,0):new ye(1,0)}(e,t);case pr.VERTICAL:return function ml(e,t,n){const{targetBBox:r}=e;let o;return"top"===(o=r.width&&r.height?r.sideNearestToPoint(t[t.length-1]):r.y>t[t.length-2].y?"top":"bottom",o)?new ye(0,-1):new ye(0,1)}(e,t);case pr.CLOSEST_POINT:return zo(0,t);case pr.OUTWARDS:return Go(e,t);default:return Au(e,t)}}(o,T,c,m),Pe=T.length-1,De=T[Pe-1].distance(T[Pe])*m.coeff,L=bl(Te,T[Pe-1].difference(T[Pe]).normalize());if(L>Math.PI/4){const U=De+(L-Math.PI/4)*m.angleTangentCoefficient;b=Te.clone().scale(U,U)}else b=Te.clone().scale(De,De)}const ee=function pd(e,t,n,r){const{tau:o,coeff:u}=r,c=[],v=[],m=[],T=e.length-1;for(let I=0;I<T;I++)c[I]=e[I].distance(e[I+1]);v[0]=t,v[T]=n;for(let I=1;I<T;I++){let b,G;b=1===I?e[I-1].clone().offset(v[I-1].x,v[I-1].y):e[I-1].clone(),G=I===T-1?e[I+1].clone().offset(v[I+1].x,v[I+1].y):e[I+1].clone();const ee=b.difference(e[I]).normalize(),oe=G.difference(e[I]).normalize(),Te=bl(ee,oe);let De,Pe=(Math.PI-Te)/2;const Ne=Sc(ee,oe);let L;L=Sc(e[I].difference(e[I+1]),e[I].difference(e[I-1])),Ne<0&&(Pe=-Pe),Te<Math.PI/2&&(Pe<0&&L<0||Pe>0&&L>0)&&(Pe-=Math.PI),De=oe.clone(),xl(De,Pe);const U=De.clone(),K=De.clone(),ie=c[I-1]*u,pe=c[I]*u;U.scale(ie,ie),K.scale(pe,pe),v[I]=[U,K]}for(let I=0;I<T;I++){let b,G;b=0===I?e[I+1].difference(v[I].x/o,v[I].y/o):e[I+1].difference(v[I][1].x/o,v[I][1].y/o),G=I===T-1?e[I].clone().offset(v[I+1].x/o,v[I+1].y/o):e[I].difference(v[I+1][0].x/o,v[I+1][0].y/o),m[I]=[b,e[I],e[I+1],G]}return m}(T,I,b,m).map(Te=>function Tc(e,t){const{tau:n}=t,r=new ye;r.x=e[1].x+(e[2].x-e[0].x)/(6*n),r.y=e[1].y+(e[2].y-e[0].y)/(6*n);const o=new ye;return o.x=e[2].x+(e[3].x-e[1].x)/(6*n),o.y=e[2].y+(e[3].y-e[1].y)/(6*n),new yn(e[1],r,o,e[2])}(Te,m)),oe=new It(ee).round(v);return u?oe:oe.serialize()};function yl(e,t,n){const{sourceBBox:r}=e;let o;switch(o=r.sideNearestToPoint(r.width&&r.height?t[0]:t[1]),o){case"top":return new ye(0,-1);case"bottom":return new ye(0,1);case"right":return new ye(1,0);case"left":return new ye(-1,0)}}function Au(e,t,n){const{targetBBox:r}=e;let o;switch(o=r.sideNearestToPoint(r.width&&r.height?t[t.length-1]:t[t.length-2]),o){case"top":return new ye(0,-1);case"bottom":return new ye(0,1);case"right":return new ye(1,0);case"left":return new ye(-1,0)}}function Iu(e,t,n){return t[1].difference(t[0]).normalize()}function zo(e,t,n){const r=t.length-1;return t[r-1].difference(t[r]).normalize()}function Cc(e,t,n){const{sourceBBox:r}=e,o=r.center();return t[0].difference(o).normalize()}function Go(e,t,n){const{targetBBox:r}=e,o=r.center();return t[t.length-1].difference(o).normalize()}function xl(e,t){const n=Math.cos(t),r=Math.sin(t),u=r*e.x+n*e.y;e.x=n*e.x-r*e.y,e.y=u}function bl(e,t){let n=e.dot(t)/(e.magnitude()*t.magnitude());return n<-1&&(n=-1),n>1&&(n=1),Math.acos(n)}function Sc(e,t){return e.x*t.y-e.y*t.x}Hs.Directions=pr,Hs.TangentDirections=_r;const Qt={RENDER:"RENDER",UPDATE:"UPDATE",TOOLS:"TOOLS",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},js=Pn.extend({className:function(){var e=Pn.prototype.className.apply(this).split(" ");return e.push("link"),e.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){Pn.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[Qt.RENDER],attrs:[Qt.UPDATE],router:[Qt.UPDATE],connector:[Qt.CONNECTOR],smooth:[Qt.UPDATE],manhattan:[Qt.UPDATE],toolMarkup:[Qt.LEGACY_TOOLS],labels:[Qt.LABELS],labelMarkup:[Qt.LABELS],vertices:[Qt.VERTICES,Qt.UPDATE],vertexMarkup:[Qt.VERTICES],source:[Qt.SOURCE,Qt.UPDATE],target:[Qt.TARGET,Qt.UPDATE]},initFlag:[Qt.RENDER,Qt.SOURCE,Qt.TARGET,Qt.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(e,t){if(t||(t={}),this.hasFlag(e,Qt.SOURCE)){if(!this.updateEndProperties("source"))return e;e=this.removeFlag(e,Qt.SOURCE)}if(this.hasFlag(e,Qt.TARGET)){if(!this.updateEndProperties("target"))return e;e=this.removeFlag(e,Qt.TARGET)}const{paper:n,sourceView:r,targetView:o}=this;if(n&&(r&&!n.isViewMounted(r)||o&&!n.isViewMounted(o)))return e;if(this.hasFlag(e,Qt.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(t),this.removeFlag(e,[Qt.RENDER,Qt.UPDATE,Qt.VERTICES,Qt.LABELS,Qt.TOOLS,Qt.LEGACY_TOOLS,Qt.CONNECTOR]);let u=!1;this.hasFlag(e,Qt.VERTICES)&&(this.renderVertexMarkers(),e=this.removeFlag(e,Qt.VERTICES));const{model:c}=this,{attributes:v}=c;let m=this.hasFlag(e,Qt.LABELS),T=this.hasFlag(e,Qt.LEGACY_TOOLS);m&&(this.onLabelsChange(c,v.labels,t),e=this.removeFlag(e,Qt.LABELS),u=!0),T&&(this.renderTools(),e=this.removeFlag(e,Qt.LEGACY_TOOLS));const I=this.hasFlag(e,Qt.UPDATE),b=this.hasFlag(e,Qt.CONNECTOR);return(I||b)&&(I?t.translateBy&&c.isRelationshipEmbeddedIn(t.translateBy)?this.translate(t.tx,t.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(t),e=this.removeFlag(e,[Qt.UPDATE,Qt.TOOLS,Qt.CONNECTOR]),m=!1,T=!1,u=!0),m&&this.updateLabelPositions(),T&&this.updateToolsPosition(),u&&this.updateHighlighters(),this.hasFlag(e,Qt.TOOLS)&&(this.updateTools(t),e=this.removeFlag(e,Qt.TOOLS)),e},requestConnectionUpdate:function(e){this.requestUpdate(this.getFlag(Qt.UPDATE),e)},isLabelsRenderRequired:function(e={}){const t=this.model.previous("labels");if(!t)return!0;if("propertyPathArray"in e&&"propertyValue"in e){var n=e.propertyPathArray||[],r=n.length;if(r>1&&t[n[1]]){if(2===r)return"markup"in Object(e.propertyValue);if("markup"!==n[2])return!1}}return!0},onLabelsChange:function(e,t,n){this.isLabelsRenderRequired(n)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var e=this.model,t=e.get("markup")||e.markup;if(!t)throw new Error("dia.LinkView: markup required");if(Array.isArray(t))return this.renderJSONMarkup(t);if("string"==typeof t)return this.renderStringMarkup(t);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(e){var t=this.parseDOMJSON(e,this.el);this.selectors=t.selectors,this.vel.append(t.fragment)},renderStringMarkup:function(e){var t=je(e);Array.isArray(t)||(t=[t]);for(var n=this._V,r=0,o=t.length;r<o;r++){var u=t[r],c=u.attr("class");c&&(c=Gr(c),n[Sn.camelCase(c)]=u)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(t)},_getLabelMarkup:function(e){if(e){if(Array.isArray(e))return this.parseDOMJSON(e,null);if("string"==typeof e)return this._getLabelStringMarkup(e);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(e){var t=je(e),n=document.createDocumentFragment();if(Array.isArray(t))for(var r=0,o=t.length;r<o;r++)n.appendChild(t[r].node);else n.appendChild(t.node);return{fragment:n,selectors:{}}},_normalizeLabelMarkup:function(e){if(e){var t=e.fragment;if(!(e.fragment instanceof DocumentFragment&&e.fragment.hasChildNodes()))throw new Error("dia.LinkView: invalid label markup.");var n,r=t.childNodes;return(n=r.length>1||"G"!==r[0].nodeName.toUpperCase()?je("g").append(t):je(r[0])).addClass("label"),{node:n.node,selectors:e.selectors}}},renderLabels:function(){var e=this._V,t=e.labels,n=this._labelCache={},r=this._labelSelectors={},o=this.model,u=o.attributes.labels||[],c=u.length;if(0===c)return t&&t.remove(),this;t?t.empty():(t=e.labels=je("g").addClass("labels"),this.options.labelsLayer&&(t.addClass(kt(J(this,"className"))),t.attr("model-id",o.id)));for(var v=0;v<c;v++){var I,b,T=this._normalizeLabelMarkup(this._getLabelMarkup(u[v].markup));if(T)I=T.node,b=T.selectors;else{var ee=this._normalizeLabelMarkup(this._getLabelMarkup(o._builtins.defaultLabel.markup)),oe=o._getDefaultLabel(),Pe=this._normalizeLabelMarkup(this._getLabelMarkup(oe.markup))||ee;I=Pe.node,b=Pe.selectors}I.setAttribute("label-idx",v),t.append(I),n[v]=I;var De=this.selector;if(b[De])throw new Error("dia.LinkView: ambiguous label root selector.");b[De]=I,r[v]=b}return t.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:e,paper:t,model:n,_V:r,options:o}=this,{labels:u}=r;if(!u||!n.hasLabels())return;const{node:c}=u;o.labelsLayer?t.getLayerView(o.labelsLayer).insertSortedNode(c,n.get("z")):c.parentNode!==e&&e.appendChild(c)},unmountLabels:function(){const{options:e,_V:t}=this;if(!t)return;const{labels:n}=t;n&&e.labelsLayer&&n.remove()},onMount:function(){this.mountLabels()},unmount:function(){Pn.prototype.unmount.apply(this,arguments),this.unmountLabels()},findLabelNode:function(e,t){const n=this._labelCache[e];if(!n)return null;const r=this._labelSelectors[e],[o=null]=this.findBySelector(t,n,r);return o},_mergeLabelAttrs:function(e,t,n,r){return null===t?null:void 0===t?null===n?null:void 0===n?e?void 0:r:e?n:at({},r,n):e?at({},n,t):at({},r,n,t)},updateLabels:function(){if(!this._V.labels)return this;for(var e=this.model,t=e.get("labels")||[],n=this.can("labelMove"),o=e._builtins.defaultLabel.attrs,u=e._getDefaultLabel(),c=u.markup,v=u.attrs,m=0,T=t.length;m<T;m++){var I=this._labelCache[m];I.setAttribute("cursor",n?"move":"default");var b=this._labelSelectors[m],G=t[m],Te=this._mergeLabelAttrs(G.markup||c,G.attrs,v,o);this.updateDOMSubtreeAttributes(I,Te,{rootBBox:new ct(G.size),selectors:b})}return this},renderTools:function(){if(!this._V.linkTools)return this;var r,e=Sn(this._V.linkTools.node).empty(),t=Qr(this.model.get("toolMarkup")||this.model.toolMarkup),n=je(t());return e.append(n.node),this._toolCache=n,this.options.doubleLinkTools&&(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(t=Qr(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),r=je(t())):r=n.clone(),e.append(r.node),this._tool2Cache=r),this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var e=Sn(this._V.markerVertices.node).empty(),t=Qr(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(n,r){e.append(je(t(jt({idx:r},n))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var e=Sn(this._V.markerArrowheads.node);e.empty();var t=Qr(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=je(t({end:"source"})),this._V.targetArrowhead=je(t({end:"target"})),e.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(e){const n=this.model,r=n.vertices(),o=[this.sourceAnchor,...r,this.targetAnchor],u=o.length,c=new fn(o);c.simplify({threshold:.001});const v=c.points.map(T=>T.toJSON()),m=v.length;return u===m?0:(n.vertices(v.slice(1,m-1),e),u-m)},updateDefaultConnectionPath:function(){var e=this._V;e.connection&&e.connection.attr("d",this.getSerializedConnection()),e.connectionWrap&&e.connectionWrap.attr("d",this.getSerializedConnection()),e.markerSource&&e.markerTarget&&this._translateAndAutoOrientArrows(e.markerSource,e.markerTarget)},getEndView:function(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(e){switch(e){case"source":return new ye(this.sourceAnchor);case"target":return new ye(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(e){switch(e){case"source":return new ye(this.sourcePoint);case"target":return new ye(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(e){switch(e){case"source":var t=this.sourceView;if(!t)break;return this.sourceMagnet||t.el;case"target":var n=this.targetView;if(!n)break;return this.targetMagnet||n.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(e=0,t=0){const{route:n,path:r}=this;if(!n||!r)return;const o=new fn(n);o.translate(e,t),this.route=o.points,this._translateConnectionPoints(e,t),r.translate(e,t),this.updateDOM()},updateDOM(){const{el:e,model:t,selectors:n}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(e,t.attr(),{selectors:n}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:e}=this,t=e.vertices(),n=this.findAnchors(t),r=this.sourceAnchor=n.source,o=this.targetAnchor=n.target,u=this.findRoute(t);this.route=u;var c=this.findConnectionPoints(u,r,o);this.sourcePoint=c.source,this.targetPoint=c.target},updatePath:function(){const{route:e,sourcePoint:t,targetPoint:n}=this,r=this.findMarkerPoints(e,t,n),o=this.findPath(e,r.source||t,r.target||n);this.path=o},findMarkerPoints:function(e,t,n){var c,v,r=e[0],o=e[e.length-1],u=this._markerCache;return this._V.markerSource&&(u.sourceBBox=u.sourceBBox||this._V.markerSource.getBBox(),c=ye(t).move(r||n,u.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(u.targetBBox=u.targetBBox||this._V.markerTarget.getBBox(),v=ye(n).move(o||t,u.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),u.sourcePoint=c||t.clone(),u.targetPoint=v||n.clone(),{source:c,target:v}},findAnchorsOrdered:function(e,t,n,r){var o,u,c,v,m=this.model,T=m.get(e),I=m.get(n),b=this.getEndView(e),G=this.getEndView(n),ee=this.getEndMagnet(e),oe=this.getEndMagnet(n);b?(c=t?new ye(t):G?oe:new ye(I),o=this.getAnchor(T.anchor,b,ee,c,e)):o=new ye(T),G?(v=new ye(r||o),u=this.getAnchor(I.anchor,G,oe,v,n)):u=new ye(I);var Te={};return Te[e]=o,Te[n]=u,Te},findAnchors:function(e){var t=this.model,n=e[0],r=e[e.length-1];return t.target().priority&&!t.source().priority?this.findAnchorsOrdered("target",r,"source",n):this.findAnchorsOrdered("source",n,"target",r)},findConnectionPoints:function(e,t,n){var b,G,ee,De,r=e[0],o=e[e.length-1],u=this.model,c=u.get("source"),v=u.get("target"),m=this.sourceView,T=this.targetView,I=this.paper.options;if(m&&!m.isNodeConnection(this.sourceMagnet)){b=this.sourceMagnet||m.el;var oe=c.connectionPoint||I.defaultConnectionPoint,Pe=new gt(r||n,t);ee=this.getConnectionPoint(oe,m,b,Pe,"source")}else ee=t;if(T&&!T.isNodeConnection(this.targetMagnet)){G=this.targetMagnet||T.el;var Ne=v.connectionPoint||I.defaultConnectionPoint,U=new gt(o||t,n);De=this.getConnectionPoint(Ne,T,G,U,"target")}else De=n;return{source:ee,target:De}},getAnchor:function(e,t,n,r,o){var v,u=t.isNodeConnection(n),c=this.paper.options;if(e||(e=u?c.defaultLinkAnchor:c.perpendicularLinks||this.options.perpendicular?{name:"perpendicular"}:c.defaultAnchor),!e)throw new Error("Anchor required.");if("function"==typeof e)v=e;else{var m=e.name;if("function"!=typeof(v=c[u?"linkAnchorNamespace":"anchorNamespace"][m]))throw new Error("Unknown anchor: "+m)}var I=v.call(this,t,n,r,e.args||{},o,this);return I?I.round(this.decimalsRounding):new ye},getConnectionPoint:function(e,t,n,r,o){var u,T,c=r.end,v=this.paper.options;if("function"==typeof v.linkConnectionPoint&&(u=v.linkConnectionPoint(this,t,n===t.el?void 0:n,r.start,o)))return u;if(!e)return c;if("function"==typeof e)T=e;else{var I=e.name;if("function"!=typeof(T=v.connectionPointNamespace[I]))throw new Error("Unknown connection point: "+I)}return(u=T.call(this,r,t,n,e.args||{},o,this))?u.round(this.decimalsRounding):c},_translateConnectionPoints:function(e,t){var n=this._markerCache;n.sourcePoint.offset(e,t),n.targetPoint.offset(e,t),this.sourcePoint.offset(e,t),this.targetPoint.offset(e,t),this.sourceAnchor.offset(e,t),this.targetAnchor.offset(e,t)},_normalizeLabelPosition:function(e){return"number"==typeof e?{distance:e,offset:null,angle:0,args:null}:e},updateLabelPositions:function(){if(!this._V.labels)return this;if(!this.path)return this;var t=this.model,n=t.get("labels")||[];if(!n.length)return this;for(var o=t._builtins.defaultLabel.position,u=t._getDefaultLabel(),c=this._normalizeLabelPosition(u.position),v=at({},o,c),m=0,T=n.length;m<T;m++){var I=this._labelCache[m];if(I){var G=this._normalizeLabelPosition(n[m].position),ee=at({},v,G),oe=this._getLabelTransformationMatrix(ee);I.setAttribute("transform",je.matrixToTransformString(oe)),this._cleanLabelMatrices(m)}}return this},_cleanLabelMatrices:function(e){const{metrics:t,_labelSelectors:n}=this,r=n[e];if(r)for(let o in r){const{id:u}=r[o];u&&u in t&&delete t[u].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var e="",t=this.options.linkToolsOffset,n=this.getConnectionLength();if(!Number.isNaN(n)){n<this.options.shortLinkLength&&(e="scale(.5)",t/=2);var r=this.getPointAtLength(t);this._toolCache.attr("transform","translate("+r.x+", "+r.y+") "+e),this.options.doubleLinkTools&&n>=this.options.longLinkLength?(r=this.getPointAtLength(n-(this.options.doubleLinkToolsOffset||t)),this._tool2Cache.attr("transform","translate("+r.x+", "+r.y+") "+e),this._tool2Cache.attr("visibility","visible")):this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===Sn.css(this._V.markerArrowheads.node,"display"))return this;var e=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(e),this._V.targetArrowhead.scale(e),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(e){const{model:t,paper:n}=this,r=`${e}View`,o=t.get(e),u=o&&o.id;if(!u)return this[r]=null,this.updateEndMagnet(e),!0;const c=n.getModelById(u);if(!c)throw new Error("LinkView: invalid "+e+" cell.");const v=c.findView(n);return!!v&&(this[r]=v,this.updateEndMagnet(e),!0)},updateEndMagnet:function(e){const t=`${e}Magnet`,n=this.getEndView(e);if(n){let r=n.getMagnetFromLinkEnd(this.model.get(e));r===n.el&&(r=null),this[t]=r}else this[t]=null},_translateAndAutoOrientArrows:function(e,t){var n=me(this.route);e&&e.translateAndAutoOrient(this.sourcePoint,n[0]||this.targetPoint,this.paper.cells),t&&t.translateAndAutoOrient(this.targetPoint,n[n.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionAngle:function(e){return(this.model.label(e).position||{}).angle||0},_getLabelPositionArgs:function(e){return(this.model.label(e).position||{}).args},_getDefaultLabelPositionArgs:function(){return(this.model._getDefaultLabel().position||{}).args},_mergeLabelPositionArgs:function(e,t){return null===e?null:void 0===e?null===t?null:t:at({},t,e)},addLabel:function(e,t,n,r){var o,u,v,c=0;"number"!=typeof e?(o=e.x,u=e.y,"number"==typeof t?(c=t,v=n):v=t):(o=e,u=t,"number"==typeof n?(c=n,v=r):v=n);var m=this._getDefaultLabelPositionArgs(),I=this._mergeLabelPositionArgs(v,m),b={position:this.getLabelPosition(o,u,c,I)};return this.model.insertLabel(-1,b,v),-1},addVertex:function(e,t,n){var r="number"!=typeof e,o=r?e.x:e,u=r?e.y:t,c=r?t:n,v={x:o,y:u},m=this.getVertexIndex(o,u);return this.model.insertVertex(m,v,c),m},sendToken:function(e,t,n){var o,u,c;vt(t)?(o=t.duration,u="reverse"===t.direction,c=t.connection):(o=t,u=!1,c=null);var v={dur:(o=o||1e3)+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};u&&(v.keyPoints="1;0",v.keyTimes="0;1");var T,m=je(e);if("string"==typeof c)T=this.findBySelector(c,this.el,this.selectors)[0];else{var I=this._V;T=I.connection?I.connection.node:this.el.querySelector("path")}if(!(T instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");m.appendTo(this.paper.cells).animateAlongPath(v,T),setTimeout(function r(b,G){return function(){b.remove(),"function"==typeof G&&G()}}(m,n),o)},findRoute:function(e){e||(e=[]);var t=this.paper.options.routerNamespace||x,n=this.model.router(),r=this.paper.options.defaultRouter;if(!n){if(!r)return e.map(ye);n=r}var o=Nn(n)?n:t[n.name];if(!Nn(o))throw new Error('dia.LinkView: unknown router: "'+n.name+'".');return o.call(this,e,n.args||{},this)||e.map(ye)},findPath:function(e,t,n){var r=this.paper.options.connectorNamespace||A,o=this.model.connector();o||(o=this.paper.options.defaultConnector||{});var c=Nn(o)?o:r[o.name];if(!Nn(c))throw new Error('dia.LinkView: unknown connector: "'+o.name+'".');var v=Ti(o.args||{});v.raw=!0;var m=c.call(this,t,n,e,v,this);return"string"==typeof m&&(m=new It(je.normalizePathData(m))),m},getConnection:function(){var e=this.path;return e?e.clone():null},getSerializedConnection:function(){var e=this.path;if(!e)return null;var t=this.metrics;if(t.hasOwnProperty("data"))return t.data;var n=e.serialize();return t.data=n,n},getConnectionSubdivisions:function(){var e=this.path;if(!e)return null;var t=this.metrics;if(t.hasOwnProperty("segmentSubdivisions"))return t.segmentSubdivisions;var n=e.getSegmentSubdivisions();return t.segmentSubdivisions=n,n},getConnectionLength:function(){var e=this.path;if(!e)return 0;var t=this.metrics;if(t.hasOwnProperty("length"))return t.length;var n=e.length({segmentSubdivisions:this.getConnectionSubdivisions()});return t.length=n,n},getPointAtLength:function(e){var t=this.path;return t?t.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(e){var t=this.path;return t?(ln(e)&&(e=parseFloat(e)/100),t.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(e){var t=this.path;return t?t.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(e){var t=this.path;return t?t.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(e){var t=this.path;return t?t.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(e){var t=this.path;return t?t.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(e){var t=this.path;return t?t.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(e,t,n,r){var c,o={},u=0;"number"==typeof n?(u=n,c=r):c=n,c&&(o.args=c);var Te,Pe,v=!(c&&c.absoluteDistance),m=c&&c.absoluteDistance&&c.reverseDistance,T=c&&c.absoluteOffset,I=this.path,b={segmentSubdivisions:this.getConnectionSubdivisions()},G=new ye(e,t),ee=I.closestPointT(G,b),oe=I.lengthAtT(ee,b);if(v&&(oe=oe/this.getConnectionLength()||0),m&&(oe=-1*(this.getConnectionLength()-oe)||1),o.distance=oe,T||(Te=I.tangentAtT(ee)),Te)Pe=Te.pointOffset(G);else{var De=I.pointAtT(ee),Ne=G.difference(De);Pe={x:Ne.x,y:Ne.y}}return o.offset=Pe,o.angle=u,o},_getLabelTransformationMatrix:function(e){var t,n=0,r={};if("number"==typeof e)t=e;else{if("number"!=typeof e.distance)throw new Error("dia.LinkView: invalid label position distance.");r=e.args||{},t=e.distance,n=e.angle||0}var o=t>0&&t<=1,u=0,c={x:0,y:0};if(e.offset){var v=e.offset;"number"==typeof v&&(u=v),v.x&&(c.x=v.x),v.y&&(c.y=v.y)}var Te,m=0!==c.x||0!==c.y||0===u,T=r.keepGradient,I=r.ensureLegibility,b=this.path,G={segmentSubdivisions:this.getConnectionSubdivisions()},ee=o?t*this.getConnectionLength():t,oe=b.tangentAtLength(ee,G),Pe=n;if(oe){if(m)(Te=oe.start).offset(c);else{var De=oe.clone();De.rotate(oe.start,-90),De.setLength(u),Te=De.end}T&&(Pe=oe.angle()+n,I&&(Pe=zr((Pe+90)%180-90)))}else Te=b.start,m&&Te.offset(c);return je.createSVGMatrix().translate(Te.x,Te.y).rotate(Pe)},getLabelCoordinates:function(e){var t=this._getLabelTransformationMatrix(e);return new ye(t.e,t.f)},getVertexIndex:function(e,t){for(var r=this.model.vertices(),o=this.getClosestPointLength(new ye(e,t)),u=0,c=r.length;u<c&&!(o<this.getClosestPointLength(r[u]));u++);return u},notifyPointerdown(e,t,n){Pn.prototype.pointerdown.call(this,e,t,n),this.notify("link:pointerdown",e,t,n)},notifyPointermove(e,t,n){Pn.prototype.pointermove.call(this,e,t,n),this.notify("link:pointermove",e,t,n)},notifyPointerup(e,t,n){this.notify("link:pointerup",e,t,n),Pn.prototype.pointerup.call(this,e,t,n)},pointerdblclick:function(e,t,n){Pn.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",e,t,n)},pointerclick:function(e,t,n){Pn.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",e,t,n)},contextmenu:function(e,t,n){Pn.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",e,t,n)},pointerdown:function(e,t,n){switch(this.notifyPointerdown(e,t,n),e.target.getAttribute("class")){case"marker-vertex":return void this.dragVertexStart(e,t,n);case"marker-vertex-remove":case"marker-vertex-remove-area":return void this.dragVertexRemoveStart(e,t,n);case"marker-arrowhead":return void this.dragArrowheadStart(e,t,n);case"connection":case"connection-wrap":return void this.dragConnectionStart(e,t,n);case"marker-source":case"marker-target":return}this.dragStart(e,t,n)},pointermove:function(e,t,n){var r=this._dragData;switch(r&&this.eventData(e,r),this.eventData(e).action){case"vertex-move":this.dragVertex(e,t,n);break;case"label-move":this.dragLabel(e,t,n);break;case"arrowhead-move":this.dragArrowhead(e,t,n);break;case"move":this.drag(e,t,n)}r&&jt(r,this.eventData(e)),this.notifyPointermove(e,t,n)},pointerup:function(e,t,n){var r=this._dragData;switch(r&&(this.eventData(e,r),this._dragData=null),this.eventData(e).action){case"vertex-move":this.dragVertexEnd(e,t,n);break;case"label-move":this.dragLabelEnd(e,t,n);break;case"arrowhead-move":this.dragArrowheadEnd(e,t,n);break;case"move":this.dragEnd(e,t,n)}this.notifyPointerup(e,t,n),this.checkMouseleave(e)},mouseover:function(e){Pn.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",e)},mouseout:function(e){Pn.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",e)},mouseenter:function(e){Pn.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",e)},mouseleave:function(e){Pn.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",e)},mousewheel:function(e,t,n,r){Pn.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",e,t,n,r)},onevent:function(e,t,n,r){var o=je(e.target).findParentByClass("link-tool",this.el);if(o){if(e.stopPropagation(),this.can("useLinkTools")){if("remove"===t)return void this.model.remove({ui:!0});this.notify(t,e,n,r)}this.notifyPointerdown(e,n,r),this.paper.delegateDragEvents(this,e.data)}else Pn.prototype.onevent.apply(this,arguments)},onlabel:function(e,t,n){this.notifyPointerdown(e,t,n),this.dragLabelStart(e,t,n),this.eventData(e).stopPropagation&&e.stopPropagation()},dragConnectionStart:function(e,t,n){if(this.can("vertexAdd")){var r=this.addVertex({x:t,y:n},{ui:!0});this.eventData(e,{action:"vertex-move",vertexIdx:r})}},dragLabelStart:function(e,t,n){if(this.can("labelMove")){var o=parseInt(e.currentTarget.getAttribute("label-idx"),10),u=this._getLabelPositionAngle(o),c=this._getLabelPositionArgs(o),v=this._getDefaultLabelPositionArgs(),m=this._mergeLabelPositionArgs(c,v);this.eventData(e,{action:"label-move",labelIdx:o,positionAngle:u,positionArgs:m,stopPropagation:!0})}else this.eventData(e,{stopPropagation:!0});this.paper.delegateDragEvents(this,e.data)},dragVertexStart:function(e,t,n){if(this.can("vertexMove")){var o=parseInt(e.target.getAttribute("idx"),10);this.eventData(e,{action:"vertex-move",vertexIdx:o})}},dragVertexRemoveStart:function(e,t,n){if(this.can("vertexRemove")){var o=parseInt(e.target.getAttribute("idx"),10);this.model.removeVertex(o)}},dragArrowheadStart:function(e,t,n){if(this.can("arrowheadMove")){var o=e.target.getAttribute("end"),u=this.startArrowheadMove(o,{ignoreBackwardsCompatibility:!0});this.eventData(e,u)}},dragStart:function(e,t,n){!this.can("linkMove")||this.eventData(e,{action:"move",dx:t,dy:n})},dragLabel:function(e,t,n){var r=this.eventData(e),o={position:this.getLabelPosition(t,n,r.positionAngle,r.positionArgs)};this.paper.options.snapLabels&&delete o.position.offset,this.model.label(r.labelIdx,o)},dragVertex:function(e,t,n){var r=this.eventData(e);this.model.vertex(r.vertexIdx,{x:t,y:n},{ui:!0})},dragArrowhead:function(e,t,n){this.paper.options.snapLinks?this._snapArrowhead(e,t,n):this._connectArrowhead(this.getEventTarget(e),t,n,this.eventData(e))},drag:function(e,t,n){var r=this.eventData(e);this.model.translate(t-r.dx,n-r.dy,{ui:!0}),this.eventData(e,{dx:t,dy:n})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(e,t,n){var r=this.eventData(e),o=this.paper;o.options.snapLinks?this._snapArrowheadEnd(r):this._connectArrowheadEnd(r,t,n),o.linkAllowed(this)?(this._finishEmbedding(r),this._notifyConnectEvent(r,e)):this._disallow(r),this._afterArrowheadMove(r)},dragEnd:function(){},_disallow:function(e){"remove"===e.whenNotAllowed?this.model.remove({ui:!0}):this.model.set(e.arrowhead,e.initialEnd,{ui:!0})},_finishEmbedding:function(e){this.paper.options.embeddingMode&&this.model.reparent()&&(e.z=null)},_notifyConnectEvent:function(e,t){var n=e.arrowhead,r=e.initialEnd,o=this.model.prop(n);if(o&&!ha.endsEqual(r,o)){var c=this.paper;r.id&&this.notify("link:disconnect",t,c.findViewByModel(r.id),e.initialMagnet,n),o.id&&this.notify("link:connect",t,c.findViewByModel(o.id),e.magnetUnderPointer,n)}},_snapArrowhead:function(e,t,n){const{paper:r}=this,{snapLinks:o,connectionStrategy:u}=r.options,c=this.eventData(e);var v=o.radius||50,m=r.findViewsInArea({x:t-v,y:n-v,width:2*v,height:2*v}),T=c.closestView||null,I=c.closestMagnet||null,b=c.magnetProxy||null;c.closestView=c.closestMagnet=c.magnetProxy=null;var G=Number.MAX_VALUE,ee=new ye(t,n);m.forEach(function(U){const K=[];"false"!==U.el.getAttribute("magnet")&&K.push({bbox:U.model.getBBox(),magnet:U.el}),U.$("[magnet]").toArray().forEach(ie=>{K.push({bbox:U.getNodeBBox(ie),magnet:ie})}),K.forEach(ie=>{const{magnet:pe,bbox:Me}=ie,Oe=Me.center().squaredDistance(ee);Oe<G&&(I===pe||r.options.validateConnection.apply(r,c.validateConnectionArgs(U,U.el===pe?null:pe)))&&(G=Oe,c.closestView=U,c.closestMagnet=pe)})},this);var oe,Te=null,Pe=c.closestView,De=c.closestMagnet;De&&(Te=c.magnetProxy=Pe.findProxyNode(De,"highlighter"));var Ne=c.arrowhead,L=I!==De;if(T&&L&&T.unhighlight(b,{connecting:!0,snapping:!0}),Pe){const{prevEnd:U,prevX:K,prevY:ie}=c;if(c.prevX=t,c.prevY=n,!L&&("function"!=typeof u||K===t&&ie===n)||(oe=Pe.getLinkEnd(De,t,n,this.model,Ne),!L&&os(U,oe)))return;c.prevEnd=oe,L&&Pe.highlight(Te,{connecting:!0,snapping:!0})}else oe={x:t,y:n};this.model.set(Ne,oe||{x:t,y:n},{ui:!0}),T&&this.notify("link:snap:disconnect",e,T,I,Ne),Pe&&this.notify("link:snap:connect",e,Pe,De,Ne)},_snapArrowheadEnd:function(e){var t=e.closestView,n=e.closestMagnet;t&&n&&(t.unhighlight(e.magnetProxy,{connecting:!0,snapping:!0}),e.magnetUnderPointer=t.findMagnet(n)),e.closestView=e.closestMagnet=null},_connectArrowhead:function(e,t,n,r){const{paper:o,model:u}=this;if(r.eventTarget!==e){r.magnetProxy&&r.viewUnderPointer.unhighlight(r.magnetProxy,{connecting:!0});const c=r.viewUnderPointer=o.findView(e);if(c){const v=r.magnetUnderPointer=c.findMagnet(e),m=r.magnetProxy=c.findProxyNode(v,"highlighter");v&&this.paper.options.validateConnection.apply(o,r.validateConnectionArgs(c,v))?m&&c.highlight(m,{connecting:!0}):(r.magnetUnderPointer=null,r.magnetProxy=null)}else r.magnetUnderPointer=null,r.magnetProxy=null}r.eventTarget=e,u.set(r.arrowhead,{x:t,y:n},{ui:!0})},_connectArrowheadEnd:function(e={},t,n){const{model:r}=this,{viewUnderPointer:o,magnetUnderPointer:u,magnetProxy:c,arrowhead:v}=e;if(!u||!c||!o)return;o.unhighlight(c,{connecting:!0});const m=o.getLinkEnd(u,t,n,r,v);r.set(v,m,{ui:!0})},_beforeArrowheadMove:function(e){e.z=this.model.get("z"),this.model.toFront();var t=this.el.style;e.pointerEvents=t.pointerEvents,t.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(e)},_afterArrowheadMove:function(e){null!==e.z&&(this.model.set("z",e.z,{ui:!0}),e.z=null),this.el.style.pointerEvents=e.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(e)},_createValidateConnectionArgs:function(e){var t=[];t[4]=e,t[5]=this;var n,r=0,o=0;"source"===e?(r=2,n="target"):(o=2,n="source");var u=this.model.get(n);if(u.id){var c=t[r]=this.paper.findViewByModel(u.id),v=c.getMagnetFromLinkEnd(u);v===c.el&&(v=void 0),t[r+1]=v}return function m(T,I){return t[o]=T,t[o+1]=T.el===I?void 0:I,t}},_markAvailableMagnets:function(e){function t(b,G){var ee=b.paper;return ee.options.validateConnection.apply(ee,this.validateConnectionArgs(b,G))}var n=this.paper,r=n.model.getCells();e.marked={};for(var o=0,u=r.length;o<u;o++){var c=r[o].findView(n);if(c){var v=Array.prototype.slice.call(c.el.querySelectorAll("[magnet]"));"false"!==c.el.getAttribute("magnet")&&v.push(c.el);var m=v.filter(t.bind(e,c));if(m.length>0){for(var T=0,I=m.length;T<I;T++)c.highlight(m[T],{magnetAvailability:!0});c.highlight(null,{elementAvailability:!0}),e.marked[c.model.id]=m}}}},_unmarkAvailableMagnets:function(e){for(var n,r,t=Object.keys(e.marked),o=0,u=t.length;o<u;o++){r=e.marked[n=t[o]];var c=this.paper.findViewByModel(n);if(c){for(var v=0,m=r.length;v<m;v++)c.unhighlight(r[v],{magnetAvailability:!0});c.unhighlight(null,{elementAvailability:!0})}}e.marked=null},startArrowheadMove:function(e,t){t||(t={});var n={action:"arrowhead-move",arrowhead:e,whenNotAllowed:t.whenNotAllowed||"revert",initialMagnet:this[e+"Magnet"]||(this[e+"View"]?this[e+"View"].el:null),initialEnd:Ti(this.model.get(e)),validateConnectionArgs:this._createValidateConnectionArgs(e)};return this._beforeArrowheadMove(n),!0!==t.ignoreBackwardsCompatibility&&(this._dragData=n),n},onRemove:function(){Pn.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:Qt});Object.defineProperty(js.prototype,"sourceBBox",{enumerable:!0,get:function(){var e=this.sourceView;if(!e){var t=this.model.source();return new ct(t.x,t.y)}var n=this.sourceMagnet;return e.isNodeConnection(n)?new ct(this.sourceAnchor):e.getNodeBBox(n||e.el)}}),Object.defineProperty(js.prototype,"targetBBox",{enumerable:!0,get:function(){var e=this.targetView;if(!e){var t=this.model.target();return new ct(t.x,t.y)}var n=this.targetMagnet;return e.isNodeConnection(n)?new ct(this.targetAnchor):e.getNodeBBox(n||e.el)}});const Wi={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},Ec=Ei.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return kt(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(e,t){this.el.insertBefore(e,this.insertPivot(t))},insertNode:function(e){const{el:t}=this;e.parentNode!==t&&t.appendChild(e)},insertPivot:function(e){const{el:t,pivotNodes:n}=this;(e=+e)||(e=0);let r=n[e];if(r)return r;r=n[e]=document.createComment("z-index:"+(e+1));let o=-1/0;for(let u in n)u=+u,u<e&&u>o&&(o=u);return t.insertBefore(r,o!==-1/0?n[o].nextSibling:t.firstChild),r},removePivots:function(){const{el:e,pivotNodes:t}=this;for(let n in t)e.removeChild(t[n]);this.pivotNodes={}}}),Pi=Vr.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(e,t){const{options:n}=this,{useFirstSubpath:r}=n;let o;try{const u=je(t);if(o=u.convertToPathData().trim(),"PATH"===u.tagName()&&r){const c=o.search(/.M/i)+1;c>0&&(o=o.substr(0,c))}}catch(u){const c=e.getNodeBoundingRect(t);o=je.rectToPath(jt({},n,c.toJSON()))}return o},highlightConnection(e){this.vel.attr("d",e.getSerializedConnection())},highlightNode(e,t){const{vel:n,options:r}=this,{padding:o,layer:u}=r;let c=e.getNodeMatrix(t);if(o){!u&&t===e.el&&n.remove();let v=e.getNodeBoundingRect(t);const m=v.x+v.width/2,T=v.y+v.height/2;v=je.transformRect(v,c);const I=Math.max(v.width,1),b=Math.max(v.height,1),G=(I+o)/I,ee=(b+o)/b,oe=je.createSVGMatrix({a:G,b:0,c:0,d:ee,e:m-G*m,f:T-ee*T});c=c.multiply(oe)}n.attr({d:this.getPathData(e,t),transform:je.matrixToTransformString(c)})},highlight(e,t){const{vel:n,options:r}=this;n.attr(r.attrs),e.isNodeConnection(t)?this.highlightConnection(e):this.highlightNode(e,t)}}),fo=20,vd=Vr.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:fo,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(e,t){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:n,MASK_REPLACE_TAGS:r,MASK_REMOVE_TAGS:o}=this,u=t.tagName();if(!je.isSVGGraphicsElement(t)||o.includes(u))return t.remove(),!1;if(r.includes(u)){const c=e.vel.findOne(`#${t.id}`);if(c){const{node:v}=c;let m=e.getNodeBoundingRect(v);e.model.isElement()&&(m=je.transformRect(m,e.getNodeMatrix(v)));const T=je("rect",m.toJSON()),{x:I,y:b}=m.center(),{angle:G,cx:ee=I,cy:oe=b}=c.rotate();G&&T.rotate(G,ee,oe),t.parent().append(T)}return t.remove(),!1}return n.forEach(c=>{"fill"===c&&"none"===t.attr("fill")||t.removeAttr(c)}),!0},transformMaskRoot(e,t){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:n}=this;n.forEach(r=>{t.removeAttr(r)})},getMaskShape(e,t){const{options:n,MASK_REPLACE_TAGS:r}=this,{deep:o}=n,u=t.tagName();let c;if("G"===u){if(!o)return null;c=t.clone(),function gd(e,t){const n=e.children();for(;n.length>0;){const r=n.shift();t(r)&&n.push(...r.children())}}(c,v=>this.transformMaskChild(e,v))}else{if(r.includes(u))return null;c=t.clone()}return this.transformMaskRoot(e,c),c},getMaskId(){return`highlight-mask-${this.cid}`},getMask(e,t){const{VISIBLE:n,INVISIBLE:r,options:o}=this,{padding:u,attrs:c}=o,v="stroke-width"in c?c["stroke-width"]:1,m="none"!==t.attr("fill");let T=parseFloat(t.attr("stroke-width"));isNaN(T)&&(T=1);const I=T+2*u,b=I+2*v;let G=this.getMaskShape(e,t);if(!G){const ee=e.getNodeBoundingRect(t.node);ee.inflate(ee.width?0:.5,ee.height?0:.5),G=je("rect",ee.toJSON())}return G.attr(c),je("mask",{id:this.getMaskId()}).append([G.clone().attr({fill:m?n:"none",stroke:n,"stroke-width":b}),G.clone().attr({fill:m?r:"none",stroke:r,"stroke-width":I})])},removeMask(e){const t=e.svg.getElementById(this.getMaskId());t&&e.defs.removeChild(t)},addMask(e,t){e.defs.appendChild(t.node)},highlight(e,t){const{options:n,vel:r}=this,{padding:o,attrs:u,maskClip:c=fo,layer:v}=n,m="stroke"in u?u.stroke:"#000000";!v&&t===e.el&&r.remove();const T=e.getNodeBoundingRect(t).inflate(o+c),I=this.getMask(e,je(t));this.addMask(e.paper,I),r.attr(T.toJSON()),r.attr({transform:je.matrixToTransformString(e.getNodeMatrix(t)),mask:`url(#${I.id})`,fill:m})},unhighlight(e){this.removeMask(e.paper)}}),Mu=Vr.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:kt("highlight-opacity"),highlight:function(e,t){je(t).addClass(this.opacityClassName)},unhighlight:function(e,t){je(t).removeClass(this.opacityClassName)}}),Ga=kt("highlighted"),Pc=Vr.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:Ga},highlight:function(e,t){je(t).addClass(this.options.className)},unhighlight:function(e,t){je(t).removeClass(this.options.className)}},{className:Ga});function Ac(e,t,n,r){return e.getPointAtRatio("ratio"in r?r.ratio:.5)}function md(e,t,n,r){return e.getPointAtLength("length"in r?r.length:20)}function Wo(e){return function(t,n,r,o){if(r instanceof Element){var c,u=this.paper.findView(r);if(u)if(u.isNodeConnection(r)){var v="fixedAt"in o?o.fixedAt:"50%";c=Mc(u,v)}else c=u.getNodeBBox(r).center();else c=new ye;return e.call(this,t,n,c,o)}return e.apply(this,arguments)}}function Mc(e,t){var n=parseFloat(t);return ln(t)?e.getPointAtRatio(n/100):e.getPointAtLength(n)}const kc=Wo(function Ic(e,t,n,r){var o=1e6,u=e.getConnection(),c=e.getConnectionSubdivisions(),v=new gt(n.clone().offset(0,o),n.clone().offset(0,-o)),m=new gt(n.clone().offset(o,0),n.clone().offset(-o,0)),T=v.intersect(u,{segmentSubdivisions:c}),I=m.intersect(u,{segmentSubdivisions:c}),b=[];return T&&Array.prototype.push.apply(b,T),I&&Array.prototype.push.apply(b,I),b.length>0?n.chooseClosest(b):"fallbackAt"in r?Mc(e,r.fallbackAt):Cl(e,t,n,r)}),Cl=Wo(function ps(e,t,n,r){return e.getClosestPoint(n)||new ye});function Wa(e,t,n){if(Jn(n)){const{x:o,y:u}=n;if(isFinite(u)){const c=new gt(t,e),{start:v,end:m}=c.parallel(u);t=v,e=m}n=o}if(!isFinite(n))return e;var r=e.distance(t);return 0===n&&r>0?e:e.move(t,-Math.min(n,r-1))}function ku(e){var t=e.getAttribute("stroke-width");return null===t?0:parseFloat(t)||0}function Us(e,t,n,r){var o=t.getNodeBBox(n);r.stroke&&o.inflate(ku(n)/2);var u=e.intersect(o);return Wa(u?e.start.chooseClosest(u):e.end,e.start,r.offset)}var gs="segmentSubdivisons",Ou="shapeBBox";const xd=function _l(e,t,n,r){let{offset:o,alignOffset:u,align:c}=r;return c&&function Lu(e,t,n=0){let r,o,u,c;const{start:v,end:m}=e;switch(t){case"left":r="x",o=m,u=v,c=-1;break;case"right":r="x",o=v,u=m,c=1;break;case"top":r="y",o=m,u=v,c=-1;break;case"bottom":r="y",o=v,u=m,c=1;break;default:return}v[r]<m[r]?o[r]=u[r]:u[r]=o[r],isFinite(n)&&(o[r]+=c*n,u[r]+=c*n)}(e,c,u),Wa(e.end,e.start,o)},Oc=Us,$o=function yd(e,t,n,r){var o=t.model.angle();if(0===o)return Us(e,t,n,r);var u=t.getNodeUnrotatedBBox(n);r.stroke&&u.inflate(ku(n)/2);var c=u.center(),v=e.clone().rotate(c,o),m=v.setLength(1e6).intersect(u);return Wa(m?v.start.chooseClosest(m).rotate(c,-o):e.end,e.start,r.offset)},Rc=function wl(e,t,n,r){var o,u,c=r.selector,v=e.end;if(o="string"==typeof c?t.findBySelector(c)[0]:Array.isArray(c)?to(n,c):function Lc(e){if(!e)return null;var t=e;do{var n=t.tagName;if("string"!=typeof n)return null;if("G"===(n=n.toUpperCase()))t=t.firstElementChild;else{if("TITLE"!==n)break;t=t.nextElementSibling}}while(t);return t}(n),!je.isSVGGraphicsElement(o)){if(o===n||!je.isSVGGraphicsElement(n))return v;o=n}var Ne,m=t.getNodeShape(o),T=t.getNodeMatrix(o),I=t.getRootTranslateMatrix(),b=t.getRootRotateMatrix(),G=I.multiply(b).multiply(T),ee=G.inverse(),oe=je.transformLine(e,ee),Te=oe.start.clone(),Pe=t.getNodeData(o);if(!1===r.insideout&&(Pe[Ou]||(Pe[Ou]=m.bbox()),Pe[Ou].containsPoint(Te)))return v;if(m instanceof It){var L=r.precision||2;Pe[gs]||(Pe[gs]=m.getSegmentSubdivisions({precision:L})),Ne={precision:L,segmentSubdivisions:Pe[gs]}}!0===r.extrapolate&&oe.setLength(1e6),(u=oe.intersect(m,Ne))?je.isArray(u)&&(u=Te.chooseClosest(u)):!0===r.sticky&&(u=m instanceof ct?m.pointNearestToPoint(Te):m instanceof Or?m.intersectionWithLineFromCenterToPoint(Te):m.closestPoint(Te,Ne));var U=u?je.transformPoint(u,G):v,K=r.offset||0;return r.stroke&&(K+=ku(o)/2),Wa(U,e.start,K)};function Ao(e){return function(t,n,r,o){var u=!!o.rotate,c=u?t.getNodeUnrotatedBBox(n):t.getNodeBBox(n),v=c[e](),m=o.dx;if(m){var T=ln(m);m=parseFloat(m),isFinite(m)&&(T&&(m/=100,m*=c.width),v.x+=m)}var I=o.dy;if(I){var b=ln(I);I=parseFloat(I),isFinite(I)&&(b&&(I/=100,I*=c.height),v.y+=I)}return u?v.rotate(t.model.getBBox().center(),-t.model.angle()):v}}const _d=Ao("center"),Yo=Ao("topMiddle"),Sl=Ao("bottomMiddle"),Tl=Ao("leftMiddle"),El=Ao("rightMiddle"),Ru=Ao("origin"),vs=Ao("topRight"),Gt=Ao("bottomLeft"),Nu=Ao("corner"),Pl=Wo(function bd(e,t,n,r){var o=e.model.angle(),u=e.getNodeBBox(t),c=u.center(),v=u.origin(),m=u.corner(),T=r.padding;if(isFinite(T)||(T=0),v.y+T<=n.y&&n.y<=m.y-T){var I=n.y-c.y;c.x+=0===o||180===o?0:1*I/Math.tan(Lr(o)),c.y+=I}else if(v.x+T<=n.x&&n.x<=m.x-T){var b=n.x-c.x;c.y+=90===o||270===o?0:b*Math.tan(Lr(o)),c.x+=b}return c}),$a=Wo(function Nc(e,t,n,r){var u,c,v,o=!!r.rotate;o?(u=e.getNodeUnrotatedBBox(t),v=e.model.getBBox().center(),c=e.model.angle()):u=e.getNodeBBox(t);var I,m=r.padding;switch(isFinite(m)&&u.inflate(m),o&&n.rotate(v,c),u.sideNearestToPoint(n)){case"left":I=u.leftMiddle();break;case"right":I=u.rightMiddle();break;case"top":I=u.topMiddle();break;case"bottom":I=u.bottomMiddle()}return o?I.rotate(v,-c):I}),wd=function Cd(e,t,n,r,o){return e.model.getPointFromConnectedLink(this.model,o).offset(r.dx,r.dy)},va={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},Du=9007199254740991,Il=Pn.Highlighting,Ml={[Il.DEFAULT]:{name:"stroke",options:{padding:3}},[Il.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[Il.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},Sd=[{name:Wi.BACK},{name:Wi.CELLS},{name:Wi.LABELS},{name:Wi.FRONT},{name:Wi.TOOLS}],Dc=Ei.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,background:!1,perpendicularLinks:!1,elementView:pa,linkView:js,snapLabels:!1,snapLinks:!1,labelsLayer:!1,multiLinks:!0,guard:function(e,t){return!1},highlighting:Ml,preventContextMenu:!0,preventDefaultBlankAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new ha,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(e,t,n){return"passive"!==t.getAttribute("magnet")},validateConnection:function(e,t,n,r,o,u){return("target"===o?n:e)instanceof pa},embeddingMode:!1,validateEmbedding:function(e,t){return!0},validateUnembedding:function(e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:va.EXACT,frozen:!1,onViewUpdate:function(e,t,n,r,o){t&(e.FLAG_INSERT|e.FLAG_REMOVE)||r.mounting||r.isolate||o.requestConnectedLinksUpdate(e,n,r)},onViewPostponed:function(e,t,n){return n.forcePostponedViewUpdate(e,t)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:k,anchorNamespace:H,linkAnchorNamespace:M,connectionPointNamespace:F},events:{dblclick:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","mousedown .joint-cell [event]":"onevent","touchstart .joint-cell [event]":"onevent","mousedown .joint-cell [magnet]":"onmagnet","touchstart .joint-cell [magnet]":"onmagnet","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],MIN_SCALE:1e-6,init:function(){const{options:e,el:t}=this;e.cellViewNamespace||(e.cellViewNamespace="undefined"!=typeof joint&&so(joint,"shapes")?joint.shapes:null);const n=this.model=e.model||new jo;this._layers={},this.setGrid(e.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this.$document=Sn(t.ownerDocument),this.resetViews(n.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1}},startListening:function(){var e=this.model;this.listenTo(e,"add",this.onCellAdded).listenTo(e,"remove",this.onCellRemoved).listenTo(e,"change",this.onCellChange).listenTo(e,"reset",this.onGraphReset).listenTo(e,"sort",this.onGraphSort).listenTo(e,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(e,t,n){var r=n.position;this.isAsync()||!Tt(r)?this.renderView(e,n):(n.maxPosition===r&&this.freeze({key:"addCells"}),this.renderView(e,n),0===r&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(e,t,n){const r=this.findViewByModel(e);r&&this.requestViewUpdate(r,r.FLAG_REMOVE,r.UPDATE_PRIORITY,n)},onCellChange:function(e,t){if(e!==this.model.attributes.cells&&e.hasChanged("z")&&this.options.sorting===va.APPROX){const n=this.findViewByModel(e);n&&this.requestViewUpdate(n,n.FLAG_INSERT,n.UPDATE_PRIORITY,t)}},onGraphReset:function(e,t){this.resetLayers(),this.resetViews(e.models,t)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(e){if(!this.isFrozen()){var t=e&&e.batchName,n=this.model;if(!this.isAsync()){var r=this.UPDATE_DELAYING_BATCHES;r.includes(t)&&!n.hasActiveBatch(r)&&this.updateViews(e)}var o=this.SORT_DELAYING_BATCHES;o.includes(t)&&!n.hasActiveBatch(o)&&this.sortViews()}},cloneOptions:function(){const{options:e}=this,{defaultConnector:t,defaultRouter:n,defaultConnectionPoint:r,defaultAnchor:o,defaultLinkAnchor:u,origin:c,highlighting:v,cellViewNamespace:m,interactive:T}=e;!m&&"undefined"!=typeof joint&&so(joint,"shapes")&&(e.cellViewNamespace=joint.shapes),Nn(t)||(e.defaultConnector=hi(t)),Nn(n)||(e.defaultRouter=hi(n)),Nn(r)||(e.defaultConnectionPoint=hi(r)),Nn(o)||(e.defaultAnchor=hi(o)),Nn(u)||(e.defaultLinkAnchor=hi(u)),Jn(T)&&(e.interactive=jt({},T)),Jn(v)&&(e.highlighting=Un({},v,Ml)),e.origin=jt({},c)},children:function(){var e=je.namespace;return[{namespaceURI:e.xhtml,tagName:"div",className:kt("paper-background"),selector:"background"},{namespaceURI:e.xhtml,tagName:"div",className:kt("paper-grid"),selector:"grid"},{namespaceURI:e.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":e.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:kt("layers"),selector:"layers"}]}]},hasLayerView(e){return e in this._layers},getLayerView(e){const{_layers:t}=this;if(e in t)return t[e];throw new Error(`dia.Paper: Unknown layer "${e}"`)},getLayerNode(e){return this.getLayerView(e).el},render:function(){this.renderChildren();const{childNodes:e,options:t}=this,{svg:n,defs:r,layers:o,background:u,grid:c}=e;return this.svg=n,this.defs=r,this.layers=o,this.$background=Sn(u),this.$grid=Sn(c),this.renderLayers(),je.ensureId(n),t.background&&this.drawBackground(t.background),t.drawGrid&&this.drawGrid(),this},renderLayers:function(e=Sd){this.removeLayers(),e.forEach(({name:o})=>{const c=new Ec({name:o});this.layers.appendChild(c.el),this._layers[o]=c});const t=this.getLayerView(Wi.CELLS),n=this.getLayerView(Wi.TOOLS),r=this.getLayerView(Wi.LABELS);this.tools=n.el,this.cells=this.viewport=t.el,t.vel.addClass(kt("viewport")),r.vel.addClass(kt("viewport"))},removeLayers:function(){const{_layers:e}=this;Object.keys(e,t=>{e[t].remove(),delete e[t]})},resetLayers:function(){const{_layers:e}=this;Object.keys(e,t=>{e[t].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(e){var t=this.layers;if(void 0===e){var n=t.getAttribute("transform");return(this._viewportTransformString||null)===n?e=this._viewportMatrix:(e=t.getCTM(),this._viewportMatrix=e,this._viewportTransformString=n),je.createSVGMatrix(e)}e=je.createSVGMatrix(e);var r=je.matrixToTransformString(e);return t.setAttribute("transform",r),this._viewportMatrix=e,this._viewportTransformString=t.getAttribute("transform"),this},clientMatrix:function(){return je.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(e,t,n){if(e instanceof Pn)for(var r=e.model,o=this.model.getConnectedLinks(r),u=0,c=o.length;u<c;u++){var v=o[u],m=this.findViewByModel(v);if(m){var T=["UPDATE"];v.getTargetCell()===r&&T.push("TARGET"),v.getSourceCell()===r&&T.push("SOURCE");var I=Math.max(t+1,m.UPDATE_PRIORITY);this.scheduleViewUpdate(m,m.getFlag(T),I,n)}}},forcePostponedViewUpdate:function(e,t){if(!(e&&e instanceof Pn))return!1;var n=e.model;if(n.isElement())return!1;if(0==(t&e.getFlag(["SOURCE","TARGET"]))){var r=0,o=this.findViewByModel(n.getSourceCell());o&&!this.isViewMounted(o)&&(r=this.dumpView(o),e.updateEndMagnet("source"));var u=0,c=this.findViewByModel(n.getTargetCell());if(c&&!this.isViewMounted(c)&&(u=this.dumpView(c),e.updateEndMagnet("target")),0===r&&0===u)return!this.dumpView(e)}return!1},requestViewUpdate:function(e,t,n,r){r||(r={}),this.scheduleViewUpdate(e,t,n,r);var o=this.isAsync();if(!(this.isFrozen()||o&&!1!==r.async||this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES))){var u=this.updateViews(r);o&&this.notifyAfterRender(u,r)}},scheduleViewUpdate:function(e,t,n,r){const{_updates:o,options:u}=this,{FLAG_REMOVE:c,FLAG_INSERT:v,UPDATE_PRIORITY:m,cid:T}=e;let I=o.priorities[n];if(I||(I=o.priorities[n]={}),n>m)for(let ee=n-1;ee>=m;ee--){const oe=o.priorities[ee];!oe||!(T in oe)||(I[T]|=oe[T],delete oe[T])}let b=I[T]||0;if((b&t)===t)return;b||o.count++,t&c&&b&v?I[T]^=v:t&v&&b&c&&(I[T]^=c),I[T]|=t;const G=u.onViewUpdate;"function"==typeof G&&G.call(this,e,t,n,r||{},this)},dumpViewUpdate:function(e){if(!e)return 0;var n=e.cid,r=this._updates.priorities[e.UPDATE_PRIORITY],o=this.registerMountedView(e)|r[n];return delete r[n],o},dumpView:function(e,t){var n=this.dumpViewUpdate(e);return n?this.updateView(e,n,t):0},updateView:function(e,t,n){if(!e)return 0;const{FLAG_REMOVE:r,FLAG_INSERT:o,model:u}=e;if(e instanceof Pn){if(t&r)return this.removeView(u),0;t&o&&(this.insertView(e),t^=o)}return t?e.confirmUpdate(t,n||{}):0},requireView:function(e,t){var n=this.findViewByModel(e);return n?(this.dumpView(n,t),n):null},registerUnmountedView:function(e){var t=e.cid,n=this._updates;if(t in n.unmounted)return 0;var r=n.unmounted[t]|=e.FLAG_INSERT;return n.unmountedCids.push(t),delete n.mounted[t],r},registerMountedView:function(e){var t=e.cid,n=this._updates;if(t in n.mounted)return 0;n.mounted[t]=!0,n.mountedCids.push(t);var r=n.unmounted[t]||0;return delete n.unmounted[t],r},isViewMounted:function(e){return!!e&&e.cid in this._updates.mounted},dumpViews:function(e){var t=Si({},e,{viewport:null});this.checkViewport(t),this.updateViews(t)},updateViews:function(e){this.notifyBeforeRender(e);let t,n=0,r=0,o=Du;do{r++,t=this.updateViewsBatch(e),n+=t.updated,o=Math.min(t.priority,o)}while(!t.empty);const u={updated:n,batches:r,priority:o};return this.notifyAfterRender(u,e),u},hasScheduledUpdates:function(){const e=this._updates.priorities,t=Object.keys(e);let n=t.length;for(;n>0&&n--;)for(let r in e[t[n]])return!0;return!1},updateViewsAsync:function(e,t){e||(e={}),t||(t={processed:0,priority:Du});var n=this._updates,r=n.id;if(r){Ri(r),0===t.processed&&this.hasScheduledUpdates()&&this.notifyBeforeRender(e);var o=this.updateViewsBatch(e),u=Si({},e,{mountBatchSize:1e3-o.mounted,unmountBatchSize:1e3-o.unmounted}),c=this.checkViewport(u),v=c.unmounted,m=c.mounted,T=t.processed,I=n.count;o.updated>0&&(o.processed=T+=o.updated+o.unmounted,t.priority=Math.min(o.priority,t.priority),o.empty&&0===m?(o.unmounted+=v,o.mounted+=m,o.priority=t.priority,this.notifyAfterRender(o,e),t.processed=0,t.priority=Du,n.count=0):t.processed=T);var b=e.progress;if(I&&"function"==typeof b&&b.call(this,o.empty,T,I,o,this),n.id!==r)return}n.id=ca(this.updateViewsAsync,this,e,t)},notifyBeforeRender:function(e={}){let t=e.beforeRender;"function"!=typeof t&&(t=this.options.beforeRender,"function"!=typeof t)||t.call(this,e,this)},notifyAfterRender:function(e,t={}){let n=t.afterRender;"function"!=typeof n&&(n=this.options.afterRender),"function"==typeof n&&n.call(this,e,t,this),this.trigger("render:done",e,t)},updateViewsBatch:function(e){e||(e={});var t=e.batchSize||1/0,n=this._updates,r=0,o=0,u=0,c=0,v=Du,m=!0,T=this.options,I=n.priorities,b="viewport"in e?e.viewport:T.viewport;"function"!=typeof b&&(b=null);var G=T.onViewPostponed;"function"!=typeof G&&(G=null);var ee=Object.keys(I);e:for(var oe=0,Te=ee.length;oe<Te;oe++){var Pe=+ee[oe],De=I[Pe];for(var Ne in De){if(r>=t){m=!1;break e}var L=Ua[Ne];if(L){var U=De[Ne];if(0==(U&L.FLAG_REMOVE)){var K=Ne in n.unmounted;if(L.DETACHABLE&&b&&!b.call(this,L,!K,this)){K||(this.registerUnmountedView(L),L.unmount()),n.unmounted[Ne]|=U,delete De[Ne],u++;continue}K&&(U|=L.FLAG_INSERT,c++),U|=this.registerMountedView(L)}var ie=this.updateView(L,U,e);ie>0&&(De[Ne]=ie,!G||!G.call(this,L,ie,this)||De[Ne])?(o++,m=!1):(v>Pe&&(v=Pe),r++,delete De[Ne])}else delete De[Ne]}}return{priority:v,updated:r,postponed:o,unmounted:u,mounted:c,empty:m}},getUnmountedViews:function(){const t=Object.keys(this._updates.unmounted),n=t.length,r=new Array(n);for(var o=0;o<n;o++)r[o]=Ua[t[o]];return r},getMountedViews:function(){const t=Object.keys(this._updates.mounted),n=t.length,r=new Array(n);for(var o=0;o<n;o++)r[o]=Ua[t[o]];return r},checkUnmountedViews:function(e,t){t||(t={});var n=0;"function"!=typeof e&&(e=null);for(var o=this._updates,u=o.unmountedCids,c=o.unmounted,v=0,m=(Math.min(u.length,"mountBatchSize"in t?t.mountBatchSize:1/0));v<m;v++){var T=u[v];if(T in c){var I=Ua[T];if(I){if(I.DETACHABLE&&e&&!e.call(this,I,!1,this)){u.push(T);continue}n++;var b=this.registerMountedView(I);b&&this.scheduleViewUpdate(I,b,I.UPDATE_PRIORITY,{mounting:!0})}}}return u.splice(0,v),n},checkMountedViews:function(e,t){t||(t={});var n=0;if("function"!=typeof e)return n;for(var o=this._updates,u=o.mountedCids,c=o.mounted,v=0,m=(Math.min(u.length,"unmountBatchSize"in t?t.unmountBatchSize:1/0));v<m;v++){var T=u[v];if(T in c){var I=Ua[T];if(I){if(!I.DETACHABLE||e.call(this,I,!0,this)){u.push(T);continue}n++,this.registerUnmountedView(I)&&I.unmount()}}}return u.splice(0,v),n},checkViewport:function(e){var t=Si({},e,{mountBatchSize:1/0,unmountBatchSize:1/0}),n="viewport"in t?t.viewport:this.options.viewport,r=this.checkMountedViews(n,t);return r>0&&(t.mountBatchSize=Math.min(this._updates.unmountedCids.length-r,t.mountBatchSize)),{mounted:this.checkUnmountedViews(n,t),unmounted:r}},freeze:function(e){e||(e={});var t=this._updates,n=e.key,r=this.options.frozen,o=t.freezeKey;if(n&&n!==o){if(r&&o)return;t.freezeKey=n,t.keyFrozen=r}this.options.frozen=!0;var u=t.id;t.id=null,this.isAsync()&&u&&Ri(u)},unfreeze:function(e){e||(e={});var t=this._updates,n=e.key,r=t.freezeKey;n&&r&&n!==r||(t.freezeKey=null,(!n||n!==r||!t.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(e)):this.updateViews(e),this.options.frozen=t.keyFrozen=!1,t.sort&&(this.sortViews(),t.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===va.EXACT},onRemove:function(){this.freeze(),this.removeLayers(),this.removeViews()},getComputedSize:function(){var e=this.options,t=e.width,n=e.height;return Tt(t)||(t=this.el.clientWidth),Tt(n)||(n=this.el.clientHeight),{width:t,height:n}},setDimensions:function(e,t){const{options:n}=this,{width:r,height:o}=n;let u=void 0===e?r:e,c=void 0===t?o:t;if(r===u&&o===c)return;n.width=u,n.height=c,this._setDimensions();const v=this.getComputedSize();this.trigger("resize",v.width,v.height)},_setDimensions:function(){const{options:e}=this;let t=e.width,n=e.height;Tt(t)&&(t=Math.round(t)),Tt(n)&&(n=Math.round(n)),this.$el.css({width:null===t?"":t,height:null===n?"":n})},setOrigin:function(e,t){return this.translate(e||0,t||0)},fitToContent:function(e,t,n,r){r=vt(e)?e:jt({gridWidth:e,gridHeight:t,padding:n},r);const{x:o,y:u,width:c,height:v}=this.getFitToContentArea(r),{sx:m,sy:T}=this.scale();return this.setOrigin(-o*m,-u*T),this.setDimensions(c*m,v*T),new ct(o,u,c,v)},getFitToContentArea:function(e={}){const t=e.gridWidth||1,n=e.gridHeight||1,r=io(e.padding||0),o=Math.max(e.minWidth||0,t),u=Math.max(e.minHeight||0,n),c=e.maxWidth||Number.MAX_VALUE,v=e.maxHeight||Number.MAX_VALUE,m=e.allowNewOrigin,T="contentArea"in e?new ct(e.contentArea):this.getContentArea(e),{sx:I,sy:b}=this.scale();T.x*=I,T.y*=b,T.width*=I,T.height*=b;let G=Math.ceil((T.width+T.x)/t),ee=Math.ceil((T.height+T.y)/n);e.allowNegativeBottomRight||(G=Math.max(G,1),ee=Math.max(ee,1)),G*=t,ee*=n;let oe=0;("negative"===m&&T.x<0||"positive"===m&&T.x>=0||"any"===m)&&(oe=Math.ceil(-T.x/t)*t,oe+=r.left,G+=oe);let Te=0;return("negative"===m&&T.y<0||"positive"===m&&T.y>=0||"any"===m)&&(Te=Math.ceil(-T.y/n)*n,Te+=r.top,ee+=Te),G+=r.right,ee+=r.bottom,G=Math.max(G,o),ee=Math.max(ee,u),G=Math.min(G,c),ee=Math.min(ee,v),new ct(-oe/I,-Te/b,G/I,ee/b)},scaleContentToFit:function(e){var t,n;if(e||(e={}),"contentArea"in e){var r=e.contentArea;t=this.localToPaperRect(r),n=new ye(r)}else t=this.getContentBBox(e),n=this.paperToLocalPoint(t);if(t.width&&t.height){Si(e,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var T,o=io(e.padding),u=e.minScaleX||e.minScale,c=e.maxScaleX||e.maxScale,v=e.minScaleY||e.minScale,m=e.maxScaleY||e.maxScale;if(e.fittingBBox)T=e.fittingBBox;else{var I=this.translate(),b=this.getComputedSize();T={x:I.tx,y:I.ty,width:b.width,height:b.height}}T=new ct(T).moveAndExpand({x:o.left,y:o.top,width:-o.left-o.right,height:-o.top-o.bottom});var G=this.scale(),ee=T.width/t.width*G.sx,oe=T.height/t.height*G.sy;if(e.preserveAspectRatio&&(ee=oe=Math.min(ee,oe)),e.scaleGrid){var Te=e.scaleGrid;ee=Te*Math.floor(ee/Te),oe=Te*Math.floor(oe/Te)}ee=Math.min(c,Math.max(u,ee)),oe=Math.min(m,Math.max(v,oe));var Pe=this.options.origin,De=T.x-n.x*ee-Pe.x,Ne=T.y-n.y*oe-Pe.y;this.scale(ee,oe),this.translate(De,Ne)}},getContentArea:function(e){return e&&e.useModelGeometry?this.model.getBBox()||new ct:je(this.cells).getBBox()},getContentBBox:function(e){return this.localToPaperRect(this.getContentArea(e))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...e){const{restrictTranslate:t}=this.options;let n;return n=Nn(t)?t.apply(this,e):!0===t?this.getArea():t?new ct(t):null,n},createViewForModel:function(e){const{options:t}=this;var n,r,o=t.cellViewNamespace,u=e.get("type")+"View",c=to(o,u,".");return e.isLink()?(n=t.linkView,r=js):(n=t.elementView,r=pa),new(n.prototype instanceof rn.View?c||n:n.call(this,e)||c||r)({model:e,interactive:t.interactive,labelsLayer:!0===t.labelsLayer?Wi.LABELS:t.labelsLayer})},removeView:function(e){const{id:t}=e,{_views:n,_updates:r}=this,o=n[t];if(o){var{cid:u}=o;const{mounted:c,unmounted:v}=r;o.remove(),delete n[t],delete c[u],delete v[u]}return o},renderView:function(e,t){const{id:n}=e,r=this._views;let o,u,c=!0;return n in r&&(o=r[n],o.model===e?(u=o.FLAG_INSERT,c=!1):this.removeView(e)),c&&(o=r[n]=this.createViewForModel(e),o.paper=this,u=this.registerUnmountedView(o)|o.getFlag(J(o,"initFlag"))),this.requestViewUpdate(o,u,o.UPDATE_PRIORITY,t),o},onImageDragStart:function(){return!1},resetViews:function(e,t){t||(t={}),e||(e=[]),this._resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var n=0,r=e.length;n<r;n++)this.renderView(e[n],t);this.unfreeze({key:"reset"}),this.sortViews()},removeViews:function(){Mr(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen())return void(this._updates.sort=!0);this.sortViewsExact()}},sortViewsExact:function(){var e=Sn(this.cells).children("[model-id]"),t=this.model.get("cells");!function(e,t){var n=Sn(e),r=n.map(function(){var u=this.parentNode,c=u.insertBefore(document.createTextNode(""),this.nextSibling);return function(){if(u===this)throw new Error("You can't sort elements if any one is a descendant of another.");u.insertBefore(this,c),u.removeChild(c)}});Array.prototype.sort.call(n,t).each(function(o){r[o].call(this)})}(e,function(n,r){var o=t.get(n.getAttribute("model-id")),u=t.get(r.getAttribute("model-id")),c=o.attributes.z||0,v=u.attributes.z||0;return c===v?0:c<v?-1:1})},insertView:function(e){const t=this.getLayerView(Wi.CELLS),{el:n,model:r}=e;this.options.sorting===va.APPROX?t.insertSortedNode(n,r.get("z")):t.insertNode(n),e.onMount()},scale:function(e,t,n,r){if(void 0===e)return je.matrixToScale(this.matrix());void 0===t&&(t=e),void 0===n&&(n=0,r=0);var o=this.translate();(n||r||o.tx||o.ty)&&this.translate(o.tx-n*(e-1),o.ty-r*(t-1)),e=Math.max(e||0,this.MIN_SCALE),t=Math.max(t||0,this.MIN_SCALE);var v=this.matrix();return v.a=e,v.d=t,this.matrix(v),this.trigger("scale",e,t,n,r),this},rotate:function(e,t,n){if(void 0===e)return je.matrixToRotate(this.matrix());if(void 0===t){var r=this.cells.getBBox();t=r.width/2,n=r.height/2}var o=this.matrix().translate(t,n).rotate(e).translate(-t,-n);return this.matrix(o),this},translate:function(e,t){if(void 0===e)return je.matrixToTranslate(this.matrix());const{options:n}=this,{origin:r,drawGrid:o}=n;e||(e=0),t||(t=0);const u=this.matrix();if(u.e===e&&u.f===t)return this;u.e=e,u.f=t,this.matrix(u);const{tx:c,ty:v}=this.translate();return r.x=c,r.y=v,this.trigger("translate",c,v),o&&this.drawGrid(),this},findView:function(e){var t=Et(e)?this.cells.querySelector(e):e instanceof Sn?e[0]:e,n=this.findAttribute("model-id",t);if(n)return this._views[n]},findViewByModel:function(e){var t=Et(e)||Tt(e)?e:e&&e.id;return this._views[t]},findViewsFromPoint:function(e){return e=new ye(e),this.model.getElements().map(this.findViewByModel,this).filter(function(n){return n&&n.vel.getBBox({target:this.cells}).containsPoint(e)},this)},findViewsInArea:function(e,t){t=Si(t||{},{strict:!1}),e=new ct(e);var n=this.model.getElements().map(this.findViewByModel,this),r=t.strict?"containsRect":"intersect";return n.filter(function(o){return o&&e[r](o.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(e,...t){"string"==typeof e&&this.trigger("tools:event",e,...t)},getModelById:function(e){return this.model.getCell(e)},snapToGrid:function(e,t){return this.clientToLocalPoint(e,t).snapToGrid(this.options.gridSize)},localToPaperPoint:function(e,t){var n=new ye(e,t);return je.transformPoint(n,this.matrix())},localToPaperRect:function(e,t,n,r){var o=new ct(e,t,n,r);return je.transformRect(o,this.matrix())},paperToLocalPoint:function(e,t){var n=new ye(e,t);return je.transformPoint(n,this.matrix().inverse())},paperToLocalRect:function(e,t,n,r){var o=new ct(e,t,n,r);return je.transformRect(o,this.matrix().inverse())},localToClientPoint:function(e,t){var n=new ye(e,t);return je.transformPoint(n,this.clientMatrix())},localToClientRect:function(e,t,n,r){var o=new ct(e,t,n,r);return je.transformRect(o,this.clientMatrix())},clientToLocalPoint:function(e,t){var n=new ye(e,t);return je.transformPoint(n,this.clientMatrix().inverse())},clientToLocalRect:function(e,t,n,r){var o=new ct(e,t,n,r);return je.transformRect(o,this.clientMatrix().inverse())},localToPagePoint:function(e,t){return this.localToPaperPoint(e,t).offset(this.pageOffset())},localToPageRect:function(e,t,n,r){return this.localToPaperRect(e,t,n,r).offset(this.pageOffset())},pageToLocalPoint:function(e,t){var r=new ye(e,t).difference(this.pageOffset());return this.paperToLocalPoint(r)},pageToLocalRect:function(e,t,n,r){var o=this.pageOffset(),u=new ct(e,t,n,r);return u.x-=o.x,u.y-=o.y,this.paperToLocalRect(u)},clientOffset:function(){var e=this.svg.getBoundingClientRect();return new ye(e.left,e.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(e){if(!(e instanceof js))throw new Error("Must provide a linkView.");var t=e.model,n=this.options,r=this.model,o=r.constructor.validations;return!(!n.multiLinks&&!o.multiLinks.call(this,r,t)||!n.linkPinning&&!o.linkPinning.call(this,r,t)||"function"==typeof n.allowLink&&!n.allowLink.call(this,e,this))},getDefaultLink:function(e,t){return Nn(this.options.defaultLink)?this.options.defaultLink.call(this,e,t):this.options.defaultLink.clone()},resolveHighlighter:function(e={}){let{highlighter:t,type:n}=e;const{highlighting:r,highlighterNamespace:o}=this.options;if(void 0===t){if(!r||n&&(t=r[n],!1===t))return!1;t||(t=r.default)}if(!t)return!1;Et(t)&&(t={name:t});const u=t.name,c=o[u];if(!c)throw new Error('Unknown highlighter ("'+u+'")');if("function"!=typeof c.highlight)throw new Error('Highlighter ("'+u+'") is missing required highlight() method');if("function"!=typeof c.unhighlight)throw new Error('Highlighter ("'+u+'") is missing required unhighlight() method');return{highlighter:c,options:t.options||{},name:u}},onCellHighlight:function(e,t,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:o,options:u}=r;o.highlight(e,t,u)},onCellUnhighlight:function(e,t,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:o,options:u}=r;o.unhighlight(e,t,u)},pointerdblclick:function(e){e.preventDefault(),e=ur(e);var t=this.findView(e.target);if(!this.guard(e,t)){var n=this.snapToGrid(e.clientX,e.clientY);t?t.pointerdblclick(e,n.x,n.y):this.trigger("blank:pointerdblclick",e,n.x,n.y)}},pointerclick:function(e){if(this.eventData(e).mousemoved<=this.options.clickThreshold){e=ur(e);var n=this.findView(e.target);if(this.guard(e,n))return;var r=this.snapToGrid(e.clientX,e.clientY);n?n.pointerclick(e,r.x,r.y):this.trigger("blank:pointerclick",e,r.x,r.y)}},contextmenu:function(e){this.options.preventContextMenu&&e.preventDefault(),e=ur(e);var t=this.findView(e.target);if(!this.guard(e,t)){var n=this.snapToGrid(e.clientX,e.clientY);t?t.contextmenu(e,n.x,n.y):this.trigger("blank:contextmenu",e,n.x,n.y)}},pointerdown:function(e){e=ur(e);var t=this.findView(e.target);if(!this.guard(e,t)){var n=this.snapToGrid(e.clientX,e.clientY);t?(e.preventDefault(),t.pointerdown(e,n.x,n.y)):(this.options.preventDefaultBlankAction&&e.preventDefault(),this.trigger("blank:pointerdown",e,n.x,n.y)),this.delegateDragEvents(t,e.data)}},pointermove:function(e){var t=this.eventData(e);if(t.mousemoved||(t.mousemoved=0),!(++t.mousemoved<=this.options.moveThreshold)){e=ur(e);var r=this.snapToGrid(e.clientX,e.clientY),o=t.sourceView;o?o.pointermove(e,r.x,r.y):this.trigger("blank:pointermove",e,r.x,r.y),this.eventData(e,t)}},pointerup:function(e){this.undelegateDocumentEvents();var t=ur(e),n=this.snapToGrid(t.clientX,t.clientY),r=this.eventData(e).sourceView;r?r.pointerup(t,n.x,n.y):this.trigger("blank:pointerup",t,n.x,n.y),t.isPropagationStopped()||this.pointerclick(Sn.Event(e,{type:"click",data:e.data})),e.stopImmediatePropagation(),this.delegateEvents()},mouseover:function(e){e=ur(e);var t=this.findView(e.target);if(!this.guard(e,t))if(t)t.mouseover(e);else{if(this.el===e.target)return;this.trigger("blank:mouseover",e)}},mouseout:function(e){e=ur(e);var t=this.findView(e.target);if(!this.guard(e,t))if(t)t.mouseout(e);else{if(this.el===e.target)return;this.trigger("blank:mouseout",e)}},mouseenter:function(e){e=ur(e);var t=this.findView(e.target);if(!this.guard(e,t)){var n=this.findView(e.relatedTarget);if(t){if(n===t)return;t.mouseenter(e)}else{if(n)return;this.trigger("paper:mouseenter",e)}}},mouseleave:function(e){e=ur(e);const{target:t,relatedTarget:n}=e,r=this.findView(t);if(this.guard(e,r))return;const o=this.findView(n);r&&(o===r||(e.stopPropagation(),r.mouseleave(e),this.el.contains(n)))||o||this.trigger("paper:mouseleave",e)},mousewheel:function(e){e=ur(e);var t=this.findView(e.target);if(!this.guard(e,t)){var n=e.originalEvent,r=this.snapToGrid(n.clientX,n.clientY),o=Math.max(-1,Math.min(1,n.wheelDelta));t?t.mousewheel(e,r.x,r.y,o):this.trigger("blank:mousewheel",e,r.x,r.y,o)}},onevent:function(e){var t=e.currentTarget,n=t.getAttribute("event");if(n){var r=this.findView(t);if(r){if(e=ur(e),this.guard(e,r))return;var o=this.snapToGrid(e.clientX,e.clientY);r.onevent(e,n,o.x,o.y)}}},magnetEvent:function(e,t){var n=e.currentTarget;if(n.getAttribute("magnet")){var o=this.findView(n);if(o){if(e=ur(e),this.guard(e,o))return;var u=this.snapToGrid(e.clientX,e.clientY);t.call(this,o,e,n,u.x,u.y)}}},onmagnet:function(e){this.magnetEvent(e,function(t,n,r,o,u){t.onmagnet(n,o,u)})},magnetpointerdblclick:function(e){this.magnetEvent(e,function(t,n,r,o,u){t.magnetpointerdblclick(n,r,o,u)})},magnetcontextmenu:function(e){this.options.preventContextMenu&&e.preventDefault(),this.magnetEvent(e,function(t,n,r,o,u){t.magnetcontextmenu(n,r,o,u)})},onlabel:function(e){var n=this.findView(e.currentTarget);if(n){if(e=ur(e),this.guard(e,n))return;var r=this.snapToGrid(e.clientX,e.clientY);n.onlabel(e,r.x,r.y)}},getPointerArgs(e){const t=ur(e),{x:n,y:r}=this.snapToGrid(t.clientX,t.clientY);return[t,n,r]},delegateDragEvents:function(e,t){t||(t={}),this.eventData({data:t},{sourceView:e||null,mousemoved:0}),this.delegateDocumentEvents(null,t),this.undelegateEvents()},guard:function(e,t){return!!("mousedown"===e.type&&2===e.button||this.options.guard&&this.options.guard(e,t))||(e.data&&void 0!==e.data.guarded?e.data.guarded:!(t&&t.model&&t.model instanceof To||this.svg===e.target||this.el===e.target||Sn.contains(this.svg,e.target)))},setGridSize:function(e){return this.options.gridSize=e,this.options.drawGrid&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:je("svg",{width:"100%",height:"100%"},je("defs")),patterns:{},add:function(e,t){je(this.root.node.childNodes[0]).append(t),this.patterns[e]=t,this.root.append(je("rect",{width:"100%",height:"100%",fill:"url(#"+e+")"}))},get:function(e){return this.patterns[e]},exist:function(e){return void 0!==this.patterns[e]}}),this._gridCache},setGrid:function(e){return this.clearGrid(),this._gridCache=null,this._gridSettings=[],(Array.isArray(e)?e:[e||{}]).forEach(function(n){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(n))},this),this},_resolveDrawGridOption:function(e){var t=this.constructor.gridPatterns;if(Et(e)&&Array.isArray(t[e]))return t[e].map(function(m){return jt({},m)});var n=e||{args:[{}]},r=Array.isArray(n),o=n.name;if(!r&&!o&&!n.markup&&(o="dot"),o&&Array.isArray(t[o])){var u=t[o].map(function(m){return jt({},m)}),c=Array.isArray(n.args)?n.args:[n.args||{}];Si(c[0],ce(e,"args"));for(var v=0;v<c.length;v++)u[v]&&jt(u[v],c[v]);return u}return r?n:[n]},drawGrid:function(e){var t=this.options.gridSize;if(t<=1)return this.clearGrid();var n=Array.isArray(e)?e:[e],r=this.matrix(),o=this._getGridRefs();this._gridSettings.forEach(function(c,v){var m="pattern_"+v,T=at(c,n[v],{sx:r.a||1,sy:r.d||1,ox:r.e||0,oy:r.f||0});T.width=t*(r.a||1)*(T.scaleFactor||1),T.height=t*(r.d||1)*(T.scaleFactor||1),o.exist(m)||o.add(m,je("pattern",{id:m,patternUnits:"userSpaceOnUse"},je(T.markup)));var I=o.get(m);Nn(T.update)&&T.update(I.node.childNodes[0],T);var b=T.ox%T.width;b<0&&(b+=T.width);var G=T.oy%T.height;G<0&&(G+=T.height),I.attr({x:b,y:G,width:T.width,height:T.height})});var u=(new XMLSerializer).serializeToString(o.root.node);return u="url(data:image/svg+xml;base64,"+btoa(u)+")",this.$grid.css("backgroundImage",u),this},updateBackgroundImage:function(e){var t=(e=e||{}).position||"center",n=e.size||"auto auto",r=this.scale(),o=this.translate();vt(t)&&(t=o.tx+r.sx*(t.x||0)+"px "+(o.ty+r.sy*(t.y||0))+"px"),vt(n)&&(n=(n=new ct(n).scale(r.sx,r.sy)).width+"px "+n.height+"px"),this.$background.css({backgroundSize:n,backgroundPosition:t})},drawBackgroundImage:function(e,t){if(e instanceof HTMLImageElement){if(this._background&&this._background.id===t.id){var n,r=(t=t||{}).size,o=t.repeat||"no-repeat",u=t.opacity||1,c=Math.abs(t.quality)||1,v=this.constructor.backgroundPatterns[Ze(o)];if(Nn(v)){e.width*=c,e.height*=c;var m=v(e,t);if(!(m instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");n=m.toDataURL("image/png"),o="repeat",vt(r)?(r.width*=m.width/e.width,r.height*=m.height/e.height):void 0===r&&(t.size={width:m.width/c,height:m.height/c})}else n=e.src,void 0===r&&(t.size={width:e.width,height:e.height});this.$background.css({opacity:u,backgroundRepeat:o,backgroundImage:"url("+n+")"}),this.updateBackgroundImage(t)}}else this.$background.css("backgroundImage","")},updateBackgroundColor:function(e){this.$el.css("backgroundColor",e||"")},drawBackground:function(e){if(this.updateBackgroundColor((e=e||{}).color),e.image){e=this._background=hi(e),wi(e);var t=document.createElement("img");t.onload=this.drawBackgroundImage.bind(this,t,e),t.src=e.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(e){this.options.interactive=e,Mr(this._views,"setInteractivity",e)},isDefined:function(e){return!!this.svg.getElementById(e)},defineFilter:function(e){if(!vt(e))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var t=e.id,n=e.name;if(t||(t=n+this.svg.id+Xn(JSON.stringify(e))),!this.isDefined(t)){var o=qu[n]&&qu[n](e.args||{});if(!o)throw new Error("Non-existing filter "+n);var u=jt({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},e.attrs,{id:t});je(o,u).appendTo(this.defs)}return t},defineGradient:function(e){if(!vt(e))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:t,defs:n}=this,{type:r,id:o=r+t.id+Xn(JSON.stringify(e)),stops:u,attrs:c={}}=e;if(this.isDefined(o))return o;const v=me(u).map(({offset:T,color:I,opacity:b})=>je("stop").attr({offset:T,"stop-color":I,"stop-opacity":Number.isFinite(b)?b:1})),m=je(r,c,v);return m.id=o,m.appendTo(n),o},definePattern:function(e){if(!vt(e))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:t,defs:n}=this,{id:r=t.id+Xn(JSON.stringify(e)),markup:o,attrs:u={}}=e;if(!o)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(r))return r;const c=je("pattern",{patternUnits:"userSpaceOnUse"});if(c.id=r,c.attr(u),"string"==typeof o)c.append(je(o));else{const{fragment:v}=bn(o);c.append(v)}return c.appendTo(n),r},defineMarker:function(e){if(!vt(e))throw new TypeError("dia.Paper: defineMarker() requires 1. argument to be an object.");const{svg:t,defs:n}=this,{id:r=t.id+Xn(JSON.stringify(e)),markup:o,attrs:u={},markerUnits:c="userSpaceOnUse"}=e;if(this.isDefined(r))return r;const v=je("marker",{orient:"auto",overflow:"visible",markerUnits:c});if(v.id=r,v.attr(u),o)if("string"==typeof o)v.append(je(o));else{const{fragment:m}=bn(o);v.append(m)}else{const{type:m="path"}=e,T=je(m,ce(e,"type","id","markup","attrs","markerUnits"));v.append(T)}return v.appendTo(n),r}},{sorting:va,Layers:Wi,backgroundPatterns:{flipXy:function(e){var t=document.createElement("canvas"),n=e.width,r=e.height;t.width=2*n,t.height=2*r;var o=t.getContext("2d");return o.drawImage(e,0,0,n,r),o.setTransform(-1,0,0,-1,t.width,t.height),o.drawImage(e,0,0,n,r),o.setTransform(-1,0,0,1,t.width,0),o.drawImage(e,0,0,n,r),o.setTransform(1,0,0,-1,0,t.height),o.drawImage(e,0,0,n,r),t},flipX:function(e){var t=document.createElement("canvas"),n=e.width,r=e.height;t.width=2*n,t.height=r;var o=t.getContext("2d");return o.drawImage(e,0,0,n,r),o.translate(2*n,0),o.scale(-1,1),o.drawImage(e,0,0,n,r),t},flipY:function(e){var t=document.createElement("canvas"),n=e.width,r=e.height;t.width=n,t.height=2*r;var o=t.getContext("2d");return o.drawImage(e,0,0,n,r),o.translate(0,2*r),o.scale(1,-1),o.drawImage(e,0,0,n,r),t},watermark:function(e,t){t=t||{};var n=e.width,r=e.height,o=document.createElement("canvas");o.width=3*n,o.height=3*r;for(var u=o.getContext("2d"),c=Tt(t.watermarkAngle)?-t.watermarkAngle:-20,v=Lr(c),m=o.width/4,T=o.height/4,I=0;I<4;I++)for(var b=0;b<4;b++)(I+b)%2>0&&(u.setTransform(1,0,0,1,(2*I-1)*m,(2*b-1)*T),u.rotate(v),u.drawImage(e,-n/2,-r/2,n,r));return o}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,t){je(e).attr({width:t.thickness*t.sx,height:t.thickness*t.sy,fill:t.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,t){var n=t.sx<=1?t.thickness*t.sx:t.thickness;je(e).attr({width:n,height:n,fill:t.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,t){var n,r=t.width,o=t.height,u=t.thickness;n=r-u>=0&&o-u>=0?["M",r,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",je(e).attr({d:n,stroke:t.color,"stroke-width":t.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,t){var n,r=t.width,o=t.height,u=t.thickness;n=r-u>=0&&o-u>=0?["M",r,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",je(e).attr({d:n,stroke:t.color,"stroke-width":t.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(e,t){var n,r=t.width,o=t.height,u=t.thickness;n=r-u>=0&&o-u>=0?["M",r,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",je(e).attr({d:n,stroke:t.color,"stroke-width":t.thickness})}}]}});class Td{constructor(t){this.offsetX=20,this.offsetY=20,this.graph=new jo,this.paper=new Dc({el:Sn("#paper"),width:"100%",height:"30rem",model:this.graph,gridSize:20,interactive:!1}),this.paper.translate(this.offsetX,this.offsetY),this.paper.on("cell:pointerdown",n=>{"standard.Ellipse"===n.model.attributes.type&&t(n.model.id)})}makeElement(t,n){const u=16*(.6*Math.max(...n.split("\n").map(v=>v.length))+1)*1.3,c=16*(n.split("\n").length+1)*1.5;return new ja({id:t,size:{width:u,height:c},fill:"var(--tui-secondary)",attrs:{label:{text:n,"font-size":16,"font-weight":"bold","font-family":"sans-serif",fill:"var(--tui-text-01)",cursor:"pointer"},body:{width:u,height:c,rx:10,ry:10,stroke:"var(--tui-base-08)",cursor:"pointer",fill:"var(--tui-secondary)"}}})}makeLink(t,n){return new hu({source:{id:t},target:{id:n},router:{name:"manhattan",args:{maxAllowedDirectionChange:360,perpendicular:!1,startDirections:["right","top","bottom"],endDirections:["left","top","bottom"]}},connector:{name:"rounded"},attrs:{line:{stroke:"var(--tui-base-08)",cursor:"default"},wrapper:{cursor:"default"}}})}makeCellsFromAdjacencyList(t){const n=[],r=[];return t.forEach(o=>{const u=`${o.name.replaceAll(" ","\n")}\n\n${Math.round(o.average_success)}% (${o.question_count} Total)`;n.push(this.makeElement(o.pk,u)),o.next_category_ids.forEach(c=>{r.push(this.makeLink(o.pk,c))})}),n.concat(r)}buildGraphFromAdjacencyList(t){const n=this.makeCellsFromAdjacencyList(t);this.graph.resetCells(n);const r=Rs.layout(this.graph,{dagre:mo(),graphlib:Xi(),nodeSep:40,edgeSep:40,ranker:"longest-path",rankDir:"LR"});this.paper.svg.style.width=`${r.width+2*this.offsetX}px`,this.paper.svg.style.height=`${r.height+2*this.offsetY}px`}}var Fc=f(76829);function Ed(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"h2",6),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const n=i.\u0275\u0275nextContext(),r=i.\u0275\u0275reference(7);i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",0===r.children.length),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Sub-Categories for ",n.parentNodeName," ")}}function Xo(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"h2",6),i.\u0275\u0275text(1," Top-Level Categories "),i.\u0275\u0275elementEnd()),2&e){i.\u0275\u0275nextContext();const n=i.\u0275\u0275reference(7);i.\u0275\u0275classProp("tui-skeleton",0===n.children.length)}}let gi=(()=>{class e{constructor(n,r,o){this.categoryService=n,this.router=r,this.injector=o,this.parentNode=null,this.parentNodeName=null}ngOnInit(){this.categoryService.getCategories().subscribe(n=>{this.rawCategories=n,this.conceptMapGraph=new Td(r=>{this.parentNode=r,this.isTopLevel(r)?this.renderGraph():this.router.navigate(["course",this.currCourse.id,"practice","category",r]).then()}),this.renderGraph()})}renderGraph(){const n=[];if(this.parentNodeName=this.parentNode?this.rawCategories.find(r=>r.pk===this.parentNode).full_name:null,this.rawCategories.filter(r=>r.parent===this.parentNode).forEach(r=>{n.push(r)}),!n)return this.parentNode=null,this.parentNodeName=null,void this.renderGraph();this.conceptMapGraph.buildGraphFromAdjacencyList(n)}reset(){this.parentNode=null,this.renderGraph()}isTopLevel(n){return null===this.rawCategories.find(r=>r.pk===n).parent}}return e.\u0275fac=function(n){return new(n||e)(i.\u0275\u0275directiveInject(Fc.H),i.\u0275\u0275directiveInject(te.F0),i.\u0275\u0275directiveInject(i.Injector))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-concept-map"]],inputs:{currCourse:"currCourse"},decls:8,vars:7,consts:[[1,"flowchart-instructions","tui-space_bottom-4"],["tuiButton","","size","s","appearance","primary","icon","tuiIconArrowLeft","aria-label","Back",1,"tui-space_right-4",3,"disabled","click"],[4,"ngIf","ngIfElse"],["topLevel",""],["id","paper"],["flowchartComponent",""],[1,"tui-text_h5","tui-space_vertical-0"]],template:function(n,r){if(1&n&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"button",1),i.\u0275\u0275listener("click",function(){return r.reset()}),i.\u0275\u0275text(2," Back "),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,Ed,3,3,"ng-container",2),i.\u0275\u0275template(4,Xo,2,2,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(6,"div",4,5)),2&n){const o=i.\u0275\u0275reference(5),u=i.\u0275\u0275reference(7);i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",0===u.children.length),i.\u0275\u0275property("disabled",!r.parentNode),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",r.parentNode)("ngIfElse",o),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("tui-skeleton",0===u.children.length)}},directives:[$t.v0,O.O5],styles:["#paper[_ngcontent-%COMP%]{width:100%;height:30rem;overflow:auto;border-radius:var(--tui-radius-m);border:var(--tui-base-03) 1px solid}.flowchart-instructions[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),e})();var Fu=f(30567),Vc=f(3605),$i=f(27221),Vu=f(40520),kl=f(93514);let ma=(()=>{class e{constructor(n,r){this.http=n,this.apiService=r}getCourseEvent(n){const r=this.apiService.getURL("event",n);return this.http.get(r).pipe((0,$i.K)(this.apiService.handleError("Error occurred while fetching Course Event")))}deleteCourseEvent(n){const r=this.apiService.getURL("event",n);return this.http.delete(r).pipe((0,$i.K)(this.apiService.handleError("Error occurred while deleting Course Event")))}addCourseEvent(n){const r=this.apiService.getURL("event");return this.http.post(r,n).pipe((0,$i.K)(this.apiService.handleError("Error occurred while adding Course Event")))}updateCourseEvent(n){const r=this.apiService.getURL("event",n.id);return this.http.put(r,n).pipe((0,$i.K)(this.apiService.handleError("Error occurred while updating Course Event")))}getEventTypes(){const n=this.apiService.getURL("event","get-event-types");return this.http.get(n).pipe((0,$i.K)(this.apiService.handleError("Error occurred while fetching event types")))}getAllEvents(){const n=this.apiService.getURL("event");return this.http.get(n).pipe((0,$i.K)(this.apiService.handleError("Error occurred while fetching events")))}importCourseEvent(n,r){const o=this.apiService.getURL("event","import-event");return this.http.post(o,{event:n.id,course:r},{observe:"response"}).pipe((0,$i.K)(this.apiService.handleError("Error occurred during question import.")))}}return e.\u0275fac=function(n){return new(n||e)(i.\u0275\u0275inject(Vu.eN),i.\u0275\u0275inject(kl.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ms=f(71105),zs=f(27482);function Pd(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"h1",3),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n.event.name)}}function Ad(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"p",8),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const n=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate2(" ",n.num_attempts," / ",n.question.max_submission_allowed," Attempts Taken ")}}const Id=function(e,t,n){return["/course",e,"event",t,"problem",n]};function Md(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",12),i.\u0275\u0275text(2," Open "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const n=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction3(1,Id,r.courseId,r.eventId,n.question.id))}}const Bc=function(e,t){return["/course",e,"problem",t]};function Hc(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"a",12),i.\u0275\u0275text(1," Open "),i.\u0275\u0275elementEnd()),2&e){const n=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,Bc,r.courseId,n.question.id))}}const kd=function(e){return["/problem",e,"edit"]};function Ll(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",12),i.\u0275\u0275text(2," Edit "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const n=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(1,kd,n.question.id))}}function jc(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-island"),i.\u0275\u0275elementStart(1,"p",4),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"h2",5),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",6),i.\u0275\u0275element(6,"tui-tag",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"p",8),i.\u0275\u0275text(8),i.\u0275\u0275pipe(9,"titlecase"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"p",8),i.\u0275\u0275text(11),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(12,Ad,3,2,"ng-container",0),i.\u0275\u0275elementStart(13,"div",9),i.\u0275\u0275template(14,Md,3,5,"ng-container",10),i.\u0275\u0275template(15,Hc,2,4,"ng-template",null,11,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(17,Ll,3,3,"ng-container",0),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const n=t.$implicit,r=i.\u0275\u0275reference(16),o=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate2("",n.question.parent_category_name?n.question.parent_category_name+": ":""," ",n.question.category_name,""),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n.question.title),i.\u0275\u0275advance(2),i.\u0275\u0275property("status",o.highlight(o.getStatus(n)))("value",o.getStatus(n)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(9,11,n.question.type_name)),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("",n.formatted_current_tokens_received," Tokens Received"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",o.eventId),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",o.eventId)("ngIfElse",r),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",o.user.is_teacher)}}function Gs(e,t){1&e&&(i.\u0275\u0275elementStart(0,"h2",15),i.\u0275\u0275text(1," There aren't any questions available in this event. "),i.\u0275\u0275elementEnd())}function Ol(e,t){1&e&&(i.\u0275\u0275elementStart(0,"h2",15),i.\u0275\u0275text(1," There aren't any questions available in this course. "),i.\u0275\u0275elementEnd())}function Uc(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Gs,2,0,"h2",13),i.\u0275\u0275template(2,Ol,2,0,"ng-template",null,14,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementContainerEnd()),2&e){const n=i.\u0275\u0275reference(3),r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.eventId)("ngIfElse",n)}}function zc(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div"),i.\u0275\u0275template(2,Pd,3,1,"ng-container",0),i.\u0275\u0275elementStart(3,"div",1),i.\u0275\u0275template(4,jc,18,13,"tui-island",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,Uc,4,2,"ng-container",0),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-container",n.eventId)("tui-container_adaptive",n.eventId),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.eventId),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",n.uqjs),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!n.uqjs.length)}}let Ws=(()=>{class e{constructor(n,r,o,u,c,v){this.authenticationService=n,this.router=r,this.route=o,this.uqjService=u,this.courseEventService=c,this.courseService=v,this.authenticationService.currentUser.subscribe(m=>this.user=m)}ngOnInit(){this.courseId=+this.route.snapshot.paramMap.get("courseId")||null,this.eventId=+this.route.snapshot.paramMap.get("eventId")||null,this.eventId&&this.courseId&&this.courseService.validateEvent(this.courseId,this.eventId).subscribe(n=>{n.success?(0,Fu.D)({event:this.courseEventService.getCourseEvent(this.eventId),uqjs:this.uqjService.getUQJs({filters:{question_event:this.eventId}})}).subscribe(r=>{this.event=r.event,this.uqjs=r.uqjs.results}):this.router.navigate(["course/view",this.courseId]).then()})}getStatus(n){return n.question.event&&n.question.is_exam?n.question.is_exam&&n.num_attempts>0?"Submitted":n.question.is_exam?"Not Submitted":void 0:n.status}highlight(n){return 0===n.localeCompare("Solved")?"success":0===n.localeCompare("Partially Solved")?"warning":0===n.localeCompare("Wrong")?"error":"warning"}}return e.\u0275fac=function(n){return new(n||e)(i.\u0275\u0275directiveInject(se.$),i.\u0275\u0275directiveInject(te.F0),i.\u0275\u0275directiveInject(te.gz),i.\u0275\u0275directiveInject(Vc.O),i.\u0275\u0275directiveInject(ma),i.\u0275\u0275directiveInject(ve.N))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-question-snippet"]],inputs:{questions:"questions",uqjs:"uqjs"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"question-islands"],[4,"ngFor","ngForOf"],[1,"tui-text_h3","tui-space_vertical-10"],[1,"tui-island__category"],[1,"tui-island__title"],[1,"tui-space_bottom-2"],["size","m",3,"status","value"],[1,"tui-island__paragraph"],[1,"tui-form__buttons"],[4,"ngIf","ngIfElse"],["noEvent",""],["tuiButton","","size","m","appearance","primary",1,"tui-form__button",3,"routerLink"],["class","tui-text_h6 tui-space_auto no-content-heading",4,"ngIf","ngIfElse"],["inCourse",""],[1,"tui-text_h6","tui-space_auto","no-content-heading"]],template:function(n,r){1&n&&i.\u0275\u0275template(0,zc,6,7,"ng-container",0),2&n&&i.\u0275\u0275property("ngIf",r.uqjs)},directives:[O.O5,O.sg,ms.h,zs.Gi,$t.v0,te.yS],pipes:[O.rS],styles:[".no-content-heading[_ngcontent-%COMP%]{margin-top:0}.question-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:2rem}"]}),e})();var Ya=f(22307);const Io=["importDialog"];function Xa(e,t){if(1&e){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-island",4),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().openEventImportDialog()}),i.\u0275\u0275elementStart(2,"div",5),i.\u0275\u0275elementStart(3,"figure",6),i.\u0275\u0275element(4,"tui-svg",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"h2",8),i.\u0275\u0275text(6,"Add Event"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("hoverable",!0))}function Ld(e,t){1&e&&i.\u0275\u0275element(0,"tui-tag",20)}function Gc(e,t){1&e&&i.\u0275\u0275element(0,"tui-tag",21)}function Od(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1," Grade Not Yet Available "),i.\u0275\u0275elementContainerEnd())}function Rd(e,t){if(1&e&&(i.\u0275\u0275text(0),i.\u0275\u0275pipe(1,"number")),2&e){const n=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275textInterpolate1(" Grade: ",i.\u0275\u0275pipeBind2(1,1,n.total_event_grade,"1.0-1"),"% ")}}const Nd=function(e,t){return["/course",e,"event",t]};function Dd(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",22),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const n=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(2,Nd,r.courseId,n.id)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.user.is_teacher?"Open":"Complete"," ")}}function Fd(e,t){1&e&&(i.\u0275\u0275elementStart(0,"a",23),i.\u0275\u0275text(1," Complete "),i.\u0275\u0275elementEnd()),2&e&&i.\u0275\u0275property("disabled",!0)}const Vd=function(e,t){return["/course",e,"new-event",t]};function Bd(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"a",24),i.\u0275\u0275text(1," Edit "),i.\u0275\u0275elementEnd()),2&e){const n=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext();i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,Vd,r.courseId,n.id))}}function Hd(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-island"),i.\u0275\u0275elementStart(1,"p",9),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"h2",8),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",10),i.\u0275\u0275template(6,Ld,1,0,"tui-tag",11),i.\u0275\u0275template(7,Gc,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"p",13),i.\u0275\u0275text(10),i.\u0275\u0275pipe(11,"date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(12,"p",13),i.\u0275\u0275text(13),i.\u0275\u0275pipe(14,"date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(15,"p",14),i.\u0275\u0275template(16,Od,2,0,"ng-container",15),i.\u0275\u0275template(17,Rd,2,4,"ng-template",null,16,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(19,"div",17),i.\u0275\u0275template(20,Dd,3,5,"ng-container",15),i.\u0275\u0275template(21,Fd,2,1,"ng-template",null,18,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(23,Bd,2,4,"a",19),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const n=t.$implicit,r=i.\u0275\u0275reference(8),o=i.\u0275\u0275reference(18),u=i.\u0275\u0275reference(22),c=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n.type),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n.name),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.is_open)("ngIfElse",r),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1("From: ",i.\u0275\u0275pipeBind2(11,11,n.start_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("Until: ",i.\u0275\u0275pipeBind2(14,14,n.end_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",n.is_open&&n.is_exam)("ngIfElse",o),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",n.is_allowed_to_open||(null==c.user?null:c.user.is_teacher))("ngIfElse",u),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",n.has_edit_permission)}}function jd(e,t){if(1&e){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-island",29),i.\u0275\u0275elementStart(1,"p",9),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"h3",8),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"button",30),i.\u0275\u0275listener("click",function(){const u=i.\u0275\u0275restoreView(n).$implicit,c=i.\u0275\u0275nextContext(3);return c.importCourseEvent(u,c.courseId)}),i.\u0275\u0275text(6," Import "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const n=t.$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n.type),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n.name)}}const Ud=function(e){return["/course",e,"new-event"]};function zd(e,t){if(1&e){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",26),i.\u0275\u0275elementStart(2,"a",27),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().$implicit.complete()}),i.\u0275\u0275elementStart(3,"figure",6),i.\u0275\u0275element(4,"tui-svg",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"h2",8),i.\u0275\u0275text(6,"Create New Event"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(7,jd,7,2,"tui-island",28),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){const n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("hoverable",!0)("routerLink",i.\u0275\u0275pureFunction1(3,Ud,n.courseId)),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngForOf",n.courseEvents)}}function Wc(e,t){if(1&e){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275template(0,zd,8,5,"ng-container",1),i.\u0275\u0275elementStart(1,"button",25),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n).$implicit.complete()}),i.\u0275\u0275text(2," Cancel "),i.\u0275\u0275elementEnd()}if(2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngIf",n.courseEvents)}}let $c=(()=>{class e{constructor(n,r,o,u){this.authenticationService=n,this.courseEventService=r,this.dialogService=o,this.notificationsService=u}ngOnInit(){this.courseId=this.course.id,this.authenticationService.currentUser.subscribe(n=>this.user=n),this.courseEventService.getEventTypes().subscribe(n=>{this.eventTypes=n})}openEventImportDialog(){this.courseEvents=null,this.courseEventService.getAllEvents().subscribe(n=>{this.courseEvents=n}),this.dialogService.open(this.importDialog,{label:"Select an Event to Import",size:"l",closeable:!1}).subscribe()}importCourseEvent(n,r){this.courseEventService.importCourseEvent(n,r).subscribe(o=>{201===o.status&&this.notificationsService.show("The Event has been Imported Successfully.",{status:"success"}).subscribe()})}}return e.\u0275fac=function(n){return new(n||e)(i.\u0275\u0275directiveInject(se.$),i.\u0275\u0275directiveInject(ma),i.\u0275\u0275directiveInject(Ya.RO),i.\u0275\u0275directiveInject(At.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-events-snippet"]],viewQuery:function(n,r){if(1&n&&i.\u0275\u0275viewQuery(Io,5),2&n){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.importDialog=o.first)}},inputs:{events:"events",course:"course"},decls:5,vars:2,consts:[[1,"events"],[4,"ngIf"],[4,"ngFor","ngForOf"],["importDialog",""],["textAlign","center",1,"new-event",3,"hoverable","click"],[1,"tui-space_vertical-10"],[1,"tui-island__figure"],["src","tuiIconPlusLarge"],[1,"tui-island__title"],[1,"tui-island__category"],[1,"tui-space_bottom-2"],["size","m","status","success","value","Open",4,"ngIf","ngIfElse"],["eventClosedTag",""],[1,"tui-island__paragraph"],[1,"tui-space_top-2"],[4,"ngIf","ngIfElse"],["totalEventGrade",""],[1,"tui-form__buttons"],["notAllowedOpen",""],["tuiButton","","appearance","primary","size","m","class","tui-form__button","aria-label","Edit",3,"routerLink",4,"ngIf"],["size","m","status","success","value","Open"],["size","m","status","error","value","Closed"],["tuiButton","","appearance","primary","size","m",1,"tui-form__button",3,"routerLink"],["tuiButton","","appearance","primary","size","m","href","","aria-label","Complete",1,"tui-form__button",3,"disabled"],["tuiButton","","appearance","primary","size","m","aria-label","Edit",1,"tui-form__button",3,"routerLink"],["tuiButton","","type","button","size","m","aria-label","Cancel",1,"tui-space_top-8",3,"click"],[1,"import-events","tui-space_top-8"],["tuiIsland","","size","s","textAlign","center",1,"new-event",3,"hoverable","routerLink","click"],["size","s",4,"ngFor","ngForOf"],["size","s"],["tuiButton","","appearance","primary","size","s","aria-label","Import",3,"click"]],template:function(n,r){1&n&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,Xa,7,1,"ng-container",1),i.\u0275\u0275template(2,Hd,24,17,"tui-island",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,Wc,3,1,"ng-template",null,3,i.\u0275\u0275templateRefExtractor)),2&n&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",null==r.course?null:r.course.has_create_event_permission),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",r.events))},directives:[O.O5,ms.h,ht.P,O.sg,zs.Gi,$t.v0,te.yS],pipes:[O.uU,O.JJ],styles:[".events[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:2rem}.new-event[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;justify-content:center}.import-events[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(10rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})(),Rl=(()=>{class e{constructor(n,r){this.http=n,this.apiService=r}useTokens(n,r){const o=new Vu.WM({"Content-Type":"application/json"}),u=this.apiService.getURL("token-use","use",r);return this.http.post(u,n,{headers:o}).pipe((0,$i.K)(this.apiService.handleError("Error occurred while attempting to use tokens")))}}return e.\u0275fac=function(n){return new(n||e)(i.\u0275\u0275inject(Vu.eN),i.\u0275\u0275inject(kl.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Nl=f(43588);function Gd(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",8),i.\u0275\u0275text(2," Warning: You are logged in as a teacher! Token uses will not do anything for you! "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function Wd(e,t){1&e&&i.\u0275\u0275element(0,"tui-tag",17)}function Yc(e,t){1&e&&i.\u0275\u0275element(0,"tui-tag",18)}function $d(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Wd,1,0,"tui-tag",15),i.\u0275\u0275template(2,Yc,1,0,"ng-template",null,16,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementContainerEnd()),2&e){const n=i.\u0275\u0275reference(3),r=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.num_used===r.option.maximum_number_of_use)("ngIfElse",n)}}function Yd(e,t){1&e&&i.\u0275\u0275element(0,"tui-tag",19)}const Xd=function(){return{standalone:!0}};function Kd(e,t){if(1&e){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-island"),i.\u0275\u0275elementStart(1,"h3",9),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",10),i.\u0275\u0275template(4,$d,4,2,"ng-container",11),i.\u0275\u0275template(5,Yd,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"p",13),i.\u0275\u0275text(8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"p",13),i.\u0275\u0275text(10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(11,"p",13),i.\u0275\u0275text(12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"tui-input-count",14),i.\u0275\u0275listener("ngModelChange",function(o){return i.\u0275\u0275restoreView(n).$implicit.num_used=o})("ngModelChange",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().calculateCurrentTotal()}),i.\u0275\u0275text(14," Number of Tokens Used "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const n=t.$implicit,r=i.\u0275\u0275reference(6);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n.option.assignment_name),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.num_used>0)("ngIfElse",r),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1("",n.option.tokens_required," Tokens Required"),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1("",n.option.points_given," Extra Grade Points Given"),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1("",n.option.maximum_number_of_use," Maximum Uses"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngModel",n.num_used)("ngModelOptions",i.\u0275\u0275pureFunction0(10,Xd))("min",0)("max",n.option.maximum_number_of_use)}}let Jd=(()=>{class e{constructor(n,r,o,u){this.tokenUseService=n,this.route=r,this.authenticationService=o,this.notificationsService=u,this.tokenUsesTableHeaders=["assignment_name","tokens_required","points_given","maximum_number_of_use","actions"],this.authenticationService.currentUser.subscribe(c=>this.user=c)}ngOnInit(){this.tokenUses=this.courseReg.token_uses,this.calculateCurrentTotal()}calculateCurrentTotal(){this.remainingTokens=this.courseReg.total_tokens_received;for(const n in this.tokenUses)this.remainingTokens-=this.tokenUses[n].num_used*this.tokenUses[n].option.tokens_required;this.invalid=this.remainingTokens<0}confirmChanges(){const n=this.route.snapshot.params.courseId,r={};this.tokenUses.forEach(o=>r[o.option.id]=o.num_used),this.tokenUseService.useTokens(r,n).subscribe(()=>{this.notificationsService.show("Token Uses Saved!",{status:"success"}).subscribe()})}}return e.\u0275fac=function(n){return new(n||e)(i.\u0275\u0275directiveInject(Rl),i.\u0275\u0275directiveInject(te.gz),i.\u0275\u0275directiveInject(se.$),i.\u0275\u0275directiveInject(At.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-token-use-snippet"]],inputs:{courseReg:"courseReg"},decls:12,vars:13,consts:[[4,"ngIf"],[1,"tokens"],[1,"tui-text_h6","tui-space_bottom-8"],["method","post"],[1,"token-use-islands"],[4,"ngFor","ngForOf"],[1,"tui-form__buttons"],["tuiButton","","appearance","primary","size","m","type","submit","aria-label","Confirm Changes",1,"tui-form__button",3,"disabled","click"],["status","warning",1,"tui-space_bottom-4"],[1,"tui-island__title"],[1,"tui-space_bottom-2"],[4,"ngIf","ngIfElse"],["tokenNotUsedTag",""],[1,"tui-island__paragraph"],["aria-label","Number of Tokens Used",1,"tui-space_top-4",3,"ngModel","ngModelOptions","min","max","ngModelChange"],["size","m","status","success","value","Tokens Used",4,"ngIf","ngIfElse"],["tokenPartialUseTag",""],["size","m","status","success","value","Tokens Used"],["size","m","status","warning","value","Tokens Partially Used"],["size","m","status","error","value","Not Used"]],template:function(n,r){1&n&&(i.\u0275\u0275template(0,Gd,3,0,"ng-container",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275elementStart(2,"h2",2),i.\u0275\u0275text(3),i.\u0275\u0275pipe(4,"number"),i.\u0275\u0275pipe(5,"number"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"form",3),i.\u0275\u0275elementStart(7,"div",4),i.\u0275\u0275template(8,Kd,15,11,"tui-island",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div",6),i.\u0275\u0275elementStart(10,"button",7),i.\u0275\u0275listener("click",function(){return r.confirmChanges()}),i.\u0275\u0275text(11," Confirm Changes "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&n&&(i.\u0275\u0275property("ngIf",null==r.user?null:r.user.is_teacher),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("error",r.invalid),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate2(" ",i.\u0275\u0275pipeBind2(4,7,r.remainingTokens,"1.0-1"),"/",i.\u0275\u0275pipeBind2(5,10,r.courseReg.total_tokens_received,"1.0-1")," Tokens Available "),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngForOf",r.courseReg.token_uses),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",r.invalid))},directives:[O.O5,Xt.Ls,ne.\u0275NgNoValidate,ne.NgControlStatusGroup,ne.NgForm,O.sg,ms.h,zs.Gi,Nl.EA,Nl.aQ,ne.NgControlStatus,ne.NgModel,$t.v0],pipes:[O.JJ],styles:[".tokens[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0}.tokens[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--tui-negative)}.token-use-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:2rem}"]}),e})();var Xc=f(76508),wr=f(78697),Kc=f(99848);function Zd(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-island",10),i.\u0275\u0275element(1,"div",11),i.\u0275\u0275elementStart(2,"figure",12),i.\u0275\u0275element(3,"tui-avatar",13,14),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"p",15),i.\u0275\u0275text(6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"h3",16),i.\u0275\u0275text(8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"p",17),i.\u0275\u0275text(10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const n=t.$implicit,r=t.index,o=i.\u0275\u0275reference(4),u=i.\u0275\u0275nextContext(2);i.\u0275\u0275styleProp("order",r%2*-r)("margin-top",r+"rem"),i.\u0275\u0275advance(1),i.\u0275\u0275styleProp("background-color",o.bgColor),i.\u0275\u0275advance(2),i.\u0275\u0275property("text",n.name||"Anonymous User")("rounded",!0)("autoColor",!0),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(u.getGetOrdinal(n.rank)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",n.name||"Anonymous User"," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",n.token?n.token+" Tokens":"No Tokens"," ")}}function Qd(e,t){1&e&&(i.\u0275\u0275elementStart(0,"th",18),i.\u0275\u0275text(1,"Rank"),i.\u0275\u0275elementEnd())}function Jc(e,t){1&e&&(i.\u0275\u0275elementStart(0,"th",18),i.\u0275\u0275text(1,"Name"),i.\u0275\u0275elementEnd())}function qd(e,t){1&e&&(i.\u0275\u0275elementStart(0,"th",18),i.\u0275\u0275text(1,"Tokens"),i.\u0275\u0275elementEnd())}function eh(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"td",21),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const n=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.getGetOrdinal(n.rank)," ")}}function th(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"td",21),i.\u0275\u0275elementStart(1,"div",22),i.\u0275\u0275element(2,"tui-avatar",23),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const n=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275property("text",n.name||"Anonymous User")("rounded",!0)("autoColor",!0),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n.name||"Anonymous User"," ")}}function nh(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"td",21),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const n=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n.token||"No Tokens"," ")}}function Dl(e,t){1&e&&(i.\u0275\u0275elementStart(0,"tr",19),i.\u0275\u0275template(1,eh,2,1,"td",20),i.\u0275\u0275template(2,th,4,4,"td",20),i.\u0275\u0275template(3,nh,2,1,"td",20),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiCell","rank"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiCell","name"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiCell","token"))}function rh(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275elementStart(1,"div",2),i.\u0275\u0275template(2,Zd,11,12,"tui-island",3),i.\u0275\u0275pipe(3,"tuiFilter"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"table",4),i.\u0275\u0275elementStart(5,"thead",5),i.\u0275\u0275elementStart(6,"tr",6),i.\u0275\u0275template(7,Qd,2,0,"th",7),i.\u0275\u0275template(8,Jc,2,0,"th",7),i.\u0275\u0275template(9,qd,2,0,"th",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"tbody",8),i.\u0275\u0275pipe(11,"tuiFilter"),i.\u0275\u0275template(12,Dl,4,3,"tr",9),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind3(3,7,n.leaderBoard,n.filterInTopX,n.rankTopX)),i.\u0275\u0275advance(2),i.\u0275\u0275property("columns",n.displayedColumns),i.\u0275\u0275advance(3),i.\u0275\u0275property("tuiHead","rank"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiHead","name"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiHead","token"),i.\u0275\u0275advance(1),i.\u0275\u0275property("data",i.\u0275\u0275pipeBind3(11,11,n.leaderBoard,n.filterOutTopX,n.rankTopX)),i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiRowOf",n.leaderBoard)}}let ih=(()=>{class e{constructor(){this.displayedColumns=["rank","name","token"],this.filterOutTopX=(n,r)=>n.rank>r,this.filterInTopX=(n,r)=>n.rank<=r}ngOnInit(){this.leaderBoard=this.getRankedLeaderboard(this.leaderBoard)}getRankedLeaderboard(n){return n.sort((o,u)=>u.token-o.token).map((o,u)=>({rank:u+1,name:o.name,token:o.token}))}getGetOrdinal(n){const r=["th","st","nd","rd"],o=n%100;return n+(r[(o-20)%10]||r[o]||r[0])}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-leader-board"]],inputs:{leaderBoard:"leaderBoard",rankTopX:"rankTopX"},decls:1,vars:1,consts:[["class","tui-container tui-container_adaptive",4,"ngIf"],[1,"tui-container","tui-container_adaptive"],[1,"top-x-islands","tui-space_bottom-8"],["textAlign","center","class","top-x-island",3,"order","marginTop",4,"ngFor","ngForOf"],["tuiTable","",1,"table",3,"columns"],["tuiThead",""],["tuiThGroup",""],["tuiTh","",4,"tuiHead"],["tuiTbody","",3,"data"],["tuiTr","",4,"tuiRow","tuiRowOf"],["textAlign","center",1,"top-x-island"],[1,"top-x-background"],[1,"tui-island__figure"],["size","l",1,"top-x-avatar",3,"text","rounded","autoColor"],["avatar",""],[1,"tui-island__paragraph","tui-text_h3","tui-space_bottom-2"],[1,"tui-island__title"],[1,"tui-island__paragraph"],["tuiTh",""],["tuiTr",""],["tuiTd","",4,"tuiCell"],["tuiTd",""],[1,"table-avatar-with-name"],["size","s",1,"tui-space_right-2",3,"text","rounded","autoColor"]],template:function(n,r){1&n&&i.\u0275\u0275template(0,rh,13,15,"div",0),2&n&&i.\u0275\u0275property("ngIf",r.leaderBoard)},directives:[O.O5,O.sg,ms.h,Xc.J,wr.c4,wr.Nx,wr.EE,wr.DZ,wr.Ws,wr.jY,wr.LU,wr.fu,wr.Bl,wr.Kt],pipes:[Kc.S],styles:[".top-x-islands[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;gap:1rem}@media screen and (max-width: 767px){.top-x-islands[_ngcontent-%COMP%]{flex-wrap:wrap}}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]{max-width:20rem;min-width:5rem;flex:1;overflow:hidden}@media screen and (max-width: 767px){.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]{max-width:unset;min-width:unset;width:100%;flex:unset;margin-right:0;margin-top:2rem!important}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]:first-of-type{margin-top:0!important}}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]   .top-x-avatar[_ngcontent-%COMP%]{margin-top:-2.75rem;border:var(--tui-base-01) 2px solid}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]   .top-x-background[_ngcontent-%COMP%]{width:140%;height:4rem;margin-top:-1rem;margin-left:-1rem;margin-bottom:12px}.table[_ngcontent-%COMP%]{width:100%}.table-avatar-with-name[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]}),e})();function oh(e,t){1&e&&(i.\u0275\u0275elementStart(0,"button",13),i.\u0275\u0275text(1,"Concepts"),i.\u0275\u0275elementEnd())}function ah(e,t){1&e&&(i.\u0275\u0275elementStart(0,"button",14),i.\u0275\u0275text(1,"Questions"),i.\u0275\u0275elementEnd())}function sh(e,t){1&e&&(i.\u0275\u0275elementStart(0,"button",15),i.\u0275\u0275text(1,"Events"),i.\u0275\u0275elementEnd())}function uh(e,t){1&e&&(i.\u0275\u0275elementStart(0,"button",16),i.\u0275\u0275text(1,"Token Use"),i.\u0275\u0275elementEnd())}function lh(e,t){1&e&&(i.\u0275\u0275elementStart(0,"button",17),i.\u0275\u0275text(1,"Leaderboard"),i.\u0275\u0275elementEnd())}function ch(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-concept-map",18),i.\u0275\u0275elementContainerEnd()),2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("currCourse",n.course)}}function fh(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-question-snippet",19),i.\u0275\u0275elementContainerEnd()),2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("questions",null==n.course?null:n.course.question_set)("uqjs",null==n.course?null:n.course.uqjs)}}function dh(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-events-snippet",20),i.\u0275\u0275elementContainerEnd()),2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("events",null==n.course?null:n.course.events)("course",n.course)}}function hh(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-token-use-snippet",21),i.\u0275\u0275elementContainerEnd()),2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("courseReg",null==n.course?null:n.course.course_reg)}}function ph(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-leader-board",22),i.\u0275\u0275elementContainerEnd()),2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("leaderBoard",null==n.course?null:n.course.leader_board)("rankTopX",3)}}function gh(e,t){1&e&&i.\u0275\u0275element(0,"tui-svg",23)}let vh=(()=>{class e{constructor(n,r,o){this.authenticationService=n,this.courseService=r,this.route=o,this.courseId=this.route.snapshot.params.courseId,this.authenticationService.currentUser.subscribe(u=>this.user=u)}ngOnInit(){this.courseService.getCourse(this.courseId).subscribe(n=>{this.course=n})}}return e.\u0275fac=function(n){return new(n||e)(i.\u0275\u0275directiveInject(se.$),i.\u0275\u0275directiveInject(ve.N),i.\u0275\u0275directiveInject(te.gz))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course"]],decls:20,vars:15,consts:[[1,"tui-container","tui-container_fullwidth"],[1,"tui-text_h3","tui-space_top-10","tui-space_bottom-2"],[1,"tui-space_bottom-10"],["tuiLink","","rel","noopener noreferrer","target","_blank",3,"href"],[1,"tui-space_bottom-4",3,"moreContent"],["tabsComponent",""],["tuiTab","","aria-label","Concepts",4,"tuiTab"],["tuiTab","","aria-label","Questions",4,"tuiTab"],["tuiTab","","aria-label","Events",4,"tuiTab"],["tuiTab","","aria-label","Token Use",4,"tuiTab"],["tuiTab","","aria-label","Leaderboard",4,"tuiTab"],[4,"ngIf"],["more",""],["tuiTab","","aria-label","Concepts"],["tuiTab","","aria-label","Questions"],["tuiTab","","aria-label","Events"],["tuiTab","","aria-label","Token Use"],["tuiTab","","aria-label","Leaderboard"],[3,"currCourse"],[3,"questions","uqjs"],[3,"events","course"],[3,"courseReg"],[3,"leaderBoard","rankTopX"],["src","tuiIconMoreHorLarge"]],template:function(n,r){if(1&n&&(i.\u0275\u0275elementStart(0,"section",0),i.\u0275\u0275elementStart(1,"h1",1),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",2),i.\u0275\u0275elementStart(4,"a",3),i.\u0275\u0275text(5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"tui-tabs-with-more",4,5),i.\u0275\u0275template(8,oh,2,0,"button",6),i.\u0275\u0275template(9,ah,2,0,"button",7),i.\u0275\u0275template(10,sh,2,0,"button",8),i.\u0275\u0275template(11,uh,2,0,"button",9),i.\u0275\u0275template(12,lh,2,0,"button",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(13,ch,2,1,"ng-container",11),i.\u0275\u0275template(14,fh,2,2,"ng-container",11),i.\u0275\u0275template(15,dh,2,2,"ng-container",11),i.\u0275\u0275template(16,hh,2,1,"ng-container",11),i.\u0275\u0275template(17,ph,2,2,"ng-container",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(18,gh,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor)),2&n){const o=i.\u0275\u0275reference(7),u=i.\u0275\u0275reference(19);i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.course),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",null==r.course?null:r.course.name," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.course),i.\u0275\u0275advance(1),i.\u0275\u0275property("href",null==r.course?null:r.course.url,i.\u0275\u0275sanitizeUrl),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",null==r.course?null:r.course.url," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.course),i.\u0275\u0275property("moreContent",u),i.\u0275\u0275advance(7),i.\u0275\u0275property("ngIf",0===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",1===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",2===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",3===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",4===o.activeItemIndex)}},directives:[ir.V,sr.WN,sr.tl,sr.yu,O.O5,gi,Ws,$c,Jd,ih,ht.P],styles:[""]}),e})();var ft=f(68858);let Fl=(()=>{class e{static createForm(){return(new ne.FormBuilder).group({name:new ne.FormControl(null,[ne.Validators.required]),type:new ne.FormControl("",[ne.Validators.required]),countForTokens:new ne.FormControl(!1,[ne.Validators.required]),startEndDatePicker:new ne.FormControl(new ft.VR(ft.TU.currentLocal(),ft.TU.currentLocal().append({day:7})),[ne.Validators.required]),startTimePicker:new ne.FormControl(ft.qD.currentLocal(),[ne.Validators.required]),endTimePicker:new ne.FormControl(ft.qD.currentLocal(),[ne.Validators.required])},{validator:e.dateValidator})}static createFormWithData(n){return(new ne.FormBuilder).group({name:new ne.FormControl(n.name,[ne.Validators.required]),type:new ne.FormControl(n.type,[ne.Validators.required]),countForTokens:new ne.FormControl(n.count_for_tokens,[ne.Validators.required]),startEndDatePicker:new ne.FormControl(new ft.VR(ft.TU.fromLocalNativeDate(new Date(n.start_date)),ft.TU.fromLocalNativeDate(new Date(n.end_date))),[ne.Validators.required]),startTimePicker:new ne.FormControl(ft.qD.fromLocalNativeDate(new Date(n.start_date)),[ne.Validators.required]),endTimePicker:new ne.FormControl(ft.qD.fromLocalNativeDate(new Date(n.end_date)),[ne.Validators.required])},{validator:e.dateValidator})}static formatFormData(n,r,o){return{id:o,name:n.get("name").value,type:n.get("type").value,count_for_tokens:n.get("countForTokens").value,start_date:this.dateAndTimeToLocal(n.get("startEndDatePicker").value.from,n.get("startTimePicker").value),end_date:this.dateAndTimeToLocal(n.get("startEndDatePicker").value.to,n.get("endTimePicker").value),course:r}}static dateAndTimeToLocal(n,r){return new Date(n.toLocalNativeDate().getTime()+r.toAbsoluteMilliseconds())}}return e.dateValidator=t=>{const n=t.get("startEndDatePicker").value,r=t.get("startTimePicker").value,o=t.get("endTimePicker").value;return!n.from||!n.to||n.isSingleDay&&o.toAbsoluteMilliseconds()<=r.toAbsoluteMilliseconds()?{forbiddenDateRange:!0}:null},e})();var mh=f(21086),Bu=f(24850);function Qc(e,t){return e?(0,tr.Gx)(e).pipe((0,Bu.U)(n=>t?t.fromControlValue(n):n)):(0,mh.of)(null)}var $s=f(3174),qc=f(13774),ys=f(35302),Ka=f(35137),ef=f(295),ya=f(40022),Gn=f(39193),Vl=f(52164),vi=f(61895),Ys=f(70589),xa=f(45261),xs=f(15411);const tf={mask:()=>!1},rf=(e,t,n,r)=>{if(!t||!t.isSingleDay||!n)return e;const o=t.from.append(n,r).append({day:1},!r);return r?o.dayBefore(e)?e:o:e&&o.dayAfter(e)?e:o},Bl={HH:23,MM:59,SS:59,MS:999};var lr=f(72997),bs=f(85113);function Hl(e,{value:t,min:n,max:r,dateFormat:o,dateSeparator:u}){return t&&t.toString(o,u)===e?e:ft.TU.normalizeParse(e,o).dayLimit(n,r).toString(o,u)}function of(e){return t=>t.length!==ft.ek?{value:t}:{value:Hl(t,e)}}function Hu(e,t){return ft.TU.normalizeParse(e.slice(0,ft.ek),t.dateFormat).dayLimit(t.min,t.max)}function bh(e,t){const{dateFormat:n,dateSeparator:r}=t;switch(e.length){case ft.ek:return Hu(e,t).toString(n,r);case ft.ek+ft.mH.length:return Hu(e,t).toString(n,r)+ft.mH;case ft.FZ:return t.value&&t.value.toString(n,r)===e?e:ft.VR.sort(Hu(e.slice(0,ft.ek),t),Hu(e.slice(ft.ek+ft.mH.length),t)).toString(n,r);default:return e}}function Ch(e){return t=>({value:bh(t,e)})}function af(e="HH:MM",t={}){const n=["HH","MM","SS","MS"],r=Object.assign(Object.assign({},Bl),t);return o=>{const u=[],c=o.split("");return n.forEach(m=>{const T=e.indexOf(m),I=parseInt(String(r[m]).substr(0,1),10);parseInt(c[T],10)>I&&(c[T+1]=c[T],c[T]="0",u.push(T))}),!n.some(m=>parseInt(o.substr(e.indexOf(m),2),10)>r[m])&&{value:c.join(""),indexesOfPipedChars:u}}}const ju=Array(2).fill(Gn.hW),sf=Array(4).fill(Gn.hW);function uf(e,t){return"YMD"===(bs.z.assert(1===t.length,"Separator should consist of only 1 symbol"),e)?[...sf,t,...ju,t,...ju]:[...ju,t,...ju,t,...sf]}function _h(e,t){bs.z.assert(1===t.length,"Separator should consist of only 1 symbol");const n=uf(e,t);return[...n,wn.f$,wn.F,wn.f$,...n]}function Uu(e,t){const{length:n}=String(e),r=Array(n).fill(Gn.hW);return t&&r.unshift(t),r}function wh(e,t={}){const{HH:n,MM:r,SS:o,MS:u}=Object.assign(Object.assign({},Bl),t);return[...Uu(n),...Uu(r,":"),...e.includes("HH:MM:SS")?Uu(o,":"):[],..."HH:MM:SS.MSS"===e?Uu(u,"."):[]]}var Xs=f(35628),zu=f(7625),Ul=f(6083),ba=f(93030),Cs=f(26171),Ut=f(24710),Gu=f(53256),Ks=f(2141),Js=f(66695);let lf=(()=>{let e=class{constructor(n){this.tuiColor="",this.tuiBackground="",n.addStyle("[data-tui-background='primary'] {\n    background-color: var(--tui-primary);\n}\n\n[data-tui-background='secondary'] {\n    background-color: var(--tui-info-fill);\n}\n\n[data-tui-background='success'] {\n    background-color: var(--tui-success-fill);\n}\n\n[data-tui-background='error'] {\n    background-color: var(--tui-error-fill);\n}\n\n[data-tui-background='support-mustard'],\n[data-tui-background='support-01'] {\n    background-color: var(--tui-support-01);\n}\n\n[data-tui-background='support-texas'],\n[data-tui-background='support-02'] {\n    background-color: var(--tui-support-02);\n}\n\n[data-tui-background='support-tan'],\n[data-tui-background='support-03'] {\n    background-color: var(--tui-support-03);\n}\n\n[data-tui-background='support-salmon'],\n[data-tui-background='support-04'] {\n    background-color: var(--tui-support-04);\n}\n\n[data-tui-background='support-sienna'],\n[data-tui-background='support-05'] {\n    background-color: var(--tui-support-05);\n}\n\n[data-tui-background='support-bittersweet'],\n[data-tui-background='support-06'] {\n    background-color: var(--tui-support-06);\n}\n\n[data-tui-background='support-pinkie'],\n[data-tui-background='support-07'] {\n    background-color: var(--tui-support-07);\n}\n\n[data-tui-background='support-charm'],\n[data-tui-background='support-08'] {\n    background-color: var(--tui-support-08);\n}\n\n[data-tui-background='support-amethyst'],\n[data-tui-background='support-09'] {\n    background-color: var(--tui-support-09);\n}\n\n[data-tui-background='support-helio'],\n[data-tui-background='support-10'] {\n    background-color: var(--tui-support-10);\n}\n\n[data-tui-background='support-lilac'],\n[data-tui-background='support-11'] {\n    background-color: var(--tui-support-11);\n}\n\n[data-tui-background='support-malibu'],\n[data-tui-background='support-12'] {\n    background-color: var(--tui-support-12);\n}\n\n[data-tui-background='support-havelock'],\n[data-tui-background='support-13'] {\n    background-color: var(--tui-support-13);\n}\n\n[data-tui-background='support-picton'],\n[data-tui-background='support-14'] {\n    background-color: var(--tui-support-14);\n}\n\n[data-tui-background='support-mint'],\n[data-tui-background='support-15'] {\n    background-color: var(--tui-support-15);\n}\n\n[data-tui-background='support-fountain'],\n[data-tui-background='support-16'] {\n    background-color: var(--tui-support-16);\n}\n\n[data-tui-background='support-puertorico'],\n[data-tui-background='support-17'] {\n    background-color: var(--tui-support-17);\n}\n\n[data-tui-background='support-bay'],\n[data-tui-background='support-18'] {\n    background-color: var(--tui-support-18);\n}\n\n[data-tui-background='support-forest'],\n[data-tui-background='support-19'] {\n    background-color: var(--tui-support-19);\n}\n\n[data-tui-background='support-york'],\n[data-tui-background='support-20'] {\n    background-color: var(--tui-support-20);\n}\n\n[data-tui-background='support-feijoa'],\n[data-tui-background='support-21'] {\n    background-color: var(--tui-support-21);\n}\n\n[data-tui-background='base-01'] {\n    background-color: var(--tui-base-01);\n}\n\n[data-tui-background='base-02'] {\n    background-color: var(--tui-base-02);\n}\n\n[data-tui-background='base-03'] {\n    background-color: var(--tui-base-03);\n}\n\n[data-tui-background='base-04'] {\n    background-color: var(--tui-base-04);\n}\n\n[data-tui-background='base-05'] {\n    background-color: var(--tui-base-05);\n}\n\n[data-tui-background='base-06'] {\n    background-color: var(--tui-base-06);\n}\n\n[data-tui-background='base-07'] {\n    background-color: var(--tui-base-07);\n}\n\n[data-tui-background='base-08'] {\n    background-color: var(--tui-base-08);\n}\n\n[data-tui-background='base-09'] {\n    background-color: var(--tui-base-09);\n}\n\n[data-tui-color='primary'] {\n    color: var(--tui-primary);\n}\n\n[data-tui-color='secondary'] {\n    color: var(--tui-info-fill);\n}\n\n[data-tui-color='success'] {\n    color: var(--tui-success-fill);\n}\n\n[data-tui-color='error'] {\n    color: var(--tui-error-fill);\n}\n\n[data-tui-color='support-mustard'],\n[data-tui-color='support-01'] {\n    color: var(--tui-support-01);\n}\n\n[data-tui-color='support-texas'],\n[data-tui-color='support-02'] {\n    color: var(--tui-support-02);\n}\n\n[data-tui-color='support-tan'],\n[data-tui-color='support-03'] {\n    color: var(--tui-support-03);\n}\n\n[data-tui-color='support-salmon'],\n[data-tui-color='support-04'] {\n    color: var(--tui-support-04);\n}\n\n[data-tui-color='support-sienna'],\n[data-tui-color='support-05'] {\n    color: var(--tui-support-05);\n}\n\n[data-tui-color='support-bittersweet'],\n[data-tui-color='support-06'] {\n    color: var(--tui-support-06);\n}\n\n[data-tui-color='support-pinkie'],\n[data-tui-color='support-07'] {\n    color: var(--tui-support-07);\n}\n\n[data-tui-color='support-charm'],\n[data-tui-color='support-08'] {\n    color: var(--tui-support-08);\n}\n\n[data-tui-color='support-amethyst'],\n[data-tui-color='support-09'] {\n    color: var(--tui-support-09);\n}\n\n[data-tui-color='support-helio'],\n[data-tui-color='support-10'] {\n    color: var(--tui-support-10);\n}\n\n[data-tui-color='support-lilac'],\n[data-tui-color='support-11'] {\n    color: var(--tui-support-11);\n}\n\n[data-tui-color='support-malibu'],\n[data-tui-color='support-12'] {\n    color: var(--tui-support-12);\n}\n\n[data-tui-color='support-havelock'],\n[data-tui-color='support-13'] {\n    color: var(--tui-support-13);\n}\n\n[data-tui-color='support-picton'],\n[data-tui-color='support-14'] {\n    color: var(--tui-support-14);\n}\n\n[data-tui-color='support-mint'],\n[data-tui-color='support-15'] {\n    color: var(--tui-support-15);\n}\n\n[data-tui-color='support-fountain'],\n[data-tui-color='support-16'] {\n    color: var(--tui-support-16);\n}\n\n[data-tui-color='support-puertorico'],\n[data-tui-color='support-17'] {\n    color: var(--tui-support-17);\n}\n\n[data-tui-color='support-bay'],\n[data-tui-color='support-18'] {\n    color: var(--tui-support-18);\n}\n\n[data-tui-color='support-forest'],\n[data-tui-color='support-19'] {\n    color: var(--tui-support-19);\n}\n\n[data-tui-color='support-york'],\n[data-tui-color='support-20'] {\n    color: var(--tui-support-20);\n}\n\n[data-tui-color='support-feijoa'],\n[data-tui-color='support-21'] {\n    color: var(--tui-support-21);\n}\n\n[data-tui-color='base-01'] {\n    color: var(--tui-base-01);\n}\n\n[data-tui-color='base-02'] {\n    color: var(--tui-base-02);\n}\n\n[data-tui-color='base-03'] {\n    color: var(--tui-base-03);\n}\n\n[data-tui-color='base-04'] {\n    color: var(--tui-base-04);\n}\n\n[data-tui-color='base-05'] {\n    color: var(--tui-base-05);\n}\n\n[data-tui-color='base-06'] {\n    color: var(--tui-base-06);\n}\n\n[data-tui-color='base-07'] {\n    color: var(--tui-base-07);\n}\n\n[data-tui-color='base-08'] {\n    color: var(--tui-base-08);\n}\n\n[data-tui-color='base-09'] {\n    color: var(--tui-base-09);\n}\n","TuiColorDirective")}};return e.\u0275fac=function(n){return new(n||e)(i.\u0275\u0275directiveInject(Je.gH))},e.\u0275dir=i.\u0275\u0275defineDirective({type:e,selectors:[["","tuiColor",""],["","tuiBackground",""]],hostVars:2,hostBindings:function(n,r){2&n&&i.\u0275\u0275attribute("data-tui-color",r.tuiColor)("data-tui-background",r.tuiBackground)},inputs:{tuiColor:"tuiColor",tuiBackground:"tuiBackground"}}),(0,Ut.gn)([(0,i.Input)(),(0,i.HostBinding)("attr.data-tui-color"),(0,be.TH)()],e.prototype,"tuiColor",void 0),(0,Ut.gn)([(0,i.Input)(),(0,i.HostBinding)("attr.data-tui-background"),(0,be.TH)()],e.prototype,"tuiBackground",void 0),e=(0,Ut.gn)([(0,Ut.fM)(0,(0,i.Inject)(Je.gH))],e),e})(),cf=(()=>{let e=class{};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({}),e})();var Wu=f(46579);const Sh=({month:e,rowIndex:t,colIndex:n,firstDayOfWeek:r})=>{bs.z.assert(Number.isInteger(t)),bs.z.assert((0,Wu.Z2)(t,0,6)),bs.z.assert(Number.isInteger(n)),bs.z.assert((0,Wu.Z2)(n,0,ft.NA));let o=t*ft.NA+n-((e,t)=>{const n=new Date(e.year,e.month,1).getDay();return n>=t?n-t:ft.NA-(t-n)})(e,r)+1;return o>e.daysCount&&(o-=e.daysCount,e=e.append({month:1})),o<=0&&(o=(e=e.append({month:-1})).daysCount+o),new ft.TU(e.year,e.month,o)};let Eh=(()=>{let e=class{constructor(n){this.firstDayOfWeek=n,this.currentMonth=null,this.currentSheet=[]}transform(n,r=!1){if(this.currentMonth&&this.currentMonth.monthSame(n))return this.currentSheet;const o=[];for(let u=0;u<6;u++){const c=[];for(let v=0;v<ft.NA;v++){const m=Sh({month:n,rowIndex:u,colIndex:v,firstDayOfWeek:this.firstDayOfWeek}),I=(b,G=n)=>b.year>G.year||b.month>G.month;if(!((b,G=n)=>b.year<G.year||b.month<G.month)(m)||r){if(I(m)&&!r)break;c.push(m)}}o.push(c)}return this.currentSheet=o.filter(u=>u.length),this.currentMonth=n,this.currentSheet}};return e.\u0275fac=function(n){return new(n||e)(i.\u0275\u0275directiveInject(xa.Sy,16))},e.\u0275pipe=i.\u0275\u0275definePipe({name:"tuiCalendarSheet",type:e,pure:!0}),e=(0,Ut.gn)([(0,Ut.fM)(0,(0,i.Inject)(xa.Sy))],e),e})(),$u=(()=>{let e=class{};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({}),e})();function Yu(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",3),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const n=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(n)}}function Ph(e,t){if(1&e&&i.\u0275\u0275element(0,"div",12),2&e){const n=i.\u0275\u0275nextContext().ngIf;i.\u0275\u0275property("tuiBackground",n[1])}}function Ah(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",11),i.\u0275\u0275element(1,"div",12),i.\u0275\u0275template(2,Ph,1,1,"div",13),i.\u0275\u0275elementEnd()),2&e){const n=t.ngIf;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiBackground",n[0]),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.length>1)}}function Gl(e,t){if(1&e){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",8),i.\u0275\u0275listener("tuiHoveredChange",function(o){i.\u0275\u0275restoreView(n);const u=i.\u0275\u0275nextContext().tuiLet;return i.\u0275\u0275nextContext(4).onItemHovered(o&&u)})("tuiPressedChange",function(o){i.\u0275\u0275restoreView(n);const u=i.\u0275\u0275nextContext().tuiLet;return i.\u0275\u0275nextContext(4).onItemPressed(o&&u)})("click",function(){i.\u0275\u0275restoreView(n);const o=i.\u0275\u0275nextContext().tuiLet;return i.\u0275\u0275nextContext(4).onItemClick(o)}),i.\u0275\u0275elementStart(1,"div",9),i.\u0275\u0275text(2),i.\u0275\u0275template(3,Ah,3,2,"div",10),i.\u0275\u0275pipe(4,"tuiMapper"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const n=i.\u0275\u0275nextContext().tuiLet,r=i.\u0275\u0275nextContext(4);i.\u0275\u0275classProp("t-cell_weekend",n.isWeekend)("t-cell_today",r.itemIsToday(n))("t-cell_interval",r.itemIsInterval(n)),i.\u0275\u0275attribute("data-range",r.getItemRange(n))("data-state",r.getItemState(n)),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("t-item_unavailable",r.itemIsUnavailable(n)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n.day," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind4(4,12,n,r.toMarkers,r.itemIsToday(n),!!r.getItemRange(n)))}}function df(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Gl,5,17,"div",7),i.\u0275\u0275elementContainerEnd()),2&e){const n=t.tuiLet,r=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!r.itemIsUnavailable(n)||r.showAdjacent)}}function Ih(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,df,2,1,"ng-container",2),i.\u0275\u0275elementContainerEnd()),2&e){const n=t.$implicit,r=i.\u0275\u0275nextContext().$implicit,o=i.\u0275\u0275nextContext().tuiLet;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",o[r][n])}}function Mh(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",5),i.\u0275\u0275template(1,Ih,2,1,"ng-container",6),i.\u0275\u0275elementEnd()),2&e){const n=t.$implicit,r=i.\u0275\u0275nextContext().tuiLet;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiRepeatTimesOf",r[n].length)}}function kh(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275template(1,Mh,2,1,"div",4),i.\u0275\u0275elementEnd()),2&e){const n=t.tuiLet;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiRepeatTimesOf",n.length)}}let Lh=(()=>{let e=class{constructor(n){this.weekDays$=n,this.pressedItem=null,this.today=ft.TU.currentLocal(),this.month=ft.ql.currentLocal(),this.disabledItemHandler=wn.Iy,this.markerHandler=Gn.zE,this.value=null,this.hoveredItem=null,this.showAdjacent=!0,this.hoveredItemChange=new i.EventEmitter,this.dayClick=new i.EventEmitter,this.toMarkers=(r,o,u)=>{if(o||u)return null;const c=this.markerHandler(r);return 0===c.length?null:c}}get isSingle(){return null!==this.value&&(this.value instanceof ft.TU||this.value.isSingleDay)}getItemState(n){const{disabledItemHandler:r,pressedItem:o,hoveredItem:u}=this;return r(n)?"disabled":o&&o.daySame(n)?"pressed":u&&u.daySame(n)?"hovered":null}getItemRange(n){const{value:r,hoveredItem:o}=this;return r?r instanceof ft.TU?r.daySame(n)?"single":null:r.from.daySame(n)&&!r.isSingleDay||o&&o.dayAfter(r.from)&&r.from.daySame(n)&&r.isSingleDay||o&&o.daySame(n)&&o.dayBefore(r.from)&&r.isSingleDay?"start":r.to.daySame(n)&&!r.isSingleDay||o&&o.dayBefore(r.from)&&r.from.daySame(n)&&r.isSingleDay||o&&o.daySame(n)&&o.dayAfter(r.from)&&r.isSingleDay?"end":r.isSingleDay&&r.from.daySame(n)?"single":null:null}itemIsToday(n){return this.today.daySame(n)}itemIsUnavailable(n){return!this.month.monthSame(n)}itemIsInterval(n){const{value:r,hoveredItem:o}=this;if(null===r||r instanceof ft.TU)return!1;if(!r.isSingleDay)return r.from.daySameOrBefore(n)&&r.to.dayAfter(n);if(null===o)return!1;const u=ft.VR.sort(r.from,o);return u.from.daySameOrBefore(n)&&u.to.dayAfter(n)}onItemHovered(n){this.updateHoveredItem(n||null)}onItemPressed(n){this.pressedItem=n||null}onItemClick(n){this.dayClick.emit(n)}updateHoveredItem(n){(0,nr.Hm)(this.hoveredItem,n,(r,o)=>r.daySame(o))||(this.hoveredItem=n,this.hoveredItemChange.emit(n))}};return e.\u0275fac=function(n){return new(n||e)(i.\u0275\u0275directiveInject(xa.lQ))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-calendar"]],hostVars:2,hostBindings:function(n,r){2&n&&i.\u0275\u0275classProp("_single",r.isSingle)},inputs:{month:"month",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",value:"value",hoveredItem:"hoveredItem",showAdjacent:"showAdjacent"},outputs:{hoveredItemChange:"hoveredItemChange",dayClick:"dayClick"},decls:5,vars:7,consts:[[1,"t-row","t-row_weekday"],["class","t-cell",4,"ngFor","ngForOf"],[4,"tuiLet"],[1,"t-cell"],["automation-id","tui-primitive-calendar__row","class","t-row",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-calendar__row",1,"t-row"],[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-calendar__cell","class","t-cell",3,"t-cell_weekend","t-cell_today","t-cell_interval","tuiHoveredChange","tuiPressedChange","click",4,"ngIf"],["automation-id","tui-primitive-calendar__cell",1,"t-cell",3,"tuiHoveredChange","tuiPressedChange","click"],["automation-id","tui-primitive-calendar__item",1,"t-item"],["class","t-dots",4,"ngIf"],[1,"t-dots"],[1,"t-dot",3,"tuiBackground"],["class","t-dot",3,"tuiBackground",4,"ngIf"]],template:function(n,r){1&n&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,Yu,2,1,"div",1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,kh,2,1,"div",2),i.\u0275\u0275pipe(4,"tuiCalendarSheet")),2&n&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind1(2,2,r.weekDays$)),i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiLet",i.\u0275\u0275pipeBind2(4,4,r.month,!0)))},directives:[O.sg,ya.Ls,Gu.Xj,O.O5,Ks.c,Js.n,lf],pipes:[O.Ov,Eh,ba.c],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after, .t-item[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:2.25rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-2.25rem}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background-color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.25rem}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.25rem}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled][_ngcontent-%COMP%]{pointer-events:none}.t-cell[data-state=disabled][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[data-state=hovered][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-active)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]{justify-content:flex-start}.t-row[_ngcontent-%COMP%]:first-child{justify-content:flex-end}.t-row_weekday[_ngcontent-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-02);pointer-events:none}.t-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.t-cell_weekend[_ngcontent-%COMP%]{color:var(--tui-negative)}.t-item_unavailable[_ngcontent-%COMP%]{opacity:var(--tui-disabled-opacity)}.t-dots[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:-.5rem;padding-bottom:.25rem}.t-dot[_ngcontent-%COMP%]{display:inline-block;width:.25rem;height:.25rem;border-radius:100%;margin:0 .0625rem}"],changeDetection:0}),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"month",void 0),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"markerHandler",void 0),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"value",void 0),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"hoveredItem",void 0),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"showAdjacent",void 0),(0,Ut.gn)([(0,i.Output)()],e.prototype,"hoveredItemChange",void 0),(0,Ut.gn)([(0,i.Output)()],e.prototype,"dayClick",void 0),(0,Ut.gn)([(0,i.HostBinding)("class._single")],e.prototype,"isSingle",null),e=(0,Ut.gn)([(0,Ut.fM)(0,(0,i.Inject)(xa.lQ))],e),e})(),Oh=(()=>{let e=class{};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[O.ez,ya.WD,ba.I,Gu.Ih,Ks.V,Js.f,cf,$u]]}),e})();var hf=f(43360);function Rh(e,t){if(1&e){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",4),i.\u0275\u0275listener("tuiHoveredChange",function(o){const c=i.\u0275\u0275restoreView(n).tuiLet;return i.\u0275\u0275nextContext(3).onItemHovered(o,c)})("tuiPressedChange",function(o){const c=i.\u0275\u0275restoreView(n).tuiLet;return i.\u0275\u0275nextContext(3).onItemPressed(o,c)})("click",function(){const u=i.\u0275\u0275restoreView(n).tuiLet;return i.\u0275\u0275nextContext(3).onItemClick(u)}),i.\u0275\u0275elementStart(1,"div",5),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const n=t.tuiLet,r=i.\u0275\u0275nextContext(3);i.\u0275\u0275classProp("t-cell_today",r.itemIsToday(n))("t-cell_interval",r.itemIsInterval(n)),i.\u0275\u0275property("tuiScrollIntoView",r.scrollItemIntoView(n)),i.\u0275\u0275attribute("data-range",r.getItemRange(n))("data-state",r.getItemState(n)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n)}}function Nh(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Rh,3,8,"div",3),i.\u0275\u0275elementContainerEnd()),2&e){const n=t.$implicit,r=i.\u0275\u0275nextContext().$implicit,o=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",o.getItem(r,n))}}function Dh(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275template(1,Nh,2,1,"ng-container",2),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiRepeatTimesOf",4))}let Fh=(()=>{let e=class{constructor(){this.hoveredItem=null,this.pressedItem=null,this.currentYear=ft.ql.currentLocal().year,this.value=null,this.initialItem=ft.ql.currentLocal(),this.min=ft.K1,this.max=ft.Oy,this.disabledItemHandler=wn.Iy,this.yearClick=new i.EventEmitter}get isSingle(){const{value:n}=this;return!!n&&this.isRange(n)&&n.from.yearSame(n.to)}get rows(){return Math.ceil((this.calculatedMax-this.calculatedMin)/4)}get calculatedMin(){const n=this.initialItem.year-100;return this.min.year>n?this.min.year:n}get calculatedMax(){const n=this.initialItem.year+100;return this.max.year<n?this.max.year+1:n}isRange(n){return n instanceof ft.dt}scrollItemIntoView(n){return this.initialItem.year===n}getItem(n,r){return 4*n+r+this.calculatedMin}getItemState(n){const{disabledItemHandler:r,max:o,pressedItem:u,hoveredItem:c}=this;return o.year<n||r!==wn.Iy&&r(n)?"disabled":u===n?"pressed":c===n?"hovered":null}getItemRange(n){const{value:r,hoveredItem:o}=this;return null===r?null:r instanceof ft.F4?r.year===n?"single":null:r.from.year===n&&!r.from.yearSame(r.to)||null!==o&&o>r.from.year&&r.from.year===n&&r.from.yearSame(r.to)||null!==o&&o===n&&o<r.from.year&&r.from.yearSame(r.to)?"start":r.to.year===n&&!r.from.yearSame(r.to)||null!==o&&o<r.from.year&&r.from.year===n&&r.from.yearSame(r.to)||null!==o&&o===n&&o>r.from.year&&r.from.yearSame(r.to)?"end":r.from.yearSame(r.to)&&r.from.year===n?"single":null}itemIsToday(n){return this.currentYear===n}itemIsInterval(n){const{value:r,hoveredItem:o}=this;return!(null===r||!this.isRange(r))&&(r.from.yearSame(r.to)?null!==o&&r.from.year!==o&&(0,Wu.Z2)(n,Math.min(r.from.year,o),Math.max(r.from.year,o)):r.from.year<=n&&r.to.year>n)}onItemHovered(n,r){this.updateHoveredItem(n,r)}onItemPressed(n,r){this.updatePressedItem(n,r)}onItemClick(n){this.yearClick.emit(new ft.F4(n))}updateHoveredItem(n,r){this.hoveredItem=n?r:null}updatePressedItem(n,r){this.pressedItem=n?r:null}};return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-year-picker"]],hostVars:2,hostBindings:function(n,r){2&n&&i.\u0275\u0275classProp("_single",r.isSingle)},inputs:{value:"value",initialItem:"initialItem",min:"min",max:"max",disabledItemHandler:"disabledItemHandler"},outputs:{yearClick:"yearClick"},decls:1,vars:1,consts:[["automation-id","tui-primitive-year-picker__row","class","t-row",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-year-picker__row",1,"t-row"],[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-year-picker__cell","class","t-cell",3,"t-cell_today","t-cell_interval","tuiScrollIntoView","tuiHoveredChange","tuiPressedChange","click",4,"tuiLet"],["automation-id","tui-primitive-year-picker__cell",1,"t-cell",3,"tuiScrollIntoView","tuiHoveredChange","tuiPressedChange","click"],[1,"t-item"]],template:function(n,r){1&n&&i.\u0275\u0275template(0,Dh,2,1,"div",0),2&n&&i.\u0275\u0275property("tuiRepeatTimesOf",r.rows)},directives:[Gu.Xj,ya.Ls,hf.M,Ks.c,Js.n],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem;margin:.875rem 0}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after, .t-item[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:3.9375rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-3.9375rem}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background-color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.25rem}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.25rem}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled][_ngcontent-%COMP%]{pointer-events:none}.t-cell[data-state=disabled][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[data-state=hovered][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-active)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]:first-child{margin-top:0}.t-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}"],changeDetection:0}),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"value",void 0),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"initialItem",void 0),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"min",void 0),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"max",void 0),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Ut.gn)([(0,i.Output)()],e.prototype,"yearClick",void 0),(0,Ut.gn)([(0,i.HostBinding)("class._single")],e.prototype,"isSingle",null),e})(),ho=(()=>{let e=class{};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[Ks.V,Js.f,Gu.Ih,ya.WD,hf.e]]}),e})();var Wl=f(61279),Xu=f(33703),Ca=f(37940),sn=f(3054);const Vh=["wrapper"];function Ai(e,t){if(1&e){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",1,2),i.\u0275\u0275listener("tuiFocusedChange",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onFocused(o)})("tuiFocusVisibleChange",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onFocusVisible(o)})("keydown.arrowLeft",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onLeftClick()})("keydown.arrowRight",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onRightClick()}),i.\u0275\u0275elementStart(2,"button",3),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onLeftClick()}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"span",4),i.\u0275\u0275projection(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"button",5),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onRightClick()}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const n=t.ngIf,r=i.\u0275\u0275nextContext();i.\u0275\u0275property("tuiFocusable",r.computedFocusable),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("arrow_hidden",r.leftComputedDisabled),i.\u0275\u0275property("title",n[0])("focusable",!1),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("arrow_hidden",r.rightComputedDisabled),i.\u0275\u0275property("title",n[1])("focusable",!1)}}const kr=["*"];let Bh=(()=>{let e=class extends ys.Xn{constructor(n){super(),this.spinTexts$=n,this.disabled=!1,this.mode="flat",this.leftDisabled=!1,this.rightDisabled=!1,this.leftClick=new i.EventEmitter,this.rightClick=new i.EventEmitter}get focused(){return!!this.wrapper&&(0,Yn.zV)(this.wrapper.nativeElement)}get leftComputedDisabled(){return this.computedDisabled||this.leftDisabled}get rightComputedDisabled(){return this.computedDisabled||this.rightDisabled}onLeftClick(){this.leftComputedDisabled||this.leftClick.emit()}onRightClick(){this.rightComputedDisabled||this.rightClick.emit()}onFocused(n){this.updateFocused(n)}onFocusVisible(n){this.updateFocusVisible(n)}};return e.\u0275fac=function(n){return new(n||e)(i.\u0275\u0275directiveInject(xa.U4))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-spin-button"]],viewQuery:function(n,r){if(1&n&&i.\u0275\u0275viewQuery(Vh,5),2&n){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.wrapper=o.first)}},inputs:{disabled:"disabled",mode:"mode",leftDisabled:"leftDisabled",rightDisabled:"rightDisabled"},outputs:{leftClick:"leftClick",rightClick:"rightClick"},features:[i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:kr,decls:2,vars:3,consts:[["tuiPreventDefault","mousedown","class","wrapper",3,"tuiFocusable","tuiFocusedChange","tuiFocusVisibleChange","keydown.arrowLeft","keydown.arrowRight",4,"ngIf"],["tuiPreventDefault","mousedown",1,"wrapper",3,"tuiFocusable","tuiFocusedChange","tuiFocusVisibleChange","keydown.arrowLeft","keydown.arrowRight"],["wrapper",""],["tuiIconButton","","type","button","size","xs","appearance","","automation-id","tui-primitive-spin-button__left","icon","tuiIconChevronLeftLarge",1,"arrow",3,"title","focusable","click"],[1,"content"],["tuiIconButton","","type","button","size","xs","appearance","","automation-id","tui-primitive-spin-button__right","icon","tuiIconChevronRightLarge",1,"arrow",3,"title","focusable","click"]],template:function(n,r){1&n&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,Ai,6,9,"div",0),i.\u0275\u0275pipe(1,"async")),2&n&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,r.spinTexts$))},directives:[O.O5,Cs.A,Xu.t,sn.U,Ca.q,$t.v0],pipes:[O.Ov],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-l);text-align:center;font-weight:700}.wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;outline:0}.arrow[_ngcontent-%COMP%]{margin:0 .25rem}.arrow_hidden[_ngcontent-%COMP%]{visibility:hidden}.content[_ngcontent-%COMP%]{padding:0 .5rem}._focus-visible[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{box-shadow:0 0 0 1px var(--tui-focus)}"],changeDetection:0}),(0,Ut.gn)([(0,i.ViewChild)("wrapper")],e.prototype,"wrapper",void 0),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"disabled",void 0),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"mode",void 0),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"leftDisabled",void 0),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"rightDisabled",void 0),(0,Ut.gn)([(0,i.Output)()],e.prototype,"leftClick",void 0),(0,Ut.gn)([(0,i.Output)()],e.prototype,"rightClick",void 0),e=(0,Ut.gn)([(0,Ut.fM)(0,(0,i.Inject)(xa.U4))],e),e})(),_a=(()=>{let e=class{};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[O.ez,Ca.c,sn.F,Xu.u,Cs.Z,$t.fN]]}),e})();var vf=f(5767);function Hh(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1),i.\u0275\u0275elementContainerEnd()),2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n.value.formattedYear," ")}}function jh(e,t){if(1&e){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",3),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onYearClick()}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275property("tuiFocusable",!1),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n.value.formattedYear," ")}}let Uh=(()=>{let e=class{constructor(){this.value=ft.ql.currentLocal(),this.min=ft.K1,this.max=ft.Oy,this.valueChange=new i.EventEmitter,this.yearClick=new i.EventEmitter}get prevMonthDisabled(){return this.value.monthSameOrBefore(this.min)}get nextMonthDisabled(){return this.value.monthSameOrAfter(this.max)}get oneYear(){return this.min.year===this.max.year}onYearClick(){this.yearClick.next(this.value)}onPrevMonthClick(){this.appendValueWithLimit({month:-1})}onNextMonthClick(){this.appendValueWithLimit({month:1})}appendValueWithLimit(n){const r=this.value.append(n);this.min.monthSameOrAfter(r)?this.updateValue(this.min):this.max.monthSameOrBefore(r)?this.updateValue(this.max):this.updateValue(r)}updateValue(n){this.value.monthSame(n)||(this.value=n,this.valueChange.emit(n))}};return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-year-month-pagination"]],inputs:{value:"value",min:"min",max:"max"},outputs:{valueChange:"valueChange",yearClick:"yearClick"},decls:7,vars:10,consts:[[3,"focusable","leftDisabled","rightDisabled","leftClick","rightClick"],[4,"ngIf","ngIfElse"],["button",""],["automation-id","tui-primitive-year-month-pagination__year-button","tuiLink","","type","button",3,"tuiFocusable","click"]],template:function(n,r){if(1&n&&(i.\u0275\u0275elementStart(0,"tui-primitive-spin-button",0),i.\u0275\u0275listener("leftClick",function(){return r.onPrevMonthClick()})("rightClick",function(){return r.onNextMonthClick()}),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275pipe(3,"tuiMonth"),i.\u0275\u0275template(4,Hh,2,1,"ng-container",1),i.\u0275\u0275template(5,jh,2,2,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&n){const o=i.\u0275\u0275reference(6);i.\u0275\u0275property("focusable",!1)("leftDisabled",r.prevMonthDisabled)("rightDisabled",r.nextMonthDisabled),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(2,6,i.\u0275\u0275pipeBind1(3,8,r.value))," "),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",r.oneYear)("ngIfElse",o)}},directives:[Bh,O.O5,ir.V,Xu.t],pipes:[O.Ov,vf.$],styles:["[_nghost-%COMP%]{display:block}"]}),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"value",void 0),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"min",void 0),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"max",void 0),(0,Ut.gn)([(0,i.Output)()],e.prototype,"valueChange",void 0),(0,Ut.gn)([(0,i.Output)()],e.prototype,"yearClick",void 0),e})(),zh=(()=>{let e=class{};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[O.ez,Xu.u,_a,ir.j,vf.g]]}),e})();function $l(e,t){if(1&e){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-scrollbar",2),i.\u0275\u0275elementStart(1,"tui-primitive-year-picker",3),i.\u0275\u0275listener("yearClick",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onPickerYearClick(o)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("min",n.min)("max",n.max)("initialItem",n.year)("value",n.value)}}function Gh(e,t){if(1&e){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-year-month-pagination",4),i.\u0275\u0275listener("valueChange",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onPaginationValueChange(o)})("yearClick",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onPaginationYearClick(o)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(1,"tui-primitive-calendar",5),i.\u0275\u0275listener("hoveredItemChange",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onHoveredItemChange(o)})("dayClick",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onDayClick(o)}),i.\u0275\u0275pipe(2,"tuiMapper"),i.\u0275\u0275elementEnd()}if(2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275property("min",n.computedMinViewedMonth)("max",n.computedMaxViewedMonth)("value",n.month),i.\u0275\u0275advance(1),i.\u0275\u0275property("showAdjacent",n.showAdjacent)("value",n.value)("month",n.month)("disabledItemHandler",i.\u0275\u0275pipeBind4(2,9,n.disabledItemHandler,n.disabledItemHandlerMapper,n.min,n.max))("markerHandler",n.markerHandler)("hoveredItem",n.hoveredItem)}}let po=(()=>{let e=class{constructor(){this.month=ft.ql.currentLocal(),this.value=null,this.disabledItemHandler=wn.Iy,this.min=ft.K1,this.max=ft.Oy,this.minViewedMonth=ft.K1,this.maxViewedMonth=ft.Oy,this.hoveredItem=null,this.showAdjacent=!0,this.markerHandler=Gn.zE,this.dayClick=new i.EventEmitter,this.monthChange=new i.EventEmitter,this.hoveredItemChange=new i.EventEmitter,this.year=null,this.disabledItemHandlerMapper=(n,r,o)=>u=>u.dayBefore(r)||u.dayAfter(o)||n(u)}get computedMinViewedMonth(){return this.minViewedMonth.monthSameOrAfter(this.min)?this.minViewedMonth:this.min}get computedMaxViewedMonth(){return this.maxViewedMonth.monthSameOrBefore(this.max)?this.maxViewedMonth:this.max}onPaginationYearClick(n){this.year=n}onPickerYearClick({year:n}){this.year=null,this.updateViewedMonth(new ft.ql(n,this.month.month))}onPaginationValueChange(n){this.updateViewedMonth(n)}onDayClick(n){this.dayClick.emit(n)}onHoveredItemChange(n){this.updateHoveredDay(n)}updateViewedMonth(n){this.month.monthSame(n)||(this.month=n,this.monthChange.emit(n))}updateHoveredDay(n){(0,nr.Hm)(this.hoveredItem,n,(r,o)=>r.daySame(o))||(this.hoveredItem=n,this.hoveredItemChange.emit(n))}};return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-calendar"]],inputs:{month:"month",value:"value",disabledItemHandler:"disabledItemHandler",min:"min",max:"max",minViewedMonth:"minViewedMonth",maxViewedMonth:"maxViewedMonth",hoveredItem:"hoveredItem",showAdjacent:"showAdjacent",markerHandler:"markerHandler"},outputs:{dayClick:"dayClick",monthChange:"monthChange",hoveredItemChange:"hoveredItemChange"},decls:3,vars:2,consts:[["automation-id","tui-calendar__scrollbar","class","scrollbar",4,"ngIf","ngIfElse"],["calendar",""],["automation-id","tui-calendar__scrollbar",1,"scrollbar"],["automation-id","tui-calendar__year",3,"min","max","initialItem","value","yearClick"],["automation-id","tui-calendar__pagination",1,"pagination",3,"min","max","value","valueChange","yearClick"],["automation-id","tui-calendar__calendar",3,"showAdjacent","value","month","disabledItemHandler","markerHandler","hoveredItem","hoveredItemChange","dayClick"]],template:function(n,r){if(1&n&&(i.\u0275\u0275template(0,$l,2,4,"tui-scrollbar",0),i.\u0275\u0275template(1,Gh,3,14,"ng-template",null,1,i.\u0275\u0275templateRefExtractor)),2&n){const o=i.\u0275\u0275reference(2);i.\u0275\u0275property("ngIf",r.year)("ngIfElse",o)}},directives:[O.O5,Wl.IB,Fh,Uh,Lh],pipes:[ba.c],styles:["[_nghost-%COMP%]{display:block;height:18.25rem;width:15.75rem;padding:1rem 1.125rem;box-sizing:content-box}.scrollbar[_ngcontent-%COMP%]{height:18.25rem;width:16.875rem}.pagination[_ngcontent-%COMP%]{margin-bottom:1rem}"],changeDetection:0}),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"month",void 0),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"value",void 0),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"min",void 0),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"max",void 0),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"minViewedMonth",void 0),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"maxViewedMonth",void 0),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"hoveredItem",void 0),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"showAdjacent",void 0),(0,Ut.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"markerHandler",void 0),(0,Ut.gn)([(0,i.Output)()],e.prototype,"dayClick",void 0),(0,Ut.gn)([(0,i.Output)()],e.prototype,"monthChange",void 0),(0,Ut.gn)([(0,i.Output)()],e.prototype,"hoveredItemChange",void 0),e})(),_s=(()=>{let e=class{};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[O.ez,zh,Oh,ho,Wl.Jy,ba.I]]}),e})();var ii=f(56249);let yr=(()=>{let e=class{constructor(n,r,o){this.disabledItemHandler=wn.Iy,this.markerHandler=Gn.zE,this.defaultViewedMonthFirst=ft.ql.currentLocal(),this.defaultViewedMonthSecond=ft.ql.currentLocal().append({month:1}),this.min=ft.K1,this.max=ft.Oy,this.value=null,this.dayClick=new i.EventEmitter,this.hoveredItem=null,this.userViewedMonthFirst=this.defaultViewedMonthFirst,this.userViewedMonthSecond=this.defaultViewedMonthSecond,this.monthOffset=(u,c)=>u.append({month:c}),n&&n.pipe((0,tr.YP)(r),(0,zu.R)(o)).subscribe(u=>{this.value=u,this.updateViewedMonths()})}get cappedUserViewedMonthSecond(){return this.userViewedMonthSecond.monthBefore(this.max)?this.userViewedMonthSecond:this.max}get cappedUserViewedMonthFirst(){return this.userViewedMonthFirst.monthSameOrBefore(this.userViewedMonthSecond)?this.userViewedMonthFirst:this.userViewedMonthSecond}ngOnInit(){this.updateViewedMonths()}onSectionFirstViewedMonth(n){this.userViewedMonthFirst=n,this.userViewedMonthSecond.year<this.userViewedMonthFirst.year&&(this.userViewedMonthSecond=this.userViewedMonthSecond.append({year:n.year-this.userViewedMonthSecond.year}))}onSectionSecondViewedMonth(n){this.userViewedMonthSecond=n,this.userViewedMonthFirst.year>this.userViewedMonthSecond.year&&(this.userViewedMonthFirst=this.userViewedMonthFirst.append({year:n.year-this.userViewedMonthFirst.year}))}onDayClick(n){this.dayClick.emit(n)}updateViewedMonths(){this.userViewedMonthFirst=null===this.value?this.defaultViewedMonthFirst:this.value.from,this.userViewedMonthSecond=null===this.value?this.defaultViewedMonthSecond:this.value.to,this.userViewedMonthFirst.monthSame(this.userViewedMonthSecond)&&(this.userViewedMonthSecond=this.userViewedMonthSecond.append({month:1}))}};return e.\u0275fac=function(n){return new(n||e)(i.\u0275\u0275directiveInject(lr.cU,8),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(Je.a3))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-calendar-range"]],inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",defaultViewedMonthFirst:"defaultViewedMonthFirst",defaultViewedMonthSecond:"defaultViewedMonthSecond",min:"min",max:"max",value:"value"},outputs:{dayClick:"dayClick"},features:[i.\u0275\u0275ProvidersFeature([Je.a3])],decls:4,vars:26,consts:[[3,"min","max","month","markerHandler","maxViewedMonth","value","disabledItemHandler","showAdjacent","hoveredItem","hoveredItemChange","dayClick","monthChange"],[1,"border",3,"min","max","month","markerHandler","minViewedMonth","value","disabledItemHandler","showAdjacent","hoveredItem","hoveredItemChange","dayClick","monthChange"]],template:function(n,r){1&n&&(i.\u0275\u0275elementStart(0,"tui-calendar",0),i.\u0275\u0275listener("hoveredItemChange",function(u){return r.hoveredItem=u})("dayClick",function(u){return r.onDayClick(u)})("monthChange",function(u){return r.onSectionFirstViewedMonth(u)}),i.\u0275\u0275pipe(1,"tuiMapper"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(2,"tui-calendar",1),i.\u0275\u0275listener("hoveredItemChange",function(u){return r.hoveredItem=u})("dayClick",function(u){return r.onDayClick(u)})("monthChange",function(u){return r.onSectionSecondViewedMonth(u)}),i.\u0275\u0275pipe(3,"tuiMapper"),i.\u0275\u0275elementEnd()),2&n&&(i.\u0275\u0275property("min",r.min)("max",r.max)("month",r.userViewedMonthFirst)("markerHandler",r.markerHandler)("maxViewedMonth",i.\u0275\u0275pipeBind3(1,18,r.cappedUserViewedMonthSecond,r.monthOffset,-1))("value",r.value)("disabledItemHandler",r.disabledItemHandler)("showAdjacent",!1)("hoveredItem",r.hoveredItem),i.\u0275\u0275advance(2),i.\u0275\u0275property("min",r.min)("max",r.max)("month",r.userViewedMonthSecond)("markerHandler",r.markerHandler)("minViewedMonth",i.\u0275\u0275pipeBind3(3,22,r.cappedUserViewedMonthFirst,r.monthOffset,1))("value",r.value)("disabledItemHandler",r.disabledItemHandler)("showAdjacent",!1)("hoveredItem",r.hoveredItem))},directives:[po],pipes:[ba.c],styles:["[_nghost-%COMP%]{display:flex}.border[_ngcontent-%COMP%]{border-left:1px solid var(--tui-base-03)}"],changeDetection:0}),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"disabledItemHandler",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"markerHandler",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"defaultViewedMonthFirst",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"defaultViewedMonthSecond",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"min",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"max",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"value",void 0),(0,ze.gn)([(0,i.Output)()],e.prototype,"dayClick",void 0),e=(0,ze.gn)([(0,ze.fM)(0,(0,i.Inject)(lr.cU)),(0,ze.fM)(0,(0,i.Optional)()),(0,ze.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,ze.fM)(2,(0,i.Inject)(Je.a3))],e),e})(),Sr=(()=>{let e=class{};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[ba.I,Wl.Jy,_s]]}),e})();const Yl=function(e,t,n,r){return[e,t,n,r,!0]},mf=function(e,t,n,r){return[e,t,n,r,!1]};function Wh(e,t){if(1&e){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-calendar-range",2),i.\u0275\u0275listener("dayClick",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onDayClick(o)}),i.\u0275\u0275pipe(1,"tuiMapper"),i.\u0275\u0275pipe(2,"tuiMapper"),i.\u0275\u0275pipe(3,"tuiMapper"),i.\u0275\u0275elementEnd()}if(2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275property("markerHandler",n.markerHandler)("min",i.\u0275\u0275pipeBindV(1,7,i.\u0275\u0275pureFunction4(22,Yl,n.min,n.maxLengthMapper,n.value,n.maxLength)))("max",i.\u0275\u0275pipeBindV(2,13,i.\u0275\u0275pureFunction4(27,mf,n.max,n.maxLengthMapper,n.value,n.maxLength)))("defaultViewedMonthFirst",n.defaultViewedMonth)("defaultViewedMonthSecond",i.\u0275\u0275pipeBind2(3,19,n.defaultViewedMonth,n.monthShiftMapper))("disabledItemHandler",n.calculatedDisabledItemHandler)("value",n.value)}}function $h(e,t){1&e&&i.\u0275\u0275element(0,"tui-svg",9)}function Yh(e,t){if(1&e){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",7),i.\u0275\u0275listener("keydown.enter.prevent",function(){const u=i.\u0275\u0275restoreView(n).$implicit;return i.\u0275\u0275nextContext(2).onItemSelect(u)})("keydown.space.prevent",function(){const u=i.\u0275\u0275restoreView(n).$implicit;return i.\u0275\u0275nextContext(2).onItemSelect(u)})("click",function(){const u=i.\u0275\u0275restoreView(n).$implicit;return i.\u0275\u0275nextContext(2).onItemSelect(u)}),i.\u0275\u0275text(1),i.\u0275\u0275template(2,$h,1,0,"tui-svg",8),i.\u0275\u0275elementEnd()}if(2&e){const n=t.$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275attribute("aria-checked",r.isItemActive(n)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.isItemActive(n))}}const Xh=function(e,t,n,r,o,u){return[e,t,n,r,o,u]};function Kh(e,t){if(1&e){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",3),i.\u0275\u0275elementStart(1,"tui-calendar",4),i.\u0275\u0275listener("dayClick",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onDayClick(o)}),i.\u0275\u0275pipe(2,"tuiMapper"),i.\u0275\u0275pipe(3,"tuiMapper"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"tui-data-list",5),i.\u0275\u0275template(5,Yh,3,3,"button",6),i.\u0275\u0275pipe(6,"tuiMapper"),i.\u0275\u0275pipe(7,"async"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("value",n.value)("markerHandler",n.markerHandler)("min",i.\u0275\u0275pipeBindV(2,7,i.\u0275\u0275pureFunction4(28,Yl,n.min,n.maxLengthMapper,n.value,n.maxLength)))("max",i.\u0275\u0275pipeBindV(3,13,i.\u0275\u0275pureFunction4(33,mf,n.max,n.maxLengthMapper,n.value,n.maxLength)))("month",n.computedMonth)("disabledItemHandler",n.calculatedDisabledItemHandler),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBindV(6,19,i.\u0275\u0275pureFunction6(38,Xh,n.items,n.mapper,n.min,n.max,n.minLength,i.\u0275\u0275pipeBind1(7,26,n.otherDateText$))))}}let yf=(()=>{let e=class{constructor(n,r,o,u){this.otherDateText$=u,this.defaultViewedMonth=ft.ql.currentLocal(),this.disabledItemHandler=wn.Iy,this.markerHandler=Gn.zE,this.items=[],this.min=ft.K1,this.max=ft.Oy,this.minLength=null,this.maxLength=null,this.value=null,this.valueChange=new i.EventEmitter,this.rangeChange=new i.EventEmitter,this.maxLengthMapper=rf,this.monthShiftMapper=c=>c.append({month:1}),this.mapper=(c,v,m,T,I)=>[...c.filter(b=>(null===T||b.range.from.append(T).daySameOrBefore(b.range.to))&&b.range.to.daySameOrAfter(v)&&(null===m||b.range.from.daySameOrBefore(m))),I],n&&n.pipe((0,tr.YP)(r),(0,zu.R)(o)).subscribe(c=>{this.value=c})}get calculatedDisabledItemHandler(){return this.calculateDisabledItemHandler(this.disabledItemHandler,this.value,this.minLength)}get computedMonth(){return this.value?this.value.to:this.defaultViewedMonth}isItemActive(n){const{activePeriod:r}=this;return"string"==typeof n&&null===r||r===n}onRangeChange(n){this.updateValue(n)}onDayClick(n){const{value:r}=this;null!==r&&r.isSingleDay?this.updateValue(ft.VR.sort(r.from,n)):this.value=new ft.VR(n,n)}onItemSelect(n){"string"==typeof n?null!==this.activePeriod&&this.updateValue(null):this.updateValue(n.range.dayLimit(this.min,this.max))}updateValue(n){this.value=n,this.valueChange.emit(n),this.rangeChange.emit(n)}get activePeriod(){return this.items.find(n=>(0,nr.Hm)(this.value,n.range,(r,o)=>r.from.daySame(o.from.dayLimit(this.min,this.max))&&r.to.daySame(o.to.dayLimit(this.min,this.max))))||null}calculateDisabledItemHandler(n,r,o){return u=>{if(!r||!r.isSingleDay||!o)return n(u);const c=r.from.append(o,!0).append({day:1}),v=r.from.append(o).append({day:-1});return c.dayBefore(u)&&v.dayAfter(u)||n(u)}}};return e.\u0275fac=function(n){return new(n||e)(i.\u0275\u0275directiveInject(lr.cU,8),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(Je.a3),i.\u0275\u0275directiveInject(lr.q5))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-calendar-range"]],inputs:{defaultViewedMonth:"defaultViewedMonth",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength",value:"value"},outputs:{valueChange:"valueChange",rangeChange:"rangeChange"},features:[i.\u0275\u0275ProvidersFeature([Je.a3])],decls:3,vars:2,consts:[["automation-id","tui-calendar-range__calendars","tuiPreventDefault","mousedown",3,"markerHandler","min","max","defaultViewedMonthFirst","defaultViewedMonthSecond","disabledItemHandler","value","dayClick",4,"ngIf","ngIfElse"],["presets",""],["automation-id","tui-calendar-range__calendars","tuiPreventDefault","mousedown",3,"markerHandler","min","max","defaultViewedMonthFirst","defaultViewedMonthSecond","disabledItemHandler","value","dayClick"],[1,"wrapper"],["automation-id","tui-calendar-range__calendar","tuiPreventDefault","mousedown",3,"value","markerHandler","min","max","month","disabledItemHandler","dayClick"],["role","menu","automation-id","tui-calendar-range__menu",1,"menu"],["tuiOption","","tuiPreventDefault","mousedown","role","menuitemradio","automation-id","tui-calendar-range__menu__item",3,"keydown.enter.prevent","keydown.space.prevent","click",4,"ngFor","ngForOf"],["tuiOption","","tuiPreventDefault","mousedown","role","menuitemradio","automation-id","tui-calendar-range__menu__item",3,"keydown.enter.prevent","keydown.space.prevent","click"],["automation-id","tui-calendar-range__checkmark","src","tuiIconCheck","class","checkmark",4,"ngIf"],["automation-id","tui-calendar-range__checkmark","src","tuiIconCheck",1,"checkmark"]],template:function(n,r){if(1&n&&(i.\u0275\u0275template(0,Wh,4,32,"tui-primitive-calendar-range",0),i.\u0275\u0275template(1,Kh,8,45,"ng-template",null,1,i.\u0275\u0275templateRefExtractor)),2&n){const o=i.\u0275\u0275reference(2);i.\u0275\u0275property("ngIf",!r.items.length)("ngIfElse",o)}},directives:[O.O5,yr,Cs.A,po,ii.qi,O.sg,ii.vK,ht.P],pipes:[ba.c,O.Ov],styles:["[_nghost-%COMP%]{display:block}.wrapper[_ngcontent-%COMP%]{display:flex}.menu[_ngcontent-%COMP%]{width:11rem;border-left:1px solid var(--tui-base-03)}.checkmark[_ngcontent-%COMP%]{margin-left:auto;width:1rem;height:1rem}"],changeDetection:0}),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"defaultViewedMonth",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"disabledItemHandler",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"markerHandler",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"items",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"min",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"max",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"minLength",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"maxLength",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"value",void 0),(0,ze.gn)([(0,i.Output)()],e.prototype,"valueChange",void 0),(0,ze.gn)([(0,i.Output)()],e.prototype,"rangeChange",void 0),(0,ze.gn)([be.UM],e.prototype,"calculateDisabledItemHandler",null),e=(0,ze.gn)([(0,ze.fM)(0,(0,i.Inject)(lr.cU)),(0,ze.fM)(0,(0,i.Optional)()),(0,ze.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,ze.fM)(2,(0,i.Inject)(Je.a3)),(0,ze.fM)(3,(0,i.Inject)(lr.q5))],e),e})(),Zs=(()=>{let e=class{};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[O.ez,ba.I,Cs.Z,_s,_s,ht.E,ii.pc,Sr]]}),e})();var wa=f(38190);function Jh(e,t){if(1&e){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-textfield",5),i.\u0275\u0275listener("valueChange",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onValueChange(o)})("hoveredChange",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onHovered(o)})("pressedChange",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onPressed(o)}),i.\u0275\u0275projection(1),i.\u0275\u0275projection(2,1,["ngProjectAs","input",5,["input"]]),i.\u0275\u0275elementEnd()}if(2&e){const n=t.tuiLet,r=i.\u0275\u0275nextContext(),o=i.\u0275\u0275reference(4),u=i.\u0275\u0275reference(6);i.\u0275\u0275property("pseudoFocused",r.innerPseudoFocused)("pseudoHovered",r.pseudoHovered)("pseudoPressed",r.pseudoPressed)("invalid",r.computedInvalid)("tuiTextfieldExampleText",r.computedExampleText)("nativeId",r.nativeId)("filler",r.getComputedRangeFiller(n))("readOnly",r.readOnly)("iconContent",r.computedMobile?o:u)("disabled",r.computedDisabled)("textMask",r.computedMask)("value",r.computedValue)}}function xf(e,t){if(1&e){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-svg",6),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onMobileClick()}),i.\u0275\u0275elementEnd()}if(2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!n.computedDisabled),i.\u0275\u0275property("src",n.calendarIcon)}}function Ku(e,t){if(1&e&&i.\u0275\u0275element(0,"tui-svg",7),2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!n.computedDisabled),i.\u0275\u0275property("src",n.calendarIcon)}}function Di(e,t){if(1&e){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-calendar-range",8),i.\u0275\u0275listener("valueChange",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onRangeChange(o)}),i.\u0275\u0275elementEnd()}if(2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275property("defaultViewedMonth",n.defaultViewedMonth)("disabledItemHandler",n.disabledItemHandler)("items",n.items)("min",n.min)("max",n.max)("markerHandler",n.markerHandler)("minLength",n.minLength)("maxLength",n.maxLength)("value",n.value)}}const ws=["*",[["input"]]],Zh=["*","input"],qh=[{provide:ys.M$,useExisting:(0,i.forwardRef)(()=>Xl)},{provide:Ka.KZ,useExisting:(0,i.forwardRef)(()=>Xl)},{provide:lr.cU,deps:[[new i.Optional,new i.Self,ne.NgControl],[new i.Optional,(0,i.forwardRef)(()=>lr.LD)]],useFactory:(e,t)=>Qc(e,t)},Ul.Sm];let Xl=(()=>{let e=class extends ys.F9{constructor(n,r,o,u,c,v,m,T,I,b,G,ee){super(n,r,ee),this.injector=o,this.isMobile=u,this.dialogService=c,this.mobileCalendar=v,this.textfieldSize=m,this.textfieldExampleText=T,this.dateFormat=I,this.dateSeparator=b,this.dateTexts$=G,this.valueTransformer=ee,this.textMaskOptions={mask:_h(this.dateFormat,this.dateSeparator),pipe:Ch(this),guide:!1},this.disabledItemHandler=wn.Iy,this.markerHandler=Gn.zE,this.defaultViewedMonth=ft.ql.currentLocal(),this.items=[],this.min=ft.K1,this.max=ft.Oy,this.minLength=null,this.maxLength=null,this.open=!1,this.maxLengthMapper=rf,this.dateFiller$=this.dateTexts$.pipe((0,Bu.U)(oe=>(0,ft.Yl)(oe[this.dateFormat],this.dateSeparator)))}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return!!this.textfield&&this.textfield.focused}get computedMobile(){return this.isMobile&&!!this.mobileCalendar}get calendarIcon(){return(0,Vl.Bb)(this.textfieldSize.size)?"tuiIconCalendarLarge":"tuiIconCalendar"}get canOpen(){return this.interactive&&!this.computedMobile}get computedExampleText(){return this.items.length?this.textfieldExampleText.exampleText:""}get computedMask(){return this.activePeriod?tf:this.textMaskOptions}get activePeriod(){return this.items.find(n=>(0,nr.Hm)(this.value,n.range,(r,o)=>r.from.daySame(o.from.dayLimit(this.min,this.max))&&r.to.daySame(o.to.dayLimit(this.min,this.max))))||null}get computedValue(){const{value:n,nativeValue:r,activePeriod:o}=this;return o?String(o):n?n.getFormattedDayRange(this.dateFormat,this.dateSeparator):r}get innerPseudoFocused(){return!1!==this.pseudoFocused&&(!(!this.open&&!this.computedFocused)||null)}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(n){!this.nativeFocusableElement||(this.nativeFocusableElement.value=n)}onClick(){this.isMobile||this.toggle()}getComputedRangeFiller(n){return this.activePeriod?"":this.getDateRangeFiller(n)}onMobileClick(){this.mobileCalendar?this.dialogService.open(new Xs.Al(this.mobileCalendar,this.injector),{size:"fullscreen",closeable:!1,data:{single:!1,min:this.maxLengthMapper(this.min,this.value,this.maxLength,!0),max:this.maxLengthMapper(this.max,this.value,this.maxLength,!1),disabledItemHandler:this.disabledItemHandler}}).pipe((0,zu.R)(this.destroy$)).subscribe(n=>{this.updateValue(n)}):this.toggle()}onOpenChange(n){this.open=n}onValueChange(n){if(this.control&&this.control.updateValueAndValidity({emitEvent:!1}),n||this.onOpenChange(!0),n.length!==ft.FZ)return void this.updateValue(null);const r=ft.VR.normalizeParse(n,this.dateFormat);this.updateValue(this.minLength||this.maxLength?this.clampValue(r):r)}onRangeChange(n){this.toggle(),this.focusInput(),n||(this.nativeValue=""),(0,nr.Hm)(this.value,n,(r,o)=>r.daySame(o))||this.updateValue(n)}onItemSelect(n){this.toggle(),this.focusInput(),"string"==typeof n?null!==this.activePeriod&&(this.updateValue(null),this.nativeValue=""):this.updateValue(n.range.dayLimit(this.min,this.max))}onHovered(n){this.updateHovered(n)}onPressed(n){this.updatePressed(n)}onActiveZone(n){this.updateFocused(n),!n&&!this.itemSelected&&(this.nativeValue.length===ft.ek||this.nativeValue.length===ft.ek+ft.mH.length)&&this.updateValue(ft.VR.normalizeParse(this.nativeValue,this.dateFormat))}writeValue(n){super.writeValue(n),this.nativeValue=n?this.computedValue:""}get itemSelected(){return-1!==this.items.findIndex(n=>String(n)===this.nativeValue)}toggle(){this.open=!this.open}focusInput(n=!1){this.nativeFocusableElement&&(0,Yn.NY)(this.nativeFocusableElement,!0,n)}clampValue(n){const r=this.minLength&&n.from.append(this.minLength).dayAfter(n.to)?new ft.VR(n.from,n.from.append(this.minLength).append({day:-1})):n,o=this.maxLength?r.from.append(this.maxLength).append({day:-1}):this.max;return r.to.dayAfter(o)?new ft.VR(r.from,o):r}getDateRangeFiller(n){return`${n}${ft.mH}${n}`}};return e.\u0275fac=function(n){return new(n||e)(i.\u0275\u0275directiveInject(ne.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(i.Injector),i.\u0275\u0275directiveInject(Ka.fL),i.\u0275\u0275directiveInject(Ya.RO),i.\u0275\u0275directiveInject(lr.vk,8),i.\u0275\u0275directiveInject(xe.kI),i.\u0275\u0275directiveInject(xe.pX),i.\u0275\u0275directiveInject(ft.P_),i.\u0275\u0275directiveInject(ft.q_),i.\u0275\u0275directiveInject(lr.zf),i.\u0275\u0275directiveInject(lr.LD,8))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-input-date-range"]],viewQuery:function(n,r){if(1&n&&i.\u0275\u0275viewQuery(vi.yc,5),2&n){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.textfield=o.first)}},hostBindings:function(n,r){1&n&&i.\u0275\u0275listener("click",function(){return r.onClick()})},inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",defaultViewedMonth:"defaultViewedMonth",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength"},features:[i.\u0275\u0275ProvidersFeature(qh),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Zh,decls:9,vars:6,consts:[[1,"hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric","class","textfield",3,"pseudoFocused","pseudoHovered","pseudoPressed","invalid","tuiTextfieldExampleText","nativeId","filler","readOnly","iconContent","disabled","textMask","value","valueChange","hoveredChange","pressedChange",4,"tuiLet"],["mobileIconContent",""],["iconContent",""],["dropdown",""],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"pseudoFocused","pseudoHovered","pseudoPressed","invalid","tuiTextfieldExampleText","nativeId","filler","readOnly","iconContent","disabled","textMask","value","valueChange","hoveredChange","pressedChange"],["automation-id","tui-input-date-range__icon",3,"src","click"],[3,"src"],[3,"defaultViewedMonth","disabledItemHandler","items","min","max","markerHandler","minLength","maxLength","value","valueChange"]],template:function(n,r){if(1&n&&(i.\u0275\u0275projectionDef(ws),i.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),i.\u0275\u0275listener("openChange",function(u){return r.onOpenChange(u)})("tuiActiveZoneChange",function(u){return r.onActiveZone(u)}),i.\u0275\u0275template(1,Jh,3,12,"tui-primitive-textfield",1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275template(3,xf,1,3,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(5,Ku,1,3,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(7,Di,1,9,"ng-template",null,4,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&n){const o=i.\u0275\u0275reference(8);i.\u0275\u0275property("canOpen",r.canOpen)("content",o)("open",r.open&&r.canOpen),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",i.\u0275\u0275pipeBind1(2,4,r.dateFiller$))}},directives:[xs.o1,ef.e,ya.Ls,vi.yc,vi.B1,wa.n,xe.D9,xe._K,Ht.hd,ht.P,yf],pipes:[O.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.icon[_ngcontent-%COMP%]{pointer-events:auto}"]}),(0,ze.gn)([(0,i.ViewChild)(vi.yc)],e.prototype,"textfield",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"disabledItemHandler",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"markerHandler",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"defaultViewedMonth",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"items",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"min",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"max",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"minLength",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"maxLength",void 0),(0,ze.gn)([(0,i.HostListener)("click")],e.prototype,"onClick",null),e=(0,ze.gn)([(0,ze.fM)(0,(0,i.Optional)()),(0,ze.fM)(0,(0,i.Self)()),(0,ze.fM)(0,(0,i.Inject)(ne.NgControl)),(0,ze.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,ze.fM)(2,(0,i.Inject)(i.Injector)),(0,ze.fM)(3,(0,i.Inject)(Ka.fL)),(0,ze.fM)(4,(0,i.Inject)(Ya.RO)),(0,ze.fM)(5,(0,i.Optional)()),(0,ze.fM)(5,(0,i.Inject)(lr.vk)),(0,ze.fM)(6,(0,i.Inject)(xe.kI)),(0,ze.fM)(7,(0,i.Inject)(xe.pX)),(0,ze.fM)(8,(0,i.Inject)(ft.P_)),(0,ze.fM)(9,(0,i.Inject)(ft.q_)),(0,ze.fM)(10,(0,i.Inject)(lr.zf)),(0,ze.fM)(11,(0,i.Optional)()),(0,ze.fM)(11,(0,i.Inject)(lr.LD))],e),e})();var bf;let Ja=bf=class extends Ys.dh{get value(){return this.host.computedValue}onValueChange(t){this.host.onValueChange(t)}process(t){t.inputMode="numeric"}};Ja.\u0275fac=function(){let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(Ja)))(n||Ja)}}(),Ja.\u0275dir=i.\u0275\u0275defineDirective({type:Ja,selectors:[["tui-input-date-range"]],features:[i.\u0275\u0275ProvidersFeature([{provide:xa.S0,useExisting:(0,i.forwardRef)(()=>bf)}]),i.\u0275\u0275InheritDefinitionFeature]});let Ko=(()=>{let e=class{};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[O.ez,Ht.QA,ef.A,ya.WD,Xs.wq,vi.KW,xe.cn,xs.jh,ht.E,Zs,wa.S]]}),e})();var vn=f(56498);function Cf(e,t){if(1&e){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",5),i.\u0275\u0275listener("click",function(){const u=i.\u0275\u0275restoreView(n).$implicit;return i.\u0275\u0275nextContext(2).onMenuClick(u)}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&e){const n=t.$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("size",r.itemSize)("disabled",r.disabledItemHandler(n)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n," ")}}function Yi(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list",3),i.\u0275\u0275template(1,Cf,2,3,"button",4),i.\u0275\u0275elementEnd()),2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",n.filtered)}}const Wn={icon:({$implicit:e})=>"s"===e?"tuiIconTime":"tuiIconTimeLarge",mode:"HH:MM",postfix:"",maxValues:Bl,itemSize:"m"},Ju=new i.InjectionToken("Default parameters for input time component",{factory:()=>Wn});var Ss;let Br=Ss=class extends ys.F9{constructor(t,n,r,o){super(t,n),this.timeTexts$=r,this.options=o,this.disabledItemHandler=wn.Iy,this.items=[],this.itemSize=this.options.itemSize,this.strict=!1,this.mode=this.options.mode,this.postfix=this.options.postfix,this.open=!1}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return(0,Yn.zV)(this.nativeFocusableElement)}get filtered(){return this.filter(this.items,this.mode,this.computedSearch)}get textMaskOptions(){return this.calculateMask(this.mode)}get computedValue(){return this.value?this.value.toString(this.mode):this.nativeValue}get computedSearch(){return this.computedValue.length!==this.mode.length?this.computedValue:""}get innerPseudoFocused(){return!1!==this.pseudoFocused&&(!(!this.open&&!this.computedFocused)||null)}get icon(){return this.options.icon}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(t){!this.nativeFocusableElement||(this.nativeFocusableElement.value=t)}getFiller$(t){return this.timeTexts$.pipe((0,Bu.U)(n=>n[t]))}onClick(){this.open=!this.open}onValueChange(t){this.open=!!this.items.length,this.control&&this.control.updateValueAndValidity({emitEvent:!1});const n=this.getMatch(t);if(void 0!==n)return void this.updateValue(n);if(t.length!==this.mode.length)return void this.updateValue(null);const r=ft.qD.fromString(t);this.updateValue(this.strict?this.findNearestTimeFromItems(r):r)}onFocused(t){if(this.updateFocused(t),t||null!==this.value||""===this.nativeValue||"HH:MM"===this.mode)return;const n=ft.qD.fromString(this.nativeValue);this.updateValue(n),setTimeout(()=>{(this.nativeValue.endsWith(".")||this.nativeValue.endsWith(":"))&&(this.nativeValue=this.nativeValue.slice(0,-1))})}onHovered(t){this.updateHovered(t)}onArrowUp(t){this.items.length||this.processArrow(t,1)}onArrowDown(t){this.items.length||this.processArrow(t,-1)}onMenuClick(t){this.focusInput(),this.updateValue(t)}onOpen(t){this.open=t}writeValue(t){super.writeValue(t),this.nativeValue=t?this.computedValue:""}calculateMask(t){return{mask:wh(t,this.options.maxValues),pipe:af(t,this.options.maxValues),guide:!1}}filter(t,n,r){return t.filter(o=>o.toString(n).includes(r))}findNearestTimeFromItems(t){return this.items.reduce((n,r)=>Math.abs(r.toAbsoluteMilliseconds()-t.toAbsoluteMilliseconds())<Math.abs(n.toAbsoluteMilliseconds()-t.toAbsoluteMilliseconds())?r:n)}getMatch(t){return this.items.find(n=>(0,wn.zy)(n,t))}close(){this.open=!1}processArrow(t,n){const{target:r}=t;if(this.readOnly||!(r instanceof HTMLInputElement))return;const o=r.selectionStart||0;this.shiftTime(this.calculateShift(o,n)),r.setSelectionRange(o,o),t.preventDefault()}calculateShift(t,n){return t<=2?{hours:n}:t<=5?{minutes:n}:t<=8?{seconds:n}:{ms:n}}shiftTime(t){if(null===this.value)return;const n=this.value.shift(t);this.nativeValue=n.toString(this.mode),this.updateValue(n)}focusInput(t=!1){this.nativeFocusableElement&&((0,Yn.NY)(this.nativeFocusableElement,!0,t),this.close())}};Br.\u0275fac=function(t){return new(t||Br)(i.\u0275\u0275directiveInject(ne.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(lr.Yq),i.\u0275\u0275directiveInject(Ju))},Br.\u0275cmp=i.\u0275\u0275defineComponent({type:Br,selectors:[["tui-input-time"]],viewQuery:function(t,n){if(1&t&&i.\u0275\u0275viewQuery(vi.yc,5),2&t){let r;i.\u0275\u0275queryRefresh(r=i.\u0275\u0275loadQuery())&&(n.textfield=r.first)}},hostBindings:function(t,n){1&t&&i.\u0275\u0275listener("click",function(){return n.onClick()})},inputs:{disabledItemHandler:"disabledItemHandler",items:"items",itemSize:"itemSize",strict:"strict",mode:"mode",postfix:"postfix"},features:[i.\u0275\u0275ProvidersFeature([{provide:Ka.KZ,useExisting:(0,i.forwardRef)(()=>Ss)},Ul.yn]),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:6,vars:18,consts:[[1,"wrapper",3,"canOpen","content","open","openChange","focusedChange"],["tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"filler","nativeId","pseudoFocused","pseudoHovered","pseudoPressed","invalid","focusable","disabled","readOnly","textMask","iconContent","value","postfix","valueChange","hoveredChange","keydown.arrowUp","keydown.arrowDown"],["dropdownContent",""],["automation-id","tui-input-time__dropdown"],["tuiOption","","automation-id","tui-input-time__item",3,"size","disabled","click",4,"ngFor","ngForOf"],["tuiOption","","automation-id","tui-input-time__item",3,"size","disabled","click"]],template:function(t,n){if(1&t&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),i.\u0275\u0275listener("openChange",function(o){return n.onOpen(o)})("focusedChange",function(o){return n.onFocused(o)}),i.\u0275\u0275elementStart(1,"tui-primitive-textfield",1),i.\u0275\u0275listener("valueChange",function(o){return n.onValueChange(o)})("hoveredChange",function(o){return n.onHovered(o)})("keydown.arrowUp",function(o){return n.onArrowUp(o)})("keydown.arrowDown",function(o){return n.onArrowDown(o)}),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275projection(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(4,Yi,2,1,"ng-template",null,2,i.\u0275\u0275templateRefExtractor)),2&t){const r=i.\u0275\u0275reference(5);i.\u0275\u0275property("canOpen",n.interactive&&!!n.filtered.length)("content",r)("open",n.interactive&&n.open&&!!n.filtered.length),i.\u0275\u0275advance(1),i.\u0275\u0275property("filler",i.\u0275\u0275pipeBind1(2,16,n.getFiller$(n.mode)))("nativeId",n.nativeId)("pseudoFocused",n.innerPseudoFocused)("pseudoHovered",n.pseudoHovered)("pseudoPressed",n.pseudoPressed)("invalid",n.computedInvalid)("focusable",n.focusable)("disabled",n.disabled)("readOnly",n.readOnly)("textMask",n.textMaskOptions)("iconContent",n.icon)("value",n.computedValue)("postfix",n.postfix)}},directives:[xs.o1,vi.yc,vi.B1,wa.n,xe.D9,Ht.hd,ii.qi,O.sg,ii.vK],pipes:[O.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.wrapper[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}"],changeDetection:0}),Br.ctorParameters=()=>[{type:ne.NgControl,decorators:[{type:i.Optional},{type:i.Self},{type:i.Inject,args:[ne.NgControl]}]},{type:i.ChangeDetectorRef,decorators:[{type:i.Inject,args:[i.ChangeDetectorRef]}]},{type:vn.y,decorators:[{type:i.Inject,args:[lr.Yq]}]},{type:void 0,decorators:[{type:i.Inject,args:[Ju]}]}],(0,ze.gn)([(0,i.ViewChild)(vi.yc)],Br.prototype,"textfield",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],Br.prototype,"disabledItemHandler",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],Br.prototype,"items",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],Br.prototype,"itemSize",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],Br.prototype,"strict",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],Br.prototype,"mode",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],Br.prototype,"postfix",void 0),(0,ze.gn)([be.UM],Br.prototype,"getFiller$",null),(0,ze.gn)([(0,i.HostListener)("click")],Br.prototype,"onClick",null),(0,ze.gn)([be.UM],Br.prototype,"calculateMask",null),(0,ze.gn)([be.UM],Br.prototype,"filter",null),Br=Ss=(0,ze.gn)([(0,ze.fM)(0,(0,i.Optional)()),(0,ze.fM)(0,(0,i.Self)()),(0,ze.fM)(0,(0,i.Inject)(ne.NgControl)),(0,ze.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,ze.fM)(2,(0,i.Inject)(lr.Yq)),(0,ze.fM)(3,(0,i.Inject)(Ju))],Br);let tp=(()=>{let e=class{};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[O.ez,Ht.QA,ii.pc,xs.jh,vi.KW,wa.S,xe.cn]]}),e})();function np(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"button",24),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const n=t.$implicit;i.\u0275\u0275property("value",n[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n[1]," ")}}function rp(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,np,2,2,"button",23),i.\u0275\u0275elementEnd()),2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",n.localEventTypes)}}function ip(e,t){1&e&&(i.\u0275\u0275elementStart(0,"tui-notification",25),i.\u0275\u0275text(1," Invalid date range! Please check your start and end times! "),i.\u0275\u0275elementEnd())}const op=function(e){return["/course",e]};let wf=(()=>{class e{constructor(n,r,o,u){this.route=n,this.courseEventService=r,this.router=o,this.notificationsService=u,this.eventId=null,this.timeOptions=function yh(e=0,t=ft.Ix,n=[0,30]){const r=[];for(let o=e;o<t;o++)for(let u=0;u<n.length;u++){const c=new ft.qD(o,n[u]);r.push(c)}return r}()}ngOnInit(){this.formData=Fl.createForm(),this.courseEventService.getEventTypes().subscribe(n=>this.localEventTypes=n),this.courseId=+this.route.snapshot.paramMap.get("courseId"),this.route.snapshot.paramMap.get("eventId")&&(this.eventId=+this.route.snapshot.paramMap.get("eventId"),this.courseEventService.getCourseEvent(this.eventId).subscribe(n=>{this.formData=Fl.createFormWithData(n)}))}get form(){return this.formData.controls}submitEvent(n){const r=Fl.formatFormData(n,this.courseId,this.eventId);this.eventId?this.courseEventService.updateCourseEvent(r).subscribe(()=>{this.notificationsService.show("The Event has been updated Successfully.",{status:"success"}).subscribe(),this.router.navigate(["course",this.courseId]).then()},o=>{this.notificationsService.show(o,{status:"error"}).subscribe()}):this.courseEventService.addCourseEvent(r).subscribe(()=>{this.notificationsService.show("The Event has been added Successfully.",{status:"success"}),this.router.navigate(["course",this.courseId]).then()},o=>{this.notificationsService.show(o,{status:"error"}).subscribe()})}}return e.\u0275fac=function(n){return new(n||e)(i.\u0275\u0275directiveInject(te.gz),i.\u0275\u0275directiveInject(ma),i.\u0275\u0275directiveInject(te.F0),i.\u0275\u0275directiveInject(At.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-event-create"]],decls:36,vars:8,consts:[[1,"tui-container","tui-container_adaptive"],[3,"formGroup","ngSubmit"],[1,"tui-form__header"],[1,"tui-form__row"],["formControlName","name","aria-label","Event Name"],["formControlName","name"],["formControlName","type","aria-label","Event Type"],[4,"tuiDataList"],["formControlName","type"],["formControlName","countForTokens","aria-label","Counts for Tokens"],["formControlName","countForTokens"],["formControlName","startEndDatePicker","aria-label","Start and End Date"],["formControlName","startEndDatePicker"],[1,"tui-form__row","tui-form__row_multi-fields"],[1,"tui-form__multi-field"],["formControlName","startTimePicker","aria-label","Start Time",3,"items"],["formControlName","startTimePicker"],["formControlName","endTimePicker","aria-label","End Time",3,"items"],["formControlName","endTimePicker"],["status","error","class","tui-space_top-4",4,"ngIf"],[1,"tui-form__buttons"],["tuiButton","","appearance","primary","size","m","type","submit","aria-label","Submit",1,"tui-form__button",3,"disabled"],["tuiButton","","appearance","secondary","size","m","aria-label","Back",1,"tui-form__button",3,"routerLink"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["status","error",1,"tui-space_top-4"]],template:function(n,r){1&n&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"form",1),i.\u0275\u0275listener("ngSubmit",function(){return r.submitEvent(r.formData)}),i.\u0275\u0275elementStart(2,"h2",2),i.\u0275\u0275text(3,"Create New Event"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",3),i.\u0275\u0275elementStart(5,"tui-input",4),i.\u0275\u0275text(6,"Event Name"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(7,"tui-field-error",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"div",3),i.\u0275\u0275elementStart(9,"tui-select",6),i.\u0275\u0275text(10," Event Type "),i.\u0275\u0275template(11,rp,2,1,"tui-data-list",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(12,"tui-field-error",8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"div",3),i.\u0275\u0275elementStart(14,"tui-checkbox-labeled",9),i.\u0275\u0275text(15,"Counts for tokens "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(16,"tui-field-error",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"div",3),i.\u0275\u0275elementStart(18,"tui-input-date-range",11),i.\u0275\u0275text(19," Start and end date "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(20,"tui-field-error",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(21,"div",13),i.\u0275\u0275elementStart(22,"div",14),i.\u0275\u0275elementStart(23,"tui-input-time",15),i.\u0275\u0275text(24," Start time "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(25,"tui-field-error",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(26,"div",14),i.\u0275\u0275elementStart(27,"tui-input-time",17),i.\u0275\u0275text(28," End time "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(29,"tui-field-error",18),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(30,ip,2,0,"tui-notification",19),i.\u0275\u0275elementStart(31,"div",20),i.\u0275\u0275elementStart(32,"button",21),i.\u0275\u0275text(33," Submit "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(34,"a",22),i.\u0275\u0275text(35,"Back"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&n&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("formGroup",r.formData),i.\u0275\u0275advance(22),i.\u0275\u0275property("items",r.timeOptions),i.\u0275\u0275advance(4),i.\u0275\u0275property("items",r.timeOptions),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",null==r.formData.errors?null:r.formData.errors.forbiddenDateRange),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",r.formData.invalid),i.\u0275\u0275advance(2),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(6,op,r.courseId)))},directives:[ne.\u0275NgNoValidate,ne.NgControlStatusGroup,ne.FormGroupDirective,he.K3,he.wU,ne.NgControlStatus,ne.FormControlName,Nt.y,$s.uJ,$s.OI,ii.gX,ii.qi,O.sg,ii.vK,qc.p,Xl,Ja,Br,O.O5,Xt.Ls,$t.v0,te.yS],styles:[""]}),e})();var Kl=f(15202),ap=f(19167);let sp=(()=>{class e{constructor(n,r){this.http=n,this.apiService=r}getUserStat(n){const r=this.apiService.getURL("user-stats",n);return this.http.get(r).pipe((0,$i.K)(this.apiService.handleError("Error occurred while getting user stats")))}getUserDifficultyStats(n){const r=this.apiService.getURL("user-stats","difficulty",n);return this.http.get(r).pipe((0,$i.K)(this.apiService.handleError("Error occurred while getting user stats")))}}return e.\u0275fac=function(n){return new(n||e)(i.\u0275\u0275inject(Vu.eN),i.\u0275\u0275inject(kl.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var up=f(74528);function lp(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"button",11),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const n=t.$implicit;i.\u0275\u0275property("value",n[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n[1]," ")}}function cp(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,lp,2,2,"button",10),i.\u0275\u0275elementEnd()),2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",n.difficulties)}}function Jl(e,t){if(1&e&&i.\u0275\u0275element(0,"app-problem-view",12),2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275property("questionId",n.currentQuestionId)}}function fp(e,t){1&e&&(i.\u0275\u0275elementStart(0,"h4",13),i.\u0275\u0275text(1,"There are no available practice questions for this category/difficulty."),i.\u0275\u0275elementEnd())}let Zl=(()=>{class e{constructor(n,r,o,u,c,v){this.route=n,this.uqjService=r,this.difficultyService=o,this.courseService=u,this.categoryService=c,this.userStatsService=v,this.cursor=0,this.courseId=+this.route.snapshot.paramMap.get("courseId"),this.categoryId=+this.route.snapshot.paramMap.get("categoryId")}ngOnInit(){this.difficulty=null;const n=this.userStatsService.getUserDifficultyStats(this.categoryId),r=this.categoryService.getCategory(this.categoryId),o=this.uqjService.getUQJs({filters:{category:this.categoryId,difficulty:this.difficulty,is_solved:!1,is_practice:!0}}),u=this.difficultyService.getDifficulties(),c=this.courseService.getUserStats(this.courseId,this.categoryId);(0,Fu.D)([o,u,r,n,c]).subscribe(v=>{this.uqjs=Wt.shuffle(v[0].results),this.difficulties=v[1],this.category=v[2],this.userDifficultyStats=v[3],this.categoryUserSuccessRate=v[4].success_rate,this.updateCurrentQuestion(),this.calculateUserSuccessRate()})}nextQuestion(){this.cursor=(this.cursor+1)%this.uqjs.length,this.updateCurrentQuestion()}prevQuestion(){this.cursor=(this.cursor+this.uqjs.length-1)%this.uqjs.length,this.updateCurrentQuestion()}updateCurrentQuestion(){var n,r,o;this.currentQuestionId=null===(o=null===(r=null===(n=this.uqjs)||void 0===n?void 0:n[this.cursor])||void 0===r?void 0:r.question)||void 0===o?void 0:o.id}changeDifficulty(n){this.difficulty=n,this.uqjService.getUQJs({filters:{category:this.categoryId,difficulty:this.difficulty,is_solved:!1,is_practice:!0}}).subscribe(r=>{this.uqjs=Wt.shuffle(r.results),this.updateCurrentQuestion(),this.calculateUserSuccessRate()})}calculateUserSuccessRate(){const n=this.userDifficultyStats.find(r=>r.difficulty===this.difficulty);this.userSuccessRate=0!=this.userDifficultyStats.length?this.difficulty?n?n.avgSuccess:0:this.categoryUserSuccessRate:0}}return e.\u0275fac=function(n){return new(n||e)(i.\u0275\u0275directiveInject(te.gz),i.\u0275\u0275directiveInject(Vc.O),i.\u0275\u0275directiveInject(ap.G),i.\u0275\u0275directiveInject(ve.N),i.\u0275\u0275directiveInject(Fc.H),i.\u0275\u0275directiveInject(sp))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-practice-problem"]],decls:20,vars:12,consts:[[1,"tui-text_h3","tui-space_left-4","tui-space_top-4"],[1,"tui-table","tui-space_left-4","tui-space_bottom-4"],[1,"tui-table__tr"],[1,"tui-table__td"],[1,"tui-space_left-4",3,"tuiTextfieldCleaner","valueContent","ngModel","ngModelChange"],[4,"tuiDataList"],["tuiButton","","size","m","aria-label","Next",1,"tui-form__button","tui-space_left-4","tui-space_top-4","tui-space_bottom-4",3,"click"],["tuiButton","","size","m","aria-label","Next",1,"tui-form__button","tui-space_top-4","tui-space_bottom-4",3,"click"],[3,"questionId",4,"ngIf","ngIfElse"],["noProblems",""],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],[3,"questionId"],[1,"tui-text_h4","tui-space_left-4","tui-space_top-4"]],template:function(n,r){if(1&n&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(2,"table",1),i.\u0275\u0275elementStart(3,"tbody"),i.\u0275\u0275elementStart(4,"tr",2),i.\u0275\u0275elementStart(5,"td",3),i.\u0275\u0275text(6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"td",3),i.\u0275\u0275text(8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"tui-select",4),i.\u0275\u0275listener("ngModelChange",function(u){return r.changeDifficulty(u)}),i.\u0275\u0275pipe(10,"stringifyTuiDataList"),i.\u0275\u0275text(11," Choose a level of difficulty "),i.\u0275\u0275template(12,cp,2,1,"tui-data-list",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"button",6),i.\u0275\u0275listener("click",function(){return r.prevQuestion()}),i.\u0275\u0275text(14," Return to Previous Question\n"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(15,"button",7),i.\u0275\u0275listener("click",function(){return r.nextQuestion()}),i.\u0275\u0275text(16," Skip to Next Question\n"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(17,Jl,1,1,"app-problem-view",8),i.\u0275\u0275template(18,fp,2,0,"ng-template",null,9,i.\u0275\u0275templateRefExtractor)),2&n){const o=i.\u0275\u0275reference(19);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(null==r.category?null:r.category.name),i.\u0275\u0275advance(5),i.\u0275\u0275textInterpolate1("Your Success Rate: ",(100*r.userSuccessRate).toFixed(2)+"%"||0,""),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1("Average Success Rate: ",(100*(null==r.category?null:r.category.average_success)).toFixed(2)+"%"||0,""),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiTextfieldCleaner",!0)("valueContent",r.difficulties?i.\u0275\u0275pipeBind3(10,8,r.difficulties,0,1):"")("ngModel",r.difficulty),i.\u0275\u0275advance(8),i.\u0275\u0275property("ngIf",r.currentQuestionId)("ngIfElse",o)}},directives:[$s.uJ,$s.OI,xe.be,ne.NgControlStatus,ne.NgModel,ii.gX,ii.qi,O.sg,ii.vK,$t.v0,O.O5,Kl.z],pipes:[up.J],styles:[""]}),e})();const dp=[{path:"",component:lt,canActivate:[X.a]},{path:":courseId",component:vh,canActivate:[X.a]},{path:":courseId/register",component:ai,canActivate:[X.a]},{path:":courseId/new-event",component:wf,canActivate:[X.a]},{path:":courseId/new-event/:eventId",component:wf,canActivate:[X.a]},{path:":courseId/event/:eventId",component:Ws,canActivate:[X.a]},{path:":courseId/problem/:id",component:Kl.z,canActivate:[X.a]},{path:":courseId/event/:eventId/problem/:id",component:Kl.z,canActivate:[X.a]},{path:":courseId/practice/category/:categoryId",component:Zl,canActivate:[X.a]}];let hp=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[te.Bz.forChild(dp)],te.Bz]}),e})();var pp=f(16995);function Yr(e,t){if(1&e){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-textfield",6),i.\u0275\u0275listener("valueChange",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onValueChange(o)})("hoveredChange",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onHovered(o)})("focusedChange",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onFocused(o)}),i.\u0275\u0275projection(1),i.\u0275\u0275projection(2,1,["ngProjectAs","input",5,["input"]]),i.\u0275\u0275elementEnd()}if(2&e){const n=t.tuiLet,r=i.\u0275\u0275nextContext(),o=i.\u0275\u0275reference(4),u=i.\u0275\u0275reference(6);i.\u0275\u0275property("pseudoFocused",r.pseudoFocused)("pseudoHovered",r.pseudoHovered)("invalid",r.computedInvalid)("filler",r.getComputedFiller(n))("nativeId",r.nativeId)("readOnly",r.readOnly)("focusable",r.computedFocusable)("iconContent",r.computedMobile?o:u)("disabled",r.computedDisabled)("textMask",r.computedMask)("value",r.computedValue)}}function Ii(e,t){if(1&e){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-svg",7),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onMobileClick()}),i.\u0275\u0275elementEnd()}if(2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!n.computedDisabled),i.\u0275\u0275property("src",n.calendarIcon)}}function gp(e,t){if(1&e&&i.\u0275\u0275element(0,"tui-svg",8),2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!n.computedDisabled),i.\u0275\u0275property("src",n.calendarIcon)}}function vp(e,t){if(1&e){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",11),i.\u0275\u0275elementStart(1,"button",12),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(n);const o=i.\u0275\u0275nextContext(2);return o.onDayClick(o.items[0].day)}),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",n.items[0]," ")}}function mp(e,t){if(1&e){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-calendar",9),i.\u0275\u0275listener("dayClick",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onDayClick(o)})("monthChange",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onMonthChange(o)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(1,vp,3,1,"div",10)}if(2&e){const n=i.\u0275\u0275nextContext();i.\u0275\u0275property("min",n.min)("max",n.max)("markerHandler",n.markerHandler)("disabledItemHandler",n.disabledItemHandler)("month",n.computedActiveYearMonth)("value",n.value),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",1===n.items.length)}}const Sf=["*",[["input"]]],yp=["*","input"],bp=[{provide:Ka.KZ,useExisting:(0,i.forwardRef)(()=>Ql)},{provide:lr.cU,deps:[[new i.Optional,new i.Self,ne.NgControl],[new i.Optional,lr.HF]],useFactory:(e,t)=>Qc(e,t)},{provide:ys.M$,useExisting:(0,i.forwardRef)(()=>Ql)},Ul.Sm];let Ql=(()=>{let e=class extends ys.F9{constructor(n,r,o,u,c,v,m,T,I,b,G){super(n,r,G),this.injector=o,this.isMobile=u,this.dialogService=c,this.mobileCalendar=v,this.textfieldSize=m,this.dateFormat=T,this.dateSeparator=I,this.dateTexts$=b,this.valueTransformer=G,this.month=null,this.textMaskOptions={mask:uf(this.dateFormat,this.dateSeparator),pipe:of(this),guide:!1},this.min=ft.K1,this.max=ft.Oy,this.disabledItemHandler=wn.Iy,this.markerHandler=Gn.zE,this.items=[],this.defaultActiveYearMonth=ft.ql.currentLocal(),this.open=!1,this.filler$=this.dateTexts$.pipe((0,Bu.U)(ee=>(0,ft.Yl)(ee[this.dateFormat],this.dateSeparator)))}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return!!this.textfield&&this.textfield.focused}get computedMobile(){return this.isMobile&&!!this.mobileCalendar}get calendarIcon(){return(0,Vl.Bb)(this.textfieldSize.size)?"tuiIconCalendarLarge":"tuiIconCalendar"}get computedValue(){const{value:n,nativeValue:r,activeItem:o}=this;return o?String(o):n?n.toString(this.dateFormat,this.dateSeparator):r}get computedActiveYearMonth(){return this.items[0]&&this.value&&this.value.daySame(this.items[0].day)?this.items[0].displayDay:this.month||this.value||this.defaultActiveYearMonth}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(n){!this.nativeFocusableElement||(this.nativeFocusableElement.value=n)}get canOpen(){return this.interactive&&!this.computedMobile}get computedMask(){return this.activeItem?tf:this.textMaskOptions}get activeItem(){const{value:n}=this;return n&&this.items.find(r=>r.day.daySame(n))||null}onClick(){this.isMobile||(this.open=!this.open)}getComputedFiller(n){return this.activeItem?"":n}onMobileClick(){this.mobileCalendar?this.dialogService.open(new Xs.Al(this.mobileCalendar,this.injector),{size:"fullscreen",closeable:!1,data:{single:!0,min:this.min,max:this.max,disabledItemHandler:this.disabledItemHandler}}).pipe((0,zu.R)(this.destroy$)).subscribe(n=>{this.updateValue(n)}):this.open=!this.open}onValueChange(n){this.control&&this.control.updateValueAndValidity({emitEvent:!1}),n||this.onOpenChange(!0),this.updateValue(n.length!==ft.ek?null:ft.TU.normalizeParse(n,this.dateFormat))}onDayClick(n){this.updateValue(n),this.open=!1}onHovered(n){this.updateHovered(n)}onMonthChange(n){this.month=n}onOpenChange(n){this.open=n}onFocused(n){this.updateFocused(n)}setDisabledState(){super.setDisabledState(),this.open=!1}writeValue(n){super.writeValue(n),this.nativeValue=n?this.computedValue:""}valueIdenticalComparator(n,r){return(0,nr.Hm)(n,r,(o,u)=>o.daySame(u))}};return e.\u0275fac=function(n){return new(n||e)(i.\u0275\u0275directiveInject(ne.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(i.Injector),i.\u0275\u0275directiveInject(Ka.fL),i.\u0275\u0275directiveInject(Ya.RO),i.\u0275\u0275directiveInject(lr.vk,8),i.\u0275\u0275directiveInject(xe.kI),i.\u0275\u0275directiveInject(ft.P_),i.\u0275\u0275directiveInject(ft.q_),i.\u0275\u0275directiveInject(lr.zf),i.\u0275\u0275directiveInject(lr.HF,8))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-input-date"]],viewQuery:function(n,r){if(1&n&&i.\u0275\u0275viewQuery(vi.yc,5),2&n){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.textfield=o.first)}},hostBindings:function(n,r){1&n&&i.\u0275\u0275listener("click",function(){return r.onClick()})},inputs:{min:"min",max:"max",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",defaultActiveYearMonth:"defaultActiveYearMonth"},features:[i.\u0275\u0275ProvidersFeature(bp),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:yp,decls:9,vars:6,consts:[[1,"hosted",3,"canOpen","content","open","openChange"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric","class","textfield",3,"pseudoFocused","pseudoHovered","invalid","filler","nativeId","readOnly","focusable","iconContent","disabled","textMask","value","valueChange","hoveredChange","focusedChange",4,"tuiLet"],["mobileIconContent",""],["iconContent",""],["polymorpheus",""],["dropdown","polymorpheus"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"pseudoFocused","pseudoHovered","invalid","filler","nativeId","readOnly","focusable","iconContent","disabled","textMask","value","valueChange","hoveredChange","focusedChange"],["automation-id","tui-input-date-range__icon",3,"src","click"],[3,"src"],["tuiPreventDefault","mousedown","automation-id","tui-input-date__calendar",3,"min","max","markerHandler","disabledItemHandler","month","value","dayClick","monthChange"],["tuiPreventDefault","mousedown","class","button",4,"ngIf"],["tuiPreventDefault","mousedown",1,"button"],["tuiLink","","type","button",3,"click"]],template:function(n,r){if(1&n&&(i.\u0275\u0275projectionDef(Sf),i.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),i.\u0275\u0275listener("openChange",function(u){return r.onOpenChange(u)}),i.\u0275\u0275template(1,Yr,3,11,"tui-primitive-textfield",1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275template(3,Ii,1,3,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(5,gp,1,3,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(7,mp,2,7,"ng-template",4,5,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&n){const o=i.\u0275\u0275reference(8);i.\u0275\u0275property("canOpen",r.canOpen)("content",o)("open",r.open&&r.canOpen),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",i.\u0275\u0275pipeBind1(2,4,r.filler$))}},directives:[xs.o1,ya.Ls,vi.yc,vi.B1,wa.n,xe.D9,Ht.hd,ht.P,Xs.GL,po,Cs.A,O.O5,ir.V],pipes:[O.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.icon[_ngcontent-%COMP%]{pointer-events:auto}.button[_ngcontent-%COMP%]{display:flex;height:2.75rem;justify-content:center;box-shadow:inset 0 1px var(--tui-base-03)}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;text-align:center}"],changeDetection:0}),(0,ze.gn)([(0,i.ViewChild)(vi.yc)],e.prototype,"textfield",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"min",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"max",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"disabledItemHandler",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"markerHandler",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"items",void 0),(0,ze.gn)([(0,i.Input)(),(0,be.TH)()],e.prototype,"defaultActiveYearMonth",void 0),(0,ze.gn)([(0,i.HostListener)("click")],e.prototype,"onClick",null),e=(0,ze.gn)([(0,ze.fM)(0,(0,i.Optional)()),(0,ze.fM)(0,(0,i.Self)()),(0,ze.fM)(0,(0,i.Inject)(ne.NgControl)),(0,ze.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,ze.fM)(2,(0,i.Inject)(i.Injector)),(0,ze.fM)(3,(0,i.Inject)(Ka.fL)),(0,ze.fM)(4,(0,i.Inject)(Ya.RO)),(0,ze.fM)(5,(0,i.Optional)()),(0,ze.fM)(5,(0,i.Inject)(lr.vk)),(0,ze.fM)(6,(0,i.Inject)(xe.kI)),(0,ze.fM)(7,(0,i.Inject)(ft.P_)),(0,ze.fM)(8,(0,i.Inject)(ft.q_)),(0,ze.fM)(9,(0,i.Inject)(lr.zf)),(0,ze.fM)(10,(0,i.Optional)()),(0,ze.fM)(10,(0,i.Inject)(lr.HF))],e),e})();var Tf;let Qs=Tf=class extends Ys.dh{get value(){return this.host.computedValue}onValueChange(t){this.host.onValueChange(t)}process(t){t.inputMode="numeric"}};Qs.\u0275fac=function(){let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(Qs)))(n||Qs)}}(),Qs.\u0275dir=i.\u0275\u0275defineDirective({type:Qs,selectors:[["tui-input-date"]],features:[i.\u0275\u0275ProvidersFeature([{provide:xa.S0,useExisting:(0,i.forwardRef)(()=>Tf)}]),i.\u0275\u0275InheritDefinitionFeature]});let Cp=(()=>{let e=class{};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[O.ez,Ht.QA,Xs.wq,Cs.Z,_s,ht.E,ir.j,xs.jh,vi.KW,wa.S,ya.WD,xe.cn]]}),e})();var Ef=f(96560),Pf=f(22079),_p=f(38333),wp=f(91730),Sp=f(76112),Tp=f(34972);let Ts=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({providers:[ma,ve.N,Rl],imports:[[O.ez,wp.J,hp,ne.FormsModule,pp._l,Sp.D,Tp.ProblemsModule,ne.ReactiveFormsModule,Ht.QA,Xc.j,$t.fN,_s,qc.s,ii.pc,Ya.up,Ef.S,Nt.C,Kc.p,Nl.$H,Cp,Ko,he.Qf,tp,ms.y,ir.j,Pf.dS,Xt.Hi,$s.Jy,re,ht.E,wr.jz,sr.$$,zs.d3,xe.cn,_p.qE.forRoot()]]}),e})()},71066:(E,W,f)=>{var p,g,S;S="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global,p=[f(29610),f(58259),W],void 0!==(g=function(k,M,F){S.Backbone=function(w,S,x,A){var k=w.Backbone,M=Array.prototype.slice;S.VERSION="1.4.0",S.$=A,S.noConflict=function(){return w.Backbone=k,this},S.emulateHTTP=!1,S.emulateJSON=!1;var O,F=S.Events={},H=/\s+/,X=function(B,z,re,Ce,We){var bt,Ke=0;if(re&&"object"==typeof re)for((void 0!==Ce&&"context"in We&&void 0===We.context&&(We.context=Ce),bt=x.keys(re));Ke<bt.length;Ke++)z=X(B,z,bt[Ke],re[bt[Ke]],We);else if(re&&H.test(re))for(bt=re.split(H);Ke<bt.length;Ke++)z=B(z,bt[Ke],Ce,We);else z=B(z,re,Ce,We);return z};F.on=function(B,z,re){return this._events=X(te,this._events||{},B,z,{context:re,ctx:this,listening:O}),O&&((this._listeners||(this._listeners={}))[O.id]=O,O.interop=!1),this},F.listenTo=function(B,z,re){if(!B)return this;var Ce=B._listenId||(B._listenId=x.uniqueId("l")),We=this._listeningTo||(this._listeningTo={}),Ke=O=We[Ce];Ke||(this._listenId||(this._listenId=x.uniqueId("l")),Ke=O=We[Ce]=new ne(this,B));var bt=fe(B,z,re,this);if(O=void 0,bt)throw bt;return Ke.interop&&Ke.on(z,re),this};var te=function(B,z,re,Ce){if(re){var We=B[z]||(B[z]=[]),Ke=Ce.context,bt=Ce.ctx,Nt=Ce.listening;Nt&&Nt.count++,We.push({callback:re,context:Ke,ctx:Ke||bt,listening:Nt})}return B},fe=function(B,z,re,Ce){try{B.on(z,re,Ce)}catch(We){return We}};F.off=function(B,z,re){return this._events?(this._events=X(i,this._events,B,z,{context:re,listeners:this._listeners}),this):this},F.stopListening=function(B,z,re){var Ce=this._listeningTo;if(!Ce)return this;for(var We=B?[B._listenId]:x.keys(Ce),Ke=0;Ke<We.length;Ke++){var bt=Ce[We[Ke]];if(!bt)break;bt.obj.off(z,re,this),bt.interop&&bt.off(z,re)}return x.isEmpty(Ce)&&(this._listeningTo=void 0),this};var i=function(B,z,re,Ce){if(B){var Nt,We=Ce.context,Ke=Ce.listeners,bt=0;if(!z&&!We&&!re){for(Nt=x.keys(Ke);bt<Nt.length;bt++)Ke[Nt[bt]].cleanup();return}for(Nt=z?[z]:x.keys(B);bt<Nt.length;bt++){var Ht=B[z=Nt[bt]];if(!Ht)break;for(var mn=[],On=0;On<Ht.length;On++){var gn=Ht[On];if(re&&re!==gn.callback&&re!==gn.callback._callback||We&&We!==gn.context)mn.push(gn);else{var Qn=gn.listening;Qn&&Qn.off(z,re)}}mn.length?B[z]=mn:delete B[z]}return B}};F.once=function(B,z,re){var Ce=X(se,{},B,z,this.off.bind(this));return"string"==typeof B&&null==re&&(z=void 0),this.on(Ce,z,re)},F.listenToOnce=function(B,z,re){var Ce=X(se,{},z,re,this.stopListening.bind(this,B));return this.listenTo(B,Ce)};var se=function(B,z,re,Ce){if(re){var We=B[z]=x.once(function(){Ce(z,We),re.apply(this,arguments)});We._callback=re}return B};F.trigger=function(B){if(!this._events)return this;for(var z=Math.max(0,arguments.length-1),re=Array(z),Ce=0;Ce<z;Ce++)re[Ce]=arguments[Ce+1];return X(ve,this._events,B,void 0,re),this};var ve=function(B,z,re,Ce){if(B){var We=B[z],Ke=B.all;We&&Ke&&(Ke=Ke.slice()),We&&he(We,Ce),Ke&&he(Ke,[z].concat(Ce))}return B},he=function(B,z){var re,Ce=-1,We=B.length,Ke=z[0],bt=z[1],Nt=z[2];switch(z.length){case 0:for(;++Ce<We;)(re=B[Ce]).callback.call(re.ctx);return;case 1:for(;++Ce<We;)(re=B[Ce]).callback.call(re.ctx,Ke);return;case 2:for(;++Ce<We;)(re=B[Ce]).callback.call(re.ctx,Ke,bt);return;case 3:for(;++Ce<We;)(re=B[Ce]).callback.call(re.ctx,Ke,bt,Nt);return;default:for(;++Ce<We;)(re=B[Ce]).callback.apply(re.ctx,z);return}},ne=function(B,z){this.id=B._listenId,this.listener=B,this.obj=z,this.interop=!0,this.count=0,this._events=void 0};ne.prototype.on=F.on,ne.prototype.off=function(B,z){var re;this.interop?(this._events=X(i,this._events,B,z,{context:void 0,listeners:void 0}),re=!this._events):(this.count--,re=0===this.count),re&&this.cleanup()},ne.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},F.bind=F.on,F.unbind=F.off,x.extend(S,F);var xe=S.Model=function(B,z){var re=B||{};z||(z={}),this.preinitialize.apply(this,arguments),this.cid=x.uniqueId(this.cidPrefix),this.attributes={},z.collection&&(this.collection=z.collection),z.parse&&(re=this.parse(re,z)||{});var Ce=x.result(this,"defaults");re=x.defaults(x.extend({},Ce,re),Ce),this.set(re,z),this.changed={},this.initialize.apply(this,arguments)};x.extend(xe.prototype,F,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(B){return x.clone(this.attributes)},sync:function(){return S.sync.apply(this,arguments)},get:function(B){return this.attributes[B]},escape:function(B){return x.escape(this.get(B))},has:function(B){return null!=this.get(B)},matches:function(B){return!!x.iteratee(B,this)(this.attributes)},set:function(B,z,re){if(null==B)return this;var Ce;if("object"==typeof B?(Ce=B,re=z):(Ce={})[B]=z,re||(re={}),!this._validate(Ce,re))return!1;var We=re.unset,Ke=re.silent,bt=[],Nt=this._changing;this._changing=!0,Nt||(this._previousAttributes=x.clone(this.attributes),this.changed={});var Ht=this.attributes,mn=this.changed,On=this._previousAttributes;for(var gn in Ce)x.isEqual(Ht[gn],z=Ce[gn])||bt.push(gn),x.isEqual(On[gn],z)?delete mn[gn]:mn[gn]=z,We?delete Ht[gn]:Ht[gn]=z;if(this.idAttribute in Ce&&(this.id=this.get(this.idAttribute)),!Ke){bt.length&&(this._pending=re);for(var Qn=0;Qn<bt.length;Qn++)this.trigger("change:"+bt[Qn],this,Ht[bt[Qn]],re)}if(Nt)return this;if(!Ke)for(;this._pending;)re=this._pending,this._pending=!1,this.trigger("change",this,re);return this._pending=!1,this._changing=!1,this},unset:function(B,z){return this.set(B,void 0,x.extend({},z,{unset:!0}))},clear:function(B){var z={};for(var re in this.attributes)z[re]=void 0;return this.set(z,x.extend({},B,{unset:!0}))},hasChanged:function(B){return null==B?!x.isEmpty(this.changed):x.has(this.changed,B)},changedAttributes:function(B){if(!B)return!!this.hasChanged()&&x.clone(this.changed);var Ce,z=this._changing?this._previousAttributes:this.attributes,re={};for(var We in B){var Ke=B[We];x.isEqual(z[We],Ke)||(re[We]=Ke,Ce=!0)}return!!Ce&&re},previous:function(B){return null!=B&&this._previousAttributes?this._previousAttributes[B]:null},previousAttributes:function(){return x.clone(this._previousAttributes)},fetch:function(B){B=x.extend({parse:!0},B);var z=this,re=B.success;return B.success=function(Ce){var We=B.parse?z.parse(Ce,B):Ce;if(!z.set(We,B))return!1;re&&re.call(B.context,z,Ce,B),z.trigger("sync",z,Ce,B)},Kt(this,B),this.sync("read",this,B)},save:function(B,z,re){var Ce;null==B||"object"==typeof B?(Ce=B,re=z):(Ce={})[B]=z;var We=(re=x.extend({validate:!0,parse:!0},re)).wait;if(Ce&&!We){if(!this.set(Ce,re))return!1}else if(!this._validate(Ce,re))return!1;var Ke=this,bt=re.success,Nt=this.attributes;re.success=function(On){Ke.attributes=Nt;var gn=re.parse?Ke.parse(On,re):On;if(We&&(gn=x.extend({},Ce,gn)),gn&&!Ke.set(gn,re))return!1;bt&&bt.call(re.context,Ke,On,re),Ke.trigger("sync",Ke,On,re)},Kt(this,re),Ce&&We&&(this.attributes=x.extend({},Nt,Ce));var Ht=this.isNew()?"create":re.patch?"patch":"update";"patch"===Ht&&!re.attrs&&(re.attrs=Ce);var mn=this.sync(Ht,this,re);return this.attributes=Nt,mn},destroy:function(B){B=B?x.clone(B):{};var z=this,re=B.success,Ce=B.wait,We=function(){z.stopListening(),z.trigger("destroy",z,z.collection,B)};B.success=function(bt){Ce&&We(),re&&re.call(B.context,z,bt,B),z.isNew()||z.trigger("sync",z,bt,B)};var Ke=!1;return this.isNew()?x.defer(B.success):(Kt(this,B),Ke=this.sync("delete",this,B)),Ce||We(),Ke},url:function(){var B=x.result(this,"urlRoot")||x.result(this.collection,"url")||un();if(this.isNew())return B;var z=this.get(this.idAttribute);return B.replace(/[^\/]$/,"$&/")+encodeURIComponent(z)},parse:function(B,z){return B},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(B){return this._validate({},x.extend({},B,{validate:!0}))},_validate:function(B,z){if(!z.validate||!this.validate)return!0;B=x.extend({},this.attributes,B);var re=this.validationError=this.validate(B,z)||null;return!re||(this.trigger("invalid",this,re,x.extend(z,{validationError:re})),!1)}});var Ae=S.Collection=function(B,z){z||(z={}),this.preinitialize.apply(this,arguments),z.model&&(this.model=z.model),void 0!==z.comparator&&(this.comparator=z.comparator),this._reset(),this.initialize.apply(this,arguments),B&&this.reset(B,x.extend({silent:!0},z))},Fe={add:!0,remove:!0,merge:!0},C={add:!0,remove:!1},He=function(B,z,re){re=Math.min(Math.max(re,0),B.length);var Ke,Ce=Array(B.length-re),We=z.length;for(Ke=0;Ke<Ce.length;Ke++)Ce[Ke]=B[Ke+re];for(Ke=0;Ke<We;Ke++)B[Ke+re]=z[Ke];for(Ke=0;Ke<Ce.length;Ke++)B[Ke+We+re]=Ce[Ke]};x.extend(Ae.prototype,F,{model:xe,preinitialize:function(){},initialize:function(){},toJSON:function(B){return this.map(function(z){return z.toJSON(B)})},sync:function(){return S.sync.apply(this,arguments)},add:function(B,z){return this.set(B,x.extend({merge:!1},z,C))},remove:function(B,z){z=x.extend({},z);var re=!x.isArray(B);B=re?[B]:B.slice();var Ce=this._removeModels(B,z);return!z.silent&&Ce.length&&(z.changes={added:[],merged:[],removed:Ce},this.trigger("update",this,z)),re?Ce[0]:Ce},set:function(B,z){if(null!=B){(z=x.extend({},Fe,z)).parse&&!this._isModel(B)&&(B=this.parse(B,z)||[]);var re=!x.isArray(B);B=re?[B]:B.slice();var Ce=z.at;null!=Ce&&(Ce=+Ce),Ce>this.length&&(Ce=this.length),Ce<0&&(Ce+=this.length+1);var jn,ar,We=[],Ke=[],bt=[],Nt=[],Ht={},mn=z.add,On=z.merge,gn=z.remove,Qn=!1,Tr=this.comparator&&null==Ce&&!1!==z.sort,yi=x.isString(this.comparator)?this.comparator:null;for(ar=0;ar<B.length;ar++){var rr=this.get(jn=B[ar]);if(rr){if(On&&jn!==rr){var cr=this._isModel(jn)?jn.attributes:jn;z.parse&&(cr=rr.parse(cr,z)),rr.set(cr,z),bt.push(rr),Tr&&!Qn&&(Qn=rr.hasChanged(yi))}Ht[rr.cid]||(Ht[rr.cid]=!0,We.push(rr)),B[ar]=rr}else mn&&(jn=B[ar]=this._prepareModel(jn,z))&&(Ke.push(jn),this._addReference(jn,z),Ht[jn.cid]=!0,We.push(jn))}if(gn){for(ar=0;ar<this.length;ar++)Ht[(jn=this.models[ar]).cid]||Nt.push(jn);Nt.length&&this._removeModels(Nt,z)}var Nr=!1;if(We.length&&!Tr&&mn&&gn?(Nr=this.length!==We.length||x.some(this.models,function(ir,sr){return ir!==We[sr]}),this.models.length=0,He(this.models,We,0),this.length=this.models.length):Ke.length&&(Tr&&(Qn=!0),He(this.models,Ke,null==Ce?this.length:Ce),this.length=this.models.length),Qn&&this.sort({silent:!0}),!z.silent){for(ar=0;ar<Ke.length;ar++)null!=Ce&&(z.index=Ce+ar),(jn=Ke[ar]).trigger("add",jn,this,z);(Qn||Nr)&&this.trigger("sort",this,z),(Ke.length||Nt.length||bt.length)&&(z.changes={added:Ke,removed:Nt,merged:bt},this.trigger("update",this,z))}return re?B[0]:B}},reset:function(B,z){z=z?x.clone(z):{};for(var re=0;re<this.models.length;re++)this._removeReference(this.models[re],z);return z.previousModels=this.models,this._reset(),B=this.add(B,x.extend({silent:!0},z)),z.silent||this.trigger("reset",this,z),B},push:function(B,z){return this.add(B,x.extend({at:this.length},z))},pop:function(B){var z=this.at(this.length-1);return this.remove(z,B)},unshift:function(B,z){return this.add(B,x.extend({at:0},z))},shift:function(B){var z=this.at(0);return this.remove(z,B)},slice:function(){return M.apply(this.models,arguments)},get:function(B){if(null!=B)return this._byId[B]||this._byId[this.modelId(this._isModel(B)?B.attributes:B)]||B.cid&&this._byId[B.cid]},has:function(B){return null!=this.get(B)},at:function(B){return B<0&&(B+=this.length),this.models[B]},where:function(B,z){return this[z?"find":"filter"](B)},findWhere:function(B){return this.where(B,!0)},sort:function(B){var z=this.comparator;if(!z)throw new Error("Cannot sort a set without a comparator");B||(B={});var re=z.length;return x.isFunction(z)&&(z=z.bind(this)),1===re||x.isString(z)?this.models=this.sortBy(z):this.models.sort(z),B.silent||this.trigger("sort",this,B),this},pluck:function(B){return this.map(B+"")},fetch:function(B){var z=(B=x.extend({parse:!0},B)).success,re=this;return B.success=function(Ce){re[B.reset?"reset":"set"](Ce,B),z&&z.call(B.context,re,Ce,B),re.trigger("sync",re,Ce,B)},Kt(this,B),this.sync("read",this,B)},create:function(B,z){var re=(z=z?x.clone(z):{}).wait;if(!(B=this._prepareModel(B,z)))return!1;re||this.add(B,z);var Ce=this,We=z.success;return z.success=function(Ke,bt,Nt){re&&Ce.add(Ke,Nt),We&&We.call(Nt.context,Ke,bt,Nt)},B.save(null,z),B},parse:function(B,z){return B},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(B){return B[this.model.prototype.idAttribute||"id"]},values:function(){return new et(this,ot)},keys:function(){return new et(this,lt)},entries:function(){return new et(this,pt)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(B,z){if(this._isModel(B))return B.collection||(B.collection=this),B;(z=z?x.clone(z):{}).collection=this;var re=new this.model(B,z);return re.validationError?(this.trigger("invalid",this,re.validationError,z),!1):re},_removeModels:function(B,z){for(var re=[],Ce=0;Ce<B.length;Ce++){var We=this.get(B[Ce]);if(We){var Ke=this.indexOf(We);this.models.splice(Ke,1),this.length--,delete this._byId[We.cid];var bt=this.modelId(We.attributes);null!=bt&&delete this._byId[bt],z.silent||(z.index=Ke,We.trigger("remove",We,this,z)),re.push(We),this._removeReference(We,z)}}return re},_isModel:function(B){return B instanceof xe},_addReference:function(B,z){this._byId[B.cid]=B;var re=this.modelId(B.attributes);null!=re&&(this._byId[re]=B),B.on("all",this._onModelEvent,this)},_removeReference:function(B,z){delete this._byId[B.cid];var re=this.modelId(B.attributes);null!=re&&delete this._byId[re],this===B.collection&&delete B.collection,B.off("all",this._onModelEvent,this)},_onModelEvent:function(B,z,re,Ce){if(z){if(("add"===B||"remove"===B)&&re!==this)return;if("destroy"===B&&this.remove(z,Ce),"change"===B){var We=this.modelId(z.previousAttributes()),Ke=this.modelId(z.attributes);We!==Ke&&(null!=We&&delete this._byId[We],null!=Ke&&(this._byId[Ke]=z))}}this.trigger.apply(this,arguments)}});var nt="function"==typeof Symbol&&Symbol.iterator;nt&&(Ae.prototype[nt]=Ae.prototype.values);var et=function(B,z){this._collection=B,this._kind=z,this._index=0},ot=1,lt=2,pt=3;nt&&(et.prototype[nt]=function(){return this}),et.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var z,B=this._collection.at(this._index);if(this._index++,this._kind===ot)z=B;else{var re=this._collection.modelId(B.attributes);z=this._kind===lt?re:[re,B]}return{value:z,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var At=S.View=function(B){this.cid=x.uniqueId("view"),this.preinitialize.apply(this,arguments),x.extend(this,x.pick(B,$t)),this._ensureElement(),this.initialize.apply(this,arguments)},Xt=/^(\S+)\s*(.*)$/,$t=["model","collection","el","id","attributes","className","tagName","events"];x.extend(At.prototype,F,{tagName:"div",$:function(B){return this.$el.find(B)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(B){return this.undelegateEvents(),this._setElement(B),this.delegateEvents(),this},_setElement:function(B){this.$el=B instanceof S.$?B:S.$(B),this.el=this.$el[0]},delegateEvents:function(B){if(B||(B=x.result(this,"events")),!B)return this;for(var z in this.undelegateEvents(),B){var re=B[z];if(x.isFunction(re)||(re=this[re]),re){var Ce=z.match(Xt);this.delegate(Ce[1],Ce[2],re.bind(this))}}return this},delegate:function(B,z,re){return this.$el.on(B+".delegateEvents"+this.cid,z,re),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(B,z,re){return this.$el.off(B+".delegateEvents"+this.cid,z,re),this},_createElement:function(B){return document.createElement(B)},_ensureElement:function(){if(this.el)this.setElement(x.result(this,"el"));else{var B=x.extend({},x.result(this,"attributes"));this.id&&(B.id=x.result(this,"id")),this.className&&(B.class=x.result(this,"className")),this.setElement(this._createElement(x.result(this,"tagName"))),this._setAttributes(B)}},_setAttributes:function(B){this.$el.attr(B)}});var vr=function(B,z,re,Ce){x.each(re,function(We,Ke){z[Ke]&&(B.prototype[Ke]=function(B,z,re,Ce){switch(z){case 1:return function(){return B[re](this[Ce])};case 2:return function(We){return B[re](this[Ce],We)};case 3:return function(We,Ke){return B[re](this[Ce],Ur(We,this),Ke)};case 4:return function(We,Ke,bt){return B[re](this[Ce],Ur(We,this),Ke,bt)};default:return function(){var We=M.call(arguments);return We.unshift(this[Ce]),B[re].apply(B,We)}}}(z,We,Ke,Ce))})},Ur=function(B,z){return x.isFunction(B)?B:x.isObject(B)&&!z._isModel(B)?ze(B):x.isString(B)?function(re){return re.get(B)}:B},ze=function(B){var z=x.matches(B);return function(re){return z(re.attributes)}};x.each([[Ae,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[xe,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],function(B){var z=B[0],re=B[1],Ce=B[2];z.mixin=function(We){var Ke=x.reduce(x.functions(We),function(bt,Nt){return bt[Nt]=0,bt},{});vr(z,We,Ke,Ce)},vr(z,x,re,Ce)}),S.sync=function(B,z,re){var Ce=nr[B];x.defaults(re||(re={}),{emulateHTTP:S.emulateHTTP,emulateJSON:S.emulateJSON});var We={type:Ce,dataType:"json"};if(re.url||(We.url=x.result(z,"url")||un()),null==re.data&&z&&("create"===B||"update"===B||"patch"===B)&&(We.contentType="application/json",We.data=JSON.stringify(re.attrs||z.toJSON(re))),re.emulateJSON&&(We.contentType="application/x-www-form-urlencoded",We.data=We.data?{model:We.data}:{}),re.emulateHTTP&&("PUT"===Ce||"DELETE"===Ce||"PATCH"===Ce)){We.type="POST",re.emulateJSON&&(We.data._method=Ce);var Ke=re.beforeSend;re.beforeSend=function(Ht){if(Ht.setRequestHeader("X-HTTP-Method-Override",Ce),Ke)return Ke.apply(this,arguments)}}"GET"!==We.type&&!re.emulateJSON&&(We.processData=!1);var bt=re.error;re.error=function(Ht,mn,On){re.textStatus=mn,re.errorThrown=On,bt&&bt.call(re.context,Ht,mn,On)};var Nt=re.xhr=S.ajax(x.extend(We,re));return z.trigger("request",z,Nt,re),Nt};var nr={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};S.ajax=function(){return S.$.ajax.apply(S.$,arguments)};var Yn=S.Router=function(B){B||(B={}),this.preinitialize.apply(this,arguments),B.routes&&(this.routes=B.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},be=/\((.*?)\)/g,Je=/(\(\?)?:\w+/g,ut=/\*\w+/g,ht=/[\-{}\[\]+?.,\\\^$|#\s]/g;x.extend(Yn.prototype,F,{preinitialize:function(){},initialize:function(){},route:function(B,z,re){x.isRegExp(B)||(B=this._routeToRegExp(B)),x.isFunction(z)&&(re=z,z=""),re||(re=this[z]);var Ce=this;return S.history.route(B,function(We){var Ke=Ce._extractParameters(B,We);!1!==Ce.execute(re,Ke,z)&&(Ce.trigger.apply(Ce,["route:"+z].concat(Ke)),Ce.trigger("route",z,Ke),S.history.trigger("route",Ce,z,Ke))}),this},execute:function(B,z,re){B&&B.apply(this,z)},navigate:function(B,z){return S.history.navigate(B,z),this},_bindRoutes:function(){if(this.routes){this.routes=x.result(this,"routes");for(var B,z=x.keys(this.routes);null!=(B=z.pop());)this.route(B,this.routes[B])}},_routeToRegExp:function(B){return B=B.replace(ht,"\\$&").replace(be,"(?:$1)?").replace(Je,function(z,re){return re?z:"([^/?]+)"}).replace(ut,"([^?]*?)"),new RegExp("^"+B+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(B,z){var re=B.exec(z).slice(1);return x.map(re,function(Ce,We){return We===re.length-1?Ce||null:Ce?decodeURIComponent(Ce):null})}});var Rt=S.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},pn=/^[#\/]|\s+$/g,kn=/^\/+|\/+$/g,or=/#.*$/;Rt.started=!1,x.extend(Rt.prototype,F,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(B){return decodeURI(B.replace(/%25/g,"%2525"))},getSearch:function(){var B=this.location.href.replace(/#.*/,"").match(/\?.+/);return B?B[0]:""},getHash:function(B){var z=(B||this).location.href.match(/#(.*)$/);return z?z[1]:""},getPath:function(){var B=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===B.charAt(0)?B.slice(1):B},getFragment:function(B){return null==B&&(B=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),B.replace(pn,"")},start:function(B){if(Rt.started)throw new Error("Backbone.history has already been started");if(Rt.started=!0,this.options=x.extend({root:"/"},this.options,B),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(kn,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var z=this.root.slice(0,-1)||"/";return this.location.replace(z+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var re=document.body,Ce=re.insertBefore(this.iframe,re.firstChild).contentWindow;Ce.document.open(),Ce.document.close(),Ce.location.hash="#"+this.fragment}var We=window.addEventListener||function(Ke,bt){return attachEvent("on"+Ke,bt)};if(this._usePushState?We("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?We("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var B=window.removeEventListener||function(z,re){return detachEvent("on"+z,re)};this._usePushState?B("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&B("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),Rt.started=!1},route:function(B,z){this.handlers.unshift({route:B,callback:z})},checkUrl:function(B){var z=this.getFragment();if(z===this.fragment&&this.iframe&&(z=this.getHash(this.iframe.contentWindow)),z===this.fragment)return!1;this.iframe&&this.navigate(z),this.loadUrl()},loadUrl:function(B){return!!this.matchRoot()&&(B=this.fragment=this.getFragment(B),x.some(this.handlers,function(z){if(z.route.test(B))return z.callback(B),!0}))},navigate:function(B,z){if(!Rt.started)return!1;(!z||!0===z)&&(z={trigger:!!z}),B=this.getFragment(B||"");var re=this.root;(""===B||"?"===B.charAt(0))&&(re=re.slice(0,-1)||"/");var Ce=re+B;B=B.replace(or,"");var We=this.decodeFragment(B);if(this.fragment!==We){if(this.fragment=We,this._usePushState)this.history[z.replace?"replaceState":"pushState"]({},document.title,Ce);else{if(!this._wantsHashChange)return this.location.assign(Ce);if(this._updateHash(this.location,B,z.replace),this.iframe&&B!==this.getHash(this.iframe.contentWindow)){var Ke=this.iframe.contentWindow;z.replace||(Ke.document.open(),Ke.document.close()),this._updateHash(Ke.location,B,z.replace)}}if(z.trigger)return this.loadUrl(B)}},_updateHash:function(B,z,re){if(re){var Ce=B.href.replace(/(javascript:|#).*$/,"");B.replace(Ce+"#"+z)}else B.hash="#"+z}}),S.history=new Rt;xe.extend=Ae.extend=Yn.extend=At.extend=Rt.extend=function(B,z){var Ce,re=this;return Ce=B&&x.has(B,"constructor")?B.constructor:function(){return re.apply(this,arguments)},x.extend(Ce,re,z),Ce.prototype=x.create(re.prototype,B),Ce.prototype.constructor=Ce,Ce.__super__=re.prototype,Ce};var un=function(){throw new Error('A "url" property or function must be specified')},Kt=function(B,z){var re=z.error;z.error=function(Ce){re&&re.call(z.context,B,Ce,z),B.trigger("error",B,Ce,z)}};return S}(S,F,k,M)}.apply(W,p))&&(E.exports=g)},59695:(E,W,f)=>{E.exports={graphlib:f(36456),layout:f(14850),debug:f(71914),util:{time:f(11510).time,notime:f(11510).notime},version:f(28126)}},12234:(E,W,f)=>{"use strict";var p=f(45760),g=f(67365);E.exports={run:function w(A){var k="greedy"===A.graph().acyclicer?g(A,function M(F){return function(H){return F.edge(H).weight}}(A)):function S(A){var k=[],M={},F={};return p.forEach(A.nodes(),function H(O){p.has(F,O)||(F[O]=!0,M[O]=!0,p.forEach(A.outEdges(O),function(X){p.has(M,X.w)?k.push(X):H(X.w)}),delete M[O])}),k}(A);p.forEach(k,function(F){var H=A.edge(F);A.removeEdge(F),H.forwardName=F.name,H.reversed=!0,A.setEdge(F.w,F.v,H,p.uniqueId("rev"))})},undo:function x(A){p.forEach(A.edges(),function(k){var M=A.edge(k);if(M.reversed){A.removeEdge(k);var F=M.forwardName;delete M.reversed,delete M.forwardName,A.setEdge(k.w,k.v,M,F)}})}}},79999:(E,W,f)=>{var p=f(45760),g=f(11510);function S(x,A,k,M,F,H){var X=F[A][H-1],te=g.addDummyNode(x,"border",{width:0,height:0,rank:H,borderType:A},k);F[A][H]=te,x.setParent(te,M),X&&x.setEdge(X,te,{weight:1})}E.exports=function w(x){p.forEach(x.children(),function A(k){var M=x.children(k),F=x.node(k);if(M.length&&p.forEach(M,A),p.has(F,"minRank")){F.borderLeft=[],F.borderRight=[];for(var H=F.minRank,O=F.maxRank+1;H<O;++H)S(x,"borderLeft","_bl",k,F,H),S(x,"borderRight","_br",k,F,H)}})}},83870:(E,W,f)=>{"use strict";var p=f(45760);function S(H){p.forEach(H.nodes(),function(O){x(H.node(O))}),p.forEach(H.edges(),function(O){x(H.edge(O))})}function x(H){var O=H.width;H.width=H.height,H.height=O}function k(H){H.y=-H.y}function F(H){var O=H.x;H.x=H.y,H.y=O}E.exports={adjust:function g(H){var O=H.graph().rankdir.toLowerCase();("lr"===O||"rl"===O)&&S(H)},undo:function w(H){var O=H.graph().rankdir.toLowerCase();("bt"===O||"rl"===O)&&function A(H){p.forEach(H.nodes(),function(O){k(H.node(O))}),p.forEach(H.edges(),function(O){var X=H.edge(O);p.forEach(X.points,k),p.has(X,"y")&&k(X)})}(H),("lr"===O||"rl"===O)&&(function M(H){p.forEach(H.nodes(),function(O){F(H.node(O))}),p.forEach(H.edges(),function(O){var X=H.edge(O);p.forEach(X.points,F),p.has(X,"x")&&F(X)})}(H),S(H))}}},3226:E=>{function W(){var g={};g._next=g._prev=g,this._sentinel=g}function f(g){g._prev._next=g._next,g._next._prev=g._prev,delete g._next,delete g._prev}function p(g,w){if("_next"!==g&&"_prev"!==g)return w}E.exports=W,W.prototype.dequeue=function(){var g=this._sentinel,w=g._prev;if(w!==g)return f(w),w},W.prototype.enqueue=function(g){var w=this._sentinel;g._prev&&g._next&&f(g),g._next=w._next,w._next._prev=g,w._next=g,g._prev=w},W.prototype.toString=function(){for(var g=[],w=this._sentinel,S=w._prev;S!==w;)g.push(JSON.stringify(S,p)),S=S._prev;return"["+g.join(", ")+"]"}},71914:(E,W,f)=>{var p=f(45760),g=f(11510),w=f(36456).Graph;E.exports={debugOrdering:function S(x){var A=g.buildLayerMatrix(x),k=new w({compound:!0,multigraph:!0}).setGraph({});return p.forEach(x.nodes(),function(M){k.setNode(M,{label:M}),k.setParent(M,"layer"+x.node(M).rank)}),p.forEach(x.edges(),function(M){k.setEdge(M.v,M.w,{},M.name)}),p.forEach(A,function(M,F){k.setNode("layer"+F,{rank:"same"}),p.reduce(M,function(O,X){return k.setEdge(O,X,{style:"invis"}),X})}),k}}},36456:(E,W,f)=>{var p;try{p=f(85510)}catch(g){}p||(p=window.graphlib),E.exports=p},67365:(E,W,f)=>{var p=f(45760),g=f(36456).Graph,w=f(3226);E.exports=function x(H,O){if(H.nodeCount()<=1)return[];var X=function M(H,O){var X=new g,te=0,fe=0;p.forEach(H.nodes(),function(ve){X.setNode(ve,{v:ve,in:0,out:0})}),p.forEach(H.edges(),function(ve){var he=X.edge(ve.v,ve.w)||0,ne=O(ve);X.setEdge(ve.v,ve.w,he+ne),fe=Math.max(fe,X.node(ve.v).out+=ne),te=Math.max(te,X.node(ve.w).in+=ne)});var i=p.range(fe+te+3).map(function(){return new w}),se=te+1;return p.forEach(X.nodes(),function(ve){F(i,se,X.node(ve))}),{graph:X,buckets:i,zeroIdx:se}}(H,O||S),te=function A(H,O,X){for(var se,te=[],fe=O[O.length-1],i=O[0];H.nodeCount();){for(;se=i.dequeue();)k(H,O,X,se);for(;se=fe.dequeue();)k(H,O,X,se);if(H.nodeCount())for(var ve=O.length-2;ve>0;--ve)if(se=O[ve].dequeue()){te=te.concat(k(H,O,X,se,!0));break}}return te}(X.graph,X.buckets,X.zeroIdx);return p.flatten(p.map(te,function(fe){return H.outEdges(fe.v,fe.w)}),!0)};var S=p.constant(1);function k(H,O,X,te,fe){var i=fe?[]:void 0;return p.forEach(H.inEdges(te.v),function(se){var ve=H.edge(se),he=H.node(se.v);fe&&i.push({v:se.v,w:se.w}),he.out-=ve,F(O,X,he)}),p.forEach(H.outEdges(te.v),function(se){var ve=H.edge(se),ne=H.node(se.w);ne.in-=ve,F(O,X,ne)}),H.removeNode(te.v),i}function F(H,O,X){X.out?X.in?H[X.out-X.in+O].enqueue(X):H[H.length-1].enqueue(X):H[0].enqueue(X)}},14850:(E,W,f)=>{"use strict";var p=f(45760),g=f(12234),w=f(91496),S=f(94124),x=f(11510).normalizeRanks,A=f(60162),k=f(11510).removeEmptyRanks,M=f(1230),F=f(79999),H=f(83870),O=f(32974),X=f(78226),te=f(11510),fe=f(36456).Graph;E.exports=function i(be,Je){var ut=Je&&Je.debugTiming?te.time:te.notime;ut("layout",function(){var ht=ut("  buildLayoutGraph",function(){return function et(be){var Je=new fe({multigraph:!0,compound:!0}),ut=Yn(be.graph());return Je.setGraph(p.merge({},ne,nr(ut,he),p.pick(ut,xe))),p.forEach(be.nodes(),function(ht){var Rt=Yn(be.node(ht));Je.setNode(ht,p.defaults(nr(Rt,Ae),Fe)),Je.setParent(ht,be.parent(ht))}),p.forEach(be.edges(),function(ht){var Rt=Yn(be.edge(ht));Je.setEdge(ht,p.merge({},He,nr(Rt,C),p.pick(Rt,nt)))}),Je}(be)});ut("  runLayout",function(){!function se(be,Je){Je("    makeSpaceForEdgeLabels",function(){!function ot(be){var Je=be.graph();Je.ranksep/=2,p.forEach(be.edges(),function(ut){var ht=be.edge(ut);ht.minlen*=2,"c"!==ht.labelpos.toLowerCase()&&("TB"===Je.rankdir||"BT"===Je.rankdir?ht.width+=ht.labeloffset:ht.height+=ht.labeloffset)})}(be)}),Je("    removeSelfEdges",function(){!function ze(be){p.forEach(be.edges(),function(Je){if(Je.v===Je.w){var ut=be.node(Je.v);ut.selfEdges||(ut.selfEdges=[]),ut.selfEdges.push({e:Je,label:be.edge(Je)}),be.removeEdge(Je)}})}(be)}),Je("    acyclic",function(){g.run(be)}),Je("    nestingGraph.run",function(){M.run(be)}),Je("    rank",function(){S(te.asNonCompoundGraph(be))}),Je("    injectEdgeLabelProxies",function(){!function lt(be){p.forEach(be.edges(),function(Je){var ut=be.edge(Je);if(ut.width&&ut.height){var ht=be.node(Je.v),Rt=be.node(Je.w);te.addDummyNode(be,"edge-proxy",{rank:(Rt.rank-ht.rank)/2+ht.rank,e:Je},"_ep")}})}(be)}),Je("    removeEmptyRanks",function(){k(be)}),Je("    nestingGraph.cleanup",function(){M.cleanup(be)}),Je("    normalizeRanks",function(){x(be)}),Je("    assignRankMinMax",function(){!function pt(be){var Je=0;p.forEach(be.nodes(),function(ut){var ht=be.node(ut);ht.borderTop&&(ht.minRank=be.node(ht.borderTop).rank,ht.maxRank=be.node(ht.borderBottom).rank,Je=p.max(Je,ht.maxRank))}),be.graph().maxRank=Je}(be)}),Je("    removeEdgeLabelProxies",function(){!function At(be){p.forEach(be.nodes(),function(Je){var ut=be.node(Je);"edge-proxy"===ut.dummy&&(be.edge(ut.e).labelRank=ut.rank,be.removeNode(Je))})}(be)}),Je("    normalize.run",function(){w.run(be)}),Je("    parentDummyChains",function(){A(be)}),Je("    addBorderSegments",function(){F(be)}),Je("    order",function(){O(be)}),Je("    insertSelfEdges",function(){!function wn(be){var Je=te.buildLayerMatrix(be);p.forEach(Je,function(ut){var ht=0;p.forEach(ut,function(Rt,pn){var kn=be.node(Rt);kn.order=pn+ht,p.forEach(kn.selfEdges,function(or){te.addDummyNode(be,"selfedge",{width:or.label.width,height:or.label.height,rank:kn.rank,order:pn+ ++ht,e:or.e,label:or.label},"_se")}),delete kn.selfEdges})})}(be)}),Je("    adjustCoordinateSystem",function(){H.adjust(be)}),Je("    position",function(){X(be)}),Je("    positionSelfEdges",function(){!function tr(be){p.forEach(be.nodes(),function(Je){var ut=be.node(Je);if("selfedge"===ut.dummy){var ht=be.node(ut.e.v),Rt=ht.x+ht.width/2,pn=ht.y,kn=ut.x-Rt,or=ht.height/2;be.setEdge(ut.e,ut.label),be.removeNode(Je),ut.label.points=[{x:Rt+2*kn/3,y:pn-or},{x:Rt+5*kn/6,y:pn-or},{x:Rt+kn,y:pn},{x:Rt+5*kn/6,y:pn+or},{x:Rt+2*kn/3,y:pn+or}],ut.label.x=ut.x,ut.label.y=ut.y}})}(be)}),Je("    removeBorderNodes",function(){!function Ur(be){p.forEach(be.nodes(),function(Je){if(be.children(Je).length){var ut=be.node(Je),ht=be.node(ut.borderTop),Rt=be.node(ut.borderBottom),pn=be.node(p.last(ut.borderLeft)),kn=be.node(p.last(ut.borderRight));ut.width=Math.abs(kn.x-pn.x),ut.height=Math.abs(Rt.y-ht.y),ut.x=pn.x+ut.width/2,ut.y=ht.y+ut.height/2}}),p.forEach(be.nodes(),function(Je){"border"===be.node(Je).dummy&&be.removeNode(Je)})}(be)}),Je("    normalize.undo",function(){w.undo(be)}),Je("    fixupEdgeLabelCoords",function(){!function nn(be){p.forEach(be.edges(),function(Je){var ut=be.edge(Je);if(p.has(ut,"x"))switch(("l"===ut.labelpos||"r"===ut.labelpos)&&(ut.width-=ut.labeloffset),ut.labelpos){case"l":ut.x-=ut.width/2+ut.labeloffset;break;case"r":ut.x+=ut.width/2+ut.labeloffset}})}(be)}),Je("    undoCoordinateSystem",function(){H.undo(be)}),Je("    translateGraph",function(){!function Xt(be){var Je=Number.POSITIVE_INFINITY,ut=0,ht=Number.POSITIVE_INFINITY,Rt=0,pn=be.graph(),kn=pn.marginx||0,or=pn.marginy||0;function mi(un){var Kt=un.x,B=un.y,z=un.width,re=un.height;Je=Math.min(Je,Kt-z/2),ut=Math.max(ut,Kt+z/2),ht=Math.min(ht,B-re/2),Rt=Math.max(Rt,B+re/2)}p.forEach(be.nodes(),function(un){mi(be.node(un))}),p.forEach(be.edges(),function(un){var Kt=be.edge(un);p.has(Kt,"x")&&mi(Kt)}),Je-=kn,ht-=or,p.forEach(be.nodes(),function(un){var Kt=be.node(un);Kt.x-=Je,Kt.y-=ht}),p.forEach(be.edges(),function(un){var Kt=be.edge(un);p.forEach(Kt.points,function(B){B.x-=Je,B.y-=ht}),p.has(Kt,"x")&&(Kt.x-=Je),p.has(Kt,"y")&&(Kt.y-=ht)}),pn.width=ut-Je+kn,pn.height=Rt-ht+or}(be)}),Je("    assignNodeIntersects",function(){!function $t(be){p.forEach(be.edges(),function(Je){var pn,kn,ut=be.edge(Je),ht=be.node(Je.v),Rt=be.node(Je.w);ut.points?(pn=ut.points[0],kn=ut.points[ut.points.length-1]):(ut.points=[],pn=Rt,kn=ht),ut.points.unshift(te.intersectRect(ht,pn)),ut.points.push(te.intersectRect(Rt,kn))})}(be)}),Je("    reversePoints",function(){!function vr(be){p.forEach(be.edges(),function(Je){var ut=be.edge(Je);ut.reversed&&ut.points.reverse()})}(be)}),Je("    acyclic.undo",function(){g.undo(be)})}(ht,ut)}),ut("  updateInputGraph",function(){!function ve(be,Je){p.forEach(be.nodes(),function(ut){var ht=be.node(ut),Rt=Je.node(ut);ht&&(ht.x=Rt.x,ht.y=Rt.y,Je.children(ut).length&&(ht.width=Rt.width,ht.height=Rt.height))}),p.forEach(be.edges(),function(ut){var ht=be.edge(ut),Rt=Je.edge(ut);ht.points=Rt.points,p.has(Rt,"x")&&(ht.x=Rt.x,ht.y=Rt.y)}),be.graph().width=Je.graph().width,be.graph().height=Je.graph().height}(be,ht)})})};var he=["nodesep","edgesep","ranksep","marginx","marginy"],ne={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},xe=["acyclicer","ranker","rankdir","align"],Ae=["width","height"],Fe={width:0,height:0},C=["minlen","weight","width","height","labeloffset"],He={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},nt=["labelpos"];function nr(be,Je){return p.mapValues(p.pick(be,Je),Number)}function Yn(be){var Je={};return p.forEach(be,function(ut,ht){Je[ht.toLowerCase()]=ut}),Je}},45760:(E,W,f)=>{var p;try{p={cloneDeep:f(90733),constant:f(76684),defaults:f(28800),each:f(35474),filter:f(35281),find:f(62516),flatten:f(22274),forEach:f(89851),forIn:f(41176),has:f(54842),isUndefined:f(34235),last:f(25809),map:f(19984),mapValues:f(10203),max:f(18176),merge:f(80567),min:f(29439),minBy:f(29525),now:f(31710),pick:f(16372),range:f(90361),reduce:f(81337),sortBy:f(12906),uniqueId:f(51541),values:f(90377),zipObject:f(21617)}}catch(g){}p||(p=window._),E.exports=p},1230:(E,W,f)=>{var p=f(45760),g=f(11510);function S(M,F,H,O,X,te,fe){var i=M.children(fe);if(i.length){var se=g.addBorderNode(M,"_bt"),ve=g.addBorderNode(M,"_bb"),he=M.node(fe);M.setParent(se,fe),he.borderTop=se,M.setParent(ve,fe),he.borderBottom=ve,p.forEach(i,function(ne){S(M,F,H,O,X,te,ne);var xe=M.node(ne),Ae=xe.borderTop?xe.borderTop:ne,Fe=xe.borderBottom?xe.borderBottom:ne,C=xe.borderTop?O:2*O,He=Ae!==Fe?1:X-te[fe]+1;M.setEdge(se,Ae,{weight:C,minlen:He,nestingEdge:!0}),M.setEdge(Fe,ve,{weight:C,minlen:He,nestingEdge:!0})}),M.parent(fe)||M.setEdge(F,se,{weight:0,minlen:X+te[fe]})}else fe!==F&&M.setEdge(F,fe,{weight:0,minlen:H})}E.exports={run:function w(M){var F=g.addDummyNode(M,"root",{},"_root"),H=function x(M){var F={};function H(O,X){var te=M.children(O);te&&te.length&&p.forEach(te,function(fe){H(fe,X+1)}),F[O]=X}return p.forEach(M.children(),function(O){H(O,1)}),F}(M),O=p.max(p.values(H))-1,X=2*O+1;M.graph().nestingRoot=F,p.forEach(M.edges(),function(fe){M.edge(fe).minlen*=X});var te=function A(M){return p.reduce(M.edges(),function(F,H){return F+M.edge(H).weight},0)}(M)+1;p.forEach(M.children(),function(fe){S(M,F,X,te,O,H,fe)}),M.graph().nodeRankFactor=X},cleanup:function k(M){var F=M.graph();M.removeNode(F.nestingRoot),delete F.nestingRoot,p.forEach(M.edges(),function(H){M.edge(H).nestingEdge&&M.removeEdge(H)})}}},91496:(E,W,f)=>{"use strict";var p=f(45760),g=f(11510);E.exports={run:function w(A){A.graph().dummyChains=[],p.forEach(A.edges(),function(k){!function S(A,k){var M=k.v,F=A.node(M).rank,H=k.w,O=A.node(H).rank,X=k.name,te=A.edge(k),fe=te.labelRank;if(O!==F+1){var i,se,ve;for(A.removeEdge(k),ve=0,++F;F<O;++ve,++F)te.points=[],i=g.addDummyNode(A,"edge",se={width:0,height:0,edgeLabel:te,edgeObj:k,rank:F},"_d"),F===fe&&(se.width=te.width,se.height=te.height,se.dummy="edge-label",se.labelpos=te.labelpos),A.setEdge(M,i,{weight:te.weight},X),0===ve&&A.graph().dummyChains.push(i),M=i;A.setEdge(M,H,{weight:te.weight},X)}}(A,k)})},undo:function x(A){p.forEach(A.graph().dummyChains,function(k){var H,M=A.node(k),F=M.edgeLabel;for(A.setEdge(M.edgeObj,F);M.dummy;)H=A.successors(k)[0],A.removeNode(k),F.points.push({x:M.x,y:M.y}),"edge-label"===M.dummy&&(F.x=M.x,F.y=M.y,F.width=M.width,F.height=M.height),M=A.node(k=H)})}}},33034:(E,W,f)=>{var p=f(45760);E.exports=function g(w,S,x){var k,A={};p.forEach(x,function(M){for(var H,O,F=w.parent(M);F;){if((H=w.parent(F))?(O=A[H],A[H]=F):(O=k,k=F),O&&O!==F)return void S.setEdge(O,F);F=H}})}},81323:(E,W,f)=>{var p=f(45760);E.exports=function g(w,S){return p.map(S,function(x){var A=w.inEdges(x);if(A.length){var k=p.reduce(A,function(M,F){var H=w.edge(F),O=w.node(F.v);return{sum:M.sum+H.weight*O.order,weight:M.weight+H.weight}},{sum:0,weight:0});return{v:x,barycenter:k.sum/k.weight,weight:k.weight}}return{v:x}})}},1686:(E,W,f)=>{var p=f(45760),g=f(36456).Graph;E.exports=function w(x,A,k){var M=function S(x){for(var A;x.hasNode(A=p.uniqueId("_root")););return A}(x),F=new g({compound:!0}).setGraph({root:M}).setDefaultNodeLabel(function(H){return x.node(H)});return p.forEach(x.nodes(),function(H){var O=x.node(H),X=x.parent(H);(O.rank===A||O.minRank<=A&&A<=O.maxRank)&&(F.setNode(H),F.setParent(H,X||M),p.forEach(x[k](H),function(te){var fe=te.v===H?te.w:te.v,i=F.edge(fe,H),se=p.isUndefined(i)?0:i.weight;F.setEdge(fe,H,{weight:x.edge(te).weight+se})}),p.has(O,"minRank")&&F.setNode(H,{borderLeft:O.borderLeft[A],borderRight:O.borderRight[A]}))}),F}},18796:(E,W,f)=>{"use strict";var p=f(45760);function w(S,x,A){for(var k=p.zipObject(A,p.map(A,function(te,fe){return fe})),M=p.flatten(p.map(x,function(te){return p.sortBy(p.map(S.outEdges(te),function(fe){return{pos:k[fe.w],weight:S.edge(fe).weight}}),"pos")}),!0),F=1;F<A.length;)F<<=1;var H=2*F-1;F-=1;var O=p.map(new Array(H),function(){return 0}),X=0;return p.forEach(M.forEach(function(te){var fe=te.pos+F;O[fe]+=te.weight;for(var i=0;fe>0;)fe%2&&(i+=O[fe+1]),O[fe=fe-1>>1]+=te.weight;X+=te.weight*i})),X}E.exports=function g(S,x){for(var A=0,k=1;k<x.length;++k)A+=w(S,x[k-1],x[k]);return A}},32974:(E,W,f)=>{"use strict";var p=f(45760),g=f(49402),w=f(18796),S=f(61057),x=f(1686),A=f(33034),k=f(36456).Graph,M=f(11510);function H(te,fe,i){return p.map(fe,function(se){return x(te,se,i)})}function O(te,fe){var i=new k;p.forEach(te,function(se){var ve=se.graph().root,he=S(se,ve,i,fe);p.forEach(he.vs,function(ne,xe){se.node(ne).order=xe}),A(se,i,he.vs)})}function X(te,fe){p.forEach(fe,function(i){p.forEach(i,function(se,ve){te.node(se).order=ve})})}E.exports=function F(te){var fe=M.maxRank(te),i=H(te,p.range(1,fe+1),"inEdges"),se=H(te,p.range(fe-1,-1,-1),"outEdges"),ve=g(te);X(te,ve);for(var ne,he=Number.POSITIVE_INFINITY,xe=0,Ae=0;Ae<4;++xe,++Ae){O(xe%2?i:se,xe%4>=2),ve=M.buildLayerMatrix(te);var Fe=w(te,ve);Fe<he&&(Ae=0,ne=p.cloneDeep(ve),he=Fe)}X(te,ne)}},49402:(E,W,f)=>{"use strict";var p=f(45760);E.exports=function g(w){var S={},x=p.filter(w.nodes(),function(H){return!w.children(H).length}),A=p.max(p.map(x,function(H){return w.node(H).rank})),k=p.map(p.range(A+1),function(){return[]}),F=p.sortBy(x,function(H){return w.node(H).rank});return p.forEach(F,function M(H){if(!p.has(S,H)){S[H]=!0;var O=w.node(H);k[O.rank].push(H),p.forEach(w.successors(H),M)}}),k}},83826:(E,W,f)=>{"use strict";var p=f(45760);E.exports=function g(x,A){var k={};return p.forEach(x,function(F,H){var O=k[F.v]={indegree:0,in:[],out:[],vs:[F.v],i:H};p.isUndefined(F.barycenter)||(O.barycenter=F.barycenter,O.weight=F.weight)}),p.forEach(A.edges(),function(F){var H=k[F.v],O=k[F.w];!p.isUndefined(H)&&!p.isUndefined(O)&&(O.indegree++,H.out.push(k[F.w]))}),function w(x){var A=[];function k(H){return function(O){O.merged||(p.isUndefined(O.barycenter)||p.isUndefined(H.barycenter)||O.barycenter>=H.barycenter)&&function S(x,A){var k=0,M=0;x.weight&&(k+=x.barycenter*x.weight,M+=x.weight),A.weight&&(k+=A.barycenter*A.weight,M+=A.weight),x.vs=A.vs.concat(x.vs),x.barycenter=k/M,x.weight=M,x.i=Math.min(A.i,x.i),A.merged=!0}(H,O)}}function M(H){return function(O){O.in.push(H),0==--O.indegree&&x.push(O)}}for(;x.length;){var F=x.pop();A.push(F),p.forEach(F.in.reverse(),k(F)),p.forEach(F.out,M(F))}return p.map(p.filter(A,function(H){return!H.merged}),function(H){return p.pick(H,["vs","i","barycenter","weight"])})}(p.filter(k,function(F){return!F.indegree}))}},61057:(E,W,f)=>{var p=f(45760),g=f(81323),w=f(83826),S=f(93803);E.exports=function x(M,F,H,O){var X=M.children(F),te=M.node(F),fe=te?te.borderLeft:void 0,i=te?te.borderRight:void 0,se={};fe&&(X=p.filter(X,function(Fe){return Fe!==fe&&Fe!==i}));var ve=g(M,X);p.forEach(ve,function(Fe){if(M.children(Fe.v).length){var C=x(M,Fe.v,H,O);se[Fe.v]=C,p.has(C,"barycenter")&&function k(M,F){p.isUndefined(M.barycenter)?(M.barycenter=F.barycenter,M.weight=F.weight):(M.barycenter=(M.barycenter*M.weight+F.barycenter*F.weight)/(M.weight+F.weight),M.weight+=F.weight)}(Fe,C)}});var he=w(ve,H);!function A(M,F){p.forEach(M,function(H){H.vs=p.flatten(H.vs.map(function(O){return F[O]?F[O].vs:O}),!0)})}(he,se);var ne=S(he,O);if(fe&&(ne.vs=p.flatten([fe,ne.vs,i],!0),M.predecessors(fe).length)){var xe=M.node(M.predecessors(fe)[0]),Ae=M.node(M.predecessors(i)[0]);p.has(ne,"barycenter")||(ne.barycenter=0,ne.weight=0),ne.barycenter=(ne.barycenter*ne.weight+xe.order+Ae.order)/(ne.weight+2),ne.weight+=2}return ne}},93803:(E,W,f)=>{var p=f(45760),g=f(11510);function S(A,k,M){for(var F;k.length&&(F=p.last(k)).i<=M;)k.pop(),A.push(F.vs),M++;return M}E.exports=function w(A,k){var M=g.partition(A,function(se){return p.has(se,"barycenter")}),F=M.lhs,H=p.sortBy(M.rhs,function(se){return-se.i}),O=[],X=0,te=0,fe=0;F.sort(function x(A){return function(k,M){return k.barycenter<M.barycenter?-1:k.barycenter>M.barycenter?1:A?M.i-k.i:k.i-M.i}}(!!k)),fe=S(O,H,fe),p.forEach(F,function(se){fe+=se.vs.length,O.push(se.vs),X+=se.barycenter*se.weight,te+=se.weight,fe=S(O,H,fe)});var i={vs:p.flatten(O,!0)};return te&&(i.barycenter=X/te,i.weight=te),i}},60162:(E,W,f)=>{var p=f(45760);E.exports=function g(x){var A=function S(x){var A={},k=0;return p.forEach(x.children(),function M(F){var H=k;p.forEach(x.children(F),M),A[F]={low:H,lim:k++}}),A}(x);p.forEach(x.graph().dummyChains,function(k){for(var M=x.node(k),F=M.edgeObj,H=function w(x,A,k,M){var te,fe,F=[],H=[],O=Math.min(A[k].low,A[M].low),X=Math.max(A[k].lim,A[M].lim);te=k;do{te=x.parent(te),F.push(te)}while(te&&(A[te].low>O||X>A[te].lim));for(fe=te,te=M;(te=x.parent(te))!==fe;)H.push(te);return{path:F.concat(H.reverse()),lca:fe}}(x,A,F.v,F.w),O=H.path,X=H.lca,te=0,fe=O[te],i=!0;k!==F.w;){if(M=x.node(k),i){for(;(fe=O[te])!==X&&x.node(fe).maxRank<M.rank;)te++;fe===X&&(i=!1)}if(!i){for(;te<O.length-1&&x.node(fe=O[te+1]).minRank<=M.rank;)te++;fe=O[te]}x.setParent(k,fe),k=x.successors(k)[0]}})}},54058:(E,W,f)=>{"use strict";var p=f(45760),g=f(36456).Graph,w=f(11510);function S(he,ne){var xe={};return p.reduce(ne,function Ae(Fe,C){var He=0,nt=0,et=Fe.length,ot=p.last(C);return p.forEach(C,function(lt,pt){var At=function A(he,ne){if(he.node(ne).dummy)return p.find(he.predecessors(ne),function(xe){return he.node(xe).dummy})}(he,lt),Xt=At?he.node(At).order:et;(At||lt===ot)&&(p.forEach(C.slice(nt,pt+1),function($t){p.forEach(he.predecessors($t),function(nn){var vr=he.node(nn),Ur=vr.order;(Ur<He||Xt<Ur)&&(!vr.dummy||!he.node($t).dummy)&&k(xe,nn,$t)})}),nt=pt+1,He=Xt)}),C}),xe}function x(he,ne){var xe={};function Ae(C,He,nt,et,ot){var lt;p.forEach(p.range(He,nt),function(pt){he.node(lt=C[pt]).dummy&&p.forEach(he.predecessors(lt),function(At){var Xt=he.node(At);Xt.dummy&&(Xt.order<et||Xt.order>ot)&&k(xe,At,lt)})})}return p.reduce(ne,function Fe(C,He){var et,nt=-1,ot=0;return p.forEach(He,function(lt,pt){if("border"===he.node(lt).dummy){var At=he.predecessors(lt);At.length&&(et=he.node(At[0]).order,Ae(He,ot,pt,nt,et),ot=pt,nt=et)}Ae(He,ot,He.length,et,C.length)}),He}),xe}function k(he,ne,xe){if(ne>xe){var Ae=ne;ne=xe,xe=Ae}var Fe=he[ne];Fe||(he[ne]=Fe={}),Fe[xe]=!0}function M(he,ne,xe){if(ne>xe){var Ae=ne;ne=xe,xe=Ae}return p.has(he[ne],xe)}function F(he,ne,xe,Ae){var Fe={},C={},He={};return p.forEach(ne,function(nt){p.forEach(nt,function(et,ot){Fe[et]=et,C[et]=et,He[et]=ot})}),p.forEach(ne,function(nt){var et=-1;p.forEach(nt,function(ot){var lt=Ae(ot);if(lt.length)for(var pt=((lt=p.sortBy(lt,function(nn){return He[nn]})).length-1)/2,At=Math.floor(pt),Xt=Math.ceil(pt);At<=Xt;++At){var $t=lt[At];C[ot]===ot&&et<He[$t]&&!M(xe,ot,$t)&&(C[$t]=ot,C[ot]=Fe[ot]=Fe[$t],et=He[$t])}})}),{root:Fe,align:C}}function H(he,ne,xe,Ae,Fe){var C={},He=function O(he,ne,xe,Ae){var Fe=new g,C=he.graph(),He=function se(he,ne,xe){return function(Ae,Fe,C){var ot,He=Ae.node(Fe),nt=Ae.node(C),et=0;if(et+=He.width/2,p.has(He,"labelpos"))switch(He.labelpos.toLowerCase()){case"l":ot=-He.width/2;break;case"r":ot=He.width/2}if(ot&&(et+=xe?ot:-ot),ot=0,et+=(He.dummy?ne:he)/2,et+=(nt.dummy?ne:he)/2,et+=nt.width/2,p.has(nt,"labelpos"))switch(nt.labelpos.toLowerCase()){case"l":ot=nt.width/2;break;case"r":ot=-nt.width/2}return ot&&(et+=xe?ot:-ot),ot=0,et}}(C.nodesep,C.edgesep,Ae);return p.forEach(ne,function(nt){var et;p.forEach(nt,function(ot){var lt=xe[ot];if(Fe.setNode(lt),et){var pt=xe[et],At=Fe.edge(pt,lt);Fe.setEdge(pt,lt,Math.max(He(he,ot,et),At||0))}et=ot})}),Fe}(he,ne,xe,Fe),nt=Fe?"borderLeft":"borderRight";function et(pt,At){for(var Xt=He.nodes(),$t=Xt.pop(),nn={};$t;)nn[$t]?pt($t):(nn[$t]=!0,Xt.push($t),Xt=Xt.concat(At($t))),$t=Xt.pop()}return et(function ot(pt){C[pt]=He.inEdges(pt).reduce(function(At,Xt){return Math.max(At,C[Xt.v]+He.edge(Xt))},0)},He.predecessors.bind(He)),et(function lt(pt){var At=He.outEdges(pt).reduce(function($t,nn){return Math.min($t,C[nn.w]-He.edge(nn))},Number.POSITIVE_INFINITY),Xt=he.node(pt);At!==Number.POSITIVE_INFINITY&&Xt.borderType!==nt&&(C[pt]=Math.max(C[pt],At))},He.successors.bind(He)),p.forEach(Ae,function(pt){C[pt]=C[xe[pt]]}),C}function X(he,ne){return p.minBy(p.values(ne),function(xe){var Ae=Number.NEGATIVE_INFINITY,Fe=Number.POSITIVE_INFINITY;return p.forIn(xe,function(C,He){var nt=function ve(he,ne){return he.node(ne).width}(he,He)/2;Ae=Math.max(C+nt,Ae),Fe=Math.min(C-nt,Fe)}),Ae-Fe})}function te(he,ne){var xe=p.values(ne),Ae=p.min(xe),Fe=p.max(xe);p.forEach(["u","d"],function(C){p.forEach(["l","r"],function(He){var ot,nt=C+He,et=he[nt];if(et!==ne){var lt=p.values(et);(ot="l"===He?Ae-p.min(lt):Fe-p.max(lt))&&(he[nt]=p.mapValues(et,function(pt){return pt+ot}))}})})}function fe(he,ne){return p.mapValues(he.ul,function(xe,Ae){if(ne)return he[ne.toLowerCase()][Ae];var Fe=p.sortBy(p.map(he,Ae));return(Fe[1]+Fe[2])/2})}E.exports={positionX:function i(he){var Fe,ne=w.buildLayerMatrix(he),xe=p.merge(S(he,ne),x(he,ne)),Ae={};p.forEach(["u","d"],function(He){Fe="u"===He?ne:p.values(ne).reverse(),p.forEach(["l","r"],function(nt){"r"===nt&&(Fe=p.map(Fe,function(pt){return p.values(pt).reverse()}));var et=("u"===He?he.predecessors:he.successors).bind(he),ot=F(0,Fe,xe,et),lt=H(he,Fe,ot.root,ot.align,"r"===nt);"r"===nt&&(lt=p.mapValues(lt,function(pt){return-pt})),Ae[He+nt]=lt})});var C=X(he,Ae);return te(Ae,C),fe(Ae,he.graph().align)},findType1Conflicts:S,findType2Conflicts:x,addConflict:k,hasConflict:M,verticalAlignment:F,horizontalCompaction:H,alignCoordinates:te,findSmallestWidthAlignment:X,balance:fe}},78226:(E,W,f)=>{"use strict";var p=f(45760),g=f(11510),w=f(54058).positionX;E.exports=function S(A){(function x(A){var k=g.buildLayerMatrix(A),M=A.graph().ranksep,F=0;p.forEach(k,function(H){var O=p.max(p.map(H,function(X){return A.node(X).height}));p.forEach(H,function(X){A.node(X).y=F+O/2}),F+=O+M})})(A=g.asNonCompoundGraph(A)),p.forEach(w(A),function(k,M){A.node(M).x=k})}},96632:(E,W,f)=>{"use strict";var p=f(45760),g=f(36456).Graph,w=f(1916).slack;function x(M,F){return p.forEach(M.nodes(),function H(O){p.forEach(F.nodeEdges(O),function(X){var te=X.v,fe=O===te?X.w:te;!M.hasNode(fe)&&!w(F,X)&&(M.setNode(fe,{}),M.setEdge(O,fe,{}),H(fe))})}),M.nodeCount()}function A(M,F){return p.minBy(F.edges(),function(H){if(M.hasNode(H.v)!==M.hasNode(H.w))return w(F,H)})}function k(M,F,H){p.forEach(M.nodes(),function(O){F.node(O).rank+=H})}E.exports=function S(M){var X,te,F=new g({directed:!1}),H=M.nodes()[0],O=M.nodeCount();for(F.setNode(H,{});x(F,M)<O;)X=A(F,M),te=F.hasNode(X.v)?w(M,X):-w(M,X),k(F,M,te);return F}},94124:(E,W,f)=>{"use strict";var g=f(1916).longestPath,w=f(96632),S=f(63804);E.exports=function x(F){switch(F.graph().ranker){case"network-simplex":default:!function M(F){S(F)}(F);break;case"tight-tree":!function k(F){g(F),w(F)}(F);break;case"longest-path":A(F)}};var A=g},63804:(E,W,f)=>{"use strict";var p=f(45760),g=f(96632),w=f(1916).slack,S=f(1916).longestPath,x=f(36456).alg.preorder,A=f(36456).alg.postorder,k=f(11510).simplify;function M(xe){xe=k(xe),S(xe);var Fe,Ae=g(xe);for(X(Ae),F(Ae,xe);Fe=fe(Ae);)se(Ae,xe,Fe,i(Ae,xe,Fe))}function F(xe,Ae){var Fe=A(xe,xe.nodes());Fe=Fe.slice(0,Fe.length-1),p.forEach(Fe,function(C){!function H(xe,Ae,Fe){var C=xe.node(Fe);xe.edge(Fe,C.parent).cutvalue=O(xe,Ae,Fe)}(xe,Ae,C)})}function O(xe,Ae,Fe){var He=xe.node(Fe).parent,nt=!0,et=Ae.edge(Fe,He),ot=0;return et||(nt=!1,et=Ae.edge(He,Fe)),ot=et.weight,p.forEach(Ae.nodeEdges(Fe),function(lt){var pt=lt.v===Fe,At=pt?lt.w:lt.v;if(At!==He){var Xt=pt===nt,$t=Ae.edge(lt).weight;if(ot+=Xt?$t:-$t,function he(xe,Ae,Fe){return xe.hasEdge(Ae,Fe)}(xe,Fe,At)){var nn=xe.edge(Fe,At).cutvalue;ot+=Xt?-nn:nn}}}),ot}function X(xe,Ae){arguments.length<2&&(Ae=xe.nodes()[0]),te(xe,{},1,Ae)}function te(xe,Ae,Fe,C,He){var nt=Fe,et=xe.node(C);return Ae[C]=!0,p.forEach(xe.neighbors(C),function(ot){p.has(Ae,ot)||(Fe=te(xe,Ae,Fe,ot,C))}),et.low=nt,et.lim=Fe++,He?et.parent=He:delete et.parent,Fe}function fe(xe){return p.find(xe.edges(),function(Ae){return xe.edge(Ae).cutvalue<0})}function i(xe,Ae,Fe){var C=Fe.v,He=Fe.w;Ae.hasEdge(C,He)||(C=Fe.w,He=Fe.v);var nt=xe.node(C),et=xe.node(He),ot=nt,lt=!1;nt.lim>et.lim&&(ot=et,lt=!0);var pt=p.filter(Ae.edges(),function(At){return lt===ne(0,xe.node(At.v),ot)&&lt!==ne(0,xe.node(At.w),ot)});return p.minBy(pt,function(At){return w(Ae,At)})}function se(xe,Ae,Fe,C){xe.removeEdge(Fe.v,Fe.w),xe.setEdge(C.v,C.w,{}),X(xe),F(xe,Ae),function ve(xe,Ae){var Fe=p.find(xe.nodes(),function(He){return!Ae.node(He).parent}),C=x(xe,Fe);C=C.slice(1),p.forEach(C,function(He){var nt=xe.node(He).parent,et=Ae.edge(He,nt),ot=!1;et||(et=Ae.edge(nt,He),ot=!0),Ae.node(He).rank=Ae.node(nt).rank+(ot?et.minlen:-et.minlen)})}(xe,Ae)}function ne(xe,Ae,Fe){return Fe.low<=Ae.lim&&Ae.lim<=Fe.lim}E.exports=M,M.initLowLimValues=X,M.initCutValues=F,M.calcCutValue=O,M.leaveEdge=fe,M.enterEdge=i,M.exchangeEdges=se},1916:(E,W,f)=>{"use strict";var p=f(45760);E.exports={longestPath:function g(S){var x={};p.forEach(S.sources(),function A(k){var M=S.node(k);if(p.has(x,k))return M.rank;x[k]=!0;var F=p.min(p.map(S.outEdges(k),function(H){return A(H.w)-S.edge(H).minlen}));return(F===Number.POSITIVE_INFINITY||null==F)&&(F=0),M.rank=F})},slack:function w(S,x){return S.node(x.w).rank-S.node(x.v).rank-S.edge(x).minlen}}},11510:(E,W,f)=>{"use strict";var p=f(45760),g=f(36456).Graph;function w(ve,he,ne,xe){var Ae;do{Ae=p.uniqueId(xe)}while(ve.hasNode(Ae));return ne.dummy=he,ve.setNode(Ae,ne),Ae}function te(ve){return p.max(p.map(ve.nodes(),function(he){var ne=ve.node(he).rank;if(!p.isUndefined(ne))return ne}))}E.exports={addDummyNode:w,simplify:function S(ve){var he=(new g).setGraph(ve.graph());return p.forEach(ve.nodes(),function(ne){he.setNode(ne,ve.node(ne))}),p.forEach(ve.edges(),function(ne){var xe=he.edge(ne.v,ne.w)||{weight:0,minlen:1},Ae=ve.edge(ne);he.setEdge(ne.v,ne.w,{weight:xe.weight+Ae.weight,minlen:Math.max(xe.minlen,Ae.minlen)})}),he},asNonCompoundGraph:function x(ve){var he=new g({multigraph:ve.isMultigraph()}).setGraph(ve.graph());return p.forEach(ve.nodes(),function(ne){ve.children(ne).length||he.setNode(ne,ve.node(ne))}),p.forEach(ve.edges(),function(ne){he.setEdge(ne,ve.edge(ne))}),he},successorWeights:function A(ve){var he=p.map(ve.nodes(),function(ne){var xe={};return p.forEach(ve.outEdges(ne),function(Ae){xe[Ae.w]=(xe[Ae.w]||0)+ve.edge(Ae).weight}),xe});return p.zipObject(ve.nodes(),he)},predecessorWeights:function k(ve){var he=p.map(ve.nodes(),function(ne){var xe={};return p.forEach(ve.inEdges(ne),function(Ae){xe[Ae.v]=(xe[Ae.v]||0)+ve.edge(Ae).weight}),xe});return p.zipObject(ve.nodes(),he)},intersectRect:function M(ve,he){var nt,et,ne=ve.x,xe=ve.y,Ae=he.x-ne,Fe=he.y-xe,C=ve.width/2,He=ve.height/2;if(!Ae&&!Fe)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(Fe)*C>Math.abs(Ae)*He?(Fe<0&&(He=-He),nt=He*Ae/Fe,et=He):(Ae<0&&(C=-C),nt=C,et=C*Fe/Ae),{x:ne+nt,y:xe+et}},buildLayerMatrix:function F(ve){var he=p.map(p.range(te(ve)+1),function(){return[]});return p.forEach(ve.nodes(),function(ne){var xe=ve.node(ne),Ae=xe.rank;p.isUndefined(Ae)||(he[Ae][xe.order]=ne)}),he},normalizeRanks:function H(ve){var he=p.min(p.map(ve.nodes(),function(ne){return ve.node(ne).rank}));p.forEach(ve.nodes(),function(ne){var xe=ve.node(ne);p.has(xe,"rank")&&(xe.rank-=he)})},removeEmptyRanks:function O(ve){var he=p.min(p.map(ve.nodes(),function(Fe){return ve.node(Fe).rank})),ne=[];p.forEach(ve.nodes(),function(Fe){var C=ve.node(Fe).rank-he;ne[C]||(ne[C]=[]),ne[C].push(Fe)});var xe=0,Ae=ve.graph().nodeRankFactor;p.forEach(ne,function(Fe,C){p.isUndefined(Fe)&&C%Ae!=0?--xe:xe&&p.forEach(Fe,function(He){ve.node(He).rank+=xe})})},addBorderNode:function X(ve,he,ne,xe){var Ae={width:0,height:0};return arguments.length>=4&&(Ae.rank=ne,Ae.order=xe),w(ve,"border",Ae,he)},maxRank:te,partition:function fe(ve,he){var ne={lhs:[],rhs:[]};return p.forEach(ve,function(xe){he(xe)?ne.lhs.push(xe):ne.rhs.push(xe)}),ne},time:function i(ve,he){var ne=p.now();try{return he()}finally{console.log(ve+" time: "+(p.now()-ne)+"ms")}},notime:function se(ve,he){return he()}}},28126:E=>{E.exports="0.8.5"},85510:(E,W,f)=>{var p=f(51838);E.exports={Graph:p.Graph,json:f(21088),alg:f(83430),version:p.version}},86730:(E,W,f)=>{var p=f(79138);E.exports=function g(w){var A,S={},x=[];function k(M){p.has(S,M)||(S[M]=!0,A.push(M),p.each(w.successors(M),k),p.each(w.predecessors(M),k))}return p.each(w.nodes(),function(M){A=[],k(M),A.length&&x.push(A)}),x}},22163:(E,W,f)=>{var p=f(79138);function w(S,x,A,k,M,F){p.has(k,x)||(k[x]=!0,A||F.push(x),p.each(M(x),function(H){w(S,H,A,k,M,F)}),A&&F.push(x))}E.exports=function g(S,x,A){p.isArray(x)||(x=[x]);var k=(S.isDirected()?S.successors:S.neighbors).bind(S),M=[],F={};return p.each(x,function(H){if(!S.hasNode(H))throw new Error("Graph does not have node: "+H);w(S,H,"post"===A,F,k,M)}),M}},25668:(E,W,f)=>{var p=f(61718),g=f(79138);E.exports=function w(S,x,A){return g.transform(S.nodes(),function(k,M){k[M]=p(S,M,x,A)},{})}},61718:(E,W,f)=>{var p=f(79138),g=f(31919);E.exports=function S(A,k,M,F){return function x(A,k,M,F){var X,te,H={},O=new g,fe=function(i){var se=i.v!==X?i.v:i.w,ve=H[se],he=M(i),ne=te.distance+he;if(he<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+i+" Weight: "+he);ne<ve.distance&&(ve.distance=ne,ve.predecessor=X,O.decrease(se,ne))};for(A.nodes().forEach(function(i){var se=i===k?0:Number.POSITIVE_INFINITY;H[i]={distance:se},O.add(i,se)});O.size()>0&&(X=O.removeMin(),(te=H[X]).distance!==Number.POSITIVE_INFINITY);)F(X).forEach(fe);return H}(A,String(k),M||w,F||function(H){return A.outEdges(H)})};var w=p.constant(1)},9611:(E,W,f)=>{var p=f(79138),g=f(73585);E.exports=function w(S){return p.filter(g(S),function(x){return x.length>1||1===x.length&&S.hasEdge(x[0],x[0])})}},22881:(E,W,f)=>{var p=f(79138);E.exports=function w(x,A,k){return function S(x,A,k){var M={},F=x.nodes();return F.forEach(function(H){M[H]={},M[H][H]={distance:0},F.forEach(function(O){H!==O&&(M[H][O]={distance:Number.POSITIVE_INFINITY})}),k(H).forEach(function(O){var X=O.v===H?O.w:O.v,te=A(O);M[H][X]={distance:te,predecessor:H}})}),F.forEach(function(H){var O=M[H];F.forEach(function(X){var te=M[X];F.forEach(function(fe){var se=O[fe],ve=te[fe],he=te[H].distance+se.distance;he<ve.distance&&(ve.distance=he,ve.predecessor=se.predecessor)})})}),M}(x,A||g,k||function(M){return x.outEdges(M)})};var g=p.constant(1)},83430:(E,W,f)=>{E.exports={components:f(86730),dijkstra:f(61718),dijkstraAll:f(25668),findCycles:f(9611),floydWarshall:f(22881),isAcyclic:f(9366),postorder:f(46694),preorder:f(5330),prim:f(46823),tarjan:f(73585),topsort:f(52180)}},9366:(E,W,f)=>{var p=f(52180);E.exports=function g(w){try{p(w)}catch(S){if(S instanceof p.CycleException)return!1;throw S}return!0}},46694:(E,W,f)=>{var p=f(22163);E.exports=function g(w,S){return p(w,S,"post")}},5330:(E,W,f)=>{var p=f(22163);E.exports=function g(w,S){return p(w,S,"pre")}},46823:(E,W,f)=>{var p=f(79138),g=f(66568),w=f(31919);E.exports=function S(x,A){var H,k=new g,M={},F=new w;function O(te){var fe=te.v===H?te.w:te.v,i=F.priority(fe);if(void 0!==i){var se=A(te);se<i&&(M[fe]=H,F.decrease(fe,se))}}if(0===x.nodeCount())return k;p.each(x.nodes(),function(te){F.add(te,Number.POSITIVE_INFINITY),k.setNode(te)}),F.decrease(x.nodes()[0],0);for(var X=!1;F.size()>0;){if(H=F.removeMin(),p.has(M,H))k.setEdge(H,M[H]);else{if(X)throw new Error("Input graph is not connected: "+x);X=!0}x.nodeEdges(H).forEach(O)}return k}},73585:(E,W,f)=>{var p=f(79138);E.exports=function g(w){var S=0,x=[],A={},k=[];function M(F){var H=A[F]={onStack:!0,lowlink:S,index:S++};if(x.push(F),w.successors(F).forEach(function(te){p.has(A,te)?A[te].onStack&&(H.lowlink=Math.min(H.lowlink,A[te].index)):(M(te),H.lowlink=Math.min(H.lowlink,A[te].lowlink))}),H.lowlink===H.index){var X,O=[];do{X=x.pop(),A[X].onStack=!1,O.push(X)}while(F!==X);k.push(O)}}return w.nodes().forEach(function(F){p.has(A,F)||M(F)}),k}},52180:(E,W,f)=>{var p=f(79138);function g(S){var x={},A={},k=[];if(p.each(S.sinks(),function M(F){if(p.has(A,F))throw new w;p.has(x,F)||(A[F]=!0,x[F]=!0,p.each(S.predecessors(F),M),delete A[F],k.push(F))}),p.size(x)!==S.nodeCount())throw new w;return k}function w(){}E.exports=g,g.CycleException=w,w.prototype=new Error},31919:(E,W,f)=>{var p=f(79138);function g(){this._arr=[],this._keyIndices={}}E.exports=g,g.prototype.size=function(){return this._arr.length},g.prototype.keys=function(){return this._arr.map(function(w){return w.key})},g.prototype.has=function(w){return p.has(this._keyIndices,w)},g.prototype.priority=function(w){var S=this._keyIndices[w];if(void 0!==S)return this._arr[S].priority},g.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},g.prototype.add=function(w,S){var x=this._keyIndices;if(w=String(w),!p.has(x,w)){var A=this._arr,k=A.length;return x[w]=k,A.push({key:w,priority:S}),this._decrease(k),!0}return!1},g.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var w=this._arr.pop();return delete this._keyIndices[w.key],this._heapify(0),w.key},g.prototype.decrease=function(w,S){var x=this._keyIndices[w];if(S>this._arr[x].priority)throw new Error("New priority is greater than current priority. Key: "+w+" Old: "+this._arr[x].priority+" New: "+S);this._arr[x].priority=S,this._decrease(x)},g.prototype._heapify=function(w){var S=this._arr,x=2*w,A=x+1,k=w;x<S.length&&(k=S[x].priority<S[k].priority?x:k,A<S.length&&(k=S[A].priority<S[k].priority?A:k),k!==w&&(this._swap(w,k),this._heapify(k)))},g.prototype._decrease=function(w){for(var A,S=this._arr,x=S[w].priority;0!==w&&!(S[A=w>>1].priority<x);)this._swap(w,A),w=A},g.prototype._swap=function(w,S){var x=this._arr,A=this._keyIndices,k=x[w],M=x[S];x[w]=M,x[S]=k,A[M.key]=w,A[k.key]=S}},66568:(E,W,f)=>{"use strict";var p=f(79138);E.exports=x;var w="\0";function x(O){this._isDirected=!p.has(O,"directed")||O.directed,this._isMultigraph=!!p.has(O,"multigraph")&&O.multigraph,this._isCompound=!!p.has(O,"compound")&&O.compound,this._label=void 0,this._defaultNodeLabelFn=p.constant(void 0),this._defaultEdgeLabelFn=p.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[w]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function A(O,X){O[X]?O[X]++:O[X]=1}function k(O,X){--O[X]||delete O[X]}function M(O,X,te,fe){var i=""+X,se=""+te;if(!O&&i>se){var ve=i;i=se,se=ve}return i+"\x01"+se+"\x01"+(p.isUndefined(fe)?"\0":fe)}function F(O,X,te,fe){var i=""+X,se=""+te;if(!O&&i>se){var ve=i;i=se,se=ve}var he={v:i,w:se};return fe&&(he.name=fe),he}function H(O,X){return M(O,X.v,X.w,X.name)}x.prototype._nodeCount=0,x.prototype._edgeCount=0,x.prototype.isDirected=function(){return this._isDirected},x.prototype.isMultigraph=function(){return this._isMultigraph},x.prototype.isCompound=function(){return this._isCompound},x.prototype.setGraph=function(O){return this._label=O,this},x.prototype.graph=function(){return this._label},x.prototype.setDefaultNodeLabel=function(O){return p.isFunction(O)||(O=p.constant(O)),this._defaultNodeLabelFn=O,this},x.prototype.nodeCount=function(){return this._nodeCount},x.prototype.nodes=function(){return p.keys(this._nodes)},x.prototype.sources=function(){var O=this;return p.filter(this.nodes(),function(X){return p.isEmpty(O._in[X])})},x.prototype.sinks=function(){var O=this;return p.filter(this.nodes(),function(X){return p.isEmpty(O._out[X])})},x.prototype.setNodes=function(O,X){var te=arguments,fe=this;return p.each(O,function(i){te.length>1?fe.setNode(i,X):fe.setNode(i)}),this},x.prototype.setNode=function(O,X){return p.has(this._nodes,O)?(arguments.length>1&&(this._nodes[O]=X),this):(this._nodes[O]=arguments.length>1?X:this._defaultNodeLabelFn(O),this._isCompound&&(this._parent[O]=w,this._children[O]={},this._children[w][O]=!0),this._in[O]={},this._preds[O]={},this._out[O]={},this._sucs[O]={},++this._nodeCount,this)},x.prototype.node=function(O){return this._nodes[O]},x.prototype.hasNode=function(O){return p.has(this._nodes,O)},x.prototype.removeNode=function(O){var X=this;if(p.has(this._nodes,O)){var te=function(fe){X.removeEdge(X._edgeObjs[fe])};delete this._nodes[O],this._isCompound&&(this._removeFromParentsChildList(O),delete this._parent[O],p.each(this.children(O),function(fe){X.setParent(fe)}),delete this._children[O]),p.each(p.keys(this._in[O]),te),delete this._in[O],delete this._preds[O],p.each(p.keys(this._out[O]),te),delete this._out[O],delete this._sucs[O],--this._nodeCount}return this},x.prototype.setParent=function(O,X){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(p.isUndefined(X))X=w;else{for(var te=X+="";!p.isUndefined(te);te=this.parent(te))if(te===O)throw new Error("Setting "+X+" as parent of "+O+" would create a cycle");this.setNode(X)}return this.setNode(O),this._removeFromParentsChildList(O),this._parent[O]=X,this._children[X][O]=!0,this},x.prototype._removeFromParentsChildList=function(O){delete this._children[this._parent[O]][O]},x.prototype.parent=function(O){if(this._isCompound){var X=this._parent[O];if(X!==w)return X}},x.prototype.children=function(O){if(p.isUndefined(O)&&(O=w),this._isCompound){var X=this._children[O];if(X)return p.keys(X)}else{if(O===w)return this.nodes();if(this.hasNode(O))return[]}},x.prototype.predecessors=function(O){var X=this._preds[O];if(X)return p.keys(X)},x.prototype.successors=function(O){var X=this._sucs[O];if(X)return p.keys(X)},x.prototype.neighbors=function(O){var X=this.predecessors(O);if(X)return p.union(X,this.successors(O))},x.prototype.isLeaf=function(O){return 0===(this.isDirected()?this.successors(O):this.neighbors(O)).length},x.prototype.filterNodes=function(O){var X=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});X.setGraph(this.graph());var te=this;p.each(this._nodes,function(se,ve){O(ve)&&X.setNode(ve,se)}),p.each(this._edgeObjs,function(se){X.hasNode(se.v)&&X.hasNode(se.w)&&X.setEdge(se,te.edge(se))});var fe={};function i(se){var ve=te.parent(se);return void 0===ve||X.hasNode(ve)?(fe[se]=ve,ve):ve in fe?fe[ve]:i(ve)}return this._isCompound&&p.each(X.nodes(),function(se){X.setParent(se,i(se))}),X},x.prototype.setDefaultEdgeLabel=function(O){return p.isFunction(O)||(O=p.constant(O)),this._defaultEdgeLabelFn=O,this},x.prototype.edgeCount=function(){return this._edgeCount},x.prototype.edges=function(){return p.values(this._edgeObjs)},x.prototype.setPath=function(O,X){var te=this,fe=arguments;return p.reduce(O,function(i,se){return fe.length>1?te.setEdge(i,se,X):te.setEdge(i,se),se}),this},x.prototype.setEdge=function(){var O,X,te,fe,i=!1,se=arguments[0];"object"==typeof se&&null!==se&&"v"in se?(O=se.v,X=se.w,te=se.name,2===arguments.length&&(fe=arguments[1],i=!0)):(O=se,X=arguments[1],te=arguments[3],arguments.length>2&&(fe=arguments[2],i=!0)),O=""+O,X=""+X,p.isUndefined(te)||(te=""+te);var ve=M(this._isDirected,O,X,te);if(p.has(this._edgeLabels,ve))return i&&(this._edgeLabels[ve]=fe),this;if(!p.isUndefined(te)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(O),this.setNode(X),this._edgeLabels[ve]=i?fe:this._defaultEdgeLabelFn(O,X,te);var he=F(this._isDirected,O,X,te);return O=he.v,X=he.w,Object.freeze(he),this._edgeObjs[ve]=he,A(this._preds[X],O),A(this._sucs[O],X),this._in[X][ve]=he,this._out[O][ve]=he,this._edgeCount++,this},x.prototype.edge=function(O,X,te){var fe=1===arguments.length?H(this._isDirected,arguments[0]):M(this._isDirected,O,X,te);return this._edgeLabels[fe]},x.prototype.hasEdge=function(O,X,te){var fe=1===arguments.length?H(this._isDirected,arguments[0]):M(this._isDirected,O,X,te);return p.has(this._edgeLabels,fe)},x.prototype.removeEdge=function(O,X,te){var fe=1===arguments.length?H(this._isDirected,arguments[0]):M(this._isDirected,O,X,te),i=this._edgeObjs[fe];return i&&(O=i.v,X=i.w,delete this._edgeLabels[fe],delete this._edgeObjs[fe],k(this._preds[X],O),k(this._sucs[O],X),delete this._in[X][fe],delete this._out[O][fe],this._edgeCount--),this},x.prototype.inEdges=function(O,X){var te=this._in[O];if(te){var fe=p.values(te);return X?p.filter(fe,function(i){return i.v===X}):fe}},x.prototype.outEdges=function(O,X){var te=this._out[O];if(te){var fe=p.values(te);return X?p.filter(fe,function(i){return i.w===X}):fe}},x.prototype.nodeEdges=function(O,X){var te=this.inEdges(O,X);if(te)return te.concat(this.outEdges(O,X))}},51838:(E,W,f)=>{E.exports={Graph:f(66568),version:f(75089)}},21088:(E,W,f)=>{var p=f(79138),g=f(66568);function S(k){return p.map(k.nodes(),function(M){var F=k.node(M),H=k.parent(M),O={v:M};return p.isUndefined(F)||(O.value=F),p.isUndefined(H)||(O.parent=H),O})}function x(k){return p.map(k.edges(),function(M){var F=k.edge(M),H={v:M.v,w:M.w};return p.isUndefined(M.name)||(H.name=M.name),p.isUndefined(F)||(H.value=F),H})}E.exports={write:function w(k){var M={options:{directed:k.isDirected(),multigraph:k.isMultigraph(),compound:k.isCompound()},nodes:S(k),edges:x(k)};return p.isUndefined(k.graph())||(M.value=p.clone(k.graph())),M},read:function A(k){var M=new g(k.options).setGraph(k.value);return p.each(k.nodes,function(F){M.setNode(F.v,F.value),F.parent&&M.setParent(F.v,F.parent)}),p.each(k.edges,function(F){M.setEdge({v:F.v,w:F.w,name:F.name},F.value)}),M}}},79138:(E,W,f)=>{var p;try{p={clone:f(11094),constant:f(76684),each:f(35474),filter:f(35281),has:f(54842),isArray:f(21503),isEmpty:f(71973),isFunction:f(75946),isUndefined:f(34235),keys:f(118),map:f(19984),reduce:f(81337),size:f(55637),transform:f(89416),union:f(68921),values:f(90377)}}catch(g){}p||(p=window._),E.exports=p},75089:E=>{E.exports="2.1.8"},58259:function(E,W){var p;!function(g,w){"use strict";"object"==typeof E.exports?E.exports=g.document?w(g,!0):function(S){if(!S.document)throw new Error("jQuery requires a window with a document");return w(S)}:w(g)}("undefined"!=typeof window?window:this,function(g,w){"use strict";var S=[],x=Object.getPrototypeOf,A=S.slice,k=S.flat?function(l){return S.flat.call(l)}:function(l){return S.concat.apply([],l)},M=S.push,F=S.indexOf,H={},O=H.toString,X=H.hasOwnProperty,te=X.toString,fe=te.call(Object),i={},se=function(d){return"function"==typeof d&&"number"!=typeof d.nodeType&&"function"!=typeof d.item},ve=function(d){return null!=d&&d===d.window},he=g.document,ne={type:!0,src:!0,nonce:!0,noModule:!0};function xe(l,d,y){var _,R,D=(y=y||he).createElement("script");if(D.text=l,d)for(_ in ne)(R=d[_]||d.getAttribute&&d.getAttribute(_))&&D.setAttribute(_,R);y.head.appendChild(D).parentNode.removeChild(D)}function Ae(l){return null==l?l+"":"object"==typeof l||"function"==typeof l?H[O.call(l)]||"object":typeof l}var C=function(l,d){return new C.fn.init(l,d)};function He(l){var d=!!l&&"length"in l&&l.length,y=Ae(l);return!se(l)&&!ve(l)&&("array"===y||0===d||"number"==typeof d&&d>0&&d-1 in l)}C.fn=C.prototype={jquery:"3.6.0",constructor:C,length:0,toArray:function(){return A.call(this)},get:function(l){return null==l?A.call(this):l<0?this[l+this.length]:this[l]},pushStack:function(l){var d=C.merge(this.constructor(),l);return d.prevObject=this,d},each:function(l){return C.each(this,l)},map:function(l){return this.pushStack(C.map(this,function(d,y){return l.call(d,y,d)}))},slice:function(){return this.pushStack(A.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(C.grep(this,function(l,d){return(d+1)%2}))},odd:function(){return this.pushStack(C.grep(this,function(l,d){return d%2}))},eq:function(l){var d=this.length,y=+l+(l<0?d:0);return this.pushStack(y>=0&&y<d?[this[y]]:[])},end:function(){return this.prevObject||this.constructor()},push:M,sort:S.sort,splice:S.splice},C.extend=C.fn.extend=function(){var l,d,y,_,R,D,Y=arguments[0]||{},le=1,ue=arguments.length,Ie=!1;for("boolean"==typeof Y&&(Ie=Y,Y=arguments[le]||{},le++),"object"!=typeof Y&&!se(Y)&&(Y={}),le===ue&&(Y=this,le--);le<ue;le++)if(null!=(l=arguments[le]))for(d in l)_=l[d],"__proto__"!==d&&Y!==_&&(Ie&&_&&(C.isPlainObject(_)||(R=Array.isArray(_)))?(y=Y[d],D=R&&!Array.isArray(y)?[]:R||C.isPlainObject(y)?y:{},R=!1,Y[d]=C.extend(Ie,D,_)):void 0!==_&&(Y[d]=_));return Y},C.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(l){throw new Error(l)},noop:function(){},isPlainObject:function(l){var d,y;return!(!l||"[object Object]"!==O.call(l)||(d=x(l))&&("function"!=typeof(y=X.call(d,"constructor")&&d.constructor)||te.call(y)!==fe))},isEmptyObject:function(l){var d;for(d in l)return!1;return!0},globalEval:function(l,d,y){xe(l,{nonce:d&&d.nonce},y)},each:function(l,d){var y,_=0;if(He(l))for(y=l.length;_<y&&!1!==d.call(l[_],_,l[_]);_++);else for(_ in l)if(!1===d.call(l[_],_,l[_]))break;return l},makeArray:function(l,d){var y=d||[];return null!=l&&(He(Object(l))?C.merge(y,"string"==typeof l?[l]:l):M.call(y,l)),y},inArray:function(l,d,y){return null==d?-1:F.call(d,l,y)},merge:function(l,d){for(var y=+d.length,_=0,R=l.length;_<y;_++)l[R++]=d[_];return l.length=R,l},grep:function(l,d,y){for(var R=[],D=0,Y=l.length,le=!y;D<Y;D++)!d(l[D],D)!==le&&R.push(l[D]);return R},map:function(l,d,y){var _,R,D=0,Y=[];if(He(l))for(_=l.length;D<_;D++)null!=(R=d(l[D],D,y))&&Y.push(R);else for(D in l)null!=(R=d(l[D],D,y))&&Y.push(R);return k(Y)},guid:1,support:i}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=S[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(l,d){H["[object "+d+"]"]=d.toLowerCase()});var nt=function(l){var d,y,_,R,D,Y,le,ue,Ie,Ve,rt,Re,$e,St,Yt,Pt,qn,fr,je,Mt="sizzle"+1*new Date,kt=l.document,Gr=0,bn=0,Xn=Mr(),to=Mr(),Oa=Mr(),ti=Mr(),no=function(J,ce){return J===ce&&(rt=!0),0},ji={}.hasOwnProperty,Ir=[],wi=Ir.pop,di=Ir.push,ur=Ir.push,ca=Ir.slice,Ri=function(J,ce){for(var we=0,Ye=J.length;we<Ye;we++)if(J[we]===ce)return we;return-1},Ps="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ln="[\\x20\\t\\r\\n\\f]",ro="(?:\\\\[\\da-fA-F]{1,6}"+ln+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",rs="\\["+ln+"*("+ro+")(?:"+ln+"*([*^$|!~]?=)"+ln+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ro+"))|)"+ln+"*\\]",nu=":("+ro+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rs+")*)|.*)\\)|)",ru=new RegExp(ln+"+","g"),Zr=new RegExp("^"+ln+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ln+"+$","g"),As=new RegExp("^"+ln+"*,"+ln+"*"),Ra=new RegExp("^"+ln+"*([>+~]|"+ln+")"+ln+"*"),Zu=new RegExp(ln+"|>"),iu=new RegExp(nu),nc=new RegExp("^"+ro+"$"),io={ID:new RegExp("^#("+ro+")"),CLASS:new RegExp("^\\.("+ro+")"),TAG:new RegExp("^("+ro+"|[*])"),ATTR:new RegExp("^"+rs),PSEUDO:new RegExp("^"+nu),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ln+"*(even|odd|(([+-]|)(\\d*)n|)"+ln+"*(?:([+-]|)"+ln+"*(\\d+)|))"+ln+"*\\)|)","i"),bool:new RegExp("^(?:"+Ps+")$","i"),needsContext:new RegExp("^"+ln+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ln+"*((?:-\\d)?\\d*)"+ln+"*\\)|)(?=[^-]|$)","i")},Qu=/HTML$/i,ou=/^(?:input|select|textarea|button)$/i,qu=/^h\d$/i,oo=/^[^{]+\{\s*\[native \w/,Qr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,au=/[+~]/,Ui=new RegExp("\\\\[\\da-fA-F]{1,6}"+ln+"?|\\\\([^\\r\\n\\f])","g"),ao=function(J,ce){var we="0x"+J.slice(1)-65536;return ce||(we<0?String.fromCharCode(we+65536):String.fromCharCode(we>>10|55296,1023&we|56320))},wo=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,is=function(J,ce){return ce?"\0"===J?"\ufffd":J.slice(0,-1)+"\\"+J.charCodeAt(J.length-1).toString(16)+" ":"\\"+J},jt=function(){Re()},Si=wt(function(J){return!0===J.disabled&&"fieldset"===J.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{ur.apply(Ir=ca.call(kt.childNodes),kt.childNodes)}catch(J){ur={apply:Ir.length?function(ce,we){di.apply(ce,ca.call(we))}:function(ce,we){for(var Ye=ce.length,Ee=0;ce[Ye++]=we[Ee++];);ce.length=Ye-1}}}function Un(J,ce,we,Ye){var Ee,Ze,Ge,at,mt,vt,Tt,Et=ce&&ce.ownerDocument,on=ce?ce.nodeType:9;if(we=we||[],"string"!=typeof J||!J||1!==on&&9!==on&&11!==on)return we;if(!Ye&&(Re(ce),ce=ce||$e,Yt)){if(11!==on&&(mt=Qr.exec(J)))if(Ee=mt[1]){if(9===on){if(!(Ge=ce.getElementById(Ee)))return we;if(Ge.id===Ee)return we.push(Ge),we}else if(Et&&(Ge=Et.getElementById(Ee))&&je(ce,Ge)&&Ge.id===Ee)return we.push(Ge),we}else{if(mt[2])return ur.apply(we,ce.getElementsByTagName(J)),we;if((Ee=mt[3])&&y.getElementsByClassName&&ce.getElementsByClassName)return ur.apply(we,ce.getElementsByClassName(Ee)),we}if(y.qsa&&!ti[J+" "]&&(!Pt||!Pt.test(J))&&(1!==on||"object"!==ce.nodeName.toLowerCase())){if(Tt=J,Et=ce,1===on&&(Zu.test(J)||Ra.test(J))){for(((Et=au.test(J)&&me(ce.parentNode)||ce)!==ce||!y.scope)&&((at=ce.getAttribute("id"))?at=at.replace(wo,is):ce.setAttribute("id",at=Mt)),Ze=(vt=Y(J)).length;Ze--;)vt[Ze]=(at?"#"+at:":scope")+" "+Be(vt[Ze]);Tt=vt.join(",")}try{return ur.apply(we,Et.querySelectorAll(Tt)),we}catch(rn){ti(J,!0)}finally{at===Mt&&ce.removeAttribute("id")}}}return ue(J.replace(Zr,"$1"),ce,we,Ye)}function Mr(){var J=[];return function ce(we,Ye){return J.push(we+" ")>_.cacheLength&&delete ce[J.shift()],ce[we+" "]=Ye}}function dr(J){return J[Mt]=!0,J}function qr(J){var ce=$e.createElement("fieldset");try{return!!J(ce)}catch(we){return!1}finally{ce.parentNode&&ce.parentNode.removeChild(ce),ce=null}}function Ti(J,ce){for(var we=J.split("|"),Ye=we.length;Ye--;)_.attrHandle[we[Ye]]=ce}function hi(J,ce){var we=ce&&J,Ye=we&&1===J.nodeType&&1===ce.nodeType&&J.sourceIndex-ce.sourceIndex;if(Ye)return Ye;if(we)for(;we=we.nextSibling;)if(we===ce)return-1;return J?1:-1}function So(J){return function(ce){return"input"===ce.nodeName.toLowerCase()&&ce.type===J}}function os(J){return function(ce){var we=ce.nodeName.toLowerCase();return("input"===we||"button"===we)&&ce.type===J}}function Nn(J){return function(ce){return"form"in ce?ce.parentNode&&!1===ce.disabled?"label"in ce?"label"in ce.parentNode?ce.parentNode.disabled===J:ce.disabled===J:ce.isDisabled===J||ce.isDisabled!==!J&&Si(ce)===J:ce.disabled===J:"label"in ce&&ce.disabled===J}}function Jn(J){return dr(function(ce){return ce=+ce,dr(function(we,Ye){for(var Ee,Ze=J([],we.length,ce),Ge=Ze.length;Ge--;)we[Ee=Ze[Ge]]&&(we[Ee]=!(Ye[Ee]=we[Ee]))})})}function me(J){return J&&void 0!==J.getElementsByTagName&&J}for(d in y=Un.support={},D=Un.isXML=function(J){var we=J&&(J.ownerDocument||J).documentElement;return!Qu.test(J&&J.namespaceURI||we&&we.nodeName||"HTML")},Re=Un.setDocument=function(J){var ce,we,Ye=J?J.ownerDocument||J:kt;return Ye==$e||9!==Ye.nodeType||!Ye.documentElement||(St=($e=Ye).documentElement,Yt=!D($e),kt!=$e&&(we=$e.defaultView)&&we.top!==we&&(we.addEventListener?we.addEventListener("unload",jt,!1):we.attachEvent&&we.attachEvent("onunload",jt)),y.scope=qr(function(Ee){return St.appendChild(Ee).appendChild($e.createElement("div")),void 0!==Ee.querySelectorAll&&!Ee.querySelectorAll(":scope fieldset div").length}),y.attributes=qr(function(Ee){return Ee.className="i",!Ee.getAttribute("className")}),y.getElementsByTagName=qr(function(Ee){return Ee.appendChild($e.createComment("")),!Ee.getElementsByTagName("*").length}),y.getElementsByClassName=oo.test($e.getElementsByClassName),y.getById=qr(function(Ee){return St.appendChild(Ee).id=Mt,!$e.getElementsByName||!$e.getElementsByName(Mt).length}),y.getById?(_.filter.ID=function(Ee){var Ze=Ee.replace(Ui,ao);return function(Ge){return Ge.getAttribute("id")===Ze}},_.find.ID=function(Ee,Ze){if(void 0!==Ze.getElementById&&Yt){var Ge=Ze.getElementById(Ee);return Ge?[Ge]:[]}}):(_.filter.ID=function(Ee){var Ze=Ee.replace(Ui,ao);return function(Ge){var at=void 0!==Ge.getAttributeNode&&Ge.getAttributeNode("id");return at&&at.value===Ze}},_.find.ID=function(Ee,Ze){if(void 0!==Ze.getElementById&&Yt){var Ge,at,mt,vt=Ze.getElementById(Ee);if(vt){if((Ge=vt.getAttributeNode("id"))&&Ge.value===Ee)return[vt];for(mt=Ze.getElementsByName(Ee),at=0;vt=mt[at++];)if((Ge=vt.getAttributeNode("id"))&&Ge.value===Ee)return[vt]}return[]}}),_.find.TAG=y.getElementsByTagName?function(Ee,Ze){return void 0!==Ze.getElementsByTagName?Ze.getElementsByTagName(Ee):y.qsa?Ze.querySelectorAll(Ee):void 0}:function(Ee,Ze){var Ge,at=[],mt=0,vt=Ze.getElementsByTagName(Ee);if("*"===Ee){for(;Ge=vt[mt++];)1===Ge.nodeType&&at.push(Ge);return at}return vt},_.find.CLASS=y.getElementsByClassName&&function(Ee,Ze){if(void 0!==Ze.getElementsByClassName&&Yt)return Ze.getElementsByClassName(Ee)},qn=[],Pt=[],(y.qsa=oo.test($e.querySelectorAll))&&(qr(function(Ee){var Ze;St.appendChild(Ee).innerHTML="<a id='"+Mt+"'></a><select id='"+Mt+"-\r\\' msallowcapture=''><option selected=''></option></select>",Ee.querySelectorAll("[msallowcapture^='']").length&&Pt.push("[*^$]="+ln+"*(?:''|\"\")"),Ee.querySelectorAll("[selected]").length||Pt.push("\\["+ln+"*(?:value|"+Ps+")"),Ee.querySelectorAll("[id~="+Mt+"-]").length||Pt.push("~="),(Ze=$e.createElement("input")).setAttribute("name",""),Ee.appendChild(Ze),Ee.querySelectorAll("[name='']").length||Pt.push("\\["+ln+"*name"+ln+"*="+ln+"*(?:''|\"\")"),Ee.querySelectorAll(":checked").length||Pt.push(":checked"),Ee.querySelectorAll("a#"+Mt+"+*").length||Pt.push(".#.+[+~]"),Ee.querySelectorAll("\\\f"),Pt.push("[\\r\\n\\f]")}),qr(function(Ee){Ee.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var Ze=$e.createElement("input");Ze.setAttribute("type","hidden"),Ee.appendChild(Ze).setAttribute("name","D"),Ee.querySelectorAll("[name=d]").length&&Pt.push("name"+ln+"*[*^$|!~]?="),2!==Ee.querySelectorAll(":enabled").length&&Pt.push(":enabled",":disabled"),St.appendChild(Ee).disabled=!0,2!==Ee.querySelectorAll(":disabled").length&&Pt.push(":enabled",":disabled"),Ee.querySelectorAll("*,:x"),Pt.push(",.*:")})),(y.matchesSelector=oo.test(fr=St.matches||St.webkitMatchesSelector||St.mozMatchesSelector||St.oMatchesSelector||St.msMatchesSelector))&&qr(function(Ee){y.disconnectedMatch=fr.call(Ee,"*"),fr.call(Ee,"[s!='']:x"),qn.push("!=",nu)}),Pt=Pt.length&&new RegExp(Pt.join("|")),qn=qn.length&&new RegExp(qn.join("|")),ce=oo.test(St.compareDocumentPosition),je=ce||oo.test(St.contains)?function(Ee,Ze){var Ge=9===Ee.nodeType?Ee.documentElement:Ee,at=Ze&&Ze.parentNode;return Ee===at||!(!at||1!==at.nodeType||!(Ge.contains?Ge.contains(at):Ee.compareDocumentPosition&&16&Ee.compareDocumentPosition(at)))}:function(Ee,Ze){if(Ze)for(;Ze=Ze.parentNode;)if(Ze===Ee)return!0;return!1},no=ce?function(Ee,Ze){if(Ee===Ze)return rt=!0,0;var Ge=!Ee.compareDocumentPosition-!Ze.compareDocumentPosition;return Ge||(1&(Ge=(Ee.ownerDocument||Ee)==(Ze.ownerDocument||Ze)?Ee.compareDocumentPosition(Ze):1)||!y.sortDetached&&Ze.compareDocumentPosition(Ee)===Ge?Ee==$e||Ee.ownerDocument==kt&&je(kt,Ee)?-1:Ze==$e||Ze.ownerDocument==kt&&je(kt,Ze)?1:Ve?Ri(Ve,Ee)-Ri(Ve,Ze):0:4&Ge?-1:1)}:function(Ee,Ze){if(Ee===Ze)return rt=!0,0;var Ge,at=0,mt=Ee.parentNode,vt=Ze.parentNode,Tt=[Ee],Et=[Ze];if(!mt||!vt)return Ee==$e?-1:Ze==$e?1:mt?-1:vt?1:Ve?Ri(Ve,Ee)-Ri(Ve,Ze):0;if(mt===vt)return hi(Ee,Ze);for(Ge=Ee;Ge=Ge.parentNode;)Tt.unshift(Ge);for(Ge=Ze;Ge=Ge.parentNode;)Et.unshift(Ge);for(;Tt[at]===Et[at];)at++;return at?hi(Tt[at],Et[at]):Tt[at]==kt?-1:Et[at]==kt?1:0}),$e},Un.matches=function(J,ce){return Un(J,null,null,ce)},Un.matchesSelector=function(J,ce){if(Re(J),y.matchesSelector&&Yt&&!ti[ce+" "]&&(!qn||!qn.test(ce))&&(!Pt||!Pt.test(ce)))try{var we=fr.call(J,ce);if(we||y.disconnectedMatch||J.document&&11!==J.document.nodeType)return we}catch(Ye){ti(ce,!0)}return Un(ce,$e,null,[J]).length>0},Un.contains=function(J,ce){return(J.ownerDocument||J)!=$e&&Re(J),je(J,ce)},Un.attr=function(J,ce){(J.ownerDocument||J)!=$e&&Re(J);var we=_.attrHandle[ce.toLowerCase()],Ye=we&&ji.call(_.attrHandle,ce.toLowerCase())?we(J,ce,!Yt):void 0;return void 0!==Ye?Ye:y.attributes||!Yt?J.getAttribute(ce):(Ye=J.getAttributeNode(ce))&&Ye.specified?Ye.value:null},Un.escape=function(J){return(J+"").replace(wo,is)},Un.error=function(J){throw new Error("Syntax error, unrecognized expression: "+J)},Un.uniqueSort=function(J){var ce,we=[],Ye=0,Ee=0;if(rt=!y.detectDuplicates,Ve=!y.sortStable&&J.slice(0),J.sort(no),rt){for(;ce=J[Ee++];)ce===J[Ee]&&(Ye=we.push(Ee));for(;Ye--;)J.splice(we[Ye],1)}return Ve=null,J},R=Un.getText=function(J){var ce,we="",Ye=0,Ee=J.nodeType;if(Ee){if(1===Ee||9===Ee||11===Ee){if("string"==typeof J.textContent)return J.textContent;for(J=J.firstChild;J;J=J.nextSibling)we+=R(J)}else if(3===Ee||4===Ee)return J.nodeValue}else for(;ce=J[Ye++];)we+=R(ce);return we},(_=Un.selectors={cacheLength:50,createPseudo:dr,match:io,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(J){return J[1]=J[1].replace(Ui,ao),J[3]=(J[3]||J[4]||J[5]||"").replace(Ui,ao),"~="===J[2]&&(J[3]=" "+J[3]+" "),J.slice(0,4)},CHILD:function(J){return J[1]=J[1].toLowerCase(),"nth"===J[1].slice(0,3)?(J[3]||Un.error(J[0]),J[4]=+(J[4]?J[5]+(J[6]||1):2*("even"===J[3]||"odd"===J[3])),J[5]=+(J[7]+J[8]||"odd"===J[3])):J[3]&&Un.error(J[0]),J},PSEUDO:function(J){var ce,we=!J[6]&&J[2];return io.CHILD.test(J[0])?null:(J[3]?J[2]=J[4]||J[5]||"":we&&iu.test(we)&&(ce=Y(we,!0))&&(ce=we.indexOf(")",we.length-ce)-we.length)&&(J[0]=J[0].slice(0,ce),J[2]=we.slice(0,ce)),J.slice(0,3))}},filter:{TAG:function(J){var ce=J.replace(Ui,ao).toLowerCase();return"*"===J?function(){return!0}:function(we){return we.nodeName&&we.nodeName.toLowerCase()===ce}},CLASS:function(J){var ce=Xn[J+" "];return ce||(ce=new RegExp("(^|"+ln+")"+J+"("+ln+"|$)"))&&Xn(J,function(we){return ce.test("string"==typeof we.className&&we.className||void 0!==we.getAttribute&&we.getAttribute("class")||"")})},ATTR:function(J,ce,we){return function(Ye){var Ee=Un.attr(Ye,J);return null==Ee?"!="===ce:!ce||(Ee+="","="===ce?Ee===we:"!="===ce?Ee!==we:"^="===ce?we&&0===Ee.indexOf(we):"*="===ce?we&&Ee.indexOf(we)>-1:"$="===ce?we&&Ee.slice(-we.length)===we:"~="===ce?(" "+Ee.replace(ru," ")+" ").indexOf(we)>-1:"|="===ce&&(Ee===we||Ee.slice(0,we.length+1)===we+"-"))}},CHILD:function(J,ce,we,Ye,Ee){var Ze="nth"!==J.slice(0,3),Ge="last"!==J.slice(-4),at="of-type"===ce;return 1===Ye&&0===Ee?function(mt){return!!mt.parentNode}:function(mt,vt,Tt){var Et,on,rn,Ot,Bn,Dr,Fr=Ze!==Ge?"nextSibling":"previousSibling",er=mt.parentNode,Vo=at&&mt.nodeName.toLowerCase(),uo=!Tt&&!at,ni=!1;if(er){if(Ze){for(;Fr;){for(Ot=mt;Ot=Ot[Fr];)if(at?Ot.nodeName.toLowerCase()===Vo:1===Ot.nodeType)return!1;Dr=Fr="only"===J&&!Dr&&"nextSibling"}return!0}if(Dr=[Ge?er.firstChild:er.lastChild],Ge&&uo){for(ni=(Bn=(Et=(on=(rn=(Ot=er)[Mt]||(Ot[Mt]={}))[Ot.uniqueID]||(rn[Ot.uniqueID]={}))[J]||[])[0]===Gr&&Et[1])&&Et[2],Ot=Bn&&er.childNodes[Bn];Ot=++Bn&&Ot&&Ot[Fr]||(ni=Bn=0)||Dr.pop();)if(1===Ot.nodeType&&++ni&&Ot===mt){on[J]=[Gr,Bn,ni];break}}else if(uo&&(ni=Bn=(Et=(on=(rn=(Ot=mt)[Mt]||(Ot[Mt]={}))[Ot.uniqueID]||(rn[Ot.uniqueID]={}))[J]||[])[0]===Gr&&Et[1]),!1===ni)for(;(Ot=++Bn&&Ot&&Ot[Fr]||(ni=Bn=0)||Dr.pop())&&((at?Ot.nodeName.toLowerCase()!==Vo:1!==Ot.nodeType)||!++ni||(uo&&((on=(rn=Ot[Mt]||(Ot[Mt]={}))[Ot.uniqueID]||(rn[Ot.uniqueID]={}))[J]=[Gr,ni]),Ot!==mt)););return(ni-=Ee)===Ye||ni%Ye==0&&ni/Ye>=0}}},PSEUDO:function(J,ce){var we,Ye=_.pseudos[J]||_.setFilters[J.toLowerCase()]||Un.error("unsupported pseudo: "+J);return Ye[Mt]?Ye(ce):Ye.length>1?(we=[J,J,"",ce],_.setFilters.hasOwnProperty(J.toLowerCase())?dr(function(Ee,Ze){for(var Ge,at=Ye(Ee,ce),mt=at.length;mt--;)Ee[Ge=Ri(Ee,at[mt])]=!(Ze[Ge]=at[mt])}):function(Ee){return Ye(Ee,0,we)}):Ye}},pseudos:{not:dr(function(J){var ce=[],we=[],Ye=le(J.replace(Zr,"$1"));return Ye[Mt]?dr(function(Ee,Ze,Ge,at){for(var mt,vt=Ye(Ee,null,at,[]),Tt=Ee.length;Tt--;)(mt=vt[Tt])&&(Ee[Tt]=!(Ze[Tt]=mt))}):function(Ee,Ze,Ge){return ce[0]=Ee,Ye(ce,null,Ge,we),ce[0]=null,!we.pop()}}),has:dr(function(J){return function(ce){return Un(J,ce).length>0}}),contains:dr(function(J){return J=J.replace(Ui,ao),function(ce){return(ce.textContent||R(ce)).indexOf(J)>-1}}),lang:dr(function(J){return nc.test(J||"")||Un.error("unsupported lang: "+J),J=J.replace(Ui,ao).toLowerCase(),function(ce){var we;do{if(we=Yt?ce.lang:ce.getAttribute("xml:lang")||ce.getAttribute("lang"))return(we=we.toLowerCase())===J||0===we.indexOf(J+"-")}while((ce=ce.parentNode)&&1===ce.nodeType);return!1}}),target:function(J){var ce=l.location&&l.location.hash;return ce&&ce.slice(1)===J.id},root:function(J){return J===St},focus:function(J){return J===$e.activeElement&&(!$e.hasFocus||$e.hasFocus())&&!!(J.type||J.href||~J.tabIndex)},enabled:Nn(!1),disabled:Nn(!0),checked:function(J){var ce=J.nodeName.toLowerCase();return"input"===ce&&!!J.checked||"option"===ce&&!!J.selected},selected:function(J){return!0===J.selected},empty:function(J){for(J=J.firstChild;J;J=J.nextSibling)if(J.nodeType<6)return!1;return!0},parent:function(J){return!_.pseudos.empty(J)},header:function(J){return qu.test(J.nodeName)},input:function(J){return ou.test(J.nodeName)},button:function(J){var ce=J.nodeName.toLowerCase();return"input"===ce&&"button"===J.type||"button"===ce},text:function(J){var ce;return"input"===J.nodeName.toLowerCase()&&"text"===J.type&&(null==(ce=J.getAttribute("type"))||"text"===ce.toLowerCase())},first:Jn(function(){return[0]}),last:Jn(function(J,ce){return[ce-1]}),eq:Jn(function(J,ce,we){return[we<0?we+ce:we]}),even:Jn(function(J,ce){for(var we=0;we<ce;we+=2)J.push(we);return J}),odd:Jn(function(J,ce){for(var we=1;we<ce;we+=2)J.push(we);return J}),lt:Jn(function(J,ce,we){for(var Ye=we<0?we+ce:we>ce?ce:we;--Ye>=0;)J.push(Ye);return J}),gt:Jn(function(J,ce,we){for(var Ye=we<0?we+ce:we;++Ye<ce;)J.push(Ye);return J})}}).pseudos.nth=_.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[d]=So(d);for(d in{submit:!0,reset:!0})_.pseudos[d]=os(d);function Xe(){}function Be(J){for(var ce=0,we=J.length,Ye="";ce<we;ce++)Ye+=J[ce].value;return Ye}function wt(J,ce,we){var Ye=ce.dir,Ee=ce.next,Ze=Ee||Ye,Ge=we&&"parentNode"===Ze,at=bn++;return ce.first?function(mt,vt,Tt){for(;mt=mt[Ye];)if(1===mt.nodeType||Ge)return J(mt,vt,Tt);return!1}:function(mt,vt,Tt){var Et,on,rn,Ot=[Gr,at];if(Tt){for(;mt=mt[Ye];)if((1===mt.nodeType||Ge)&&J(mt,vt,Tt))return!0}else for(;mt=mt[Ye];)if(1===mt.nodeType||Ge)if(on=(rn=mt[Mt]||(mt[Mt]={}))[mt.uniqueID]||(rn[mt.uniqueID]={}),Ee&&Ee===mt.nodeName.toLowerCase())mt=mt[Ye]||mt;else{if((Et=on[Ze])&&Et[0]===Gr&&Et[1]===at)return Ot[2]=Et[2];if(on[Ze]=Ot,Ot[2]=J(mt,vt,Tt))return!0}return!1}}function Zt(J){return J.length>1?function(ce,we,Ye){for(var Ee=J.length;Ee--;)if(!J[Ee](ce,we,Ye))return!1;return!0}:J[0]}function hr(J,ce,we,Ye,Ee){for(var Ze,Ge=[],at=0,mt=J.length,vt=null!=ce;at<mt;at++)(Ze=J[at])&&(!we||we(Ze,Ye,Ee))&&(Ge.push(Ze),vt&&ce.push(at));return Ge}function Kn(J,ce,we,Ye,Ee,Ze){return Ye&&!Ye[Mt]&&(Ye=Kn(Ye)),Ee&&!Ee[Mt]&&(Ee=Kn(Ee,Ze)),dr(function(Ge,at,mt,vt){var Tt,Et,on,rn=[],Ot=[],Bn=at.length,Dr=Ge||function Dn(J,ce,we){for(var Ye=0,Ee=ce.length;Ye<Ee;Ye++)Un(J,ce[Ye],we);return we}(ce||"*",mt.nodeType?[mt]:mt,[]),Fr=!J||!Ge&&ce?Dr:hr(Dr,rn,J,mt,vt),er=we?Ee||(Ge?J:Bn||Ye)?[]:at:Fr;if(we&&we(Fr,er,mt,vt),Ye)for(Tt=hr(er,Ot),Ye(Tt,[],mt,vt),Et=Tt.length;Et--;)(on=Tt[Et])&&(er[Ot[Et]]=!(Fr[Ot[Et]]=on));if(Ge){if(Ee||J){if(Ee){for(Tt=[],Et=er.length;Et--;)(on=er[Et])&&Tt.push(Fr[Et]=on);Ee(null,er=[],Tt,vt)}for(Et=er.length;Et--;)(on=er[Et])&&(Tt=Ee?Ri(Ge,on):rn[Et])>-1&&(Ge[Tt]=!(at[Tt]=on))}}else er=hr(er===at?er.splice(Bn,er.length):er),Ee?Ee(null,at,er,vt):ur.apply(at,er)})}function fa(J){for(var ce,we,Ye,Ee=J.length,Ze=_.relative[J[0].type],Ge=Ze||_.relative[" "],at=Ze?1:0,mt=wt(function(Et){return Et===ce},Ge,!0),vt=wt(function(Et){return Ri(ce,Et)>-1},Ge,!0),Tt=[function(Et,on,rn){var Ot=!Ze&&(rn||on!==Ie)||((ce=on).nodeType?mt(Et,on,rn):vt(Et,on,rn));return ce=null,Ot}];at<Ee;at++)if(we=_.relative[J[at].type])Tt=[wt(Zt(Tt),we)];else{if((we=_.filter[J[at].type].apply(null,J[at].matches))[Mt]){for(Ye=++at;Ye<Ee&&!_.relative[J[Ye].type];Ye++);return Kn(at>1&&Zt(Tt),at>1&&Be(J.slice(0,at-1).concat({value:" "===J[at-2].type?"*":""})).replace(Zr,"$1"),we,at<Ye&&fa(J.slice(at,Ye)),Ye<Ee&&fa(J=J.slice(Ye)),Ye<Ee&&Be(J))}Tt.push(we)}return Zt(Tt)}return Xe.prototype=_.filters=_.pseudos,_.setFilters=new Xe,Y=Un.tokenize=function(J,ce){var we,Ye,Ee,Ze,Ge,at,mt,vt=to[J+" "];if(vt)return ce?0:vt.slice(0);for(Ge=J,at=[],mt=_.preFilter;Ge;){for(Ze in(!we||(Ye=As.exec(Ge)))&&(Ye&&(Ge=Ge.slice(Ye[0].length)||Ge),at.push(Ee=[])),we=!1,(Ye=Ra.exec(Ge))&&(we=Ye.shift(),Ee.push({value:we,type:Ye[0].replace(Zr," ")}),Ge=Ge.slice(we.length)),_.filter)(Ye=io[Ze].exec(Ge))&&(!mt[Ze]||(Ye=mt[Ze](Ye)))&&(we=Ye.shift(),Ee.push({value:we,type:Ze,matches:Ye}),Ge=Ge.slice(we.length));if(!we)break}return ce?Ge.length:Ge?Un.error(J):to(J,at).slice(0)},le=Un.compile=function(J,ce){var we,Ye=[],Ee=[],Ze=Oa[J+" "];if(!Ze){for(ce||(ce=Y(J)),we=ce.length;we--;)(Ze=fa(ce[we]))[Mt]?Ye.push(Ze):Ee.push(Ze);Ze=Oa(J,function so(J,ce){var we=ce.length>0,Ye=J.length>0,Ee=function(Ze,Ge,at,mt,vt){var Tt,Et,on,rn=0,Ot="0",Bn=Ze&&[],Dr=[],Fr=Ie,er=Ze||Ye&&_.find.TAG("*",vt),Vo=Gr+=null==Fr?1:Math.random()||.1,uo=er.length;for(vt&&(Ie=Ge==$e||Ge||vt);Ot!==uo&&null!=(Tt=er[Ot]);Ot++){if(Ye&&Tt){for(Et=0,!Ge&&Tt.ownerDocument!=$e&&(Re(Tt),at=!Yt);on=J[Et++];)if(on(Tt,Ge||$e,at)){mt.push(Tt);break}vt&&(Gr=Vo)}we&&((Tt=!on&&Tt)&&rn--,Ze&&Bn.push(Tt))}if(rn+=Ot,we&&Ot!==rn){for(Et=0;on=ce[Et++];)on(Bn,Dr,Ge,at);if(Ze){if(rn>0)for(;Ot--;)Bn[Ot]||Dr[Ot]||(Dr[Ot]=wi.call(mt));Dr=hr(Dr)}ur.apply(mt,Dr),vt&&!Ze&&Dr.length>0&&rn+ce.length>1&&Un.uniqueSort(mt)}return vt&&(Gr=Vo,Ie=Fr),Bn};return we?dr(Ee):Ee}(Ee,Ye)),Ze.selector=J}return Ze},ue=Un.select=function(J,ce,we,Ye){var Ee,Ze,Ge,at,mt,vt="function"==typeof J&&J,Tt=!Ye&&Y(J=vt.selector||J);if(we=we||[],1===Tt.length){if((Ze=Tt[0]=Tt[0].slice(0)).length>2&&"ID"===(Ge=Ze[0]).type&&9===ce.nodeType&&Yt&&_.relative[Ze[1].type]){if(!(ce=(_.find.ID(Ge.matches[0].replace(Ui,ao),ce)||[])[0]))return we;vt&&(ce=ce.parentNode),J=J.slice(Ze.shift().value.length)}for(Ee=io.needsContext.test(J)?0:Ze.length;Ee--&&!_.relative[at=(Ge=Ze[Ee]).type];)if((mt=_.find[at])&&(Ye=mt(Ge.matches[0].replace(Ui,ao),au.test(Ze[0].type)&&me(ce.parentNode)||ce))){if(Ze.splice(Ee,1),!(J=Ye.length&&Be(Ze)))return ur.apply(we,Ye),we;break}}return(vt||le(J,Tt))(Ye,ce,!Yt,we,!ce||au.test(J)&&me(ce.parentNode)||ce),we},y.sortStable=Mt.split("").sort(no).join("")===Mt,y.detectDuplicates=!!rt,Re(),y.sortDetached=qr(function(J){return 1&J.compareDocumentPosition($e.createElement("fieldset"))}),qr(function(J){return J.innerHTML="<a href='#'></a>","#"===J.firstChild.getAttribute("href")})||Ti("type|href|height|width",function(J,ce,we){if(!we)return J.getAttribute(ce,"type"===ce.toLowerCase()?1:2)}),(!y.attributes||!qr(function(J){return J.innerHTML="<input/>",J.firstChild.setAttribute("value",""),""===J.firstChild.getAttribute("value")}))&&Ti("value",function(J,ce,we){if(!we&&"input"===J.nodeName.toLowerCase())return J.defaultValue}),qr(function(J){return null==J.getAttribute("disabled")})||Ti(Ps,function(J,ce,we){var Ye;if(!we)return!0===J[ce]?ce.toLowerCase():(Ye=J.getAttributeNode(ce))&&Ye.specified?Ye.value:null}),Un}(g);C.find=nt,C.expr=nt.selectors,C.expr[":"]=C.expr.pseudos,C.uniqueSort=C.unique=nt.uniqueSort,C.text=nt.getText,C.isXMLDoc=nt.isXML,C.contains=nt.contains,C.escapeSelector=nt.escape;var et=function(l,d,y){for(var _=[],R=void 0!==y;(l=l[d])&&9!==l.nodeType;)if(1===l.nodeType){if(R&&C(l).is(y))break;_.push(l)}return _},ot=function(l,d){for(var y=[];l;l=l.nextSibling)1===l.nodeType&&l!==d&&y.push(l);return y},lt=C.expr.match.needsContext;function pt(l,d){return l.nodeName&&l.nodeName.toLowerCase()===d.toLowerCase()}var At=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Xt(l,d,y){return se(d)?C.grep(l,function(_,R){return!!d.call(_,R,_)!==y}):d.nodeType?C.grep(l,function(_){return _===d!==y}):"string"!=typeof d?C.grep(l,function(_){return F.call(d,_)>-1!==y}):C.filter(d,l,y)}C.filter=function(l,d,y){var _=d[0];return y&&(l=":not("+l+")"),1===d.length&&1===_.nodeType?C.find.matchesSelector(_,l)?[_]:[]:C.find.matches(l,C.grep(d,function(R){return 1===R.nodeType}))},C.fn.extend({find:function(l){var d,y,_=this.length,R=this;if("string"!=typeof l)return this.pushStack(C(l).filter(function(){for(d=0;d<_;d++)if(C.contains(R[d],this))return!0}));for(y=this.pushStack([]),d=0;d<_;d++)C.find(l,R[d],y);return _>1?C.uniqueSort(y):y},filter:function(l){return this.pushStack(Xt(this,l||[],!1))},not:function(l){return this.pushStack(Xt(this,l||[],!0))},is:function(l){return!!Xt(this,"string"==typeof l&&lt.test(l)?C(l):l||[],!1).length}});var $t,nn=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,vr=C.fn.init=function(l,d,y){var _,R;if(!l)return this;if(y=y||$t,"string"==typeof l){if(!(_="<"===l[0]&&">"===l[l.length-1]&&l.length>=3?[null,l,null]:nn.exec(l))||!_[1]&&d)return!d||d.jquery?(d||y).find(l):this.constructor(d).find(l);if(_[1]){if(C.merge(this,C.parseHTML(_[1],(d=d instanceof C?d[0]:d)&&d.nodeType?d.ownerDocument||d:he,!0)),At.test(_[1])&&C.isPlainObject(d))for(_ in d)se(this[_])?this[_](d[_]):this.attr(_,d[_]);return this}return(R=he.getElementById(_[2]))&&(this[0]=R,this.length=1),this}return l.nodeType?(this[0]=l,this.length=1,this):se(l)?void 0!==y.ready?y.ready(l):l(C):C.makeArray(l,this)};vr.prototype=C.fn,$t=C(he);var Ur=/^(?:parents|prev(?:Until|All))/,ze={children:!0,contents:!0,next:!0,prev:!0};function wn(l,d){for(;(l=l[d])&&1!==l.nodeType;);return l}C.fn.extend({has:function(l){var d=C(l,this),y=d.length;return this.filter(function(){for(var _=0;_<y;_++)if(C.contains(this,d[_]))return!0})},closest:function(l,d){var y,_=0,R=this.length,D=[],Y="string"!=typeof l&&C(l);if(!lt.test(l))for(;_<R;_++)for(y=this[_];y&&y!==d;y=y.parentNode)if(y.nodeType<11&&(Y?Y.index(y)>-1:1===y.nodeType&&C.find.matchesSelector(y,l))){D.push(y);break}return this.pushStack(D.length>1?C.uniqueSort(D):D)},index:function(l){return l?"string"==typeof l?F.call(C(l),this[0]):F.call(this,l.jquery?l[0]:l):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(l,d){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(l,d))))},addBack:function(l){return this.add(null==l?this.prevObject:this.prevObject.filter(l))}}),C.each({parent:function(l){var d=l.parentNode;return d&&11!==d.nodeType?d:null},parents:function(l){return et(l,"parentNode")},parentsUntil:function(l,d,y){return et(l,"parentNode",y)},next:function(l){return wn(l,"nextSibling")},prev:function(l){return wn(l,"previousSibling")},nextAll:function(l){return et(l,"nextSibling")},prevAll:function(l){return et(l,"previousSibling")},nextUntil:function(l,d,y){return et(l,"nextSibling",y)},prevUntil:function(l,d,y){return et(l,"previousSibling",y)},siblings:function(l){return ot((l.parentNode||{}).firstChild,l)},children:function(l){return ot(l.firstChild)},contents:function(l){return null!=l.contentDocument&&x(l.contentDocument)?l.contentDocument:(pt(l,"template")&&(l=l.content||l),C.merge([],l.childNodes))}},function(l,d){C.fn[l]=function(y,_){var R=C.map(this,d,y);return"Until"!==l.slice(-5)&&(_=y),_&&"string"==typeof _&&(R=C.filter(_,R)),this.length>1&&(ze[l]||C.uniqueSort(R),Ur.test(l)&&R.reverse()),this.pushStack(R)}});var tr=/[^\x20\t\r\n\f]+/g;function Yn(l){return l}function be(l){throw l}function Je(l,d,y,_){var R;try{l&&se(R=l.promise)?R.call(l).done(d).fail(y):l&&se(R=l.then)?R.call(l,d,y):d.apply(void 0,[l].slice(_))}catch(D){y.apply(void 0,[D])}}C.Callbacks=function(l){l="string"==typeof l?function nr(l){var d={};return C.each(l.match(tr)||[],function(y,_){d[_]=!0}),d}(l):C.extend({},l);var d,y,_,R,D=[],Y=[],le=-1,ue=function(){for(R=R||l.once,_=d=!0;Y.length;le=-1)for(y=Y.shift();++le<D.length;)!1===D[le].apply(y[0],y[1])&&l.stopOnFalse&&(le=D.length,y=!1);l.memory||(y=!1),d=!1,R&&(D=y?[]:"")},Ie={add:function(){return D&&(y&&!d&&(le=D.length-1,Y.push(y)),function Ve(rt){C.each(rt,function(Re,$e){se($e)?(!l.unique||!Ie.has($e))&&D.push($e):$e&&$e.length&&"string"!==Ae($e)&&Ve($e)})}(arguments),y&&!d&&ue()),this},remove:function(){return C.each(arguments,function(Ve,rt){for(var Re;(Re=C.inArray(rt,D,Re))>-1;)D.splice(Re,1),Re<=le&&le--}),this},has:function(Ve){return Ve?C.inArray(Ve,D)>-1:D.length>0},empty:function(){return D&&(D=[]),this},disable:function(){return R=Y=[],D=y="",this},disabled:function(){return!D},lock:function(){return R=Y=[],!y&&!d&&(D=y=""),this},locked:function(){return!!R},fireWith:function(Ve,rt){return R||(rt=[Ve,(rt=rt||[]).slice?rt.slice():rt],Y.push(rt),d||ue()),this},fire:function(){return Ie.fireWith(this,arguments),this},fired:function(){return!!_}};return Ie},C.extend({Deferred:function(l){var d=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],y="pending",_={state:function(){return y},always:function(){return R.done(arguments).fail(arguments),this},catch:function(D){return _.then(null,D)},pipe:function(){var D=arguments;return C.Deferred(function(Y){C.each(d,function(le,ue){var Ie=se(D[ue[4]])&&D[ue[4]];R[ue[1]](function(){var Ve=Ie&&Ie.apply(this,arguments);Ve&&se(Ve.promise)?Ve.promise().progress(Y.notify).done(Y.resolve).fail(Y.reject):Y[ue[0]+"With"](this,Ie?[Ve]:arguments)})}),D=null}).promise()},then:function(D,Y,le){var ue=0;function Ie(Ve,rt,Re,$e){return function(){var St=this,Yt=arguments,Pt=function(){var fr,je;if(!(Ve<ue)){if((fr=Re.apply(St,Yt))===rt.promise())throw new TypeError("Thenable self-resolution");se(je=fr&&("object"==typeof fr||"function"==typeof fr)&&fr.then)?$e?je.call(fr,Ie(ue,rt,Yn,$e),Ie(ue,rt,be,$e)):(ue++,je.call(fr,Ie(ue,rt,Yn,$e),Ie(ue,rt,be,$e),Ie(ue,rt,Yn,rt.notifyWith))):(Re!==Yn&&(St=void 0,Yt=[fr]),($e||rt.resolveWith)(St,Yt))}},qn=$e?Pt:function(){try{Pt()}catch(fr){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(fr,qn.stackTrace),Ve+1>=ue&&(Re!==be&&(St=void 0,Yt=[fr]),rt.rejectWith(St,Yt))}};Ve?qn():(C.Deferred.getStackHook&&(qn.stackTrace=C.Deferred.getStackHook()),g.setTimeout(qn))}}return C.Deferred(function(Ve){d[0][3].add(Ie(0,Ve,se(le)?le:Yn,Ve.notifyWith)),d[1][3].add(Ie(0,Ve,se(D)?D:Yn)),d[2][3].add(Ie(0,Ve,se(Y)?Y:be))}).promise()},promise:function(D){return null!=D?C.extend(D,_):_}},R={};return C.each(d,function(D,Y){var le=Y[2],ue=Y[5];_[Y[1]]=le.add,ue&&le.add(function(){y=ue},d[3-D][2].disable,d[3-D][3].disable,d[0][2].lock,d[0][3].lock),le.add(Y[3].fire),R[Y[0]]=function(){return R[Y[0]+"With"](this===R?void 0:this,arguments),this},R[Y[0]+"With"]=le.fireWith}),_.promise(R),l&&l.call(R,R),R},when:function(l){var d=arguments.length,y=d,_=Array(y),R=A.call(arguments),D=C.Deferred(),Y=function(le){return function(ue){_[le]=this,R[le]=arguments.length>1?A.call(arguments):ue,--d||D.resolveWith(_,R)}};if(d<=1&&(Je(l,D.done(Y(y)).resolve,D.reject,!d),"pending"===D.state()||se(R[y]&&R[y].then)))return D.then();for(;y--;)Je(R[y],Y(y),D.reject);return D.promise()}});var ut=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(l,d){g.console&&g.console.warn&&l&&ut.test(l.name)&&g.console.warn("jQuery.Deferred exception: "+l.message,l.stack,d)},C.readyException=function(l){g.setTimeout(function(){throw l})};var ht=C.Deferred();function Rt(){he.removeEventListener("DOMContentLoaded",Rt),g.removeEventListener("load",Rt),C.ready()}C.fn.ready=function(l){return ht.then(l).catch(function(d){C.readyException(d)}),this},C.extend({isReady:!1,readyWait:1,ready:function(l){(!0===l?--C.readyWait:C.isReady)||(C.isReady=!0,!(!0!==l&&--C.readyWait>0)&&ht.resolveWith(he,[C]))}}),C.ready.then=ht.then,"complete"===he.readyState||"loading"!==he.readyState&&!he.documentElement.doScroll?g.setTimeout(C.ready):(he.addEventListener("DOMContentLoaded",Rt),g.addEventListener("load",Rt));var pn=function(l,d,y,_,R,D,Y){var le=0,ue=l.length,Ie=null==y;if("object"===Ae(y))for(le in R=!0,y)pn(l,d,le,y[le],!0,D,Y);else if(void 0!==_&&(R=!0,se(_)||(Y=!0),Ie&&(Y?(d.call(l,_),d=null):(Ie=d,d=function(Ve,rt,Re){return Ie.call(C(Ve),Re)})),d))for(;le<ue;le++)d(l[le],y,Y?_:_.call(l[le],le,d(l[le],y)));return R?l:Ie?d.call(l):ue?d(l[0],y):D},kn=/^-ms-/,or=/-([a-z])/g;function mi(l,d){return d.toUpperCase()}function un(l){return l.replace(kn,"ms-").replace(or,mi)}var Kt=function(l){return 1===l.nodeType||9===l.nodeType||!+l.nodeType};function B(){this.expando=C.expando+B.uid++}B.uid=1,B.prototype={cache:function(l){var d=l[this.expando];return d||(d={},Kt(l)&&(l.nodeType?l[this.expando]=d:Object.defineProperty(l,this.expando,{value:d,configurable:!0}))),d},set:function(l,d,y){var _,R=this.cache(l);if("string"==typeof d)R[un(d)]=y;else for(_ in d)R[un(_)]=d[_];return R},get:function(l,d){return void 0===d?this.cache(l):l[this.expando]&&l[this.expando][un(d)]},access:function(l,d,y){return void 0===d||d&&"string"==typeof d&&void 0===y?this.get(l,d):(this.set(l,d,y),void 0!==y?y:d)},remove:function(l,d){var y,_=l[this.expando];if(void 0!==_){if(void 0!==d)for((y=(d=Array.isArray(d)?d.map(un):(d=un(d))in _?[d]:d.match(tr)||[]).length);y--;)delete _[d[y]];(void 0===d||C.isEmptyObject(_))&&(l.nodeType?l[this.expando]=void 0:delete l[this.expando])}},hasData:function(l){var d=l[this.expando];return void 0!==d&&!C.isEmptyObject(d)}};var z=new B,re=new B,Ce=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,We=/[A-Z]/g;function bt(l,d,y){var _;if(void 0===y&&1===l.nodeType)if(_="data-"+d.replace(We,"-$&").toLowerCase(),"string"==typeof(y=l.getAttribute(_))){try{y=function Ke(l){return"true"===l||"false"!==l&&("null"===l?null:l===+l+""?+l:Ce.test(l)?JSON.parse(l):l)}(y)}catch(R){}re.set(l,d,y)}else y=void 0;return y}C.extend({hasData:function(l){return re.hasData(l)||z.hasData(l)},data:function(l,d,y){return re.access(l,d,y)},removeData:function(l,d){re.remove(l,d)},_data:function(l,d,y){return z.access(l,d,y)},_removeData:function(l,d){z.remove(l,d)}}),C.fn.extend({data:function(l,d){var y,_,R,D=this[0],Y=D&&D.attributes;if(void 0===l){if(this.length&&(R=re.get(D),1===D.nodeType&&!z.get(D,"hasDataAttrs"))){for(y=Y.length;y--;)Y[y]&&0===(_=Y[y].name).indexOf("data-")&&(_=un(_.slice(5)),bt(D,_,R[_]));z.set(D,"hasDataAttrs",!0)}return R}return"object"==typeof l?this.each(function(){re.set(this,l)}):pn(this,function(le){var ue;if(D&&void 0===le)return void 0!==(ue=re.get(D,l))||void 0!==(ue=bt(D,l))?ue:void 0;this.each(function(){re.set(this,l,le)})},null,d,arguments.length>1,null,!0)},removeData:function(l){return this.each(function(){re.remove(this,l)})}}),C.extend({queue:function(l,d,y){var _;if(l)return _=z.get(l,d=(d||"fx")+"queue"),y&&(!_||Array.isArray(y)?_=z.access(l,d,C.makeArray(y)):_.push(y)),_||[]},dequeue:function(l,d){var y=C.queue(l,d=d||"fx"),_=y.length,R=y.shift(),D=C._queueHooks(l,d);"inprogress"===R&&(R=y.shift(),_--),R&&("fx"===d&&y.unshift("inprogress"),delete D.stop,R.call(l,function(){C.dequeue(l,d)},D)),!_&&D&&D.empty.fire()},_queueHooks:function(l,d){var y=d+"queueHooks";return z.get(l,y)||z.access(l,y,{empty:C.Callbacks("once memory").add(function(){z.remove(l,[d+"queue",y])})})}}),C.fn.extend({queue:function(l,d){var y=2;return"string"!=typeof l&&(d=l,l="fx",y--),arguments.length<y?C.queue(this[0],l):void 0===d?this:this.each(function(){var _=C.queue(this,l,d);C._queueHooks(this,l),"fx"===l&&"inprogress"!==_[0]&&C.dequeue(this,l)})},dequeue:function(l){return this.each(function(){C.dequeue(this,l)})},clearQueue:function(l){return this.queue(l||"fx",[])},promise:function(l,d){var y,_=1,R=C.Deferred(),D=this,Y=this.length,le=function(){--_||R.resolveWith(D,[D])};for("string"!=typeof l&&(d=l,l=void 0),l=l||"fx";Y--;)(y=z.get(D[Y],l+"queueHooks"))&&y.empty&&(_++,y.empty.add(le));return le(),R.promise(d)}});var Nt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ht=new RegExp("^(?:([+-])=|)("+Nt+")([a-z%]*)$","i"),mn=["Top","Right","Bottom","Left"],On=he.documentElement,gn=function(l){return C.contains(l.ownerDocument,l)},Qn={composed:!0};On.getRootNode&&(gn=function(l){return C.contains(l.ownerDocument,l)||l.getRootNode(Qn)===l.ownerDocument});var Tr=function(l,d){return"none"===(l=d||l).style.display||""===l.style.display&&gn(l)&&"none"===C.css(l,"display")};function yi(l,d,y,_){var R,D,Y=20,le=_?function(){return _.cur()}:function(){return C.css(l,d,"")},ue=le(),Ie=y&&y[3]||(C.cssNumber[d]?"":"px"),Ve=l.nodeType&&(C.cssNumber[d]||"px"!==Ie&&+ue)&&Ht.exec(C.css(l,d));if(Ve&&Ve[3]!==Ie){for(Ie=Ie||Ve[3],Ve=+(ue/=2)||1;Y--;)C.style(l,d,Ve+Ie),(1-D)*(1-(D=le()/ue||.5))<=0&&(Y=0),Ve/=D;C.style(l,d,(Ve*=2)+Ie),y=y||[]}return y&&(Ve=+Ve||+ue||0,R=y[1]?Ve+(y[1]+1)*y[2]:+y[2],_&&(_.unit=Ie,_.start=Ve,_.end=R)),R}var jn={};function ar(l){var d,y=l.ownerDocument,_=l.nodeName,R=jn[_];return R||(d=y.body.appendChild(y.createElement(_)),R=C.css(d,"display"),d.parentNode.removeChild(d),"none"===R&&(R="block"),jn[_]=R,R)}function rr(l,d){for(var y,_,R=[],D=0,Y=l.length;D<Y;D++)(_=l[D]).style&&(y=_.style.display,d?("none"===y&&(R[D]=z.get(_,"display")||null,R[D]||(_.style.display="")),""===_.style.display&&Tr(_)&&(R[D]=ar(_))):"none"!==y&&(R[D]="none",z.set(_,"display",y)));for(D=0;D<Y;D++)null!=R[D]&&(l[D].style.display=R[D]);return l}C.fn.extend({show:function(){return rr(this,!0)},hide:function(){return rr(this)},toggle:function(l){return"boolean"==typeof l?l?this.show():this.hide():this.each(function(){Tr(this)?C(this).show():C(this).hide()})}});var d,y,cr=/^(?:checkbox|radio)$/i,Nr=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ai=/^$|^module$|\/(?:java|ecma)script/i;d=he.createDocumentFragment().appendChild(he.createElement("div")),(y=he.createElement("input")).setAttribute("type","radio"),y.setAttribute("checked","checked"),y.setAttribute("name","t"),d.appendChild(y),i.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked,d.innerHTML="<textarea>x</textarea>",i.noCloneChecked=!!d.cloneNode(!0).lastChild.defaultValue,d.innerHTML="<option></option>",i.option=!!d.lastChild;var ir={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function sr(l,d){var y;return y=void 0!==l.getElementsByTagName?l.getElementsByTagName(d||"*"):void 0!==l.querySelectorAll?l.querySelectorAll(d||"*"):[],void 0===d||d&&pt(l,d)?C.merge([l],y):y}function Sn(l,d){for(var y=0,_=l.length;y<_;y++)z.set(l[y],"globalEval",!d||z.get(d[y],"globalEval"))}ir.tbody=ir.tfoot=ir.colgroup=ir.caption=ir.thead,ir.th=ir.td,i.option||(ir.optgroup=ir.option=[1,"<select multiple='multiple'>","</select>"]);var Qa=/<|&#?\w+;/;function mo(l,d,y,_,R){for(var D,Y,le,ue,Ie,Ve,rt=d.createDocumentFragment(),Re=[],$e=0,St=l.length;$e<St;$e++)if((D=l[$e])||0===D)if("object"===Ae(D))C.merge(Re,D.nodeType?[D]:D);else if(Qa.test(D)){for(Y=Y||rt.appendChild(d.createElement("div")),le=(Nr.exec(D)||["",""])[1].toLowerCase(),Y.innerHTML=(ue=ir[le]||ir._default)[1]+C.htmlPrefilter(D)+ue[2],Ve=ue[0];Ve--;)Y=Y.lastChild;C.merge(Re,Y.childNodes),(Y=rt.firstChild).textContent=""}else Re.push(d.createTextNode(D));for(rt.textContent="",$e=0;D=Re[$e++];)if(_&&C.inArray(D,_)>-1)R&&R.push(D);else if(Ie=gn(D),Y=sr(rt.appendChild(D),"script"),Ie&&Sn(Y),y)for(Ve=0;D=Y[Ve++];)ai.test(D.type||"")&&y.push(D);return rt}var Qo=/^([^.]*)(?:\.(.+)|)/;function Xi(){return!0}function Wt(){return!1}function Mo(l,d){return l===function Ta(){try{return he.activeElement}catch(l){}}()==("focus"===d)}function yo(l,d,y,_,R,D){var Y,le;if("object"==typeof d){for(le in"string"!=typeof y&&(_=_||y,y=void 0),d)yo(l,le,y,_,d[le],D);return l}if(null==_&&null==R?(R=y,_=y=void 0):null==R&&("string"==typeof y?(R=_,_=void 0):(R=_,_=y,y=void 0)),!1===R)R=Wt;else if(!R)return l;return 1===D&&(Y=R,R=function(ue){return C().off(ue),Y.apply(this,arguments)},R.guid=Y.guid||(Y.guid=C.guid++)),l.each(function(){C.event.add(this,d,R,_,y)})}function xo(l,d,y){y?(z.set(l,d,!1),C.event.add(l,d,{namespace:!1,handler:function(_){var R,D,Y=z.get(this,d);if(1&_.isTrigger&&this[d]){if(Y.length)(C.event.special[d]||{}).delegateType&&_.stopPropagation();else if(Y=A.call(arguments),z.set(this,d,Y),R=y(this,d),this[d](),Y!==(D=z.get(this,d))||R?z.set(this,d,!1):D={},Y!==D)return _.stopImmediatePropagation(),_.preventDefault(),D&&D.value}else Y.length&&(z.set(this,d,{value:C.event.trigger(C.extend(Y[0],C.Event.prototype),Y.slice(1),this)}),_.stopImmediatePropagation())}})):void 0===z.get(l,d)&&C.event.add(l,d,Xi)}C.event={global:{},add:function(l,d,y,_,R){var D,Y,le,ue,Ie,Ve,rt,Re,$e,St,Yt,Pt=z.get(l);if(Kt(l))for(y.handler&&(y=(D=y).handler,R=D.selector),R&&C.find.matchesSelector(On,R),y.guid||(y.guid=C.guid++),(ue=Pt.events)||(ue=Pt.events=Object.create(null)),(Y=Pt.handle)||(Y=Pt.handle=function(qn){return void 0!==C&&C.event.triggered!==qn.type?C.event.dispatch.apply(l,arguments):void 0}),Ie=(d=(d||"").match(tr)||[""]).length;Ie--;)$e=Yt=(le=Qo.exec(d[Ie])||[])[1],St=(le[2]||"").split(".").sort(),$e&&(rt=C.event.special[$e]||{},rt=C.event.special[$e=(R?rt.delegateType:rt.bindType)||$e]||{},Ve=C.extend({type:$e,origType:Yt,data:_,handler:y,guid:y.guid,selector:R,needsContext:R&&C.expr.match.needsContext.test(R),namespace:St.join(".")},D),(Re=ue[$e])||((Re=ue[$e]=[]).delegateCount=0,(!rt.setup||!1===rt.setup.call(l,_,St,Y))&&l.addEventListener&&l.addEventListener($e,Y)),rt.add&&(rt.add.call(l,Ve),Ve.handler.guid||(Ve.handler.guid=y.guid)),R?Re.splice(Re.delegateCount++,0,Ve):Re.push(Ve),C.event.global[$e]=!0)},remove:function(l,d,y,_,R){var D,Y,le,ue,Ie,Ve,rt,Re,$e,St,Yt,Pt=z.hasData(l)&&z.get(l);if(Pt&&(ue=Pt.events)){for(Ie=(d=(d||"").match(tr)||[""]).length;Ie--;)if($e=Yt=(le=Qo.exec(d[Ie])||[])[1],St=(le[2]||"").split(".").sort(),$e){for(rt=C.event.special[$e]||{},Re=ue[$e=(_?rt.delegateType:rt.bindType)||$e]||[],le=le[2]&&new RegExp("(^|\\.)"+St.join("\\.(?:.*\\.|)")+"(\\.|$)"),Y=D=Re.length;D--;)Ve=Re[D],(R||Yt===Ve.origType)&&(!y||y.guid===Ve.guid)&&(!le||le.test(Ve.namespace))&&(!_||_===Ve.selector||"**"===_&&Ve.selector)&&(Re.splice(D,1),Ve.selector&&Re.delegateCount--,rt.remove&&rt.remove.call(l,Ve));Y&&!Re.length&&((!rt.teardown||!1===rt.teardown.call(l,St,Pt.handle))&&C.removeEvent(l,$e,Pt.handle),delete ue[$e])}else for($e in ue)C.event.remove(l,$e+d[Ie],y,_,!0);C.isEmptyObject(ue)&&z.remove(l,"handle events")}},dispatch:function(l){var d,y,_,R,D,Y,le=new Array(arguments.length),ue=C.event.fix(l),Ie=(z.get(this,"events")||Object.create(null))[ue.type]||[],Ve=C.event.special[ue.type]||{};for(le[0]=ue,d=1;d<arguments.length;d++)le[d]=arguments[d];if(ue.delegateTarget=this,!Ve.preDispatch||!1!==Ve.preDispatch.call(this,ue)){for(Y=C.event.handlers.call(this,ue,Ie),d=0;(R=Y[d++])&&!ue.isPropagationStopped();)for(ue.currentTarget=R.elem,y=0;(D=R.handlers[y++])&&!ue.isImmediatePropagationStopped();)(!ue.rnamespace||!1===D.namespace||ue.rnamespace.test(D.namespace))&&(ue.handleObj=D,ue.data=D.data,void 0!==(_=((C.event.special[D.origType]||{}).handle||D.handler).apply(R.elem,le))&&!1===(ue.result=_)&&(ue.preventDefault(),ue.stopPropagation()));return Ve.postDispatch&&Ve.postDispatch.call(this,ue),ue.result}},handlers:function(l,d){var y,_,R,D,Y,le=[],ue=d.delegateCount,Ie=l.target;if(ue&&Ie.nodeType&&!("click"===l.type&&l.button>=1))for(;Ie!==this;Ie=Ie.parentNode||this)if(1===Ie.nodeType&&("click"!==l.type||!0!==Ie.disabled)){for(D=[],Y={},y=0;y<ue;y++)void 0===Y[R=(_=d[y]).selector+" "]&&(Y[R]=_.needsContext?C(R,this).index(Ie)>-1:C.find(R,this,null,[Ie]).length),Y[R]&&D.push(_);D.length&&le.push({elem:Ie,handlers:D})}return Ie=this,ue<d.length&&le.push({elem:Ie,handlers:d.slice(ue)}),le},addProp:function(l,d){Object.defineProperty(C.Event.prototype,l,{enumerable:!0,configurable:!0,get:se(d)?function(){if(this.originalEvent)return d(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[l]},set:function(y){Object.defineProperty(this,l,{enumerable:!0,configurable:!0,writable:!0,value:y})}})},fix:function(l){return l[C.expando]?l:new C.Event(l)},special:{load:{noBubble:!0},click:{setup:function(l){var d=this||l;return cr.test(d.type)&&d.click&&pt(d,"input")&&xo(d,"click",Xi),!1},trigger:function(l){var d=this||l;return cr.test(d.type)&&d.click&&pt(d,"input")&&xo(d,"click"),!0},_default:function(l){var d=l.target;return cr.test(d.type)&&d.click&&pt(d,"input")&&z.get(d,"click")||pt(d,"a")}},beforeunload:{postDispatch:function(l){void 0!==l.result&&l.originalEvent&&(l.originalEvent.returnValue=l.result)}}}},C.removeEvent=function(l,d,y){l.removeEventListener&&l.removeEventListener(d,y)},C.Event=function(l,d){if(!(this instanceof C.Event))return new C.Event(l,d);l&&l.type?(this.originalEvent=l,this.type=l.type,this.isDefaultPrevented=l.defaultPrevented||void 0===l.defaultPrevented&&!1===l.returnValue?Xi:Wt,this.target=l.target&&3===l.target.nodeType?l.target.parentNode:l.target,this.currentTarget=l.currentTarget,this.relatedTarget=l.relatedTarget):this.type=l,d&&C.extend(this,d),this.timeStamp=l&&l.timeStamp||Date.now(),this[C.expando]=!0},C.Event.prototype={constructor:C.Event,isDefaultPrevented:Wt,isPropagationStopped:Wt,isImmediatePropagationStopped:Wt,isSimulated:!1,preventDefault:function(){var l=this.originalEvent;this.isDefaultPrevented=Xi,l&&!this.isSimulated&&l.preventDefault()},stopPropagation:function(){var l=this.originalEvent;this.isPropagationStopped=Xi,l&&!this.isSimulated&&l.stopPropagation()},stopImmediatePropagation:function(){var l=this.originalEvent;this.isImmediatePropagationStopped=Xi,l&&!this.isSimulated&&l.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},C.event.addProp),C.each({focus:"focusin",blur:"focusout"},function(l,d){C.event.special[l]={setup:function(){return xo(this,l,Mo),!1},trigger:function(){return xo(this,l),!0},_default:function(){return!0},delegateType:d}}),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(l,d){C.event.special[l]={delegateType:d,bindType:d,handle:function(y){var _,R=this,D=y.relatedTarget,Y=y.handleObj;return(!D||D!==R&&!C.contains(R,D))&&(y.type=Y.origType,_=Y.handler.apply(this,arguments),y.type=d),_}}}),C.fn.extend({on:function(l,d,y,_){return yo(this,l,d,y,_)},one:function(l,d,y,_){return yo(this,l,d,y,_,1)},off:function(l,d,y){var _,R;if(l&&l.preventDefault&&l.handleObj)return _=l.handleObj,C(l.delegateTarget).off(_.namespace?_.origType+"."+_.namespace:_.origType,_.selector,_.handler),this;if("object"==typeof l){for(R in l)this.off(R,d,l[R]);return this}return(!1===d||"function"==typeof d)&&(y=d,d=void 0),!1===y&&(y=Wt),this.each(function(){C.event.remove(this,l,y,d)})}});var zr=/<script|<style|<link/i,Mi=/checked\s*(?:[^=]|=\s*.checked.)/i,xi=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Lr(l,d){return pt(l,"table")&&pt(11!==d.nodeType?d:d.firstChild,"tr")&&C(l).children("tbody")[0]||l}function Ki(l){return l.type=(null!==l.getAttribute("type"))+"/"+l.type,l}function Er(l){return"true/"===(l.type||"").slice(0,5)?l.type=l.type.slice(5):l.removeAttribute("type"),l}function ko(l,d){var y,_,R,Y,le,ue;if(1===d.nodeType){if(z.hasData(l)&&(ue=z.get(l).events))for(R in z.remove(d,"handle events"),ue)for(y=0,_=ue[R].length;y<_;y++)C.event.add(d,R,ue[R][y]);re.hasData(l)&&(Y=re.access(l),le=C.extend({},Y),re.set(d,le))}}function Ea(l,d){var y=d.nodeName.toLowerCase();"input"===y&&cr.test(l.type)?d.checked=l.checked:("input"===y||"textarea"===y)&&(d.defaultValue=l.defaultValue)}function si(l,d,y,_){d=k(d);var R,D,Y,le,ue,Ie,Ve=0,rt=l.length,Re=rt-1,$e=d[0],St=se($e);if(St||rt>1&&"string"==typeof $e&&!i.checkClone&&Mi.test($e))return l.each(function(Yt){var Pt=l.eq(Yt);St&&(d[0]=$e.call(this,Yt,Pt.html())),si(Pt,d,y,_)});if(rt&&(D=(R=mo(d,l[0].ownerDocument,!1,l,_)).firstChild,1===R.childNodes.length&&(R=D),D||_)){for(le=(Y=C.map(sr(R,"script"),Ki)).length;Ve<rt;Ve++)ue=R,Ve!==Re&&(ue=C.clone(ue,!0,!0),le&&C.merge(Y,sr(ue,"script"))),y.call(l[Ve],ue,Ve);if(le)for(Ie=Y[Y.length-1].ownerDocument,C.map(Y,Er),Ve=0;Ve<le;Ve++)ai.test((ue=Y[Ve]).type||"")&&!z.access(ue,"globalEval")&&C.contains(Ie,ue)&&(ue.src&&"module"!==(ue.type||"").toLowerCase()?C._evalUrl&&!ue.noModule&&C._evalUrl(ue.src,{nonce:ue.nonce||ue.getAttribute("nonce")},Ie):xe(ue.textContent.replace(xi,""),ue,Ie))}return l}function Lo(l,d,y){for(var _,R=d?C.filter(d,l):l,D=0;null!=(_=R[D]);D++)!y&&1===_.nodeType&&C.cleanData(sr(_)),_.parentNode&&(y&&gn(_)&&Sn(sr(_,"script")),_.parentNode.removeChild(_));return l}C.extend({htmlPrefilter:function(l){return l},clone:function(l,d,y){var _,R,D,Y,le=l.cloneNode(!0),ue=gn(l);if(!(i.noCloneChecked||1!==l.nodeType&&11!==l.nodeType||C.isXMLDoc(l)))for(Y=sr(le),_=0,R=(D=sr(l)).length;_<R;_++)Ea(D[_],Y[_]);if(d)if(y)for(D=D||sr(l),Y=Y||sr(le),_=0,R=D.length;_<R;_++)ko(D[_],Y[_]);else ko(l,le);return(Y=sr(le,"script")).length>0&&Sn(Y,!ue&&sr(l,"script")),le},cleanData:function(l){for(var d,y,_,R=C.event.special,D=0;void 0!==(y=l[D]);D++)if(Kt(y)){if(d=y[z.expando]){if(d.events)for(_ in d.events)R[_]?C.event.remove(y,_):C.removeEvent(y,_,d.handle);y[z.expando]=void 0}y[re.expando]&&(y[re.expando]=void 0)}}}),C.fn.extend({detach:function(l){return Lo(this,l,!0)},remove:function(l){return Lo(this,l)},text:function(l){return pn(this,function(d){return void 0===d?C.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=d)})},null,l,arguments.length)},append:function(){return si(this,arguments,function(l){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Lr(this,l).appendChild(l)})},prepend:function(){return si(this,arguments,function(l){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var d=Lr(this,l);d.insertBefore(l,d.firstChild)}})},before:function(){return si(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this)})},after:function(){return si(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this.nextSibling)})},empty:function(){for(var l,d=0;null!=(l=this[d]);d++)1===l.nodeType&&(C.cleanData(sr(l,!1)),l.textContent="");return this},clone:function(l,d){return l=null!=l&&l,d=null==d?l:d,this.map(function(){return C.clone(this,l,d)})},html:function(l){return pn(this,function(d){var y=this[0]||{},_=0,R=this.length;if(void 0===d&&1===y.nodeType)return y.innerHTML;if("string"==typeof d&&!zr.test(d)&&!ir[(Nr.exec(d)||["",""])[1].toLowerCase()]){d=C.htmlPrefilter(d);try{for(;_<R;_++)1===(y=this[_]||{}).nodeType&&(C.cleanData(sr(y,!1)),y.innerHTML=d);y=0}catch(D){}}y&&this.empty().append(d)},null,l,arguments.length)},replaceWith:function(){var l=[];return si(this,arguments,function(d){var y=this.parentNode;C.inArray(this,l)<0&&(C.cleanData(sr(this)),y&&y.replaceChild(d,this))},l)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(l,d){C.fn[l]=function(y){for(var _,R=[],D=C(y),Y=D.length-1,le=0;le<=Y;le++)_=le===Y?this:this.clone(!0),C(D[le])[d](_),M.apply(R,_.get());return this.pushStack(R)}});var Oo=new RegExp("^("+Nt+")(?!px)[a-z%]+$","i"),Jt=function(l){var d=l.ownerDocument.defaultView;return(!d||!d.opener)&&(d=g),d.getComputedStyle(l)},Ro=function(l,d,y){var _,R,D={};for(R in d)D[R]=l.style[R],l.style[R]=d[R];for(R in _=y.call(l),d)l.style[R]=D[R];return _},qo=new RegExp(mn.join("|"),"i");function ki(l,d,y){var _,R,D,Y,le=l.style;return(y=y||Jt(l))&&(""===(Y=y.getPropertyValue(d)||y[d])&&!gn(l)&&(Y=C.style(l,d)),!i.pixelBoxStyles()&&Oo.test(Y)&&qo.test(d)&&(_=le.width,R=le.minWidth,D=le.maxWidth,le.minWidth=le.maxWidth=le.width=Y,Y=y.width,le.width=_,le.minWidth=R,le.maxWidth=D)),void 0!==Y?Y+"":Y}function Pa(l,d){return{get:function(){if(!l())return(this.get=d).apply(this,arguments);delete this.get}}}!function(){function l(){if(Ie){ue.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ie.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",On.appendChild(ue).appendChild(Ie);var Ve=g.getComputedStyle(Ie);y="1%"!==Ve.top,le=12===d(Ve.marginLeft),Ie.style.right="60%",D=36===d(Ve.right),_=36===d(Ve.width),Ie.style.position="absolute",R=12===d(Ie.offsetWidth/3),On.removeChild(ue),Ie=null}}function d(Ve){return Math.round(parseFloat(Ve))}var y,_,R,D,Y,le,ue=he.createElement("div"),Ie=he.createElement("div");!Ie.style||(Ie.style.backgroundClip="content-box",Ie.cloneNode(!0).style.backgroundClip="",i.clearCloneStyle="content-box"===Ie.style.backgroundClip,C.extend(i,{boxSizingReliable:function(){return l(),_},pixelBoxStyles:function(){return l(),D},pixelPosition:function(){return l(),y},reliableMarginLeft:function(){return l(),le},scrollboxSize:function(){return l(),R},reliableTrDimensions:function(){var Ve,rt,Re,$e;return null==Y&&(Ve=he.createElement("table"),rt=he.createElement("tr"),Re=he.createElement("div"),Ve.style.cssText="position:absolute;left:-11111px;border-collapse:separate",rt.style.cssText="border:1px solid",rt.style.height="1px",Re.style.height="9px",Re.style.display="block",On.appendChild(Ve).appendChild(rt).appendChild(Re),$e=g.getComputedStyle(rt),Y=parseInt($e.height,10)+parseInt($e.borderTopWidth,10)+parseInt($e.borderBottomWidth,10)===rt.offsetHeight,On.removeChild(Ve)),Y}}))}();var Aa=["Webkit","Moz","ms"],Ia=he.createElement("div").style,qa={};function Ji(l){return C.cssProps[l]||qa[l]||(l in Ia?l:qa[l]=function es(l){for(var d=l[0].toUpperCase()+l.slice(1),y=Aa.length;y--;)if((l=Aa[y]+d)in Ia)return l}(l)||l)}var Zi=/^(none|table(?!-c[ea]).+)/,ye=/^--/,Pr={position:"absolute",visibility:"hidden",display:"block"},bi={letterSpacing:"0",fontWeight:"400"};function ea(l,d,y){var _=Ht.exec(d);return _?Math.max(0,_[2]-(y||0))+(_[3]||"px"):d}function gt(l,d,y,_,R,D){var Y="width"===d?1:0,le=0,ue=0;if(y===(_?"border":"content"))return 0;for(;Y<4;Y+=2)"margin"===y&&(ue+=C.css(l,y+mn[Y],!0,R)),_?("content"===y&&(ue-=C.css(l,"padding"+mn[Y],!0,R)),"margin"!==y&&(ue-=C.css(l,"border"+mn[Y]+"Width",!0,R))):(ue+=C.css(l,"padding"+mn[Y],!0,R),"padding"!==y?ue+=C.css(l,"border"+mn[Y]+"Width",!0,R):le+=C.css(l,"border"+mn[Y]+"Width",!0,R));return!_&&D>=0&&(ue+=Math.max(0,Math.ceil(l["offset"+d[0].toUpperCase()+d.slice(1)]-D-ue-le-.5))||0),ue}function Li(l,d,y){var _=Jt(l),D=(!i.boxSizingReliable()||y)&&"border-box"===C.css(l,"boxSizing",!1,_),Y=D,le=ki(l,d,_),ue="offset"+d[0].toUpperCase()+d.slice(1);if(Oo.test(le)){if(!y)return le;le="auto"}return(!i.boxSizingReliable()&&D||!i.reliableTrDimensions()&&pt(l,"tr")||"auto"===le||!parseFloat(le)&&"inline"===C.css(l,"display",!1,_))&&l.getClientRects().length&&(D="border-box"===C.css(l,"boxSizing",!1,_),(Y=ue in l)&&(le=l[ue])),(le=parseFloat(le)||0)+gt(l,d,y||(D?"border":"content"),Y,_,le)+"px"}function br(l,d,y,_,R){return new br.prototype.init(l,d,y,_,R)}C.extend({cssHooks:{opacity:{get:function(l,d){if(d){var y=ki(l,"opacity");return""===y?"1":y}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(l,d,y,_){if(l&&3!==l.nodeType&&8!==l.nodeType&&l.style){var R,D,Y,le=un(d),ue=ye.test(d),Ie=l.style;if(ue||(d=Ji(le)),Y=C.cssHooks[d]||C.cssHooks[le],void 0===y)return Y&&"get"in Y&&void 0!==(R=Y.get(l,!1,_))?R:Ie[d];if("string"==(D=typeof y)&&(R=Ht.exec(y))&&R[1]&&(y=yi(l,d,R),D="number"),null==y||y!=y)return;"number"===D&&!ue&&(y+=R&&R[3]||(C.cssNumber[le]?"":"px")),!i.clearCloneStyle&&""===y&&0===d.indexOf("background")&&(Ie[d]="inherit"),(!Y||!("set"in Y)||void 0!==(y=Y.set(l,y,_)))&&(ue?Ie.setProperty(d,y):Ie[d]=y)}},css:function(l,d,y,_){var R,D,Y,le=un(d);return ye.test(d)||(d=Ji(le)),(Y=C.cssHooks[d]||C.cssHooks[le])&&"get"in Y&&(R=Y.get(l,!0,y)),void 0===R&&(R=ki(l,d,_)),"normal"===R&&d in bi&&(R=bi[d]),""===y||y?(D=parseFloat(R),!0===y||isFinite(D)?D||0:R):R}}),C.each(["height","width"],function(l,d){C.cssHooks[d]={get:function(y,_,R){if(_)return!Zi.test(C.css(y,"display"))||y.getClientRects().length&&y.getBoundingClientRect().width?Li(y,d,R):Ro(y,Pr,function(){return Li(y,d,R)})},set:function(y,_,R){var D,Y=Jt(y),le=!i.scrollboxSize()&&"absolute"===Y.position,Ie=(le||R)&&"border-box"===C.css(y,"boxSizing",!1,Y),Ve=R?gt(y,d,R,Ie,Y):0;return Ie&&le&&(Ve-=Math.ceil(y["offset"+d[0].toUpperCase()+d.slice(1)]-parseFloat(Y[d])-gt(y,d,"border",!1,Y)-.5)),Ve&&(D=Ht.exec(_))&&"px"!==(D[3]||"px")&&(y.style[d]=_,_=C.css(y,d)),ea(0,_,Ve)}}}),C.cssHooks.marginLeft=Pa(i.reliableMarginLeft,function(l,d){if(d)return(parseFloat(ki(l,"marginLeft"))||l.getBoundingClientRect().left-Ro(l,{marginLeft:0},function(){return l.getBoundingClientRect().left}))+"px"}),C.each({margin:"",padding:"",border:"Width"},function(l,d){C.cssHooks[l+d]={expand:function(y){for(var _=0,R={},D="string"==typeof y?y.split(" "):[y];_<4;_++)R[l+mn[_]+d]=D[_]||D[_-2]||D[0];return R}},"margin"!==l&&(C.cssHooks[l+d].set=ea)}),C.fn.extend({css:function(l,d){return pn(this,function(y,_,R){var D,Y,le={},ue=0;if(Array.isArray(_)){for(D=Jt(y),Y=_.length;ue<Y;ue++)le[_[ue]]=C.css(y,_[ue],!1,D);return le}return void 0!==R?C.style(y,_,R):C.css(y,_)},l,d,arguments.length>1)}}),C.Tween=br,(br.prototype={constructor:br,init:function(l,d,y,_,R,D){this.elem=l,this.prop=y,this.easing=R||C.easing._default,this.options=d,this.start=this.now=this.cur(),this.end=_,this.unit=D||(C.cssNumber[y]?"":"px")},cur:function(){var l=br.propHooks[this.prop];return l&&l.get?l.get(this):br.propHooks._default.get(this)},run:function(l){var d,y=br.propHooks[this.prop];return this.pos=d=this.options.duration?C.easing[this.easing](l,this.options.duration*l,0,1,this.options.duration):l,this.now=(this.end-this.start)*d+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),y&&y.set?y.set(this):br.propHooks._default.set(this),this}}).init.prototype=br.prototype,(br.propHooks={_default:{get:function(l){var d;return 1!==l.elem.nodeType||null!=l.elem[l.prop]&&null==l.elem.style[l.prop]?l.elem[l.prop]:(d=C.css(l.elem,l.prop,""))&&"auto"!==d?d:0},set:function(l){C.fx.step[l.prop]?C.fx.step[l.prop](l):1!==l.elem.nodeType||!C.cssHooks[l.prop]&&null==l.elem.style[Ji(l.prop)]?l.elem[l.prop]=l.now:C.style(l.elem,l.prop,l.now+l.unit)}}}).scrollTop=br.propHooks.scrollLeft={set:function(l){l.elem.nodeType&&l.elem.parentNode&&(l.elem[l.prop]=l.now)}},C.easing={linear:function(l){return l},swing:function(l){return.5-Math.cos(l*Math.PI)/2},_default:"swing"},C.fx=br.prototype.init,C.fx.step={};var Ci,ta,Or=/^(?:toggle|show|hide)$/,ts=/queueHooks$/;function Qi(){ta&&(!1===he.hidden&&g.requestAnimationFrame?g.requestAnimationFrame(Qi):g.setTimeout(Qi,C.fx.interval),C.fx.tick())}function na(){return g.setTimeout(function(){Ci=void 0}),Ci=Date.now()}function bo(l,d){var y,_=0,R={height:l};for(d=d?1:0;_<4;_+=2-d)R["margin"+(y=mn[_])]=R["padding"+y]=l;return d&&(R.opacity=R.width=l),R}function Oi(l,d,y){for(var _,R=(Rr.tweeners[d]||[]).concat(Rr.tweeners["*"]),D=0,Y=R.length;D<Y;D++)if(_=R[D].call(y,d,l))return _}function Rr(l,d,y){var _,R,D=0,Y=Rr.prefilters.length,le=C.Deferred().always(function(){delete ue.elem}),ue=function(){if(R)return!1;for(var rt=Ci||na(),Re=Math.max(0,Ie.startTime+Ie.duration-rt),St=1-(Re/Ie.duration||0),Yt=0,Pt=Ie.tweens.length;Yt<Pt;Yt++)Ie.tweens[Yt].run(St);return le.notifyWith(l,[Ie,St,Re]),St<1&&Pt?Re:(Pt||le.notifyWith(l,[Ie,1,0]),le.resolveWith(l,[Ie]),!1)},Ie=le.promise({elem:l,props:C.extend({},d),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},y),originalProperties:d,originalOptions:y,startTime:Ci||na(),duration:y.duration,tweens:[],createTween:function(rt,Re){var $e=C.Tween(l,Ie.opts,rt,Re,Ie.opts.specialEasing[rt]||Ie.opts.easing);return Ie.tweens.push($e),$e},stop:function(rt){var Re=0,$e=rt?Ie.tweens.length:0;if(R)return this;for(R=!0;Re<$e;Re++)Ie.tweens[Re].run(1);return rt?(le.notifyWith(l,[Ie,1,0]),le.resolveWith(l,[Ie,rt])):le.rejectWith(l,[Ie,rt]),this}}),Ve=Ie.props;for(function No(l,d){var y,_,R,D,Y;for(y in l)if(R=d[_=un(y)],D=l[y],Array.isArray(D)&&(R=D[1],D=l[y]=D[0]),y!==_&&(l[_]=D,delete l[y]),(Y=C.cssHooks[_])&&"expand"in Y)for(y in D=Y.expand(D),delete l[_],D)y in l||(l[y]=D[y],d[y]=R);else d[_]=R}(Ve,Ie.opts.specialEasing);D<Y;D++)if(_=Rr.prefilters[D].call(Ie,l,Ve,Ie.opts))return se(_.stop)&&(C._queueHooks(Ie.elem,Ie.opts.queue).stop=_.stop.bind(_)),_;return C.map(Ve,Oi,Ie),se(Ie.opts.start)&&Ie.opts.start.call(l,Ie),Ie.progress(Ie.opts.progress).done(Ie.opts.done,Ie.opts.complete).fail(Ie.opts.fail).always(Ie.opts.always),C.fx.timer(C.extend(ue,{elem:l,anim:Ie,queue:Ie.opts.queue})),Ie}C.Animation=C.extend(Rr,{tweeners:{"*":[function(l,d){var y=this.createTween(l,d);return yi(y.elem,l,Ht.exec(d),y),y}]},tweener:function(l,d){se(l)?(d=l,l=["*"]):l=l.match(tr);for(var y,_=0,R=l.length;_<R;_++)(Rr.tweeners[y=l[_]]=Rr.tweeners[y]||[]).unshift(d)},prefilters:[function Ma(l,d,y){var _,R,D,Y,le,ue,Ie,Ve,rt="width"in d||"height"in d,Re=this,$e={},St=l.style,Yt=l.nodeType&&Tr(l),Pt=z.get(l,"fxshow");for(_ in y.queue||(null==(Y=C._queueHooks(l,"fx")).unqueued&&(Y.unqueued=0,le=Y.empty.fire,Y.empty.fire=function(){Y.unqueued||le()}),Y.unqueued++,Re.always(function(){Re.always(function(){Y.unqueued--,C.queue(l,"fx").length||Y.empty.fire()})})),d)if(Or.test(R=d[_])){if(delete d[_],D=D||"toggle"===R,R===(Yt?"hide":"show")){if("show"!==R||!Pt||void 0===Pt[_])continue;Yt=!0}$e[_]=Pt&&Pt[_]||C.style(l,_)}if((ue=!C.isEmptyObject(d))||!C.isEmptyObject($e))for(_ in rt&&1===l.nodeType&&(y.overflow=[St.overflow,St.overflowX,St.overflowY],null==(Ie=Pt&&Pt.display)&&(Ie=z.get(l,"display")),"none"===(Ve=C.css(l,"display"))&&(Ie?Ve=Ie:(rr([l],!0),Ie=l.style.display||Ie,Ve=C.css(l,"display"),rr([l]))),("inline"===Ve||"inline-block"===Ve&&null!=Ie)&&"none"===C.css(l,"float")&&(ue||(Re.done(function(){St.display=Ie}),null==Ie&&(Ie="none"===(Ve=St.display)?"":Ve)),St.display="inline-block")),y.overflow&&(St.overflow="hidden",Re.always(function(){St.overflow=y.overflow[0],St.overflowX=y.overflow[1],St.overflowY=y.overflow[2]})),ue=!1,$e)ue||(Pt?"hidden"in Pt&&(Yt=Pt.hidden):Pt=z.access(l,"fxshow",{display:Ie}),D&&(Pt.hidden=!Yt),Yt&&rr([l],!0),Re.done(function(){for(_ in Yt||rr([l]),z.remove(l,"fxshow"),$e)C.style(l,_,$e[_])})),ue=Oi(Yt?Pt[_]:0,_,Re),_ in Pt||(Pt[_]=ue.start,Yt&&(ue.end=ue.start,ue.start=0))}],prefilter:function(l,d){d?Rr.prefilters.unshift(l):Rr.prefilters.push(l)}}),C.speed=function(l,d,y){var _=l&&"object"==typeof l?C.extend({},l):{complete:y||!y&&d||se(l)&&l,duration:l,easing:y&&d||d&&!se(d)&&d};return C.fx.off?_.duration=0:"number"!=typeof _.duration&&(_.duration=_.duration in C.fx.speeds?C.fx.speeds[_.duration]:C.fx.speeds._default),(null==_.queue||!0===_.queue)&&(_.queue="fx"),_.old=_.complete,_.complete=function(){se(_.old)&&_.old.call(this),_.queue&&C.dequeue(this,_.queue)},_},C.fn.extend({fadeTo:function(l,d,y,_){return this.filter(Tr).css("opacity",0).show().end().animate({opacity:d},l,y,_)},animate:function(l,d,y,_){var R=C.isEmptyObject(l),D=C.speed(d,y,_),Y=function(){var le=Rr(this,C.extend({},l),D);(R||z.get(this,"finish"))&&le.stop(!0)};return Y.finish=Y,R||!1===D.queue?this.each(Y):this.queue(D.queue,Y)},stop:function(l,d,y){var _=function(R){var D=R.stop;delete R.stop,D(y)};return"string"!=typeof l&&(y=d,d=l,l=void 0),d&&this.queue(l||"fx",[]),this.each(function(){var R=!0,D=null!=l&&l+"queueHooks",Y=C.timers,le=z.get(this);if(D)le[D]&&le[D].stop&&_(le[D]);else for(D in le)le[D]&&le[D].stop&&ts.test(D)&&_(le[D]);for(D=Y.length;D--;)Y[D].elem===this&&(null==l||Y[D].queue===l)&&(Y[D].anim.stop(y),R=!1,Y.splice(D,1));(R||!y)&&C.dequeue(this,l)})},finish:function(l){return!1!==l&&(l=l||"fx"),this.each(function(){var d,y=z.get(this),_=y[l+"queue"],R=y[l+"queueHooks"],D=C.timers,Y=_?_.length:0;for(y.finish=!0,C.queue(this,l,[]),R&&R.stop&&R.stop.call(this,!0),d=D.length;d--;)D[d].elem===this&&D[d].queue===l&&(D[d].anim.stop(!0),D.splice(d,1));for(d=0;d<Y;d++)_[d]&&_[d].finish&&_[d].finish.call(this);delete y.finish})}}),C.each(["toggle","show","hide"],function(l,d){var y=C.fn[d];C.fn[d]=function(_,R,D){return null==_||"boolean"==typeof _?y.apply(this,arguments):this.animate(bo(d,!0),_,R,D)}}),C.each({slideDown:bo("show"),slideUp:bo("hide"),slideToggle:bo("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(l,d){C.fn[l]=function(y,_,R){return this.animate(d,y,_,R)}}),C.timers=[],C.fx.tick=function(){var l,d=0,y=C.timers;for(Ci=Date.now();d<y.length;d++)!(l=y[d])()&&y[d]===l&&y.splice(d--,1);y.length||C.fx.stop(),Ci=void 0},C.fx.timer=function(l){C.timers.push(l),C.fx.start()},C.fx.interval=13,C.fx.start=function(){ta||(ta=!0,Qi())},C.fx.stop=function(){ta=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(l,d){return l=C.fx&&C.fx.speeds[l]||l,this.queue(d=d||"fx",function(y,_){var R=g.setTimeout(y,l);_.stop=function(){g.clearTimeout(R)}})},function(){var l=he.createElement("input"),y=he.createElement("select").appendChild(he.createElement("option"));l.type="checkbox",i.checkOn=""!==l.value,i.optSelected=y.selected,(l=he.createElement("input")).value="t",l.type="radio",i.radioValue="t"===l.value}();var ct,ui=C.expr.attrHandle;C.fn.extend({attr:function(l,d){return pn(this,C.attr,l,d,arguments.length>1)},removeAttr:function(l){return this.each(function(){C.removeAttr(this,l)})}}),C.extend({attr:function(l,d,y){var _,R,D=l.nodeType;if(3!==D&&8!==D&&2!==D)return void 0===l.getAttribute?C.prop(l,d,y):((1!==D||!C.isXMLDoc(l))&&(R=C.attrHooks[d.toLowerCase()]||(C.expr.match.bool.test(d)?ct:void 0)),void 0!==y?null===y?void C.removeAttr(l,d):R&&"set"in R&&void 0!==(_=R.set(l,y,d))?_:(l.setAttribute(d,y+""),y):R&&"get"in R&&null!==(_=R.get(l,d))?_:null==(_=C.find.attr(l,d))?void 0:_)},attrHooks:{type:{set:function(l,d){if(!i.radioValue&&"radio"===d&&pt(l,"input")){var y=l.value;return l.setAttribute("type",d),y&&(l.value=y),d}}}},removeAttr:function(l,d){var y,_=0,R=d&&d.match(tr);if(R&&1===l.nodeType)for(;y=R[_++];)l.removeAttribute(y)}}),ct={set:function(l,d,y){return!1===d?C.removeAttr(l,y):l.setAttribute(y,y),y}},C.each(C.expr.match.bool.source.match(/\w+/g),function(l,d){var y=ui[d]||C.find.attr;ui[d]=function(_,R,D){var Y,le,ue=R.toLowerCase();return D||(le=ui[ue],ui[ue]=Y,Y=null!=y(_,R,D)?ue:null,ui[ue]=le),Y}});var ra=/^(?:input|select|textarea|button)$/i,Do=/^(?:a|area)$/i;function li(l){return(l.match(tr)||[]).join(" ")}function fn(l){return l.getAttribute&&l.getAttribute("class")||""}function Vi(l){return Array.isArray(l)?l:"string"==typeof l&&l.match(tr)||[]}C.fn.extend({prop:function(l,d){return pn(this,C.prop,l,d,arguments.length>1)},removeProp:function(l){return this.each(function(){delete this[C.propFix[l]||l]})}}),C.extend({prop:function(l,d,y){var _,R,D=l.nodeType;if(3!==D&&8!==D&&2!==D)return(1!==D||!C.isXMLDoc(l))&&(R=C.propHooks[d=C.propFix[d]||d]),void 0!==y?R&&"set"in R&&void 0!==(_=R.set(l,y,d))?_:l[d]=y:R&&"get"in R&&null!==(_=R.get(l,d))?_:l[d]},propHooks:{tabIndex:{get:function(l){var d=C.find.attr(l,"tabindex");return d?parseInt(d,10):ra.test(l.nodeName)||Do.test(l.nodeName)&&l.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),i.optSelected||(C.propHooks.selected={get:function(l){return null},set:function(l){}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){C.propFix[this.toLowerCase()]=this}),C.fn.extend({addClass:function(l){var d,y,_,R,D,Y,le,ue=0;if(se(l))return this.each(function(Ie){C(this).addClass(l.call(this,Ie,fn(this)))});if((d=Vi(l)).length)for(;y=this[ue++];)if(R=fn(y),_=1===y.nodeType&&" "+li(R)+" "){for(Y=0;D=d[Y++];)_.indexOf(" "+D+" ")<0&&(_+=D+" ");R!==(le=li(_))&&y.setAttribute("class",le)}return this},removeClass:function(l){var d,y,_,R,D,Y,le,ue=0;if(se(l))return this.each(function(Ie){C(this).removeClass(l.call(this,Ie,fn(this)))});if(!arguments.length)return this.attr("class","");if((d=Vi(l)).length)for(;y=this[ue++];)if(R=fn(y),_=1===y.nodeType&&" "+li(R)+" "){for(Y=0;D=d[Y++];)for(;_.indexOf(" "+D+" ")>-1;)_=_.replace(" "+D+" "," ");R!==(le=li(_))&&y.setAttribute("class",le)}return this},toggleClass:function(l,d){var y=typeof l,_="string"===y||Array.isArray(l);return"boolean"==typeof d&&_?d?this.addClass(l):this.removeClass(l):se(l)?this.each(function(R){C(this).toggleClass(l.call(this,R,fn(this),d),d)}):this.each(function(){var R,D,Y,le;if(_)for(D=0,Y=C(this),le=Vi(l);R=le[D++];)Y.hasClass(R)?Y.removeClass(R):Y.addClass(R);else(void 0===l||"boolean"===y)&&((R=fn(this))&&z.set(this,"__className__",R),this.setAttribute&&this.setAttribute("class",R||!1===l?"":z.get(this,"__className__")||""))})},hasClass:function(l){var d,y,_=0;for(d=" "+l+" ";y=this[_++];)if(1===y.nodeType&&(" "+li(fn(y))+" ").indexOf(d)>-1)return!0;return!1}});var ia=/\r/g;C.fn.extend({val:function(l){var d,y,_,R=this[0];return arguments.length?(_=se(l),this.each(function(D){var Y;1===this.nodeType&&(null==(Y=_?l.call(this,D,C(this).val()):l)?Y="":"number"==typeof Y?Y+="":Array.isArray(Y)&&(Y=C.map(Y,function(le){return null==le?"":le+""})),(!(d=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])||!("set"in d)||void 0===d.set(this,Y,"value"))&&(this.value=Y))})):R?(d=C.valHooks[R.type]||C.valHooks[R.nodeName.toLowerCase()])&&"get"in d&&void 0!==(y=d.get(R,"value"))?y:"string"==typeof(y=R.value)?y.replace(ia,""):null==y?"":y:void 0}}),C.extend({valHooks:{option:{get:function(l){var d=C.find.attr(l,"value");return null!=d?d:li(C.text(l))}},select:{get:function(l){var d,y,_,R=l.options,D=l.selectedIndex,Y="select-one"===l.type,le=Y?null:[],ue=Y?D+1:R.length;for(_=D<0?ue:Y?D:0;_<ue;_++)if(((y=R[_]).selected||_===D)&&!y.disabled&&(!y.parentNode.disabled||!pt(y.parentNode,"optgroup"))){if(d=C(y).val(),Y)return d;le.push(d)}return le},set:function(l,d){for(var y,_,R=l.options,D=C.makeArray(d),Y=R.length;Y--;)((_=R[Y]).selected=C.inArray(C.valHooks.option.get(_),D)>-1)&&(y=!0);return y||(l.selectedIndex=-1),D}}}}),C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(l,d){if(Array.isArray(d))return l.checked=C.inArray(C(l).val(),d)>-1}},i.checkOn||(C.valHooks[this].get=function(l){return null===l.getAttribute("value")?"on":l.value})}),i.focusin="onfocusin"in g;var Xr=/^(?:focusinfocus|focusoutblur)$/,Bi=function(l){l.stopPropagation()};C.extend(C.event,{trigger:function(l,d,y,_){var R,D,Y,le,ue,Ie,Ve,rt,Re=[y||he],$e=X.call(l,"type")?l.type:l,St=X.call(l,"namespace")?l.namespace.split("."):[];if(D=rt=Y=y=y||he,3!==y.nodeType&&8!==y.nodeType&&!Xr.test($e+C.event.triggered)&&($e.indexOf(".")>-1&&(St=$e.split("."),$e=St.shift(),St.sort()),ue=$e.indexOf(":")<0&&"on"+$e,(l=l[C.expando]?l:new C.Event($e,"object"==typeof l&&l)).isTrigger=_?2:3,l.namespace=St.join("."),l.rnamespace=l.namespace?new RegExp("(^|\\.)"+St.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l.result=void 0,l.target||(l.target=y),d=null==d?[l]:C.makeArray(d,[l]),Ve=C.event.special[$e]||{},_||!Ve.trigger||!1!==Ve.trigger.apply(y,d))){if(!_&&!Ve.noBubble&&!ve(y)){for(Xr.test((le=Ve.delegateType||$e)+$e)||(D=D.parentNode);D;D=D.parentNode)Re.push(D),Y=D;Y===(y.ownerDocument||he)&&Re.push(Y.defaultView||Y.parentWindow||g)}for(R=0;(D=Re[R++])&&!l.isPropagationStopped();)rt=D,l.type=R>1?le:Ve.bindType||$e,(Ie=(z.get(D,"events")||Object.create(null))[l.type]&&z.get(D,"handle"))&&Ie.apply(D,d),(Ie=ue&&D[ue])&&Ie.apply&&Kt(D)&&(l.result=Ie.apply(D,d),!1===l.result&&l.preventDefault());return l.type=$e,!_&&!l.isDefaultPrevented()&&(!Ve._default||!1===Ve._default.apply(Re.pop(),d))&&Kt(y)&&ue&&se(y[$e])&&!ve(y)&&((Y=y[ue])&&(y[ue]=null),C.event.triggered=$e,l.isPropagationStopped()&&rt.addEventListener($e,Bi),y[$e](),l.isPropagationStopped()&&rt.removeEventListener($e,Bi),C.event.triggered=void 0,Y&&(y[ue]=Y)),l.result}},simulate:function(l,d,y){var _=C.extend(new C.Event,y,{type:l,isSimulated:!0});C.event.trigger(_,null,d)}}),C.fn.extend({trigger:function(l,d){return this.each(function(){C.event.trigger(l,d,this)})},triggerHandler:function(l,d){var y=this[0];if(y)return C.event.trigger(l,d,y,!0)}}),i.focusin||C.each({focus:"focusin",blur:"focusout"},function(l,d){var y=function(_){C.event.simulate(d,_.target,C.event.fix(_))};C.event.special[d]={setup:function(){var _=this.ownerDocument||this.document||this,R=z.access(_,d);R||_.addEventListener(l,y,!0),z.access(_,d,(R||0)+1)},teardown:function(){var _=this.ownerDocument||this.document||this,R=z.access(_,d)-1;R?z.access(_,d,R):(_.removeEventListener(l,y,!0),z.remove(_,d))}}});var _i=g.location,yn={guid:Date.now()},qi=/\?/;C.parseXML=function(l){var d,y;if(!l||"string"!=typeof l)return null;try{d=(new g.DOMParser).parseFromString(l,"text/xml")}catch(_){}return y=d&&d.getElementsByTagName("parsererror")[0],(!d||y)&&C.error("Invalid XML: "+(y?C.map(y.childNodes,function(_){return _.textContent}).join("\n"):l)),d};var It=/\[\]$/,Kr=/\r?\n/g,ci=/^(?:submit|button|image|reset|file)$/i,Cr=/^(?:input|select|textarea|keygen)/i;function oa(l,d,y,_){var R;if(Array.isArray(d))C.each(d,function(D,Y){y||It.test(l)?_(l,Y):oa(l+"["+("object"==typeof Y&&null!=Y?D:"")+"]",Y,y,_)});else if(y||"object"!==Ae(d))_(l,d);else for(R in d)oa(l+"["+R+"]",d[R],y,_)}C.param=function(l,d){var y,_=[],R=function(D,Y){var le=se(Y)?Y():Y;_[_.length]=encodeURIComponent(D)+"="+encodeURIComponent(null==le?"":le)};if(null==l)return"";if(Array.isArray(l)||l.jquery&&!C.isPlainObject(l))C.each(l,function(){R(this.name,this.value)});else for(y in l)oa(y,l[y],d,R);return _.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var l=C.prop(this,"elements");return l?C.makeArray(l):this}).filter(function(){var l=this.type;return this.name&&!C(this).is(":disabled")&&Cr.test(this.nodeName)&&!ci.test(l)&&(this.checked||!cr.test(l))}).map(function(l,d){var y=C(this).val();return null==y?null:Array.isArray(y)?C.map(y,function(_){return{name:d.name,value:_.replace(Kr,"\r\n")}}):{name:d.name,value:y.replace(Kr,"\r\n")}}).get()}});var Jr=/%20/g,ns=/#.*$/,Hi=/([?&])_=[^&]*/,aa=/^(.*?):[ \t]*([^\r\n]*)$/gm,sa=/^(?:GET|HEAD)$/,ka=/^\/\//,eo={},Ar={},La="*/".concat("*"),fi=he.createElement("a");function ua(l){return function(d,y){"string"!=typeof d&&(y=d,d="*");var _,R=0,D=d.toLowerCase().match(tr)||[];if(se(y))for(;_=D[R++];)"+"===_[0]?(_=_.slice(1)||"*",(l[_]=l[_]||[]).unshift(y)):(l[_]=l[_]||[]).push(y)}}function Fo(l,d,y,_){var R={},D=l===Ar;function Y(le){var ue;return R[le]=!0,C.each(l[le]||[],function(Ie,Ve){var rt=Ve(d,y,_);return"string"!=typeof rt||D||R[rt]?D?!(ue=rt):void 0:(d.dataTypes.unshift(rt),Y(rt),!1)}),ue}return Y(d.dataTypes[0])||!R["*"]&&Y("*")}function Vn(l,d){var y,_,R=C.ajaxSettings.flatOptions||{};for(y in d)void 0!==d[y]&&((R[y]?l:_||(_={}))[y]=d[y]);return _&&C.extend(!0,l,_),l}fi.href=_i.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_i.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(_i.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":La,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(l,d){return d?Vn(Vn(l,C.ajaxSettings),d):Vn(C.ajaxSettings,l)},ajaxPrefilter:ua(eo),ajaxTransport:ua(Ar),ajax:function(l,d){"object"==typeof l&&(d=l,l=void 0);var y,_,R,D,Y,le,ue,Ie,Ve,rt,Re=C.ajaxSetup({},d=d||{}),$e=Re.context||Re,St=Re.context&&($e.nodeType||$e.jquery)?C($e):C.event,Yt=C.Deferred(),Pt=C.Callbacks("once memory"),qn=Re.statusCode||{},fr={},je={},Mt="canceled",kt={readyState:0,getResponseHeader:function(bn){var Xn;if(ue){if(!D)for(D={};Xn=aa.exec(R);)D[Xn[1].toLowerCase()+" "]=(D[Xn[1].toLowerCase()+" "]||[]).concat(Xn[2]);Xn=D[bn.toLowerCase()+" "]}return null==Xn?null:Xn.join(", ")},getAllResponseHeaders:function(){return ue?R:null},setRequestHeader:function(bn,Xn){return null==ue&&(bn=je[bn.toLowerCase()]=je[bn.toLowerCase()]||bn,fr[bn]=Xn),this},overrideMimeType:function(bn){return null==ue&&(Re.mimeType=bn),this},statusCode:function(bn){var Xn;if(bn)if(ue)kt.always(bn[kt.status]);else for(Xn in bn)qn[Xn]=[qn[Xn],bn[Xn]];return this},abort:function(bn){var Xn=bn||Mt;return y&&y.abort(Xn),Gr(0,Xn),this}};if(Yt.promise(kt),Re.url=((l||Re.url||_i.href)+"").replace(ka,_i.protocol+"//"),Re.type=d.method||d.type||Re.method||Re.type,Re.dataTypes=(Re.dataType||"*").toLowerCase().match(tr)||[""],null==Re.crossDomain){le=he.createElement("a");try{le.href=Re.url,le.href=le.href,Re.crossDomain=fi.protocol+"//"+fi.host!=le.protocol+"//"+le.host}catch(bn){Re.crossDomain=!0}}if(Re.data&&Re.processData&&"string"!=typeof Re.data&&(Re.data=C.param(Re.data,Re.traditional)),Fo(eo,Re,d,kt),ue)return kt;for(Ve in(Ie=C.event&&Re.global)&&0==C.active++&&C.event.trigger("ajaxStart"),Re.type=Re.type.toUpperCase(),Re.hasContent=!sa.test(Re.type),_=Re.url.replace(ns,""),Re.hasContent?Re.data&&Re.processData&&0===(Re.contentType||"").indexOf("application/x-www-form-urlencoded")&&(Re.data=Re.data.replace(Jr,"+")):(rt=Re.url.slice(_.length),Re.data&&(Re.processData||"string"==typeof Re.data)&&(_+=(qi.test(_)?"&":"?")+Re.data,delete Re.data),!1===Re.cache&&(_=_.replace(Hi,"$1"),rt=(qi.test(_)?"&":"?")+"_="+yn.guid+++rt),Re.url=_+rt),Re.ifModified&&(C.lastModified[_]&&kt.setRequestHeader("If-Modified-Since",C.lastModified[_]),C.etag[_]&&kt.setRequestHeader("If-None-Match",C.etag[_])),(Re.data&&Re.hasContent&&!1!==Re.contentType||d.contentType)&&kt.setRequestHeader("Content-Type",Re.contentType),kt.setRequestHeader("Accept",Re.dataTypes[0]&&Re.accepts[Re.dataTypes[0]]?Re.accepts[Re.dataTypes[0]]+("*"!==Re.dataTypes[0]?", "+La+"; q=0.01":""):Re.accepts["*"]),Re.headers)kt.setRequestHeader(Ve,Re.headers[Ve]);if(Re.beforeSend&&(!1===Re.beforeSend.call($e,kt,Re)||ue))return kt.abort();if(Mt="abort",Pt.add(Re.complete),kt.done(Re.success),kt.fail(Re.error),y=Fo(Ar,Re,d,kt)){if(kt.readyState=1,Ie&&St.trigger("ajaxSend",[kt,Re]),ue)return kt;Re.async&&Re.timeout>0&&(Y=g.setTimeout(function(){kt.abort("timeout")},Re.timeout));try{ue=!1,y.send(fr,Gr)}catch(bn){if(ue)throw bn;Gr(-1,bn)}}else Gr(-1,"No Transport");function Gr(bn,Xn,to,Oa){var ti,no,ji,Ir,wi,di=Xn;ue||(ue=!0,Y&&g.clearTimeout(Y),y=void 0,R=Oa||"",kt.readyState=bn>0?4:0,ti=bn>=200&&bn<300||304===bn,to&&(Ir=function Rn(l,d,y){for(var _,R,D,Y,le=l.contents,ue=l.dataTypes;"*"===ue[0];)ue.shift(),void 0===_&&(_=l.mimeType||d.getResponseHeader("Content-Type"));if(_)for(R in le)if(le[R]&&le[R].test(_)){ue.unshift(R);break}if(ue[0]in y)D=ue[0];else{for(R in y){if(!ue[0]||l.converters[R+" "+ue[0]]){D=R;break}Y||(Y=R)}D=D||Y}if(D)return D!==ue[0]&&ue.unshift(D),y[D]}(Re,kt,to)),!ti&&C.inArray("script",Re.dataTypes)>-1&&C.inArray("json",Re.dataTypes)<0&&(Re.converters["text script"]=function(){}),Ir=function la(l,d,y,_){var R,D,Y,le,ue,Ie={},Ve=l.dataTypes.slice();if(Ve[1])for(Y in l.converters)Ie[Y.toLowerCase()]=l.converters[Y];for(D=Ve.shift();D;)if(l.responseFields[D]&&(y[l.responseFields[D]]=d),!ue&&_&&l.dataFilter&&(d=l.dataFilter(d,l.dataType)),ue=D,D=Ve.shift())if("*"===D)D=ue;else if("*"!==ue&&ue!==D){if(!(Y=Ie[ue+" "+D]||Ie["* "+D]))for(R in Ie)if((le=R.split(" "))[1]===D&&(Y=Ie[ue+" "+le[0]]||Ie["* "+le[0]])){!0===Y?Y=Ie[R]:!0!==Ie[R]&&(D=le[0],Ve.unshift(le[1]));break}if(!0!==Y)if(Y&&l.throws)d=Y(d);else try{d=Y(d)}catch(rt){return{state:"parsererror",error:Y?rt:"No conversion from "+ue+" to "+D}}}return{state:"success",data:d}}(Re,Ir,kt,ti),ti?(Re.ifModified&&((wi=kt.getResponseHeader("Last-Modified"))&&(C.lastModified[_]=wi),(wi=kt.getResponseHeader("etag"))&&(C.etag[_]=wi)),204===bn||"HEAD"===Re.type?di="nocontent":304===bn?di="notmodified":(di=Ir.state,no=Ir.data,ti=!(ji=Ir.error))):(ji=di,(bn||!di)&&(di="error",bn<0&&(bn=0))),kt.status=bn,kt.statusText=(Xn||di)+"",ti?Yt.resolveWith($e,[no,di,kt]):Yt.rejectWith($e,[kt,di,ji]),kt.statusCode(qn),qn=void 0,Ie&&St.trigger(ti?"ajaxSuccess":"ajaxError",[kt,Re,ti?no:ji]),Pt.fireWith($e,[kt,di]),Ie&&(St.trigger("ajaxComplete",[kt,Re]),--C.active||C.event.trigger("ajaxStop")))}return kt},getJSON:function(l,d,y){return C.get(l,d,y,"json")},getScript:function(l,d){return C.get(l,void 0,d,"script")}}),C.each(["get","post"],function(l,d){C[d]=function(y,_,R,D){return se(_)&&(D=D||R,R=_,_=void 0),C.ajax(C.extend({url:y,type:d,dataType:D,data:_,success:R},C.isPlainObject(y)&&y))}}),C.ajaxPrefilter(function(l){var d;for(d in l.headers)"content-type"===d.toLowerCase()&&(l.contentType=l.headers[d]||"")}),C._evalUrl=function(l,d,y){return C.ajax({url:l,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(_){C.globalEval(_,d,y)}})},C.fn.extend({wrapAll:function(l){var d;return this[0]&&(se(l)&&(l=l.call(this[0])),d=C(l,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&d.insertBefore(this[0]),d.map(function(){for(var y=this;y.firstElementChild;)y=y.firstElementChild;return y}).append(this)),this},wrapInner:function(l){return se(l)?this.each(function(d){C(this).wrapInner(l.call(this,d))}):this.each(function(){var d=C(this),y=d.contents();y.length?y.wrapAll(l):d.append(l)})},wrap:function(l){var d=se(l);return this.each(function(y){C(this).wrapAll(d?l.call(this,y):l)})},unwrap:function(l){return this.parent(l).not("body").each(function(){C(this).replaceWith(this.childNodes)}),this}}),C.expr.pseudos.hidden=function(l){return!C.expr.pseudos.visible(l)},C.expr.pseudos.visible=function(l){return!!(l.offsetWidth||l.offsetHeight||l.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new g.XMLHttpRequest}catch(l){}};var _o={0:200,1223:204},N=C.ajaxSettings.xhr();i.cors=!!N&&"withCredentials"in N,i.ajax=N=!!N,C.ajaxTransport(function(l){var d,y;if(i.cors||N&&!l.crossDomain)return{send:function(_,R){var D,Y=l.xhr();if(Y.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(D in l.xhrFields)Y[D]=l.xhrFields[D];for(D in l.mimeType&&Y.overrideMimeType&&Y.overrideMimeType(l.mimeType),!l.crossDomain&&!_["X-Requested-With"]&&(_["X-Requested-With"]="XMLHttpRequest"),_)Y.setRequestHeader(D,_[D]);d=function(le){return function(){d&&(d=y=Y.onload=Y.onerror=Y.onabort=Y.ontimeout=Y.onreadystatechange=null,"abort"===le?Y.abort():"error"===le?"number"!=typeof Y.status?R(0,"error"):R(Y.status,Y.statusText):R(_o[Y.status]||Y.status,Y.statusText,"text"!==(Y.responseType||"text")||"string"!=typeof Y.responseText?{binary:Y.response}:{text:Y.responseText},Y.getAllResponseHeaders()))}},Y.onload=d(),y=Y.onerror=Y.ontimeout=d("error"),void 0!==Y.onabort?Y.onabort=y:Y.onreadystatechange=function(){4===Y.readyState&&g.setTimeout(function(){d&&y()})},d=d("abort");try{Y.send(l.hasContent&&l.data||null)}catch(le){if(d)throw le}},abort:function(){d&&d()}}}),C.ajaxPrefilter(function(l){l.crossDomain&&(l.contents.script=!1)}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(l){return C.globalEval(l),l}}}),C.ajaxPrefilter("script",function(l){void 0===l.cache&&(l.cache=!1),l.crossDomain&&(l.type="GET")}),C.ajaxTransport("script",function(l){var d,y;if(l.crossDomain||l.scriptAttrs)return{send:function(_,R){d=C("<script>").attr(l.scriptAttrs||{}).prop({charset:l.scriptCharset,src:l.url}).on("load error",y=function(D){d.remove(),y=null,D&&R("error"===D.type?404:200,D.type)}),he.head.appendChild(d[0])},abort:function(){y&&y()}}});var l,Z=[],ae=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var l=Z.pop()||C.expando+"_"+yn.guid++;return this[l]=!0,l}}),C.ajaxPrefilter("json jsonp",function(l,d,y){var _,R,D,Y=!1!==l.jsonp&&(ae.test(l.url)?"url":"string"==typeof l.data&&0===(l.contentType||"").indexOf("application/x-www-form-urlencoded")&&ae.test(l.data)&&"data");if(Y||"jsonp"===l.dataTypes[0])return _=l.jsonpCallback=se(l.jsonpCallback)?l.jsonpCallback():l.jsonpCallback,Y?l[Y]=l[Y].replace(ae,"$1"+_):!1!==l.jsonp&&(l.url+=(qi.test(l.url)?"&":"?")+l.jsonp+"="+_),l.converters["script json"]=function(){return D||C.error(_+" was not called"),D[0]},l.dataTypes[0]="json",R=g[_],g[_]=function(){D=arguments},y.always(function(){void 0===R?C(g).removeProp(_):g[_]=R,l[_]&&(l.jsonpCallback=d.jsonpCallback,Z.push(_)),D&&se(R)&&R(D[0]),D=R=void 0}),"script"}),i.createHTMLDocument=((l=he.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===l.childNodes.length),C.parseHTML=function(l,d,y){return"string"!=typeof l?[]:("boolean"==typeof d&&(y=d,d=!1),d||(i.createHTMLDocument?((_=(d=he.implementation.createHTMLDocument("")).createElement("base")).href=he.location.href,d.head.appendChild(_)):d=he),D=!y&&[],(R=At.exec(l))?[d.createElement(R[1])]:(R=mo([l],d,D),D&&D.length&&C(D).remove(),C.merge([],R.childNodes)));var _,R,D},C.fn.load=function(l,d,y){var _,R,D,Y=this,le=l.indexOf(" ");return le>-1&&(_=li(l.slice(le)),l=l.slice(0,le)),se(d)?(y=d,d=void 0):d&&"object"==typeof d&&(R="POST"),Y.length>0&&C.ajax({url:l,type:R||"GET",dataType:"html",data:d}).done(function(ue){D=arguments,Y.html(_?C("<div>").append(C.parseHTML(ue)).find(_):ue)}).always(y&&function(ue,Ie){Y.each(function(){y.apply(this,D||[ue.responseText,Ie,ue])})}),this},C.expr.pseudos.animated=function(l){return C.grep(C.timers,function(d){return l===d.elem}).length},C.offset={setOffset:function(l,d,y){var _,R,D,Y,le,ue,Ve=C.css(l,"position"),rt=C(l),Re={};"static"===Ve&&(l.style.position="relative"),le=rt.offset(),D=C.css(l,"top"),ue=C.css(l,"left"),("absolute"===Ve||"fixed"===Ve)&&(D+ue).indexOf("auto")>-1?(Y=(_=rt.position()).top,R=_.left):(Y=parseFloat(D)||0,R=parseFloat(ue)||0),se(d)&&(d=d.call(l,y,C.extend({},le))),null!=d.top&&(Re.top=d.top-le.top+Y),null!=d.left&&(Re.left=d.left-le.left+R),"using"in d?d.using.call(l,Re):rt.css(Re)}},C.fn.extend({offset:function(l){if(arguments.length)return void 0===l?this:this.each(function(R){C.offset.setOffset(this,l,R)});var d,y,_=this[0];return _?_.getClientRects().length?{top:(d=_.getBoundingClientRect()).top+(y=_.ownerDocument.defaultView).pageYOffset,left:d.left+y.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var l,d,y,_=this[0],R={top:0,left:0};if("fixed"===C.css(_,"position"))d=_.getBoundingClientRect();else{for(d=this.offset(),y=_.ownerDocument,l=_.offsetParent||y.documentElement;l&&(l===y.body||l===y.documentElement)&&"static"===C.css(l,"position");)l=l.parentNode;l&&l!==_&&1===l.nodeType&&((R=C(l).offset()).top+=C.css(l,"borderTopWidth",!0),R.left+=C.css(l,"borderLeftWidth",!0))}return{top:d.top-R.top-C.css(_,"marginTop",!0),left:d.left-R.left-C.css(_,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var l=this.offsetParent;l&&"static"===C.css(l,"position");)l=l.offsetParent;return l||On})}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(l,d){var y="pageYOffset"===d;C.fn[l]=function(_){return pn(this,function(R,D,Y){var le;if(ve(R)?le=R:9===R.nodeType&&(le=R.defaultView),void 0===Y)return le?le[d]:R[D];le?le.scrollTo(y?le.pageXOffset:Y,y?Y:le.pageYOffset):R[D]=Y},l,_,arguments.length)}}),C.each(["top","left"],function(l,d){C.cssHooks[d]=Pa(i.pixelPosition,function(y,_){if(_)return _=ki(y,d),Oo.test(_)?C(y).position()[d]+"px":_})}),C.each({Height:"height",Width:"width"},function(l,d){C.each({padding:"inner"+l,content:d,"":"outer"+l},function(y,_){C.fn[_]=function(R,D){var Y=arguments.length&&(y||"boolean"!=typeof R),le=y||(!0===R||!0===D?"margin":"border");return pn(this,function(ue,Ie,Ve){var rt;return ve(ue)?0===_.indexOf("outer")?ue["inner"+l]:ue.document.documentElement["client"+l]:9===ue.nodeType?(rt=ue.documentElement,Math.max(ue.body["scroll"+l],rt["scroll"+l],ue.body["offset"+l],rt["offset"+l],rt["client"+l])):void 0===Ve?C.css(ue,Ie,le):C.style(ue,Ie,Ve,le)},d,Y?R:void 0,Y)}})}),C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(l,d){C.fn[d]=function(y){return this.on(d,y)}}),C.fn.extend({bind:function(l,d,y){return this.on(l,null,d,y)},unbind:function(l,d){return this.off(l,null,d)},delegate:function(l,d,y,_){return this.on(d,l,y,_)},undelegate:function(l,d,y){return 1===arguments.length?this.off(l,"**"):this.off(d,l||"**",y)},hover:function(l,d){return this.mouseenter(l).mouseleave(d||l)}}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(l,d){C.fn[d]=function(y,_){return arguments.length>0?this.on(d,null,y,_):this.trigger(d)}});var ge=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;C.proxy=function(l,d){var y,_,R;if("string"==typeof d&&(y=l[d],d=l,l=y),se(l))return _=A.call(arguments,2),R=function(){return l.apply(d||this,_.concat(A.call(arguments)))},R.guid=l.guid=l.guid||C.guid++,R},C.holdReady=function(l){l?C.readyWait++:C.ready(!0)},C.isArray=Array.isArray,C.parseJSON=JSON.parse,C.nodeName=pt,C.isFunction=se,C.isWindow=ve,C.camelCase=un,C.type=Ae,C.now=Date.now,C.isNumeric=function(l){var d=C.type(l);return("number"===d||"string"===d)&&!isNaN(l-parseFloat(l))},C.trim=function(l){return null==l?"":(l+"").replace(ge,"")},void 0!==(p=function(){return C}.apply(W,[]))&&(E.exports=p);var ke=g.jQuery,Se=g.$;return C.noConflict=function(l){return g.$===C&&(g.$=Se),l&&g.jQuery===C&&(g.jQuery=ke),C},void 0===w&&(g.jQuery=g.$=C),C})},37244:(E,W,f)=>{var w=f(53436)(f(12119),"DataView");E.exports=w},54994:(E,W,f)=>{var p=f(64312),g=f(22393),w=f(15764),S=f(18685),x=f(26676);function A(k){var M=-1,F=null==k?0:k.length;for(this.clear();++M<F;){var H=k[M];this.set(H[0],H[1])}}A.prototype.clear=p,A.prototype.delete=g,A.prototype.get=w,A.prototype.has=S,A.prototype.set=x,E.exports=A},9215:(E,W,f)=>{var p=f(41840),g=f(34378),w=f(54981),S=f(67343),x=f(98895);function A(k){var M=-1,F=null==k?0:k.length;for(this.clear();++M<F;){var H=k[M];this.set(H[0],H[1])}}A.prototype.clear=p,A.prototype.delete=g,A.prototype.get=w,A.prototype.has=S,A.prototype.set=x,E.exports=A},51501:(E,W,f)=>{var w=f(53436)(f(12119),"Map");E.exports=w},99850:(E,W,f)=>{var p=f(10638),g=f(11184),w=f(70866),S=f(43771),x=f(51772);function A(k){var M=-1,F=null==k?0:k.length;for(this.clear();++M<F;){var H=k[M];this.set(H[0],H[1])}}A.prototype.clear=p,A.prototype.delete=g,A.prototype.get=w,A.prototype.has=S,A.prototype.set=x,E.exports=A},44267:(E,W,f)=>{var w=f(53436)(f(12119),"Promise");E.exports=w},46323:(E,W,f)=>{var w=f(53436)(f(12119),"Set");E.exports=w},58849:(E,W,f)=>{var p=f(99850),g=f(4600),w=f(31387);function S(x){var A=-1,k=null==x?0:x.length;for(this.__data__=new p;++A<k;)this.add(x[A])}S.prototype.add=S.prototype.push=g,S.prototype.has=w,E.exports=S},2858:(E,W,f)=>{var p=f(9215),g=f(13720),w=f(64410),S=f(45576),x=f(22247),A=f(41585);function k(M){var F=this.__data__=new p(M);this.size=F.size}k.prototype.clear=g,k.prototype.delete=w,k.prototype.get=S,k.prototype.has=x,k.prototype.set=A,E.exports=k},60443:(E,W,f)=>{var p=f(12119);E.exports=p.Symbol},73457:(E,W,f)=>{var p=f(12119);E.exports=p.Uint8Array},24243:(E,W,f)=>{var w=f(53436)(f(12119),"WeakMap");E.exports=w},26999:E=>{E.exports=function W(f,p,g){switch(g.length){case 0:return f.call(p);case 1:return f.call(p,g[0]);case 2:return f.call(p,g[0],g[1]);case 3:return f.call(p,g[0],g[1],g[2])}return f.apply(p,g)}},96837:E=>{E.exports=function W(f,p){for(var g=-1,w=null==f?0:f.length;++g<w&&!1!==p(f[g],g,f););return f}},69779:E=>{E.exports=function W(f,p){for(var g=-1,w=null==f?0:f.length,S=0,x=[];++g<w;){var A=f[g];p(A,g,f)&&(x[S++]=A)}return x}},61253:(E,W,f)=>{var p=f(14164);E.exports=function g(w,S){return!(null==w||!w.length)&&p(w,S,0)>-1}},37609:E=>{E.exports=function W(f,p,g){for(var w=-1,S=null==f?0:f.length;++w<S;)if(g(p,f[w]))return!0;return!1}},72271:(E,W,f)=>{var p=f(85334),g=f(77151),w=f(21503),S=f(80891),x=f(58442),A=f(48159),M=Object.prototype.hasOwnProperty;E.exports=function F(H,O){var X=w(H),te=!X&&g(H),fe=!X&&!te&&S(H),i=!X&&!te&&!fe&&A(H),se=X||te||fe||i,ve=se?p(H.length,String):[],he=ve.length;for(var ne in H)(O||M.call(H,ne))&&(!se||!("length"==ne||fe&&("offset"==ne||"parent"==ne)||i&&("buffer"==ne||"byteLength"==ne||"byteOffset"==ne)||x(ne,he)))&&ve.push(ne);return ve}},84633:E=>{E.exports=function W(f,p){for(var g=-1,w=null==f?0:f.length,S=Array(w);++g<w;)S[g]=p(f[g],g,f);return S}},85059:E=>{E.exports=function W(f,p){for(var g=-1,w=p.length,S=f.length;++g<w;)f[S+g]=p[g];return f}},8745:E=>{E.exports=function W(f,p,g,w){var S=-1,x=null==f?0:f.length;for(w&&x&&(g=f[++S]);++S<x;)g=p(g,f[S],S,f);return g}},79503:E=>{E.exports=function W(f,p){for(var g=-1,w=null==f?0:f.length;++g<w;)if(p(f[g],g,f))return!0;return!1}},75481:(E,W,f)=>{var g=f(11847)("length");E.exports=g},49276:(E,W,f)=>{var p=f(85683),g=f(20217);E.exports=function w(S,x,A){(void 0!==A&&!g(S[x],A)||void 0===A&&!(x in S))&&p(S,x,A)}},89719:(E,W,f)=>{var p=f(85683),g=f(20217),S=Object.prototype.hasOwnProperty;E.exports=function x(A,k,M){var F=A[k];(!S.call(A,k)||!g(F,M)||void 0===M&&!(k in A))&&p(A,k,M)}},43503:(E,W,f)=>{var p=f(20217);E.exports=function g(w,S){for(var x=w.length;x--;)if(p(w[x][0],S))return x;return-1}},94121:(E,W,f)=>{var p=f(31989),g=f(118);E.exports=function w(S,x){return S&&p(x,g(x),S)}},99287:(E,W,f)=>{var p=f(31989),g=f(16555);E.exports=function w(S,x){return S&&p(x,g(x),S)}},85683:(E,W,f)=>{var p=f(56713);E.exports=function g(w,S,x){"__proto__"==S&&p?p(w,S,{configurable:!0,enumerable:!0,value:x,writable:!0}):w[S]=x}},44462:(E,W,f)=>{var p=f(2858),g=f(96837),w=f(89719),S=f(94121),x=f(99287),A=f(19292),k=f(99454),M=f(84444),F=f(59905),H=f(47597),O=f(6967),X=f(28794),te=f(76782),fe=f(37878),i=f(4264),se=f(21503),ve=f(80891),he=f(13222),ne=f(25940),xe=f(90799),Ae=f(118),Fe=f(16555),et="[object Arguments]",Xt="[object Function]",Ur="[object Object]",B={};B[et]=B["[object Array]"]=B["[object ArrayBuffer]"]=B["[object DataView]"]=B["[object Boolean]"]=B["[object Date]"]=B["[object Float32Array]"]=B["[object Float64Array]"]=B["[object Int8Array]"]=B["[object Int16Array]"]=B["[object Int32Array]"]=B["[object Map]"]=B["[object Number]"]=B[Ur]=B["[object RegExp]"]=B["[object Set]"]=B["[object String]"]=B["[object Symbol]"]=B["[object Uint8Array]"]=B["[object Uint8ClampedArray]"]=B["[object Uint16Array]"]=B["[object Uint32Array]"]=!0,B["[object Error]"]=B[Xt]=B["[object WeakMap]"]=!1,E.exports=function z(re,Ce,We,Ke,bt,Nt){var Ht,mn=1&Ce,On=2&Ce,gn=4&Ce;if(We&&(Ht=bt?We(re,Ke,bt,Nt):We(re)),void 0!==Ht)return Ht;if(!ne(re))return re;var Qn=se(re);if(Qn){if(Ht=te(re),!mn)return k(re,Ht)}else{var Tr=X(re),yi=Tr==Xt||"[object GeneratorFunction]"==Tr;if(ve(re))return A(re,mn);if(Tr==Ur||Tr==et||yi&&!bt){if(Ht=On||yi?{}:i(re),!mn)return On?F(re,x(Ht,re)):M(re,S(Ht,re))}else{if(!B[Tr])return bt?re:{};Ht=fe(re,Tr,mn)}}Nt||(Nt=new p);var jn=Nt.get(re);if(jn)return jn;Nt.set(re,Ht),xe(re)?re.forEach(function(cr){Ht.add(z(cr,Ce,We,cr,re,Nt))}):he(re)&&re.forEach(function(cr,Nr){Ht.set(Nr,z(cr,Ce,We,Nr,re,Nt))});var rr=Qn?void 0:(gn?On?O:H:On?Fe:Ae)(re);return g(rr||re,function(cr,Nr){rr&&(cr=re[Nr=cr]),w(Ht,Nr,z(cr,Ce,We,Nr,re,Nt))}),Ht}},78858:(E,W,f)=>{var p=f(25940),g=Object.create,w=function(){function S(){}return function(x){if(!p(x))return{};if(g)return g(x);S.prototype=x;var A=new S;return S.prototype=void 0,A}}();E.exports=w},43132:(E,W,f)=>{var p=f(45184),w=f(16539)(p);E.exports=w},67308:(E,W,f)=>{var p=f(44129);E.exports=function g(w,S,x){for(var A=-1,k=w.length;++A<k;){var M=w[A],F=S(M);if(null!=F&&(void 0===H?F==F&&!p(F):x(F,H)))var H=F,O=M}return O}},33609:(E,W,f)=>{var p=f(43132);E.exports=function g(w,S){var x=[];return p(w,function(A,k,M){S(A,k,M)&&x.push(A)}),x}},65317:E=>{E.exports=function W(f,p,g,w){for(var S=f.length,x=g+(w?1:-1);w?x--:++x<S;)if(p(f[x],x,f))return x;return-1}},50686:(E,W,f)=>{var p=f(85059),g=f(75039);E.exports=function w(S,x,A,k,M){var F=-1,H=S.length;for(A||(A=g),M||(M=[]);++F<H;){var O=S[F];x>0&&A(O)?x>1?w(O,x-1,A,k,M):p(M,O):k||(M[M.length]=O)}return M}},30755:(E,W,f)=>{var g=f(40456)();E.exports=g},45184:(E,W,f)=>{var p=f(30755),g=f(118);E.exports=function w(S,x){return S&&p(S,x,g)}},15456:(E,W,f)=>{var p=f(65456),g=f(68533);E.exports=function w(S,x){for(var A=0,k=(x=p(x,S)).length;null!=S&&A<k;)S=S[g(x[A++])];return A&&A==k?S:void 0}},38247:(E,W,f)=>{var p=f(85059),g=f(21503);E.exports=function w(S,x,A){var k=x(S);return g(S)?k:p(k,A(S))}},93337:(E,W,f)=>{var p=f(60443),g=f(21318),w=f(92902),A=p?p.toStringTag:void 0;E.exports=function k(M){return null==M?void 0===M?"[object Undefined]":"[object Null]":A&&A in Object(M)?g(M):w(M)}},31100:E=>{E.exports=function W(f,p){return f>p}},84781:E=>{var f=Object.prototype.hasOwnProperty;E.exports=function p(g,w){return null!=g&&f.call(g,w)}},69989:E=>{E.exports=function W(f,p){return null!=f&&p in Object(f)}},14164:(E,W,f)=>{var p=f(65317),g=f(70968),w=f(24977);E.exports=function S(x,A,k){return A==A?w(x,A,k):p(x,g,k)}},60186:(E,W,f)=>{var p=f(93337),g=f(72671);E.exports=function S(x){return g(x)&&"[object Arguments]"==p(x)}},85740:(E,W,f)=>{var p=f(58325),g=f(72671);E.exports=function w(S,x,A,k,M){return S===x||(null==S||null==x||!g(S)&&!g(x)?S!=S&&x!=x:p(S,x,A,k,w,M))}},58325:(E,W,f)=>{var p=f(2858),g=f(63914),w=f(78583),S=f(32286),x=f(28794),A=f(21503),k=f(80891),M=f(48159),H="[object Arguments]",O="[object Array]",X="[object Object]",fe=Object.prototype.hasOwnProperty;E.exports=function i(se,ve,he,ne,xe,Ae){var Fe=A(se),C=A(ve),He=Fe?O:x(se),nt=C?O:x(ve),et=(He=He==H?X:He)==X,ot=(nt=nt==H?X:nt)==X,lt=He==nt;if(lt&&k(se)){if(!k(ve))return!1;Fe=!0,et=!1}if(lt&&!et)return Ae||(Ae=new p),Fe||M(se)?g(se,ve,he,ne,xe,Ae):w(se,ve,He,he,ne,xe,Ae);if(!(1&he)){var pt=et&&fe.call(se,"__wrapped__"),At=ot&&fe.call(ve,"__wrapped__");if(pt||At){var Xt=pt?se.value():se,$t=At?ve.value():ve;return Ae||(Ae=new p),xe(Xt,$t,he,ne,Ae)}}return!!lt&&(Ae||(Ae=new p),S(se,ve,he,ne,xe,Ae))}},97021:(E,W,f)=>{var p=f(28794),g=f(72671);E.exports=function S(x){return g(x)&&"[object Map]"==p(x)}},40431:(E,W,f)=>{var p=f(2858),g=f(85740);E.exports=function x(A,k,M,F){var H=M.length,O=H,X=!F;if(null==A)return!O;for(A=Object(A);H--;){var te=M[H];if(X&&te[2]?te[1]!==A[te[0]]:!(te[0]in A))return!1}for(;++H<O;){var fe=(te=M[H])[0],i=A[fe],se=te[1];if(X&&te[2]){if(void 0===i&&!(fe in A))return!1}else{var ve=new p;if(F)var he=F(i,se,fe,A,k,ve);if(!(void 0===he?g(se,i,3,F,ve):he))return!1}}return!0}},70968:E=>{E.exports=function W(f){return f!=f}},37304:(E,W,f)=>{var p=f(75946),g=f(91943),w=f(25940),S=f(52827),A=/^\[object .+?Constructor\]$/,O=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");E.exports=function X(te){return!(!w(te)||g(te))&&(p(te)?O:A).test(S(te))}},771:(E,W,f)=>{var p=f(28794),g=f(72671);E.exports=function S(x){return g(x)&&"[object Set]"==p(x)}},1083:(E,W,f)=>{var p=f(93337),g=f(96231),w=f(72671),lt={};lt["[object Float32Array]"]=lt["[object Float64Array]"]=lt["[object Int8Array]"]=lt["[object Int16Array]"]=lt["[object Int32Array]"]=lt["[object Uint8Array]"]=lt["[object Uint8ClampedArray]"]=lt["[object Uint16Array]"]=lt["[object Uint32Array]"]=!0,lt["[object Arguments]"]=lt["[object Array]"]=lt["[object ArrayBuffer]"]=lt["[object Boolean]"]=lt["[object DataView]"]=lt["[object Date]"]=lt["[object Error]"]=lt["[object Function]"]=lt["[object Map]"]=lt["[object Number]"]=lt["[object Object]"]=lt["[object RegExp]"]=lt["[object Set]"]=lt["[object String]"]=lt["[object WeakMap]"]=!1,E.exports=function pt(At){return w(At)&&g(At.length)&&!!lt[p(At)]}},96517:(E,W,f)=>{var p=f(98133),g=f(9458),w=f(32608),S=f(21503),x=f(87495);E.exports=function A(k){return"function"==typeof k?k:null==k?w:"object"==typeof k?S(k)?g(k[0],k[1]):p(k):x(k)}},81172:(E,W,f)=>{var p=f(45488),g=f(85491),S=Object.prototype.hasOwnProperty;E.exports=function x(A){if(!p(A))return g(A);var k=[];for(var M in Object(A))S.call(A,M)&&"constructor"!=M&&k.push(M);return k}},92809:(E,W,f)=>{var p=f(25940),g=f(45488),w=f(32158),x=Object.prototype.hasOwnProperty;E.exports=function A(k){if(!p(k))return w(k);var M=g(k),F=[];for(var H in k)"constructor"==H&&(M||!x.call(k,H))||F.push(H);return F}},99069:E=>{E.exports=function W(f,p){return f<p}},92046:(E,W,f)=>{var p=f(43132),g=f(56507);E.exports=function w(S,x){var A=-1,k=g(S)?Array(S.length):[];return p(S,function(M,F,H){k[++A]=x(M,F,H)}),k}},98133:(E,W,f)=>{var p=f(40431),g=f(22379),w=f(642);E.exports=function S(x){var A=g(x);return 1==A.length&&A[0][2]?w(A[0][0],A[0][1]):function(k){return k===x||p(k,x,A)}}},9458:(E,W,f)=>{var p=f(85740),g=f(8817),w=f(11172),S=f(45352),x=f(22442),A=f(642),k=f(68533);E.exports=function H(O,X){return S(O)&&x(X)?A(k(O),X):function(te){var fe=g(te,O);return void 0===fe&&fe===X?w(te,O):p(X,fe,3)}}},73842:(E,W,f)=>{var p=f(2858),g=f(49276),w=f(30755),S=f(33675),x=f(25940),A=f(16555),k=f(99351);E.exports=function M(F,H,O,X,te){F!==H&&w(H,function(fe,i){if(te||(te=new p),x(fe))S(F,H,i,O,M,X,te);else{var se=X?X(k(F,i),fe,i+"",F,H,te):void 0;void 0===se&&(se=fe),g(F,i,se)}},A)}},33675:(E,W,f)=>{var p=f(49276),g=f(19292),w=f(65208),S=f(99454),x=f(4264),A=f(77151),k=f(21503),M=f(21330),F=f(80891),H=f(75946),O=f(25940),X=f(97614),te=f(48159),fe=f(99351),i=f(8067);E.exports=function se(ve,he,ne,xe,Ae,Fe,C){var He=fe(ve,ne),nt=fe(he,ne),et=C.get(nt);if(et)p(ve,ne,et);else{var ot=Fe?Fe(He,nt,ne+"",ve,he,C):void 0,lt=void 0===ot;if(lt){var pt=k(nt),At=!pt&&F(nt),Xt=!pt&&!At&&te(nt);ot=nt,pt||At||Xt?k(He)?ot=He:M(He)?ot=S(He):At?(lt=!1,ot=g(nt,!0)):Xt?(lt=!1,ot=w(nt,!0)):ot=[]:X(nt)||A(nt)?(ot=He,A(He)?ot=i(He):(!O(He)||H(He))&&(ot=x(nt))):lt=!1}lt&&(C.set(nt,ot),Ae(ot,nt,xe,Fe,C),C.delete(nt)),p(ve,ne,ot)}}},6119:(E,W,f)=>{var p=f(84633),g=f(15456),w=f(96517),S=f(92046),x=f(18750),A=f(85647),k=f(41215),M=f(32608),F=f(21503);E.exports=function H(O,X,te){X=X.length?p(X,function(se){return F(se)?function(ve){return g(ve,1===se.length?se[0]:se)}:se}):[M];var fe=-1;X=p(X,A(w));var i=S(O,function(se,ve,he){return{criteria:p(X,function(xe){return xe(se)}),index:++fe,value:se}});return x(i,function(se,ve){return k(se,ve,te)})}},83021:(E,W,f)=>{var p=f(95495),g=f(11172);E.exports=function w(S,x){return p(S,x,function(A,k){return g(S,k)})}},95495:(E,W,f)=>{var p=f(15456),g=f(55963),w=f(65456);E.exports=function S(x,A,k){for(var M=-1,F=A.length,H={};++M<F;){var O=A[M],X=p(x,O);k(X,O)&&g(H,w(O,x),X)}return H}},11847:E=>{E.exports=function W(f){return function(p){return null==p?void 0:p[f]}}},39222:(E,W,f)=>{var p=f(15456);E.exports=function g(w){return function(S){return p(S,w)}}},16307:E=>{var W=Math.ceil,f=Math.max;E.exports=function p(g,w,S,x){for(var A=-1,k=f(W((w-g)/(S||1)),0),M=Array(k);k--;)M[x?k:++A]=g,g+=S;return M}},13570:E=>{E.exports=function W(f,p,g,w,S){return S(f,function(x,A,k){g=w?(w=!1,x):p(g,x,A,k)}),g}},23269:(E,W,f)=>{var p=f(32608),g=f(53983),w=f(72185);E.exports=function S(x,A){return w(g(x,A,p),x+"")}},55963:(E,W,f)=>{var p=f(89719),g=f(65456),w=f(58442),S=f(25940),x=f(68533);E.exports=function A(k,M,F,H){if(!S(k))return k;for(var O=-1,X=(M=g(M,k)).length,te=X-1,fe=k;null!=fe&&++O<X;){var i=x(M[O]),se=F;if("__proto__"===i||"constructor"===i||"prototype"===i)return k;if(O!=te){var ve=fe[i];void 0===(se=H?H(ve,i,fe):void 0)&&(se=S(ve)?ve:w(M[O+1])?[]:{})}p(fe,i,se),fe=fe[i]}return k}},69510:(E,W,f)=>{var p=f(76684),g=f(56713),w=f(32608);E.exports=g?function(x,A){return g(x,"toString",{configurable:!0,enumerable:!1,value:p(A),writable:!0})}:w},18750:E=>{E.exports=function W(f,p){var g=f.length;for(f.sort(p);g--;)f[g]=f[g].value;return f}},85334:E=>{E.exports=function W(f,p){for(var g=-1,w=Array(f);++g<f;)w[g]=p(g);return w}},93935:(E,W,f)=>{var p=f(60443),g=f(84633),w=f(21503),S=f(44129),A=p?p.prototype:void 0,k=A?A.toString:void 0;E.exports=function M(F){if("string"==typeof F)return F;if(w(F))return g(F,M)+"";if(S(F))return k?k.call(F):"";var H=F+"";return"0"==H&&1/F==-1/0?"-0":H}},83348:(E,W,f)=>{var p=f(42760),g=/^\s+/;E.exports=function w(S){return S&&S.slice(0,p(S)+1).replace(g,"")}},85647:E=>{E.exports=function W(f){return function(p){return f(p)}}},80707:(E,W,f)=>{var p=f(58849),g=f(61253),w=f(37609),S=f(25972),x=f(14575),A=f(24174);E.exports=function M(F,H,O){var X=-1,te=g,fe=F.length,i=!0,se=[],ve=se;if(O)i=!1,te=w;else if(fe>=200){var he=H?null:x(F);if(he)return A(he);i=!1,te=S,ve=new p}else ve=H?[]:se;e:for(;++X<fe;){var ne=F[X],xe=H?H(ne):ne;if(ne=O||0!==ne?ne:0,i&&xe==xe){for(var Ae=ve.length;Ae--;)if(ve[Ae]===xe)continue e;H&&ve.push(xe),se.push(ne)}else te(ve,xe,O)||(ve!==se&&ve.push(xe),se.push(ne))}return se}},19179:(E,W,f)=>{var p=f(84633);E.exports=function g(w,S){return p(S,function(x){return w[x]})}},38645:E=>{E.exports=function W(f,p,g){for(var w=-1,S=f.length,x=p.length,A={};++w<S;)g(A,f[w],w<x?p[w]:void 0);return A}},25972:E=>{E.exports=function W(f,p){return f.has(p)}},21481:(E,W,f)=>{var p=f(32608);E.exports=function g(w){return"function"==typeof w?w:p}},65456:(E,W,f)=>{var p=f(21503),g=f(45352),w=f(32855),S=f(73943);E.exports=function x(A,k){return p(A)?A:g(A,k)?[A]:w(S(A))}},43362:(E,W,f)=>{var p=f(73457);E.exports=function g(w){var S=new w.constructor(w.byteLength);return new p(S).set(new p(w)),S}},19292:(E,W,f)=>{E=f.nmd(E);var p=f(12119),g=W&&!W.nodeType&&W,w=g&&E&&!E.nodeType&&E,x=w&&w.exports===g?p.Buffer:void 0,A=x?x.allocUnsafe:void 0;E.exports=function k(M,F){if(F)return M.slice();var H=M.length,O=A?A(H):new M.constructor(H);return M.copy(O),O}},17e3:(E,W,f)=>{var p=f(43362);E.exports=function g(w,S){var x=S?p(w.buffer):w.buffer;return new w.constructor(x,w.byteOffset,w.byteLength)}},74098:E=>{var W=/\w*$/;E.exports=function f(p){var g=new p.constructor(p.source,W.exec(p));return g.lastIndex=p.lastIndex,g}},62533:(E,W,f)=>{var p=f(60443),g=p?p.prototype:void 0,w=g?g.valueOf:void 0;E.exports=function S(x){return w?Object(w.call(x)):{}}},65208:(E,W,f)=>{var p=f(43362);E.exports=function g(w,S){var x=S?p(w.buffer):w.buffer;return new w.constructor(x,w.byteOffset,w.length)}},13443:(E,W,f)=>{var p=f(44129);E.exports=function g(w,S){if(w!==S){var x=void 0!==w,A=null===w,k=w==w,M=p(w),F=void 0!==S,H=null===S,O=S==S,X=p(S);if(!H&&!X&&!M&&w>S||M&&F&&O&&!H&&!X||A&&F&&O||!x&&O||!k)return 1;if(!A&&!M&&!X&&w<S||X&&x&&k&&!A&&!M||H&&x&&k||!F&&k||!O)return-1}return 0}},41215:(E,W,f)=>{var p=f(13443);E.exports=function g(w,S,x){for(var A=-1,k=w.criteria,M=S.criteria,F=k.length,H=x.length;++A<F;){var O=p(k[A],M[A]);if(O)return A>=H?O:O*("desc"==x[A]?-1:1)}return w.index-S.index}},99454:E=>{E.exports=function W(f,p){var g=-1,w=f.length;for(p||(p=Array(w));++g<w;)p[g]=f[g];return p}},31989:(E,W,f)=>{var p=f(89719),g=f(85683);E.exports=function w(S,x,A,k){var M=!A;A||(A={});for(var F=-1,H=x.length;++F<H;){var O=x[F],X=k?k(A[O],S[O],O,A,S):void 0;void 0===X&&(X=S[O]),M?g(A,O,X):p(A,O,X)}return A}},84444:(E,W,f)=>{var p=f(31989),g=f(39383);E.exports=function w(S,x){return p(S,g(S),x)}},59905:(E,W,f)=>{var p=f(31989),g=f(53051);E.exports=function w(S,x){return p(S,g(S),x)}},24610:(E,W,f)=>{var p=f(12119);E.exports=p["__core-js_shared__"]},84944:(E,W,f)=>{var p=f(23269),g=f(93342);E.exports=function w(S){return p(function(x,A){var k=-1,M=A.length,F=M>1?A[M-1]:void 0,H=M>2?A[2]:void 0;for(F=S.length>3&&"function"==typeof F?(M--,F):void 0,H&&g(A[0],A[1],H)&&(F=M<3?void 0:F,M=1),x=Object(x);++k<M;){var O=A[k];O&&S(x,O,k,F)}return x})}},16539:(E,W,f)=>{var p=f(56507);E.exports=function g(w,S){return function(x,A){if(null==x)return x;if(!p(x))return w(x,A);for(var k=x.length,M=S?k:-1,F=Object(x);(S?M--:++M<k)&&!1!==A(F[M],M,F););return x}}},40456:E=>{E.exports=function W(f){return function(p,g,w){for(var S=-1,x=Object(p),A=w(p),k=A.length;k--;){var M=A[f?k:++S];if(!1===g(x[M],M,x))break}return p}}},24653:(E,W,f)=>{var p=f(96517),g=f(56507),w=f(118);E.exports=function S(x){return function(A,k,M){var F=Object(A);if(!g(A)){var H=p(k,3);A=w(A),k=function(X){return H(F[X],X,F)}}var O=x(A,k,M);return O>-1?F[H?A[O]:O]:void 0}}},97509:(E,W,f)=>{var p=f(16307),g=f(93342),w=f(12232);E.exports=function S(x){return function(A,k,M){return M&&"number"!=typeof M&&g(A,k,M)&&(k=M=void 0),A=w(A),void 0===k?(k=A,A=0):k=w(k),M=void 0===M?A<k?1:-1:w(M),p(A,k,M,x)}}},14575:(E,W,f)=>{var p=f(46323),g=f(12552),w=f(24174),x=p&&1/w(new p([,-0]))[1]==1/0?function(A){return new p(A)}:g;E.exports=x},56713:(E,W,f)=>{var p=f(53436),g=function(){try{var w=p(Object,"defineProperty");return w({},"",{}),w}catch(S){}}();E.exports=g},63914:(E,W,f)=>{var p=f(58849),g=f(79503),w=f(25972);E.exports=function A(k,M,F,H,O,X){var te=1&F,fe=k.length,i=M.length;if(fe!=i&&!(te&&i>fe))return!1;var se=X.get(k),ve=X.get(M);if(se&&ve)return se==M&&ve==k;var he=-1,ne=!0,xe=2&F?new p:void 0;for(X.set(k,M),X.set(M,k);++he<fe;){var Ae=k[he],Fe=M[he];if(H)var C=te?H(Fe,Ae,he,M,k,X):H(Ae,Fe,he,k,M,X);if(void 0!==C){if(C)continue;ne=!1;break}if(xe){if(!g(M,function(He,nt){if(!w(xe,nt)&&(Ae===He||O(Ae,He,F,H,X)))return xe.push(nt)})){ne=!1;break}}else if(Ae!==Fe&&!O(Ae,Fe,F,H,X)){ne=!1;break}}return X.delete(k),X.delete(M),ne}},78583:(E,W,f)=>{var p=f(60443),g=f(73457),w=f(20217),S=f(63914),x=f(83205),A=f(24174),xe=p?p.prototype:void 0,Ae=xe?xe.valueOf:void 0;E.exports=function Fe(C,He,nt,et,ot,lt,pt){switch(nt){case"[object DataView]":if(C.byteLength!=He.byteLength||C.byteOffset!=He.byteOffset)return!1;C=C.buffer,He=He.buffer;case"[object ArrayBuffer]":return!(C.byteLength!=He.byteLength||!lt(new g(C),new g(He)));case"[object Boolean]":case"[object Date]":case"[object Number]":return w(+C,+He);case"[object Error]":return C.name==He.name&&C.message==He.message;case"[object RegExp]":case"[object String]":return C==He+"";case"[object Map]":var At=x;case"[object Set]":if(At||(At=A),C.size!=He.size&&!(1&et))return!1;var $t=pt.get(C);if($t)return $t==He;et|=2,pt.set(C,He);var nn=S(At(C),At(He),et,ot,lt,pt);return pt.delete(C),nn;case"[object Symbol]":if(Ae)return Ae.call(C)==Ae.call(He)}return!1}},32286:(E,W,f)=>{var p=f(47597),S=Object.prototype.hasOwnProperty;E.exports=function x(A,k,M,F,H,O){var X=1&M,te=p(A),fe=te.length;if(fe!=p(k).length&&!X)return!1;for(var ve=fe;ve--;){var he=te[ve];if(!(X?he in k:S.call(k,he)))return!1}var ne=O.get(A),xe=O.get(k);if(ne&&xe)return ne==k&&xe==A;var Ae=!0;O.set(A,k),O.set(k,A);for(var Fe=X;++ve<fe;){var C=A[he=te[ve]],He=k[he];if(F)var nt=X?F(He,C,he,k,A,O):F(C,He,he,A,k,O);if(!(void 0===nt?C===He||H(C,He,M,F,O):nt)){Ae=!1;break}Fe||(Fe="constructor"==he)}if(Ae&&!Fe){var et=A.constructor,ot=k.constructor;et!=ot&&"constructor"in A&&"constructor"in k&&!("function"==typeof et&&et instanceof et&&"function"==typeof ot&&ot instanceof ot)&&(Ae=!1)}return O.delete(A),O.delete(k),Ae}},3975:(E,W,f)=>{var p=f(22274),g=f(53983),w=f(72185);E.exports=function S(x){return w(g(x,void 0,p),x+"")}},79122:E=>{var W="object"==typeof global&&global&&global.Object===Object&&global;E.exports=W},47597:(E,W,f)=>{var p=f(38247),g=f(39383),w=f(118);E.exports=function S(x){return p(x,w,g)}},6967:(E,W,f)=>{var p=f(38247),g=f(53051),w=f(16555);E.exports=function S(x){return p(x,w,g)}},54537:(E,W,f)=>{var p=f(23819);E.exports=function g(w,S){var x=w.__data__;return p(S)?x["string"==typeof S?"string":"hash"]:x.map}},22379:(E,W,f)=>{var p=f(22442),g=f(118);E.exports=function w(S){for(var x=g(S),A=x.length;A--;){var k=x[A],M=S[k];x[A]=[k,M,p(M)]}return x}},53436:(E,W,f)=>{var p=f(37304),g=f(51990);E.exports=function w(S,x){var A=g(S,x);return p(A)?A:void 0}},29519:(E,W,f)=>{var g=f(69385)(Object.getPrototypeOf,Object);E.exports=g},21318:(E,W,f)=>{var p=f(60443),g=Object.prototype,w=g.hasOwnProperty,S=g.toString,x=p?p.toStringTag:void 0;E.exports=function A(k){var M=w.call(k,x),F=k[x];try{k[x]=void 0;var H=!0}catch(X){}var O=S.call(k);return H&&(M?k[x]=F:delete k[x]),O}},39383:(E,W,f)=>{var p=f(69779),g=f(49975),S=Object.prototype.propertyIsEnumerable,x=Object.getOwnPropertySymbols;E.exports=x?function(k){return null==k?[]:(k=Object(k),p(x(k),function(M){return S.call(k,M)}))}:g},53051:(E,W,f)=>{var p=f(85059),g=f(29519),w=f(39383),S=f(49975);E.exports=Object.getOwnPropertySymbols?function(k){for(var M=[];k;)p(M,w(k)),k=g(k);return M}:S},28794:(E,W,f)=>{var p=f(37244),g=f(51501),w=f(44267),S=f(46323),x=f(24243),A=f(93337),k=f(52827),M="[object Map]",H="[object Promise]",O="[object Set]",X="[object WeakMap]",te="[object DataView]",fe=k(p),i=k(g),se=k(w),ve=k(S),he=k(x),ne=A;(p&&ne(new p(new ArrayBuffer(1)))!=te||g&&ne(new g)!=M||w&&ne(w.resolve())!=H||S&&ne(new S)!=O||x&&ne(new x)!=X)&&(ne=function(xe){var Ae=A(xe),Fe="[object Object]"==Ae?xe.constructor:void 0,C=Fe?k(Fe):"";if(C)switch(C){case fe:return te;case i:return M;case se:return H;case ve:return O;case he:return X}return Ae}),E.exports=ne},51990:E=>{E.exports=function W(f,p){return null==f?void 0:f[p]}},47283:(E,W,f)=>{var p=f(65456),g=f(77151),w=f(21503),S=f(58442),x=f(96231),A=f(68533);E.exports=function k(M,F,H){for(var O=-1,X=(F=p(F,M)).length,te=!1;++O<X;){var fe=A(F[O]);if(!(te=null!=M&&H(M,fe)))break;M=M[fe]}return te||++O!=X?te:!!(X=null==M?0:M.length)&&x(X)&&S(fe,X)&&(w(M)||g(M))}},77609:E=>{var A=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");E.exports=function k(M){return A.test(M)}},64312:(E,W,f)=>{var p=f(60862);E.exports=function g(){this.__data__=p?p(null):{},this.size=0}},22393:E=>{E.exports=function W(f){var p=this.has(f)&&delete this.__data__[f];return this.size-=p?1:0,p}},15764:(E,W,f)=>{var p=f(60862),S=Object.prototype.hasOwnProperty;E.exports=function x(A){var k=this.__data__;if(p){var M=k[A];return"__lodash_hash_undefined__"===M?void 0:M}return S.call(k,A)?k[A]:void 0}},18685:(E,W,f)=>{var p=f(60862),w=Object.prototype.hasOwnProperty;E.exports=function S(x){var A=this.__data__;return p?void 0!==A[x]:w.call(A,x)}},26676:(E,W,f)=>{var p=f(60862);E.exports=function w(S,x){var A=this.__data__;return this.size+=this.has(S)?0:1,A[S]=p&&void 0===x?"__lodash_hash_undefined__":x,this}},76782:E=>{var f=Object.prototype.hasOwnProperty;E.exports=function p(g){var w=g.length,S=new g.constructor(w);return w&&"string"==typeof g[0]&&f.call(g,"index")&&(S.index=g.index,S.input=g.input),S}},37878:(E,W,f)=>{var p=f(43362),g=f(17e3),w=f(74098),S=f(62533),x=f(65208);E.exports=function nt(et,ot,lt){var pt=et.constructor;switch(ot){case"[object ArrayBuffer]":return p(et);case"[object Boolean]":case"[object Date]":return new pt(+et);case"[object DataView]":return g(et,lt);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return x(et,lt);case"[object Map]":case"[object Set]":return new pt;case"[object Number]":case"[object String]":return new pt(et);case"[object RegExp]":return w(et);case"[object Symbol]":return S(et)}}},4264:(E,W,f)=>{var p=f(78858),g=f(29519),w=f(45488);E.exports=function S(x){return"function"!=typeof x.constructor||w(x)?{}:p(g(x))}},75039:(E,W,f)=>{var p=f(60443),g=f(77151),w=f(21503),S=p?p.isConcatSpreadable:void 0;E.exports=function x(A){return w(A)||g(A)||!!(S&&A&&A[S])}},58442:E=>{var f=/^(?:0|[1-9]\d*)$/;E.exports=function p(g,w){var S=typeof g;return!!(w=null==w?9007199254740991:w)&&("number"==S||"symbol"!=S&&f.test(g))&&g>-1&&g%1==0&&g<w}},93342:(E,W,f)=>{var p=f(20217),g=f(56507),w=f(58442),S=f(25940);E.exports=function x(A,k,M){if(!S(M))return!1;var F=typeof k;return!!("number"==F?g(M)&&w(k,M.length):"string"==F&&k in M)&&p(M[k],A)}},45352:(E,W,f)=>{var p=f(21503),g=f(44129),w=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,S=/^\w*$/;E.exports=function x(A,k){if(p(A))return!1;var M=typeof A;return!("number"!=M&&"symbol"!=M&&"boolean"!=M&&null!=A&&!g(A))||S.test(A)||!w.test(A)||null!=k&&A in Object(k)}},23819:E=>{E.exports=function W(f){var p=typeof f;return"string"==p||"number"==p||"symbol"==p||"boolean"==p?"__proto__"!==f:null===f}},91943:(E,W,f)=>{var S,p=f(24610),g=(S=/[^.]+$/.exec(p&&p.keys&&p.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"";E.exports=function w(S){return!!g&&g in S}},45488:E=>{var W=Object.prototype;E.exports=function f(p){var g=p&&p.constructor;return p===("function"==typeof g&&g.prototype||W)}},22442:(E,W,f)=>{var p=f(25940);E.exports=function g(w){return w==w&&!p(w)}},41840:E=>{E.exports=function W(){this.__data__=[],this.size=0}},34378:(E,W,f)=>{var p=f(43503),w=Array.prototype.splice;E.exports=function S(x){var A=this.__data__,k=p(A,x);return!(k<0||(k==A.length-1?A.pop():w.call(A,k,1),--this.size,0))}},54981:(E,W,f)=>{var p=f(43503);E.exports=function g(w){var S=this.__data__,x=p(S,w);return x<0?void 0:S[x][1]}},67343:(E,W,f)=>{var p=f(43503);E.exports=function g(w){return p(this.__data__,w)>-1}},98895:(E,W,f)=>{var p=f(43503);E.exports=function g(w,S){var x=this.__data__,A=p(x,w);return A<0?(++this.size,x.push([w,S])):x[A][1]=S,this}},10638:(E,W,f)=>{var p=f(54994),g=f(9215),w=f(51501);E.exports=function S(){this.size=0,this.__data__={hash:new p,map:new(w||g),string:new p}}},11184:(E,W,f)=>{var p=f(54537);E.exports=function g(w){var S=p(this,w).delete(w);return this.size-=S?1:0,S}},70866:(E,W,f)=>{var p=f(54537);E.exports=function g(w){return p(this,w).get(w)}},43771:(E,W,f)=>{var p=f(54537);E.exports=function g(w){return p(this,w).has(w)}},51772:(E,W,f)=>{var p=f(54537);E.exports=function g(w,S){var x=p(this,w),A=x.size;return x.set(w,S),this.size+=x.size==A?0:1,this}},83205:E=>{E.exports=function W(f){var p=-1,g=Array(f.size);return f.forEach(function(w,S){g[++p]=[S,w]}),g}},642:E=>{E.exports=function W(f,p){return function(g){return null!=g&&g[f]===p&&(void 0!==p||f in Object(g))}}},90719:(E,W,f)=>{var p=f(30535);E.exports=function w(S){var x=p(S,function(k){return 500===A.size&&A.clear(),k}),A=x.cache;return x}},60862:(E,W,f)=>{var g=f(53436)(Object,"create");E.exports=g},85491:(E,W,f)=>{var g=f(69385)(Object.keys,Object);E.exports=g},32158:E=>{E.exports=function W(f){var p=[];if(null!=f)for(var g in Object(f))p.push(g);return p}},73597:(E,W,f)=>{E=f.nmd(E);var p=f(79122),g=W&&!W.nodeType&&W,w=g&&E&&!E.nodeType&&E,x=w&&w.exports===g&&p.process,A=function(){try{return w&&w.require&&w.require("util").types||x&&x.binding&&x.binding("util")}catch(M){}}();E.exports=A},92902:E=>{var f=Object.prototype.toString;E.exports=function p(g){return f.call(g)}},69385:E=>{E.exports=function W(f,p){return function(g){return f(p(g))}}},53983:(E,W,f)=>{var p=f(26999),g=Math.max;E.exports=function w(S,x,A){return x=g(void 0===x?S.length-1:x,0),function(){for(var k=arguments,M=-1,F=g(k.length-x,0),H=Array(F);++M<F;)H[M]=k[x+M];M=-1;for(var O=Array(x+1);++M<x;)O[M]=k[M];return O[x]=A(H),p(S,this,O)}}},12119:(E,W,f)=>{var p=f(79122),g="object"==typeof self&&self&&self.Object===Object&&self,w=p||g||Function("return this")();E.exports=w},99351:E=>{E.exports=function W(f,p){if(("constructor"!==p||"function"!=typeof f[p])&&"__proto__"!=p)return f[p]}},4600:E=>{E.exports=function f(p){return this.__data__.set(p,"__lodash_hash_undefined__"),this}},31387:E=>{E.exports=function W(f){return this.__data__.has(f)}},24174:E=>{E.exports=function W(f){var p=-1,g=Array(f.size);return f.forEach(function(w){g[++p]=w}),g}},72185:(E,W,f)=>{var p=f(69510),w=f(10029)(p);E.exports=w},10029:E=>{var p=Date.now;E.exports=function g(w){var S=0,x=0;return function(){var A=p(),k=16-(A-x);if(x=A,k>0){if(++S>=800)return arguments[0]}else S=0;return w.apply(void 0,arguments)}}},13720:(E,W,f)=>{var p=f(9215);E.exports=function g(){this.__data__=new p,this.size=0}},64410:E=>{E.exports=function W(f){var p=this.__data__,g=p.delete(f);return this.size=p.size,g}},45576:E=>{E.exports=function W(f){return this.__data__.get(f)}},22247:E=>{E.exports=function W(f){return this.__data__.has(f)}},41585:(E,W,f)=>{var p=f(9215),g=f(51501),w=f(99850);E.exports=function x(A,k){var M=this.__data__;if(M instanceof p){var F=M.__data__;if(!g||F.length<199)return F.push([A,k]),this.size=++M.size,this;M=this.__data__=new w(F)}return M.set(A,k),this.size=M.size,this}},24977:E=>{E.exports=function W(f,p,g){for(var w=g-1,S=f.length;++w<S;)if(f[w]===p)return w;return-1}},52315:(E,W,f)=>{var p=f(75481),g=f(77609),w=f(81149);E.exports=function S(x){return g(x)?w(x):p(x)}},32855:(E,W,f)=>{var p=f(90719),g=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,w=/\\(\\)?/g,S=p(function(x){var A=[];return 46===x.charCodeAt(0)&&A.push(""),x.replace(g,function(k,M,F,H){A.push(F?H.replace(w,"$1"):M||k)}),A});E.exports=S},68533:(E,W,f)=>{var p=f(44129);E.exports=function w(S){if("string"==typeof S||p(S))return S;var x=S+"";return"0"==x&&1/S==-1/0?"-0":x}},52827:E=>{var f=Function.prototype.toString;E.exports=function p(g){if(null!=g){try{return f.call(g)}catch(w){}try{return g+""}catch(w){}}return""}},42760:E=>{var W=/\s/;E.exports=function f(p){for(var g=p.length;g--&&W.test(p.charAt(g)););return g}},81149:E=>{var W="\\ud800-\\udfff",x="["+W+"]",A="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",k="\\ud83c[\\udffb-\\udfff]",F="[^"+W+"]",H="(?:\\ud83c[\\udde6-\\uddff]){2}",O="[\\ud800-\\udbff][\\udc00-\\udfff]",te="(?:"+A+"|"+k+")?",fe="[\\ufe0e\\ufe0f]?",se=fe+te+"(?:\\u200d(?:"+[F,H,O].join("|")+")"+fe+te+")*",ve="(?:"+[F+A+"?",A,H,O,x].join("|")+")",he=RegExp(k+"(?="+k+")|"+ve+se,"g");E.exports=function ne(xe){for(var Ae=he.lastIndex=0;he.test(xe);)++Ae;return Ae}},11094:(E,W,f)=>{var p=f(44462);E.exports=function w(S){return p(S,4)}},90733:(E,W,f)=>{var p=f(44462);E.exports=function S(x){return p(x,5)}},76684:E=>{E.exports=function W(f){return function(){return f}}},28800:(E,W,f)=>{var p=f(23269),g=f(20217),w=f(93342),S=f(16555),x=Object.prototype,A=x.hasOwnProperty,k=p(function(M,F){M=Object(M);var H=-1,O=F.length,X=O>2?F[2]:void 0;for(X&&w(F[0],F[1],X)&&(O=1);++H<O;)for(var te=F[H],fe=S(te),i=-1,se=fe.length;++i<se;){var ve=fe[i],he=M[ve];(void 0===he||g(he,x[ve])&&!A.call(M,ve))&&(M[ve]=te[ve])}return M});E.exports=k},35474:(E,W,f)=>{E.exports=f(89851)},20217:E=>{E.exports=function W(f,p){return f===p||f!=f&&p!=p}},35281:(E,W,f)=>{var p=f(69779),g=f(33609),w=f(96517),S=f(21503);E.exports=function x(A,k){return(S(A)?p:g)(A,w(k,3))}},62516:(E,W,f)=>{var w=f(24653)(f(36397));E.exports=w},36397:(E,W,f)=>{var p=f(65317),g=f(96517),w=f(44401),S=Math.max;E.exports=function x(A,k,M){var F=null==A?0:A.length;if(!F)return-1;var H=null==M?0:w(M);return H<0&&(H=S(F+H,0)),p(A,g(k,3),H)}},22274:(E,W,f)=>{var p=f(50686);E.exports=function g(w){return null!=w&&w.length?p(w,1):[]}},89851:(E,W,f)=>{var p=f(96837),g=f(43132),w=f(21481),S=f(21503);E.exports=function x(A,k){return(S(A)?p:g)(A,w(k))}},41176:(E,W,f)=>{var p=f(30755),g=f(21481),w=f(16555);E.exports=function S(x,A){return null==x?x:p(x,g(A),w)}},8817:(E,W,f)=>{var p=f(15456);E.exports=function g(w,S,x){var A=null==w?void 0:p(w,S);return void 0===A?x:A}},54842:(E,W,f)=>{var p=f(84781),g=f(47283);E.exports=function w(S,x){return null!=S&&g(S,x,p)}},11172:(E,W,f)=>{var p=f(69989),g=f(47283);E.exports=function w(S,x){return null!=S&&g(S,x,p)}},32608:E=>{E.exports=function W(f){return f}},77151:(E,W,f)=>{var p=f(60186),g=f(72671),w=Object.prototype,S=w.hasOwnProperty,x=w.propertyIsEnumerable,A=p(function(){return arguments}())?p:function(k){return g(k)&&S.call(k,"callee")&&!x.call(k,"callee")};E.exports=A},21503:E=>{E.exports=Array.isArray},56507:(E,W,f)=>{var p=f(75946),g=f(96231);E.exports=function w(S){return null!=S&&g(S.length)&&!p(S)}},21330:(E,W,f)=>{var p=f(56507),g=f(72671);E.exports=function w(S){return g(S)&&p(S)}},80891:(E,W,f)=>{E=f.nmd(E);var p=f(12119),g=f(63580),w=W&&!W.nodeType&&W,S=w&&E&&!E.nodeType&&E,A=S&&S.exports===w?p.Buffer:void 0;E.exports=(A?A.isBuffer:void 0)||g},71973:(E,W,f)=>{var p=f(81172),g=f(28794),w=f(77151),S=f(21503),x=f(56507),A=f(80891),k=f(45488),M=f(48159),X=Object.prototype.hasOwnProperty;E.exports=function te(fe){if(null==fe)return!0;if(x(fe)&&(S(fe)||"string"==typeof fe||"function"==typeof fe.splice||A(fe)||M(fe)||w(fe)))return!fe.length;var i=g(fe);if("[object Map]"==i||"[object Set]"==i)return!fe.size;if(k(fe))return!p(fe).length;for(var se in fe)if(X.call(fe,se))return!1;return!0}},75946:(E,W,f)=>{var p=f(93337),g=f(25940);E.exports=function k(M){if(!g(M))return!1;var F=p(M);return"[object Function]"==F||"[object GeneratorFunction]"==F||"[object AsyncFunction]"==F||"[object Proxy]"==F}},96231:E=>{E.exports=function f(p){return"number"==typeof p&&p>-1&&p%1==0&&p<=9007199254740991}},13222:(E,W,f)=>{var p=f(97021),g=f(85647),w=f(73597),S=w&&w.isMap,x=S?g(S):p;E.exports=x},25940:E=>{E.exports=function W(f){var p=typeof f;return null!=f&&("object"==p||"function"==p)}},72671:E=>{E.exports=function W(f){return null!=f&&"object"==typeof f}},97614:(E,W,f)=>{var p=f(93337),g=f(29519),w=f(72671),k=Function.prototype.toString,M=Object.prototype.hasOwnProperty,F=k.call(Object);E.exports=function H(O){if(!w(O)||"[object Object]"!=p(O))return!1;var X=g(O);if(null===X)return!0;var te=M.call(X,"constructor")&&X.constructor;return"function"==typeof te&&te instanceof te&&k.call(te)==F}},90799:(E,W,f)=>{var p=f(771),g=f(85647),w=f(73597),S=w&&w.isSet,x=S?g(S):p;E.exports=x},30248:(E,W,f)=>{var p=f(93337),g=f(21503),w=f(72671);E.exports=function x(A){return"string"==typeof A||!g(A)&&w(A)&&"[object String]"==p(A)}},44129:(E,W,f)=>{var p=f(93337),g=f(72671);E.exports=function S(x){return"symbol"==typeof x||g(x)&&"[object Symbol]"==p(x)}},48159:(E,W,f)=>{var p=f(1083),g=f(85647),w=f(73597),S=w&&w.isTypedArray,x=S?g(S):p;E.exports=x},34235:E=>{E.exports=function W(f){return void 0===f}},118:(E,W,f)=>{var p=f(72271),g=f(81172),w=f(56507);E.exports=function S(x){return w(x)?p(x):g(x)}},16555:(E,W,f)=>{var p=f(72271),g=f(92809),w=f(56507);E.exports=function S(x){return w(x)?p(x,!0):g(x)}},25809:E=>{E.exports=function W(f){var p=null==f?0:f.length;return p?f[p-1]:void 0}},17489:function(E,W,f){var p;E=f.nmd(E),function(){var g,A="Expected a function",M="__lodash_hash_undefined__",H="__lodash_placeholder__",C=128,nn=1/0,vr=9007199254740991,wn=4294967295,Yn=[["ary",C],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],be="[object Arguments]",Je="[object Array]",ht="[object Boolean]",Rt="[object Date]",kn="[object Error]",or="[object Function]",mi="[object GeneratorFunction]",un="[object Map]",Kt="[object Number]",z="[object Object]",re="[object Promise]",We="[object RegExp]",Ke="[object Set]",bt="[object String]",Nt="[object Symbol]",mn="[object WeakMap]",gn="[object ArrayBuffer]",Qn="[object DataView]",Tr="[object Float32Array]",yi="[object Float64Array]",jn="[object Int8Array]",ar="[object Int16Array]",rr="[object Int32Array]",cr="[object Uint8Array]",Nr="[object Uint8ClampedArray]",ai="[object Uint16Array]",ir="[object Uint32Array]",sr=/\b__p \+= '';/g,Sn=/\b(__p \+=) '' \+/g,Qa=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mo=/&(?:amp|lt|gt|quot|#39);/g,Qo=/[&<>"']/g,Xi=RegExp(mo.source),Wt=RegExp(Qo.source),Mo=/<%-([\s\S]+?)%>/g,Ta=/<%([\s\S]+?)%>/g,yo=/<%=([\s\S]+?)%>/g,xo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,zr=/^\w*$/,Mi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xi=/[\\^$.*+?()[\]{}|]/g,Lr=RegExp(xi.source),Ki=/^\s+/,Er=/\s/,ko=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ea=/\{\n\/\* \[wrapped with (.+)\] \*/,si=/,? & /,Lo=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Oo=/[()=,{}\[\]\/\s]/,Jt=/\\(\\)?/g,Ro=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qo=/\w*$/,ki=/^[-+]0x[0-9a-f]+$/i,Pa=/^0b[01]+$/i,Aa=/^\[object .+?Constructor\]$/,Ia=/^0o[0-7]+$/i,qa=/^(?:0|[1-9]\d*)$/,es=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ji=/($^)/,Zi=/['\n\r\u2028\u2029\\]/g,ye="\\ud800-\\udfff",gt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Li="\\u2700-\\u27bf",br="a-z\\xdf-\\xf6\\xf8-\\xff",Qi="A-Z\\xc0-\\xd6\\xd8-\\xde",na="\\ufe0e\\ufe0f",bo="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ma="["+ye+"]",No="["+bo+"]",Rr="["+gt+"]",ct="\\d+",ui="["+Li+"]",ra="["+br+"]",Do="[^"+ye+bo+ct+Li+br+Qi+"]",li="\\ud83c[\\udffb-\\udfff]",Vi="[^"+ye+"]",ia="(?:\\ud83c[\\udde6-\\uddff]){2}",Xr="[\\ud800-\\udbff][\\udc00-\\udfff]",Bi="["+Qi+"]",yn="(?:"+ra+"|"+Do+")",qi="(?:"+Bi+"|"+Do+")",It="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Kr="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",ci="(?:"+Rr+"|"+li+")?",Cr="["+na+"]?",Hi=Cr+ci+"(?:\\u200d(?:"+[Vi,ia,Xr].join("|")+")"+Cr+ci+")*",aa="(?:"+[ui,ia,Xr].join("|")+")"+Hi,Co="(?:"+[Vi+Rr+"?",Rr,ia,Xr,Ma].join("|")+")",sa=RegExp("['\u2019]","g"),ka=RegExp(Rr,"g"),eo=RegExp(li+"(?="+li+")|"+Co+Hi,"g"),Ar=RegExp([Bi+"?"+ra+"+"+It+"(?="+[No,Bi,"$"].join("|")+")",qi+"+"+Kr+"(?="+[No,Bi+yn,"$"].join("|")+")",Bi+"?"+yn+"+"+It,Bi+"+"+Kr,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ct,aa].join("|"),"g"),La=RegExp("[\\u200d"+ye+gt+na+"]"),fi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ua=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Fo=-1,Vn={};Vn[Tr]=Vn[yi]=Vn[jn]=Vn[ar]=Vn[rr]=Vn[cr]=Vn[Nr]=Vn[ai]=Vn[ir]=!0,Vn[be]=Vn[Je]=Vn[gn]=Vn[ht]=Vn[Qn]=Vn[Rt]=Vn[kn]=Vn[or]=Vn[un]=Vn[Kt]=Vn[z]=Vn[We]=Vn[Ke]=Vn[bt]=Vn[mn]=!1;var Rn={};Rn[be]=Rn[Je]=Rn[gn]=Rn[Qn]=Rn[ht]=Rn[Rt]=Rn[Tr]=Rn[yi]=Rn[jn]=Rn[ar]=Rn[rr]=Rn[un]=Rn[Kt]=Rn[z]=Rn[We]=Rn[Ke]=Rn[bt]=Rn[Nt]=Rn[cr]=Rn[Nr]=Rn[ai]=Rn[ir]=!0,Rn[kn]=Rn[or]=Rn[mn]=!1;var Z={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ae=parseFloat,ge=parseInt,ke="object"==typeof global&&global&&global.Object===Object&&global,Se="object"==typeof self&&self&&self.Object===Object&&self,l=ke||Se||Function("return this")(),d=W&&!W.nodeType&&W,y=d&&E&&!E.nodeType&&E,_=y&&y.exports===d,R=_&&ke.process,D=function(){try{return y&&y.require&&y.require("util").types||R&&R.binding&&R.binding("util")}catch(Xe){}}(),Y=D&&D.isArrayBuffer,le=D&&D.isDate,ue=D&&D.isMap,Ie=D&&D.isRegExp,Ve=D&&D.isSet,rt=D&&D.isTypedArray;function Re(me,Xe,Be){switch(Be.length){case 0:return me.call(Xe);case 1:return me.call(Xe,Be[0]);case 2:return me.call(Xe,Be[0],Be[1]);case 3:return me.call(Xe,Be[0],Be[1],Be[2])}return me.apply(Xe,Be)}function $e(me,Xe,Be,wt){for(var Zt=-1,Dn=null==me?0:me.length;++Zt<Dn;){var hr=me[Zt];Xe(wt,hr,Be(hr),me)}return wt}function St(me,Xe){for(var Be=-1,wt=null==me?0:me.length;++Be<wt&&!1!==Xe(me[Be],Be,me););return me}function Yt(me,Xe){for(var Be=null==me?0:me.length;Be--&&!1!==Xe(me[Be],Be,me););return me}function Pt(me,Xe){for(var Be=-1,wt=null==me?0:me.length;++Be<wt;)if(!Xe(me[Be],Be,me))return!1;return!0}function qn(me,Xe){for(var Be=-1,wt=null==me?0:me.length,Zt=0,Dn=[];++Be<wt;){var hr=me[Be];Xe(hr,Be,me)&&(Dn[Zt++]=hr)}return Dn}function fr(me,Xe){return!(null==me||!me.length)&&Ir(me,Xe,0)>-1}function je(me,Xe,Be){for(var wt=-1,Zt=null==me?0:me.length;++wt<Zt;)if(Be(Xe,me[wt]))return!0;return!1}function Mt(me,Xe){for(var Be=-1,wt=null==me?0:me.length,Zt=Array(wt);++Be<wt;)Zt[Be]=Xe(me[Be],Be,me);return Zt}function kt(me,Xe){for(var Be=-1,wt=Xe.length,Zt=me.length;++Be<wt;)me[Zt+Be]=Xe[Be];return me}function Gr(me,Xe,Be,wt){var Zt=-1,Dn=null==me?0:me.length;for(wt&&Dn&&(Be=me[++Zt]);++Zt<Dn;)Be=Xe(Be,me[Zt],Zt,me);return Be}function bn(me,Xe,Be,wt){var Zt=null==me?0:me.length;for(wt&&Zt&&(Be=me[--Zt]);Zt--;)Be=Xe(Be,me[Zt],Zt,me);return Be}function Xn(me,Xe){for(var Be=-1,wt=null==me?0:me.length;++Be<wt;)if(Xe(me[Be],Be,me))return!0;return!1}var to=ca("length");function no(me,Xe,Be){var wt;return Be(me,function(Zt,Dn,hr){if(Xe(Zt,Dn,hr))return wt=Dn,!1}),wt}function ji(me,Xe,Be,wt){for(var Zt=me.length,Dn=Be+(wt?1:-1);wt?Dn--:++Dn<Zt;)if(Xe(me[Dn],Dn,me))return Dn;return-1}function Ir(me,Xe,Be){return Xe==Xe?function Si(me,Xe,Be){for(var wt=Be-1,Zt=me.length;++wt<Zt;)if(me[wt]===Xe)return wt;return-1}(me,Xe,Be):ji(me,di,Be)}function wi(me,Xe,Be,wt){for(var Zt=Be-1,Dn=me.length;++Zt<Dn;)if(wt(me[Zt],Xe))return Zt;return-1}function di(me){return me!=me}function ur(me,Xe){var Be=null==me?0:me.length;return Be?ro(me,Xe)/Be:NaN}function ca(me){return function(Xe){return null==Xe?g:Xe[me]}}function Ri(me){return function(Xe){return null==me?g:me[Xe]}}function Ps(me,Xe,Be,wt,Zt){return Zt(me,function(Dn,hr,Kn){Be=wt?(wt=!1,Dn):Xe(Be,Dn,hr,Kn)}),Be}function ro(me,Xe){for(var Be,wt=-1,Zt=me.length;++wt<Zt;){var Dn=Xe(me[wt]);Dn!==g&&(Be=Be===g?Dn:Be+Dn)}return Be}function rs(me,Xe){for(var Be=-1,wt=Array(me);++Be<me;)wt[Be]=Xe(Be);return wt}function ru(me){return me&&me.slice(0,qr(me)+1).replace(Ki,"")}function Zr(me){return function(Xe){return me(Xe)}}function As(me,Xe){return Mt(Xe,function(Be){return me[Be]})}function Ra(me,Xe){return me.has(Xe)}function Zu(me,Xe){for(var Be=-1,wt=me.length;++Be<wt&&Ir(Xe,me[Be],0)>-1;);return Be}function iu(me,Xe){for(var Be=me.length;Be--&&Ir(Xe,me[Be],0)>-1;);return Be}function nc(me,Xe){for(var Be=me.length,wt=0;Be--;)me[Be]===Xe&&++wt;return wt}var io=Ri({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Qu=Ri({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ou(me){return"\\"+Z[me]}function oo(me){return La.test(me)}function Ui(me){var Xe=-1,Be=Array(me.size);return me.forEach(function(wt,Zt){Be[++Xe]=[Zt,wt]}),Be}function ao(me,Xe){return function(Be){return me(Xe(Be))}}function wo(me,Xe){for(var Be=-1,wt=me.length,Zt=0,Dn=[];++Be<wt;){var hr=me[Be];(hr===Xe||hr===H)&&(me[Be]=H,Dn[Zt++]=Be)}return Dn}function is(me){var Xe=-1,Be=Array(me.size);return me.forEach(function(wt){Be[++Xe]=wt}),Be}function Mr(me){return oo(me)?function hi(me){for(var Xe=eo.lastIndex=0;eo.test(me);)++Xe;return Xe}(me):to(me)}function dr(me){return oo(me)?function So(me){return me.match(eo)||[]}(me):function Oa(me){return me.split("")}(me)}function qr(me){for(var Xe=me.length;Xe--&&Er.test(me.charAt(Xe)););return Xe}var Ti=Ri({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Jn=function me(Xe){var a,Be=(Xe=null==Xe?l:Jn.defaults(l.Object(),Xe,Jn.pick(l,ua))).Array,wt=Xe.Date,Zt=Xe.Error,Dn=Xe.Function,hr=Xe.Math,Kn=Xe.Object,fa=Xe.RegExp,so=Xe.String,J=Xe.TypeError,ce=Be.prototype,Ye=Kn.prototype,Ee=Xe["__core-js_shared__"],Ze=Dn.prototype.toString,Ge=Ye.hasOwnProperty,at=0,mt=(a=/[^.]+$/.exec(Ee&&Ee.keys&&Ee.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"",vt=Ye.toString,Tt=Ze.call(Kn),Et=l._,on=fa("^"+Ze.call(Ge).replace(xi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rn=_?Xe.Buffer:g,Ot=Xe.Symbol,Bn=Xe.Uint8Array,Dr=rn?rn.allocUnsafe:g,Fr=ao(Kn.getPrototypeOf,Kn),er=Kn.create,Vo=Ye.propertyIsEnumerable,uo=ce.splice,ni=Ot?Ot.isConcatSpreadable:g,Is=Ot?Ot.iterator:g,Bo=Ot?Ot.toStringTag:g,Ms=function(){try{var a=$a(Kn,"defineProperty");return a({},"",{}),a}catch(s){}}(),rc=Xe.clearTimeout!==l.clearTimeout&&Xe.clearTimeout,el=wt&&wt.now!==l.Date.now&&wt.now,da=Xe.setTimeout!==l.setTimeout&&Xe.setTimeout,Na=hr.ceil,ks=hr.floor,su=Kn.getOwnPropertySymbols,ic=rn?rn.isBuffer:g,tl=Xe.isFinite,uu=ce.join,as=ao(Kn.keys,Kn),mr=hr.max,Wr=hr.min,oc=wt.now,Tn=Xe.parseInt,nl=hr.random,To=ce.reverse,ha=$a(Xe,"DataView"),ss=$a(Xe,"Map"),Da=$a(Xe,"Promise"),Fa=$a(Xe,"Set"),Va=$a(Xe,"WeakMap"),Ls=$a(Kn,"create"),lu=Va&&new Va,us={},Nf=Xa(ha),Df=Xa(ss),Ff=Xa(Da),Vf=Xa(Fa),Bf=Xa(Va),cu=Ot?Ot.prototype:g,zi=cu?cu.valueOf:g,rl=cu?cu.toString:g;function Q(a){if(Sr(a)&&!sn(a)&&!(a instanceof En)){if(a instanceof Gi)return a;if(Ge.call(a,"__wrapped__"))return Gc(a)}return new Gi(a)}var Ba=function(){function a(){}return function(s){if(!yr(s))return{};if(er)return er(s);a.prototype=s;var h=new a;return a.prototype=g,h}}();function Os(){}function Gi(a,s){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=g}function En(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=wn,this.__views__=[]}function Ha(a){var s=-1,h=null==a?0:a.length;for(this.clear();++s<h;){var P=a[s];this.set(P[0],P[1])}}function Eo(a){var s=-1,h=null==a?0:a.length;for(this.clear();++s<h;){var P=a[s];this.set(P[0],P[1])}}function Ho(a){var s=-1,h=null==a?0:a.length;for(this.clear();++s<h;){var P=a[s];this.set(P[0],P[1])}}function ja(a){var s=-1,h=null==a?0:a.length;for(this.__data__=new Ho;++s<h;)this.add(a[s])}function Po(a){var s=this.__data__=new Eo(a);this.size=s.size}function fu(a,s){var h=sn(a),P=!h&&Ca(a),j=!h&&!P&&_a(a),q=!h&&!P&&!j&&ws(a),de=h||P||j||q,_e=de?rs(a.length,so):[],Le=_e.length;for(var Qe in a)(s||Ge.call(a,Qe))&&(!de||!("length"==Qe||j&&("offset"==Qe||"parent"==Qe)||q&&("buffer"==Qe||"byteLength"==Qe||"byteOffset"==Qe)||Xo(Qe,Le)))&&_e.push(Qe);return _e}function Qf(a){var s=a.length;return s?a[Tu(0,s-1)]:g}function qf(a,s){return Ws(Pi(a),Uo(s,0,a.length))}function ed(a){return Ws(Pi(a))}function ol(a,s,h){(h!==g&&!ho(a[s],h)||h===g&&!(s in a))&&Ei(a,s,h)}function du(a,s,h){var P=a[s];(!Ge.call(a,s)||!ho(P,h)||h===g&&!(s in a))&&Ei(a,s,h)}function hu(a,s){for(var h=a.length;h--;)if(ho(a[h][0],s))return h;return-1}function zp(a,s,h,P){return ga(a,function(j,q,de){s(P,j,h(j),de)}),P}function td(a,s){return a&&fo(s,Yr(s),a)}function Ei(a,s,h){"__proto__"==s&&Ms?Ms(a,s,{configurable:!0,enumerable:!0,value:h,writable:!0}):a[s]=h}function pu(a,s){for(var h=-1,P=s.length,j=Be(P),q=null==a;++h<P;)j[h]=q?g:Jl(a,s[h]);return j}function Uo(a,s,h){return a==a&&(h!==g&&(a=a<=h?a:h),s!==g&&(a=a>=s?a:s)),a}function Vr(a,s,h,P,j,q){var de,_e=1&s,Le=2&s,Qe=4&s;if(h&&(de=j?h(a,P,j,q):h(a)),de!==g)return de;if(!yr(a))return a;var qe=sn(a);if(qe){if(de=function Sd(a){var s=a.length,h=new a.constructor(s);return s&&"string"==typeof a[0]&&Ge.call(a,"index")&&(h.index=a.index,h.input=a.input),h}(a),!_e)return Pi(a,de)}else{var it=ri(a),_t=it==or||it==mi;if(_a(a))return wc(a,_e);if(it==z||it==be||_t&&!j){if(de=Le||_t?{}:Dc(a),!_e)return Le?function vd(a,s){return fo(a,Al(a),s)}(a,function Ua(a,s){return a&&fo(s,Ii(s),a)}(de,a)):function gd(a,s){return fo(a,va(a),s)}(a,td(de,a))}else{if(!Rn[it])return j?a:{};de=function Td(a,s,h){var P=a.constructor;switch(s){case gn:return xl(a);case ht:case Rt:return new P(+a);case Qn:return function bl(a,s){var h=s?xl(a.buffer):a.buffer;return new a.constructor(h,a.byteOffset,a.byteLength)}(a,h);case Tr:case yi:case jn:case ar:case rr:case cr:case Nr:case ai:case ir:return Tc(a,h);case un:return new P;case Kt:case bt:return new P(a);case We:return function Sc(a){var s=new a.constructor(a.source,qo.exec(a));return s.lastIndex=a.lastIndex,s}(a);case Ke:return new P;case Nt:return function pd(a){return zi?Kn(zi.call(a)):{}}(a)}}(a,it,_e)}}q||(q=new Po);var Dt=q.get(a);if(Dt)return Dt;q.set(a,de),xf(a)?a.forEach(function(tn){de.add(Vr(tn,s,h,tn,a,q))}):Yl(a)&&a.forEach(function(tn,Ln){de.set(Ln,Vr(tn,s,h,Ln,a,q))});var _n=qe?g:(Qe?Le?Tl:Sl:Le?Ii:Yr)(a);return St(_n||a,function(tn,Ln){_n&&(tn=a[Ln=tn]),du(de,Ln,Vr(tn,s,h,Ln,a,q))}),de}function Pn(a,s,h){var P=h.length;if(null==a)return!P;for(a=Kn(a);P--;){var j=h[P],de=a[j];if(de===g&&!(j in a)||!(0,s[j])(de))return!1}return!0}function An(a,s,h){if("function"!=typeof a)throw new J(A);return Gs(function(){a.apply(g,h)},s)}function pa(a,s,h,P){var j=-1,q=fr,de=!0,_e=a.length,Le=[],Qe=s.length;if(!_e)return Le;h&&(s=Mt(s,Zr(h))),P?(q=je,de=!1):s.length>=200&&(q=Ra,de=!1,s=new ja(s));e:for(;++j<_e;){var qe=a[j],it=null==h?qe:h(qe);if(qe=P||0!==qe?qe:0,de&&it==it){for(var _t=Qe;_t--;)if(s[_t]===it)continue e;Le.push(qe)}else q(s,it,P)||Le.push(qe)}return Le}Q.templateSettings={escape:Mo,evaluate:Ta,interpolate:yo,variable:"",imports:{_:Q}},(Q.prototype=Os.prototype).constructor=Q,(Gi.prototype=Ba(Os.prototype)).constructor=Gi,(En.prototype=Ba(Os.prototype)).constructor=En,Ha.prototype.clear=function zf(){this.__data__=Ls?Ls(null):{},this.size=0},Ha.prototype.delete=function Gf(a){var s=this.has(a)&&delete this.__data__[a];return this.size-=s?1:0,s},Ha.prototype.get=function Wf(a){var s=this.__data__;if(Ls){var h=s[a];return h===M?g:h}return Ge.call(s,a)?s[a]:g},Ha.prototype.has=function $f(a){var s=this.__data__;return Ls?s[a]!==g:Ge.call(s,a)},Ha.prototype.set=function Yf(a,s){var h=this.__data__;return this.size+=this.has(a)?0:1,h[a]=Ls&&s===g?M:s,this},Eo.prototype.clear=function Xf(){this.__data__=[],this.size=0},Eo.prototype.delete=function Kf(a){var s=this.__data__,h=hu(s,a);return!(h<0||(h==s.length-1?s.pop():uo.call(s,h,1),--this.size,0))},Eo.prototype.get=function pi(a){var s=this.__data__,h=hu(s,a);return h<0?g:s[h][1]},Eo.prototype.has=function Jf(a){return hu(this.__data__,a)>-1},Eo.prototype.set=function il(a,s){var h=this.__data__,P=hu(h,a);return P<0?(++this.size,h.push([a,s])):h[P][1]=s,this},Ho.prototype.clear=function jo(){this.size=0,this.__data__={hash:new Ha,map:new(ss||Eo),string:new Ha}},Ho.prototype.delete=function Rs(a){var s=Nu(this,a).delete(a);return this.size-=s?1:0,s},Ho.prototype.get=function Zf(a){return Nu(this,a).get(a)},Ho.prototype.has=function Rp(a){return Nu(this,a).has(a)},Ho.prototype.set=function Np(a,s){var h=Nu(this,a),P=h.size;return h.set(a,s),this.size+=h.size==P?0:1,this},ja.prototype.add=ja.prototype.push=function Dp(a){return this.__data__.set(a,M),this},ja.prototype.has=function Fp(a){return this.__data__.has(a)},Po.prototype.clear=function Vp(){this.__data__=new Eo,this.size=0},Po.prototype.delete=function Bp(a){var s=this.__data__,h=s.delete(a);return this.size=s.size,h},Po.prototype.get=function Hp(a){return this.__data__.get(a)},Po.prototype.has=function jp(a){return this.__data__.has(a)},Po.prototype.set=function Up(a,s){var h=this.__data__;if(h instanceof Eo){var P=h.__data__;if(!ss||P.length<199)return P.push([a,s]),this.size=++h.size,this;h=this.__data__=new Ho(P)}return h.set(a,s),this.size=h.size,this};var ga=Pc(lo),ac=Pc(yu,!0);function nd(a,s){var h=!0;return ga(a,function(P,j,q){return h=!!s(P,j,q)}),h}function gu(a,s,h){for(var P=-1,j=a.length;++P<j;){var q=a[P],de=s(q);if(null!=de&&(_e===g?de==de&&!Di(de):h(de,_e)))var _e=de,Le=q}return Le}function mu(a,s){var h=[];return ga(a,function(P,j,q){s(P,j,q)&&h.push(P)}),h}function zn(a,s,h,P,j){var q=-1,de=a.length;for(h||(h=Ed),j||(j=[]);++q<de;){var _e=a[q];s>0&&h(_e)?s>1?zn(_e,s-1,h,P,j):kt(j,_e):P||(j[j.length]=_e)}return j}var cs=Ac(),Ns=Ac(!0);function lo(a,s){return a&&cs(a,s,Yr)}function yu(a,s){return a&&Ns(a,s,Yr)}function xu(a,s){return qn(s,function(h){return po(a[h])})}function za(a,s){for(var h=0,P=(s=zo(s,a)).length;null!=a&&h<P;)a=a[Io(s[h++])];return h&&h==P?a:g}function al(a,s,h){var P=s(a);return sn(a)?P:kt(P,h(a))}function $r(a){return null==a?a===g?"[object Undefined]":"[object Null]":Bo&&Bo in Kn(a)?function wd(a){var s=Ge.call(a,Bo),h=a[Bo];try{a[Bo]=g;var P=!0}catch(q){}var j=vt.call(a);return P&&(s?a[Bo]=h:delete a[Bo]),j}(a):function Md(a){return vt.call(a)}(a)}function sl(a,s){return a>s}function rd(a,s){return null!=a&&Ge.call(a,s)}function ul(a,s){return null!=a&&s in Kn(a)}function bu(a,s,h){for(var P=h?je:fr,j=a[0].length,q=a.length,de=q,_e=Be(q),Le=1/0,Qe=[];de--;){var qe=a[de];de&&s&&(qe=Mt(qe,Zr(s))),Le=Wr(qe.length,Le),_e[de]=!h&&(s||j>=120&&qe.length>=120)?new ja(de&&qe):g}qe=a[0];var it=-1,_t=_e[0];e:for(;++it<j&&Qe.length<Le;){var Dt=qe[it],en=s?s(Dt):Dt;if(Dt=h||0!==Dt?Dt:0,!(_t?Ra(_t,en):P(Qe,en,h))){for(de=q;--de;){var _n=_e[de];if(!(_n?Ra(_n,en):P(a[de],en,h)))continue e}_t&&_t.push(en),Qe.push(Dt)}}return Qe}function co(a,s,h){var P=null==(a=Hc(a,s=zo(s,a)))?a:a[Io(wr(s))];return null==P?g:Re(P,a,h)}function fl(a){return Sr(a)&&$r(a)==be}function Ds(a,s,h,P,j){return a===s||(null==a||null==s||!Sr(a)&&!Sr(s)?a!=a&&s!=s:function dl(a,s,h,P,j,q){var de=sn(a),_e=sn(s),Le=de?Je:ri(a),Qe=_e?Je:ri(s),qe=(Le=Le==be?z:Le)==z,it=(Qe=Qe==be?z:Qe)==z,_t=Le==Qe;if(_t&&_a(a)){if(!_a(s))return!1;de=!0,qe=!1}if(_t&&!qe)return q||(q=new Po),de||ws(a)?Nc(a,s,h,P,j,q):function Cd(a,s,h,P,j,q,de){switch(h){case Qn:if(a.byteLength!=s.byteLength||a.byteOffset!=s.byteOffset)return!1;a=a.buffer,s=s.buffer;case gn:return!(a.byteLength!=s.byteLength||!q(new Bn(a),new Bn(s)));case ht:case Rt:case Kt:return ho(+a,+s);case kn:return a.name==s.name&&a.message==s.message;case We:case bt:return a==s+"";case un:var _e=Ui;case Ke:if(_e||(_e=is),a.size!=s.size&&!(1&P))return!1;var Qe=de.get(a);if(Qe)return Qe==s;P|=2,de.set(a,s);var qe=Nc(_e(a),_e(s),P,j,q,de);return de.delete(a),qe;case Nt:if(zi)return zi.call(a)==zi.call(s)}return!1}(a,s,Le,h,P,j,q);if(!(1&h)){var Dt=qe&&Ge.call(a,"__wrapped__"),en=it&&Ge.call(s,"__wrapped__");if(Dt||en){var _n=Dt?a.value():a,tn=en?s.value():s;return q||(q=new Po),j(_n,tn,h,P,q)}}return!!_t&&(q||(q=new Po),function _d(a,s,h,P,j,q){var de=1&h,_e=Sl(a),Le=_e.length;if(Le!=Sl(s).length&&!de)return!1;for(var it=Le;it--;){var _t=_e[it];if(!(de?_t in s:Ge.call(s,_t)))return!1}var Dt=q.get(a),en=q.get(s);if(Dt&&en)return Dt==s&&en==a;var _n=!0;q.set(a,s),q.set(s,a);for(var tn=de;++it<Le;){var Ln=a[_t=_e[it]],Fn=s[_t];if(P)var go=de?P(Fn,Ln,_t,s,a,q):P(Ln,Fn,_t,a,s,q);if(!(go===g?Ln===Fn||j(Ln,Fn,h,P,q):go)){_n=!1;break}tn||(tn="constructor"==_t)}if(_n&&!tn){var Fi=a.constructor,vo=s.constructor;Fi!=vo&&"constructor"in a&&"constructor"in s&&!("function"==typeof Fi&&Fi instanceof Fi&&"function"==typeof vo&&vo instanceof vo)&&(_n=!1)}return q.delete(a),q.delete(s),_n}(a,s,h,P,j,q))}(a,s,h,P,Ds,j))}function Cu(a,s,h,P){var j=h.length,q=j,de=!P;if(null==a)return!q;for(a=Kn(a);j--;){var _e=h[j];if(de&&_e[2]?_e[1]!==a[_e[0]]:!(_e[0]in a))return!1}for(;++j<q;){var Le=(_e=h[j])[0],Qe=a[Le],qe=_e[1];if(de&&_e[2]){if(Qe===g&&!(Le in a))return!1}else{var it=new Po;if(P)var _t=P(Qe,qe,Le,a,s,it);if(!(_t===g?Ds(qe,Qe,3,P,it):_t))return!1}}return!0}function lc(a){return!(!yr(a)||function Vu(a){return!!mt&&mt in a}(a))&&(po(a)?on:Aa).test(Xa(a))}function fs(a){return"function"==typeof a?a:null==a?cn:"object"==typeof a?sn(a)?pl(a[0],a[1]):hl(a):tc(a)}function ds(a){if(!ma(a))return as(a);var s=[];for(var h in Kn(a))Ge.call(a,h)&&"constructor"!=h&&s.push(h);return s}function Vs(a,s){return a<s}function fc(a,s){var h=-1,P=Ai(a)?Be(a.length):[];return ga(a,function(j,q,de){P[++h]=s(j,q,de)}),P}function hl(a){var s=Pl(a);return 1==s.length&&s[0][2]?zs(s[0][0],s[0][1]):function(h){return h===a||Cu(h,a,s)}}function pl(a,s){return Fu(a)&&ms(s)?zs(Io(a),s):function(h){var P=Jl(h,a);return P===g&&P===s?Zl(h,a):Ds(s,P,3)}}function _u(a,s,h,P,j){a!==s&&cs(s,function(q,de){if(j||(j=new Po),yr(q))!function sd(a,s,h,P,j,q,de){var _e=Ll(a,h),Le=Ll(s,h),Qe=de.get(Le);if(Qe)ol(a,h,Qe);else{var qe=q?q(_e,Le,h+"",a,s,de):g,it=qe===g;if(it){var _t=sn(Le),Dt=!_t&&_a(Le),en=!_t&&!Dt&&ws(Le);qe=Le,_t||Dt||en?sn(_e)?qe=_e:kr(_e)?qe=Pi(_e):Dt?(it=!1,qe=wc(Le,!0)):en?(it=!1,qe=Tc(Le,!0)):qe=[]:Zs(Le)||Ca(Le)?(qe=_e,Ca(_e)?qe=_f(_e):(!yr(_e)||po(_e))&&(qe=Dc(Le))):it=!1}it&&(de.set(Le,qe),j(qe,Le,P,q,de),de.delete(Le)),ol(a,h,qe)}}(a,s,de,h,_u,P,j);else{var _e=P?P(Ll(a,de),q,de+"",a,s,j):g;_e===g&&(_e=q),ol(a,de,_e)}},Ii)}function dc(a,s){var h=a.length;if(h)return Xo(s+=s<0?h:0,h)?a[s]:g}function wu(a,s,h){s=s.length?Mt(s,function(q){return sn(q)?function(de){return za(de,1===q.length?q[0]:q)}:q}):[cn];var P=-1;return s=Mt(s,Zr(Gt())),function ln(me,Xe){var Be=me.length;for(me.sort(Xe);Be--;)me[Be]=me[Be].value;return me}(fc(a,function(q,de,_e){return{criteria:Mt(s,function(Qe){return Qe(q)}),index:++P,value:q}}),function(q,de){return function js(a,s,h){for(var P=-1,j=a.criteria,q=s.criteria,de=j.length,_e=h.length;++P<de;){var Le=Qt(j[P],q[P]);if(Le)return P>=_e?Le:Le*("desc"==h[P]?-1:1)}return a.index-s.index}(q,de,h)})}function hc(a,s,h){for(var P=-1,j=s.length,q={};++P<j;){var de=s[P],_e=za(a,de);h(_e,de)&&Bs(q,zo(de,a),_e)}return q}function Su(a,s,h,P){var j=P?wi:Ir,q=-1,de=s.length,_e=a;for(a===s&&(s=Pi(s)),h&&(_e=Mt(a,Zr(h)));++q<de;)for(var Le=0,Qe=s[q],qe=h?h(Qe):Qe;(Le=j(_e,qe,Le,P))>-1;)_e!==a&&uo.call(_e,Le,1),uo.call(a,Le,1);return a}function pc(a,s){for(var h=a?s.length:0,P=h-1;h--;){var j=s[h];if(h==P||j!==q){var q=j;Xo(j)?uo.call(a,j,1):Hs(a,j)}}return a}function Tu(a,s){return a+ks(nl()*(s-a+1))}function hs(a,s){var h="";if(!a||s<1||s>vr)return h;do{s%2&&(h+=a),(s=ks(s/2))&&(a+=a)}while(s);return h}function dn(a,s){return Ol(Bc(a,s,cn),a+"")}function gl(a){return Qf(Ts(a))}function fd(a,s){var h=Ts(a);return Ws(h,Uo(s,0,h.length))}function Bs(a,s,h,P){if(!yr(a))return a;for(var j=-1,q=(s=zo(s,a)).length,de=q-1,_e=a;null!=_e&&++j<q;){var Le=Io(s[j]),Qe=h;if("__proto__"===Le||"constructor"===Le||"prototype"===Le)return a;if(j!=de){var qe=_e[Le];(Qe=P?P(qe,Le,_e):g)===g&&(Qe=yr(qe)?qe:Xo(s[j+1])?[]:{})}du(_e,Le,Qe),_e=_e[Le]}return a}var gc=lu?function(a,s){return lu.set(a,s),a}:cn,vc=Ms?function(a,s){return Ms(a,"toString",{configurable:!0,enumerable:!1,value:Bt(s),writable:!0})}:cn;function dd(a){return Ws(Ts(a))}function Ni(a,s,h){var P=-1,j=a.length;s<0&&(s=-s>j?0:j+s),(h=h>j?j:h)<0&&(h+=j),j=s>h?0:h-s>>>0,s>>>=0;for(var q=Be(j);++P<j;)q[P]=a[P+s];return q}function hd(a,s){var h;return ga(a,function(P,j,q){return!(h=s(P,j,q))}),!!h}function Eu(a,s,h){var P=0,j=null==a?P:a.length;if("number"==typeof s&&s==s&&j<=2147483647){for(;P<j;){var q=P+j>>>1,de=a[q];null!==de&&!Di(de)&&(h?de<=s:de<s)?P=q+1:j=q}return j}return vl(a,s,cn,h)}function vl(a,s,h,P){var j=0,q=null==a?0:a.length;if(0===q)return 0;for(var de=(s=h(s))!=s,_e=null===s,Le=Di(s),Qe=s===g;j<q;){var qe=ks((j+q)/2),it=h(a[qe]),_t=it!==g,Dt=null===it,en=it==it,_n=Di(it);if(de)var tn=P||en;else tn=Qe?en&&(P||_t):_e?en&&_t&&(P||!Dt):Le?en&&_t&&!Dt&&(P||!_n):!Dt&&!_n&&(P?it<=s:it<s);tn?j=qe+1:q=qe}return Wr(q,4294967294)}function mc(a,s){for(var h=-1,P=a.length,j=0,q=[];++h<P;){var de=a[h],_e=s?s(de):de;if(!h||!ho(_e,Le)){var Le=_e;q[j++]=0===de?0:de}}return q}function yc(a){return"number"==typeof a?a:Di(a)?NaN:+a}function pr(a){if("string"==typeof a)return a;if(sn(a))return Mt(a,pr)+"";if(Di(a))return rl?rl.call(a):"";var s=a+"";return"0"==s&&1/a==-nn?"-0":s}function _r(a,s,h){var P=-1,j=fr,q=a.length,de=!0,_e=[],Le=_e;if(h)de=!1,j=je;else if(q>=200){var Qe=s?null:xd(a);if(Qe)return is(Qe);de=!1,j=Ra,Le=new ja}else Le=s?[]:_e;e:for(;++P<q;){var qe=a[P],it=s?s(qe):qe;if(qe=h||0!==qe?qe:0,de&&it==it){for(var _t=Le.length;_t--;)if(Le[_t]===it)continue e;s&&Le.push(it),_e.push(qe)}else j(Le,it,h)||(Le!==_e&&Le.push(it),_e.push(qe))}return _e}function Hs(a,s){return null==(a=Hc(a,s=zo(s,a)))||delete a[Io(wr(s))]}function xc(a,s,h,P){return Bs(a,s,h(za(a,s)),P)}function Pu(a,s,h,P){for(var j=a.length,q=P?j:-1;(P?q--:++q<j)&&s(a[q],q,a););return h?Ni(a,P?0:q,P?q+1:j):Ni(a,P?q+1:0,P?j:q)}function bc(a,s){var h=a;return h instanceof En&&(h=h.value()),Gr(s,function(P,j){return j.func.apply(j.thisArg,kt([P],j.args))},h)}function ml(a,s,h){var P=a.length;if(P<2)return P?_r(a[0]):[];for(var j=-1,q=Be(P);++j<P;)for(var de=a[j],_e=-1;++_e<P;)_e!=j&&(q[j]=pa(q[j]||de,a[_e],s,h));return _r(zn(q,1),s,h)}function yl(a,s,h){for(var P=-1,j=a.length,q=s.length,de={};++P<j;)h(de,a[P],P<q?s[P]:g);return de}function Au(a){return kr(a)?a:[]}function Iu(a){return"function"==typeof a?a:cn}function zo(a,s){return sn(a)?a:Fu(a,s)?[a]:Ya(Wn(a))}var Cc=dn;function Go(a,s,h){var P=a.length;return h=h===g?P:h,!s&&h>=P?a:Ni(a,s,h)}var _c=rc||function(a){return l.clearTimeout(a)};function wc(a,s){if(s)return a.slice();var h=a.length,P=Dr?Dr(h):new a.constructor(h);return a.copy(P),P}function xl(a){var s=new a.constructor(a.byteLength);return new Bn(s).set(new Bn(a)),s}function Tc(a,s){var h=s?xl(a.buffer):a.buffer;return new a.constructor(h,a.byteOffset,a.length)}function Qt(a,s){if(a!==s){var h=a!==g,P=null===a,j=a==a,q=Di(a),de=s!==g,_e=null===s,Le=s==s,Qe=Di(s);if(!_e&&!Qe&&!q&&a>s||q&&de&&Le&&!_e&&!Qe||P&&de&&Le||!h&&Le||!j)return 1;if(!P&&!q&&!Qe&&a<s||Qe&&h&&j&&!P&&!q||_e&&h&&j||!de&&j||!Le)return-1}return 0}function Wi(a,s,h,P){for(var j=-1,q=a.length,de=h.length,_e=-1,Le=s.length,Qe=mr(q-de,0),qe=Be(Le+Qe),it=!P;++_e<Le;)qe[_e]=s[_e];for(;++j<de;)(it||j<q)&&(qe[h[j]]=a[j]);for(;Qe--;)qe[_e++]=a[j++];return qe}function Ec(a,s,h,P){for(var j=-1,q=a.length,de=-1,_e=h.length,Le=-1,Qe=s.length,qe=mr(q-_e,0),it=Be(qe+Qe),_t=!P;++j<qe;)it[j]=a[j];for(var Dt=j;++Le<Qe;)it[Dt+Le]=s[Le];for(;++de<_e;)(_t||j<q)&&(it[Dt+h[de]]=a[j++]);return it}function Pi(a,s){var h=-1,P=a.length;for(s||(s=Be(P));++h<P;)s[h]=a[h];return s}function fo(a,s,h,P){var j=!h;h||(h={});for(var q=-1,de=s.length;++q<de;){var _e=s[q],Le=P?P(h[_e],a[_e],_e,h,a):g;Le===g&&(Le=a[_e]),j?Ei(h,_e,Le):du(h,_e,Le)}return h}function Mu(a,s){return function(h,P){var j=sn(h)?$e:zp,q=s?s():{};return j(h,a,Gt(P,2),q)}}function Ga(a){return dn(function(s,h){var P=-1,j=h.length,q=j>1?h[j-1]:g,de=j>2?h[2]:g;for(q=a.length>3&&"function"==typeof q?(j--,q):g,de&&gi(h[0],h[1],de)&&(q=j<3?g:q,j=1),s=Kn(s);++P<j;){var _e=h[P];_e&&a(s,_e,P,q)}return s})}function Pc(a,s){return function(h,P){if(null==h)return h;if(!Ai(h))return a(h,P);for(var j=h.length,q=s?j:-1,de=Kn(h);(s?q--:++q<j)&&!1!==P(de[q],q,de););return h}}function Ac(a){return function(s,h,P){for(var j=-1,q=Kn(s),de=P(s),_e=de.length;_e--;){var Le=de[a?_e:++j];if(!1===h(q[Le],Le,q))break}return s}}function Ic(a){return function(s){var h=oo(s=Wn(s))?dr(s):g,P=h?h[0]:s.charAt(0),j=h?Go(h,1).join(""):s.slice(1);return P[a]()+j}}function ps(a){return function(s){return Gr(Hn(c(s).replace(sa,"")),a,"")}}function Wo(a){return function(){var s=arguments;switch(s.length){case 0:return new a;case 1:return new a(s[0]);case 2:return new a(s[0],s[1]);case 3:return new a(s[0],s[1],s[2]);case 4:return new a(s[0],s[1],s[2],s[3]);case 5:return new a(s[0],s[1],s[2],s[3],s[4]);case 6:return new a(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new a(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var h=Ba(a.prototype),P=a.apply(h,s);return yr(P)?P:h}}function kc(a){return function(s,h,P){var j=Kn(s);if(!Ai(s)){var q=Gt(h,3);s=Yr(s),h=function(_e){return q(j[_e],_e,j)}}var de=a(s,h,P);return de>-1?j[q?s[de]:de]:g}}function Cl(a){return Yo(function(s){var h=s.length,P=h,j=Gi.prototype.thru;for(a&&s.reverse();P--;){var q=s[P];if("function"!=typeof q)throw new J(A);if(j&&!de&&"wrapper"==Ru(q))var de=new Gi([],!0)}for(P=de?P:h;++P<h;){var _e=Ru(q=s[P]),Le="wrapper"==_e?El(q):g;de=Le&&$i(Le[0])&&424==Le[1]&&!Le[4].length&&1==Le[9]?de[Ru(Le[0])].apply(de,Le[3]):1==q.length&&$i(q)?de[_e]():de.thru(q)}return function(){var Qe=arguments,qe=Qe[0];if(de&&1==Qe.length&&sn(qe))return de.plant(qe).value();for(var it=0,_t=h?s[it].apply(this,Qe):qe;++it<h;)_t=s[it].call(this,_t);return _t}})}function Wa(a,s,h,P,j,q,de,_e,Le,Qe){var qe=s&C,it=1&s,_t=2&s,Dt=24&s,en=512&s,_n=_t?g:Wo(a);return function tn(){for(var Ln=arguments.length,Fn=Be(Ln),go=Ln;go--;)Fn[go]=arguments[go];if(Dt)var Fi=vs(tn),vo=nc(Fn,Fi);if(P&&(Fn=Wi(Fn,P,j,Dt)),q&&(Fn=Ec(Fn,q,de,Dt)),Ln-=vo,Dt&&Ln<Qe){var jr=wo(Fn,Fi);return Ou(a,s,Wa,tn.placeholder,h,Fn,jr,_e,Le,Qe-Ln)}var Zo=it?h:this,Za=_t?Zo[a]:a;return Ln=Fn.length,_e?Fn=kd(Fn,_e):en&&Ln>1&&Fn.reverse(),qe&&Le<Ln&&(Fn.length=Le),this&&this!==l&&this instanceof tn&&(Za=_n||Wo(Za)),Za.apply(Zo,Fn)}}function ku(a,s){return function(h,P){return function cl(a,s,h,P){return lo(a,function(j,q,de){s(P,h(j),q,de)}),P}(h,a,s(P),{})}}function Lu(a,s){return function(h,P){var j;if(h===g&&P===g)return s;if(h!==g&&(j=h),P!==g){if(j===g)return P;"string"==typeof h||"string"==typeof P?(h=pr(h),P=pr(P)):(h=yc(h),P=yc(P)),j=a(h,P)}return j}}function _l(a){return Yo(function(s){return s=Mt(s,Zr(Gt())),dn(function(h){var P=this;return a(s,function(j){return Re(j,P,h)})})})}function Us(a,s){var h=(s=s===g?" ":pr(s)).length;if(h<2)return h?hs(s,a):s;var P=hs(s,Na(a/Mr(s)));return oo(s)?Go(dr(P),0,a).join(""):P.slice(0,a)}function Lc(a){return function(s,h,P){return P&&"number"!=typeof P&&gi(s,h,P)&&(h=P=g),s=Ko(s),h===g?(h=s,s=0):h=Ko(h),function cd(a,s,h,P){for(var j=-1,q=mr(Na((s-a)/(h||1)),0),de=Be(q);q--;)de[P?q:++j]=a,a+=h;return de}(s,h,P=P===g?s<h?1:-1:Ko(P),a)}}function gs(a){return function(s,h){return"string"==typeof s&&"string"==typeof h||(s=Yi(s),h=Yi(h)),a(s,h)}}function Ou(a,s,h,P,j,q,de,_e,Le,Qe){var qe=8&s;s|=qe?32:64,4&(s&=~(qe?64:32))||(s&=-4);var _n=[a,s,j,qe?q:g,qe?de:g,qe?g:q,qe?g:de,_e,Le,Qe],tn=h.apply(g,_n);return $i(a)&&jc(tn,_n),tn.placeholder=P,Uc(tn,a,s)}function wl(a){var s=hr[a];return function(h,P){if(h=Yi(h),(P=null==P?0:Wr(vn(P),292))&&tl(h)){var j=(Wn(h)+"e").split("e");return+((j=(Wn(s(j[0]+"e"+(+j[1]+P)))+"e").split("e"))[0]+"e"+(+j[1]-P))}return s(h)}}var xd=Fa&&1/is(new Fa([,-0]))[1]==nn?function(a){return new Fa(a)}:Hr;function Oc(a){return function(s){var h=ri(s);return h==un?Ui(s):h==Ke?function jt(me){var Xe=-1,Be=Array(me.size);return me.forEach(function(wt){Be[++Xe]=[wt,wt]}),Be}(s):function nu(me,Xe){return Mt(Xe,function(Be){return[Be,me[Be]]})}(s,a(s))}}function $o(a,s,h,P,j,q,de,_e){var Le=2&s;if(!Le&&"function"!=typeof a)throw new J(A);var Qe=P?P.length:0;if(Qe||(s&=-97,P=j=g),de=de===g?de:mr(vn(de),0),_e=_e===g?_e:vn(_e),Qe-=j?j.length:0,64&s){var qe=P,it=j;P=j=g}var _t=Le?g:El(a),Dt=[a,s,h,P,j,qe,it,q,de,_e];if(_t&&function Ad(a,s){var h=a[1],P=s[1],j=h|P;if(!(j<131||(P==C&&8==h||P==C&&256==h&&a[7].length<=s[8]||384==P&&s[7].length<=s[8]&&8==h)))return a;1&P&&(a[2]=s[2],j|=1&h?0:4);var _e=s[3];if(_e){var Le=a[3];a[3]=Le?Wi(Le,_e,s[4]):_e,a[4]=Le?wo(a[3],H):s[4]}(_e=s[5])&&(a[5]=(Le=a[5])?Ec(Le,_e,s[6]):_e,a[6]=Le?wo(a[5],H):s[6]),(_e=s[7])&&(a[7]=_e),P&C&&(a[8]=null==a[8]?s[8]:Wr(a[8],s[8])),null==a[9]&&(a[9]=s[9]),a[0]=s[0],a[1]=j}(Dt,_t),a=Dt[0],s=Dt[1],h=Dt[2],P=Dt[3],j=Dt[4],!(_e=Dt[9]=Dt[9]===g?Le?0:a.length:mr(Dt[9]-Qe,0))&&24&s&&(s&=-25),s&&1!=s)en=8==s||16==s?function Mc(a,s,h){var P=Wo(a);return function j(){for(var q=arguments.length,de=Be(q),_e=q,Le=vs(j);_e--;)de[_e]=arguments[_e];var Qe=q<3&&de[0]!==Le&&de[q-1]!==Le?[]:wo(de,Le);return(q-=Qe.length)<h?Ou(a,s,Wa,j.placeholder,g,de,Qe,g,g,h-q):Re(this&&this!==l&&this instanceof j?P:a,this,de)}}(a,s,_e):32!=s&&33!=s||j.length?Wa.apply(g,Dt):function yd(a,s,h,P){var j=1&s,q=Wo(a);return function de(){for(var _e=-1,Le=arguments.length,Qe=-1,qe=P.length,it=Be(qe+Le),_t=this&&this!==l&&this instanceof de?q:a;++Qe<qe;)it[Qe]=P[Qe];for(;Le--;)it[Qe++]=arguments[++_e];return Re(_t,j?h:this,it)}}(a,s,h,P);else var en=function md(a,s,h){var P=1&s,j=Wo(a);return function q(){return(this&&this!==l&&this instanceof q?j:a).apply(P?h:this,arguments)}}(a,s,h);return Uc((_t?gc:jc)(en,Dt),a,s)}function Rc(a,s,h,P){return a===g||ho(a,Ye[h])&&!Ge.call(P,h)?s:a}function Ao(a,s,h,P,j,q){return yr(a)&&yr(s)&&(q.set(s,a),_u(a,s,g,Ao,q),q.delete(s)),a}function bd(a){return Zs(a)?g:a}function Nc(a,s,h,P,j,q){var de=1&h,_e=a.length,Le=s.length;if(_e!=Le&&!(de&&Le>_e))return!1;var Qe=q.get(a),qe=q.get(s);if(Qe&&qe)return Qe==s&&qe==a;var it=-1,_t=!0,Dt=2&h?new ja:g;for(q.set(a,s),q.set(s,a);++it<_e;){var en=a[it],_n=s[it];if(P)var tn=de?P(_n,en,it,s,a,q):P(en,_n,it,a,s,q);if(tn!==g){if(tn)continue;_t=!1;break}if(Dt){if(!Xn(s,function(Ln,Fn){if(!Ra(Dt,Fn)&&(en===Ln||j(en,Ln,h,P,q)))return Dt.push(Fn)})){_t=!1;break}}else if(en!==_n&&!j(en,_n,h,P,q)){_t=!1;break}}return q.delete(a),q.delete(s),_t}function Yo(a){return Ol(Bc(a,g,Rl),a+"")}function Sl(a){return al(a,Yr,va)}function Tl(a){return al(a,Ii,Al)}var El=lu?function(a){return lu.get(a)}:Hr;function Ru(a){for(var s=a.name+"",h=us[s],P=Ge.call(us,s)?h.length:0;P--;){var j=h[P],q=j.func;if(null==q||q==a)return j.name}return s}function vs(a){return(Ge.call(Q,"placeholder")?Q:a).placeholder}function Gt(){var a=Q.iteratee||hn;return a=a===hn?fs:a,arguments.length?a(arguments[0],arguments[1]):a}function Nu(a,s){var h=a.__data__;return function Vc(a){var s=typeof a;return"string"==s||"number"==s||"symbol"==s||"boolean"==s?"__proto__"!==a:null===a}(s)?h["string"==typeof s?"string":"hash"]:h.map}function Pl(a){for(var s=Yr(a),h=s.length;h--;){var P=s[h],j=a[P];s[h]=[P,j,ms(j)]}return s}function $a(a,s){var h=function qu(me,Xe){return null==me?g:me[Xe]}(a,s);return lc(h)?h:g}var va=su?function(a){return null==a?[]:(a=Kn(a),qn(su(a),function(s){return Vo.call(a,s)}))}:xr,Al=su?function(a){for(var s=[];a;)kt(s,va(a)),a=Fr(a);return s}:xr,ri=$r;function Ml(a,s,h){for(var P=-1,j=(s=zo(s,a)).length,q=!1;++P<j;){var de=Io(s[P]);if(!(q=null!=a&&h(a,de)))break;a=a[de]}return q||++P!=j?q:!!(j=null==a?0:a.length)&&ii(j)&&Xo(de,j)&&(sn(a)||Ca(a))}function Dc(a){return"function"!=typeof a.constructor||ma(a)?{}:Ba(Fr(a))}function Ed(a){return sn(a)||Ca(a)||!!(ni&&a&&a[ni])}function Xo(a,s){var h=typeof a;return!!(s=null==s?vr:s)&&("number"==h||"symbol"!=h&&qa.test(a))&&a>-1&&a%1==0&&a<s}function gi(a,s,h){if(!yr(h))return!1;var P=typeof s;return!!("number"==P?Ai(h)&&Xo(s,h.length):"string"==P&&s in h)&&ho(h[s],a)}function Fu(a,s){if(sn(a))return!1;var h=typeof a;return!("number"!=h&&"symbol"!=h&&"boolean"!=h&&null!=a&&!Di(a))||zr.test(a)||!xo.test(a)||null!=s&&a in Kn(s)}function $i(a){var s=Ru(a),h=Q[s];if("function"!=typeof h||!(s in En.prototype))return!1;if(a===h)return!0;var P=El(h);return!!P&&a===P[0]}(ha&&ri(new ha(new ArrayBuffer(1)))!=Qn||ss&&ri(new ss)!=un||Da&&ri(Da.resolve())!=re||Fa&&ri(new Fa)!=Ke||Va&&ri(new Va)!=mn)&&(ri=function(a){var s=$r(a),h=s==z?a.constructor:g,P=h?Xa(h):"";if(P)switch(P){case Nf:return Qn;case Df:return un;case Ff:return re;case Vf:return Ke;case Bf:return mn}return s});var kl=Ee?po:tu;function ma(a){var s=a&&a.constructor;return a===("function"==typeof s&&s.prototype||Ye)}function ms(a){return a==a&&!yr(a)}function zs(a,s){return function(h){return null!=h&&h[a]===s&&(s!==g||a in Kn(h))}}function Bc(a,s,h){return s=mr(s===g?a.length-1:s,0),function(){for(var P=arguments,j=-1,q=mr(P.length-s,0),de=Be(q);++j<q;)de[j]=P[s+j];j=-1;for(var _e=Be(s+1);++j<s;)_e[j]=P[j];return _e[s]=h(de),Re(a,this,_e)}}function Hc(a,s){return s.length<2?a:za(a,Ni(s,0,-1))}function kd(a,s){for(var h=a.length,P=Wr(s.length,h),j=Pi(a);P--;){var q=s[P];a[P]=Xo(q,h)?j[q]:g}return a}function Ll(a,s){if(("constructor"!==s||"function"!=typeof a[s])&&"__proto__"!=s)return a[s]}var jc=zc(gc),Gs=da||function(a,s){return l.setTimeout(a,s)},Ol=zc(vc);function Uc(a,s,h){var P=s+"";return Ol(a,function Fc(a,s){var h=s.length;if(!h)return a;var P=h-1;return s[P]=(h>1?"& ":"")+s[P],s=s.join(h>2?", ":" "),a.replace(ko,"{\n/* [wrapped with "+s+"] */\n")}(P,function Ld(a,s){return St(Yn,function(h){var P="_."+h[0];s&h[1]&&!fr(a,P)&&a.push(P)}),a.sort()}(function Il(a){var s=a.match(Ea);return s?s[1].split(si):[]}(P),h)))}function zc(a){var s=0,h=0;return function(){var P=oc(),j=16-(P-h);if(h=P,j>0){if(++s>=800)return arguments[0]}else s=0;return a.apply(g,arguments)}}function Ws(a,s){var h=-1,P=a.length,j=P-1;for(s=s===g?P:s;++h<s;){var q=Tu(h,j),de=a[q];a[q]=a[h],a[h]=de}return a.length=s,a}var Ya=function Pd(a){var s=$u(a,function(P){return 500===h.size&&h.clear(),P}),h=s.cache;return s}(function(a){var s=[];return 46===a.charCodeAt(0)&&s.push(""),a.replace(Mi,function(h,P,j,q){s.push(j?q.replace(Jt,"$1"):P||h)}),s});function Io(a){if("string"==typeof a||Di(a))return a;var s=a+"";return"0"==s&&1/a==-nn?"-0":s}function Xa(a){if(null!=a){try{return Ze.call(a)}catch(s){}try{return a+""}catch(s){}}return""}function Gc(a){if(a instanceof En)return a.clone();var s=new Gi(a.__wrapped__,a.__chain__);return s.__actions__=Pi(a.__actions__),s.__index__=a.__index__,s.__values__=a.__values__,s}var Dd=dn(function(a,s){return kr(a)?pa(a,zn(s,1,kr,!0)):[]}),Fd=dn(function(a,s){var h=wr(s);return kr(h)&&(h=g),kr(a)?pa(a,zn(s,1,kr,!0),Gt(h,2)):[]}),Vd=dn(function(a,s){var h=wr(s);return kr(h)&&(h=g),kr(a)?pa(a,zn(s,1,kr,!0),g,h):[]});function Wc(a,s,h){var P=null==a?0:a.length;if(!P)return-1;var j=null==h?0:vn(h);return j<0&&(j=mr(P+j,0)),ji(a,Gt(s,3),j)}function $c(a,s,h){var P=null==a?0:a.length;if(!P)return-1;var j=P-1;return h!==g&&(j=vn(h),j=h<0?mr(P+j,0):Wr(j,P-1)),ji(a,Gt(s,3),j,!0)}function Rl(a){return null!=a&&a.length?zn(a,1):[]}function Yc(a){return a&&a.length?a[0]:g}var Xd=dn(function(a){var s=Mt(a,Au);return s.length&&s[0]===a[0]?bu(s):[]}),Kd=dn(function(a){var s=wr(a),h=Mt(a,Au);return s===wr(h)?s=g:h.pop(),h.length&&h[0]===a[0]?bu(h,Gt(s,2)):[]}),Jd=dn(function(a){var s=wr(a),h=Mt(a,Au);return(s="function"==typeof s?s:g)&&h.pop(),h.length&&h[0]===a[0]?bu(h,g,s):[]});function wr(a){var s=null==a?0:a.length;return s?a[s-1]:g}var Qd=dn(Jc);function Jc(a,s){return a&&a.length&&s&&s.length?Su(a,s):a}var th=Yo(function(a,s){var h=null==a?0:a.length,P=pu(a,s);return pc(a,Mt(s,function(j){return Xo(j,h)?+j:j}).sort(Qt)),P});function Dl(a){return null==a?a:To.call(a)}var ft=dn(function(a){return _r(zn(a,1,kr,!0))}),Fl=dn(function(a){var s=wr(a);return kr(s)&&(s=g),_r(zn(a,1,kr,!0),Gt(s,2))}),mh=dn(function(a){var s=wr(a);return s="function"==typeof s?s:g,_r(zn(a,1,kr,!0),g,s)});function Zc(a){if(!a||!a.length)return[];var s=0;return a=qn(a,function(h){if(kr(h))return s=mr(h.length,s),!0}),rs(s,function(h){return Mt(a,ca(h))})}function xh(a,s){if(!a||!a.length)return[];var h=Zc(a);return null==s?h:Mt(h,function(P){return Re(s,g,P)})}var Qc=dn(function(a,s){return kr(a)?pa(a,s):[]}),$s=dn(function(a){return ml(qn(a,kr))}),qc=dn(function(a){var s=wr(a);return kr(s)&&(s=g),ml(qn(a,kr),Gt(s,2))}),ys=dn(function(a){var s=wr(a);return s="function"==typeof s?s:g,ml(qn(a,kr),g,s)}),Ka=dn(Zc),Gn=dn(function(a){var s=a.length,h=s>1?a[s-1]:g;return h="function"==typeof h?(a.pop(),h):g,xh(a,h)});function Vl(a){var s=Q(a);return s.__chain__=!0,s}function Ys(a,s){return s(a)}var xa=Yo(function(a){var s=a.length,h=s?a[0]:0,P=this.__wrapped__,j=function(q){return pu(q,a)};return!(s>1||this.__actions__.length)&&P instanceof En&&Xo(h)?((P=P.slice(h,+h+(s?1:0))).__actions__.push({func:Ys,args:[j],thisArg:g}),new Gi(P,this.__chain__).thru(function(q){return s&&!q.length&&q.push(g),q})):this.thru(j)}),nf=Mu(function(a,s,h){Ge.call(a,h)?++a[h]:Ei(a,h,1)}),rf=kc(Wc),Bl=kc($c);function Hl(a,s){return(sn(a)?St:ga)(a,Gt(s,3))}function of(a,s){return(sn(a)?Yt:ac)(a,Gt(s,3))}var Hu=Mu(function(a,s,h){Ge.call(a,h)?a[h].push(s):Ei(a,h,[s])}),Ch=dn(function(a,s,h){var P=-1,j="function"==typeof s,q=Ai(a)?Be(a.length):[];return ga(a,function(de){q[++P]=j?Re(s,de,h):co(de,s,h)}),q}),af=Mu(function(a,s,h){Ei(a,h,s)});function jl(a,s){return(sn(a)?Mt:fc)(a,Gt(s,3))}var sf=Mu(function(a,s,h){a[h?0:1].push(s)},function(){return[[],[]]}),Cs=dn(function(a,s){if(null==a)return[];var h=s.length;return h>1&&gi(a,s[0],s[1])?s=[]:h>2&&gi(s[0],s[1],s[2])&&(s=[s[0]]),wu(a,zn(s,1),[])}),Ut=el||function(){return l.Date.now()};function Ks(a,s,h){return s=h?g:s,$o(a,C,g,g,g,g,s=a&&null==s?a.length:s)}function Js(a,s){var h;if("function"!=typeof s)throw new J(A);return a=vn(a),function(){return--a>0&&(h=s.apply(this,arguments)),a<=1&&(s=g),h}}var zl=dn(function(a,s,h){var P=1;if(h.length){var j=wo(h,vs(zl));P|=32}return $o(a,P,s,h,j)}),lf=dn(function(a,s,h){var P=3;if(h.length){var j=wo(h,vs(lf));P|=32}return $o(s,P,a,h,j)});function ff(a,s,h){var P,j,q,de,_e,Le,Qe=0,qe=!1,it=!1,_t=!0;if("function"!=typeof a)throw new J(A);function Dt(jr){var Zo=P,Za=j;return P=j=g,Qe=jr,de=a.apply(Za,Zo)}function en(jr){return Qe=jr,_e=Gs(Ln,s),qe?Dt(jr):de}function tn(jr){var Zo=jr-Le;return Le===g||Zo>=s||Zo<0||it&&jr-Qe>=q}function Ln(){var jr=Ut();if(tn(jr))return Fn(jr);_e=Gs(Ln,function _n(jr){var eg=s-(jr-Le);return it?Wr(eg,q-(jr-Qe)):eg}(jr))}function Fn(jr){return _e=g,_t&&P?Dt(jr):(P=j=g,de)}function vo(){var jr=Ut(),Zo=tn(jr);if(P=arguments,j=this,Le=jr,Zo){if(_e===g)return en(Le);if(it)return _c(_e),_e=Gs(Ln,s),Dt(Le)}return _e===g&&(_e=Gs(Ln,s)),de}return s=Yi(s)||0,yr(h)&&(qe=!!h.leading,q=(it="maxWait"in h)?mr(Yi(h.maxWait)||0,s):q,_t="trailing"in h?!!h.trailing:_t),vo.cancel=function go(){_e!==g&&_c(_e),Qe=0,P=Le=j=_e=g},vo.flush=function Fi(){return _e===g?de:Fn(Ut())},vo}var Sh=dn(function(a,s){return An(a,1,s)}),Th=dn(function(a,s,h){return An(a,Yi(s)||0,h)});function $u(a,s){if("function"!=typeof a||null!=s&&"function"!=typeof s)throw new J(A);var h=function(){var P=arguments,j=s?s.apply(this,P):P[0],q=h.cache;if(q.has(j))return q.get(j);var de=a.apply(this,P);return h.cache=q.set(j,de)||q,de};return h.cache=new($u.Cache||Ho),h}function Yu(a){if("function"!=typeof a)throw new J(A);return function(){var s=arguments;switch(s.length){case 0:return!a.call(this);case 1:return!a.call(this,s[0]);case 2:return!a.call(this,s[0],s[1]);case 3:return!a.call(this,s[0],s[1],s[2])}return!a.apply(this,s)}}$u.Cache=Ho;var Ah=Cc(function(a,s){var h=(s=1==s.length&&sn(s[0])?Mt(s[0],Zr(Gt())):Mt(zn(s,1),Zr(Gt()))).length;return dn(function(P){for(var j=-1,q=Wr(P.length,h);++j<q;)P[j]=s[j].call(this,P[j]);return Re(a,this,P)})}),Gl=dn(function(a,s){var h=wo(s,vs(Gl));return $o(a,32,g,s,h)}),df=dn(function(a,s){var h=wo(s,vs(df));return $o(a,64,g,s,h)}),Ih=Yo(function(a,s){return $o(a,256,g,g,g,s)});function ho(a,s){return a===s||a!=a&&s!=s}var Wl=gs(sl),Xu=gs(function(a,s){return a>=s}),Ca=fl(function(){return arguments}())?fl:function(a){return Sr(a)&&Ge.call(a,"callee")&&!Vo.call(a,"callee")},sn=Be.isArray,Vh=Y?Zr(Y):function sc(a){return Sr(a)&&$r(a)==gn};function Ai(a){return null!=a&&ii(a.length)&&!po(a)}function kr(a){return Sr(a)&&Ai(a)}var _a=ic||tu,vf=le?Zr(le):function uc(a){return Sr(a)&&$r(a)==Rt};function $l(a){if(!Sr(a))return!1;var s=$r(a);return s==kn||"[object DOMException]"==s||"string"==typeof a.message&&"string"==typeof a.name&&!Zs(a)}function po(a){if(!yr(a))return!1;var s=$r(a);return s==or||s==mi||"[object AsyncFunction]"==s||"[object Proxy]"==s}function _s(a){return"number"==typeof a&&a==vn(a)}function ii(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=vr}function yr(a){var s=typeof a;return null!=a&&("object"==s||"function"==s)}function Sr(a){return null!=a&&"object"==typeof a}var Yl=ue?Zr(ue):function id(a){return Sr(a)&&ri(a)==un};function yf(a){return"number"==typeof a||Sr(a)&&$r(a)==Kt}function Zs(a){if(!Sr(a)||$r(a)!=z)return!1;var s=Fr(a);if(null===s)return!0;var h=Ge.call(s,"constructor")&&s.constructor;return"function"==typeof h&&h instanceof h&&Ze.call(h)==Tt}var wa=Ie?Zr(Ie):function od(a){return Sr(a)&&$r(a)==We},xf=Ve?Zr(Ve):function cc(a){return Sr(a)&&ri(a)==Ke};function Ku(a){return"string"==typeof a||!sn(a)&&Sr(a)&&$r(a)==bt}function Di(a){return"symbol"==typeof a||Sr(a)&&$r(a)==Nt}var ws=rt?Zr(rt):function ad(a){return Sr(a)&&ii(a.length)&&!!Vn[$r(a)]},Xl=gs(Vs),bf=gs(function(a,s){return a<=s});function Ja(a){if(!a)return[];if(Ai(a))return Ku(a)?dr(a):Pi(a);if(Is&&a[Is])return function au(me){for(var Xe,Be=[];!(Xe=me.next()).done;)Be.push(Xe.value);return Be}(a[Is]());var s=ri(a);return(s==un?Ui:s==Ke?is:Ts)(a)}function Ko(a){return a?(a=Yi(a))===nn||a===-nn?17976931348623157e292*(a<0?-1:1):a==a?a:0:0===a?a:0}function vn(a){var s=Ko(a),h=s%1;return s==s?h?s-h:s:0}function Cf(a){return a?Uo(vn(a),0,wn):0}function Yi(a){if("number"==typeof a)return a;if(Di(a))return NaN;if(yr(a)){var s="function"==typeof a.valueOf?a.valueOf():a;a=yr(s)?s+"":s}if("string"!=typeof a)return 0===a?a:+a;a=ru(a);var h=Pa.test(a);return h||Ia.test(a)?ge(a.slice(2),h?2:8):ki.test(a)?NaN:+a}function _f(a){return fo(a,Ii(a))}function Wn(a){return null==a?"":pr(a)}var Ju=Ga(function(a,s){if(ma(s)||Ai(s))fo(s,Yr(s),a);else for(var h in s)Ge.call(s,h)&&du(a,h,s[h])}),ep=Ga(function(a,s){fo(s,Ii(s),a)}),Ss=Ga(function(a,s,h,P){fo(s,Ii(s),a,P)}),Br=Ga(function(a,s,h,P){fo(s,Yr(s),a,P)}),tp=Yo(pu),rp=dn(function(a,s){a=Kn(a);var h=-1,P=s.length,j=P>2?s[2]:g;for(j&&gi(s[0],s[1],j)&&(P=1);++h<P;)for(var q=s[h],de=Ii(q),_e=-1,Le=de.length;++_e<Le;){var Qe=de[_e],qe=a[Qe];(qe===g||ho(qe,Ye[Qe])&&!Ge.call(a,Qe))&&(a[Qe]=q[Qe])}return a}),ip=dn(function(a){return a.push(g,Ao),Re(Sf,g,a)});function Jl(a,s,h){var P=null==a?g:za(a,s);return P===g?h:P}function Zl(a,s){return null!=a&&Ml(a,s,ul)}var dp=ku(function(a,s,h){null!=s&&"function"!=typeof s.toString&&(s=vt.call(s)),a[s]=h},Bt(cn)),hp=ku(function(a,s,h){null!=s&&"function"!=typeof s.toString&&(s=vt.call(s)),Ge.call(a,s)?a[s].push(h):a[s]=[h]},Gt),pp=dn(co);function Yr(a){return Ai(a)?fu(a):ds(a)}function Ii(a){return Ai(a)?fu(a,!0):function Fs(a){if(!yr(a))return function Id(a){var s=[];if(null!=a)for(var h in Kn(a))s.push(h);return s}(a);var s=ma(a),h=[];for(var P in a)"constructor"==P&&(s||!Ge.call(a,P))||h.push(P);return h}(a)}var mp=Ga(function(a,s,h){_u(a,s,h)}),Sf=Ga(function(a,s,h,P){_u(a,s,h,P)}),yp=Yo(function(a,s){var h={};if(null==a)return h;var P=!1;s=Mt(s,function(q){return q=zo(q,a),P||(P=q.length>1),q}),fo(a,Tl(a),h),P&&(h=Vr(h,7,bd));for(var j=s.length;j--;)Hs(h,s[j]);return h}),bp=Yo(function(a,s){return null==a?{}:function ud(a,s){return hc(a,s,function(h,P){return Zl(a,P)})}(a,s)});function Ql(a,s){if(null==a)return{};var h=Mt(Tl(a),function(P){return[P]});return s=Gt(s),hc(a,h,function(P,j){return s(P,j[0])})}var Ef=Oc(Yr),Pf=Oc(Ii);function Ts(a){return null==a?[]:As(a,Yr(a))}var o=ps(function(a,s,h){return s=s.toLowerCase(),a+(h?u(s):s)});function u(a){return Lt(Wn(a).toLowerCase())}function c(a){return(a=Wn(a))&&a.replace(es,io).replace(ka,"")}var I=ps(function(a,s,h){return a+(h?"-":"")+s.toLowerCase()}),b=ps(function(a,s,h){return a+(h?" ":"")+s.toLowerCase()}),G=Ic("toLowerCase"),L=ps(function(a,s,h){return a+(h?"_":"")+s.toLowerCase()}),K=ps(function(a,s,h){return a+(h?" ":"")+Lt(s)}),xt=ps(function(a,s,h){return a+(h?" ":"")+s.toUpperCase()}),Lt=Ic("toUpperCase");function Hn(a,s,h){return a=Wn(a),(s=h?g:s)===g?function Qr(me){return fi.test(me)}(a)?function os(me){return me.match(Ar)||[]}(a):function ti(me){return me.match(Lo)||[]}(a):a.match(s)||[]}var In=dn(function(a,s){try{return Re(a,g,s)}catch(h){return $l(h)?h:new Zt(h)}}),Zn=Yo(function(a,s){return St(s,function(h){h=Io(h),Ei(a,h,zl(a[h],a))}),a});function Bt(a){return function(){return a}}var xn=Cl(),$n=Cl(!0);function cn(a){return a}function hn(a){return fs("function"==typeof a?a:Vr(a,1))}var an=dn(function(a,s){return function(h){return co(h,a,s)}}),Cn=dn(function(a,s){return function(h){return co(a,h,s)}});function Ft(a,s,h){var P=Yr(s),j=xu(s,P);null==h&&(!yr(s)||!j.length&&P.length)&&(h=s,s=a,a=this,j=xu(s,Yr(s)));var q=!(yr(h)&&"chain"in h&&!h.chain),de=po(a);return St(j,function(_e){var Le=s[_e];a[_e]=Le,de&&(a.prototype[_e]=function(){var Qe=this.__chain__;if(q||Qe){var qe=a(this.__wrapped__),it=qe.__actions__=Pi(this.__actions__);return it.push({func:Le,args:arguments,thisArg:a}),qe.__chain__=Qe,qe}return Le.apply(a,kt([this.value()],arguments))})}),a}function Hr(){}var Jo=_l(Mt),ql=_l(Pt),ec=_l(Xn);function tc(a){return Fu(a)?ca(Io(a)):function ld(a){return function(s){return za(s,a)}}(a)}var eu=Lc(),ei=Lc(!0);function xr(){return[]}function tu(){return!1}var Lp=Lu(function(a,s){return a+s},0),Af=wl("ceil"),If=Lu(function(a,s){return a/s},1),Mf=wl("floor"),Sa=Lu(function(a,s){return a*s},1),tg=wl("round"),ng=Lu(function(a,s){return a-s},0);return Q.after=function Gu(a,s){if("function"!=typeof s)throw new J(A);return a=vn(a),function(){if(--a<1)return s.apply(this,arguments)}},Q.ary=Ks,Q.assign=Ju,Q.assignIn=ep,Q.assignInWith=Ss,Q.assignWith=Br,Q.at=tp,Q.before=Js,Q.bind=zl,Q.bindAll=Zn,Q.bindKey=lf,Q.castArray=function Rh(){if(!arguments.length)return[];var a=arguments[0];return sn(a)?a:[a]},Q.chain=Vl,Q.chunk=function Od(a,s,h){s=(h?gi(a,s,h):s===g)?1:mr(vn(s),0);var P=null==a?0:a.length;if(!P||s<1)return[];for(var j=0,q=0,de=Be(Na(P/s));j<P;)de[q++]=Ni(a,j,j+=s);return de},Q.compact=function Rd(a){for(var s=-1,h=null==a?0:a.length,P=0,j=[];++s<h;){var q=a[s];q&&(j[P++]=q)}return j},Q.concat=function Nd(){var a=arguments.length;if(!a)return[];for(var s=Be(a-1),h=arguments[0],P=a;P--;)s[P-1]=arguments[P];return kt(sn(h)?Pi(h):[h],zn(s,1))},Q.cond=function Vt(a){var s=null==a?0:a.length,h=Gt();return a=s?Mt(a,function(P){if("function"!=typeof P[1])throw new J(A);return[h(P[0]),P[1]]}):[],dn(function(P){for(var j=-1;++j<s;){var q=a[j];if(Re(q[0],this,P))return Re(q[1],this,P)}})},Q.conforms=function qt(a){return function ls(a){var s=Yr(a);return function(h){return Pn(h,a,s)}}(Vr(a,1))},Q.constant=Bt,Q.countBy=nf,Q.create=function np(a,s){var h=Ba(a);return null==s?h:td(h,s)},Q.curry=function cf(a,s,h){var P=$o(a,8,g,g,g,g,g,s=h?g:s);return P.placeholder=cf.placeholder,P},Q.curryRight=function Wu(a,s,h){var P=$o(a,16,g,g,g,g,g,s=h?g:s);return P.placeholder=Wu.placeholder,P},Q.debounce=ff,Q.defaults=rp,Q.defaultsDeep=ip,Q.defer=Sh,Q.delay=Th,Q.difference=Dd,Q.differenceBy=Fd,Q.differenceWith=Vd,Q.drop=function Bd(a,s,h){var P=null==a?0:a.length;return P?Ni(a,(s=h||s===g?1:vn(s))<0?0:s,P):[]},Q.dropRight=function Hd(a,s,h){var P=null==a?0:a.length;return P?Ni(a,0,(s=P-(s=h||s===g?1:vn(s)))<0?0:s):[]},Q.dropRightWhile=function jd(a,s){return a&&a.length?Pu(a,Gt(s,3),!0,!0):[]},Q.dropWhile=function Ud(a,s){return a&&a.length?Pu(a,Gt(s,3),!0):[]},Q.fill=function zd(a,s,h,P){var j=null==a?0:a.length;return j?(h&&"number"!=typeof h&&gi(a,s,h)&&(h=0,P=j),function vu(a,s,h,P){var j=a.length;for((h=vn(h))<0&&(h=-h>j?0:j+h),(P=P===g||P>j?j:vn(P))<0&&(P+=j),P=h>P?0:Cf(P);h<P;)a[h++]=s;return a}(a,s,h,P)):[]},Q.filter=function Zp(a,s){return(sn(a)?qn:mu)(a,Gt(s,3))},Q.flatMap=function Qp(a,s){return zn(jl(a,s),1)},Q.flatMapDeep=function lr(a,s){return zn(jl(a,s),nn)},Q.flatMapDepth=function bs(a,s,h){return h=h===g?1:vn(h),zn(jl(a,s),h)},Q.flatten=Rl,Q.flattenDeep=function Nl(a){return null!=a&&a.length?zn(a,nn):[]},Q.flattenDepth=function Gd(a,s){return null!=a&&a.length?zn(a,s=s===g?1:vn(s)):[]},Q.flip=function Eh(a){return $o(a,512)},Q.flow=xn,Q.flowRight=$n,Q.fromPairs=function Wd(a){for(var s=-1,h=null==a?0:a.length,P={};++s<h;){var j=a[s];P[j[0]]=j[1]}return P},Q.functions=function lp(a){return null==a?[]:xu(a,Yr(a))},Q.functionsIn=function cp(a){return null==a?[]:xu(a,Ii(a))},Q.groupBy=Hu,Q.initial=function Yd(a){return null!=a&&a.length?Ni(a,0,-1):[]},Q.intersection=Xd,Q.intersectionBy=Kd,Q.intersectionWith=Jd,Q.invert=dp,Q.invertBy=hp,Q.invokeMap=Ch,Q.iteratee=hn,Q.keyBy=af,Q.keys=Yr,Q.keysIn=Ii,Q.map=jl,Q.mapKeys=function gp(a,s){var h={};return s=Gt(s,3),lo(a,function(P,j,q){Ei(h,s(P,j,q),P)}),h},Q.mapValues=function vp(a,s){var h={};return s=Gt(s,3),lo(a,function(P,j,q){Ei(h,j,s(P,j,q))}),h},Q.matches=function gr(a){return hl(Vr(a,1))},Q.matchesProperty=function Mn(a,s){return pl(a,Vr(s,1))},Q.memoize=$u,Q.merge=mp,Q.mergeWith=Sf,Q.method=an,Q.methodOf=Cn,Q.mixin=Ft,Q.negate=Yu,Q.nthArg=function oi(a){return a=vn(a),dn(function(s){return dc(s,a)})},Q.omit=yp,Q.omitBy=function xp(a,s){return Ql(a,Yu(Gt(s)))},Q.once=function Ph(a){return Js(2,a)},Q.orderBy=function ju(a,s,h,P){return null==a?[]:(sn(s)||(s=null==s?[]:[s]),sn(h=P?g:h)||(h=null==h?[]:[h]),wu(a,s,h))},Q.over=Jo,Q.overArgs=Ah,Q.overEvery=ql,Q.overSome=ec,Q.partial=Gl,Q.partialRight=df,Q.partition=sf,Q.pick=bp,Q.pickBy=Ql,Q.property=tc,Q.propertyOf=function qs(a){return function(s){return null==a?g:za(a,s)}},Q.pull=Qd,Q.pullAll=Jc,Q.pullAllBy=function qd(a,s,h){return a&&a.length&&s&&s.length?Su(a,s,Gt(h,2)):a},Q.pullAllWith=function eh(a,s,h){return a&&a.length&&s&&s.length?Su(a,s,g,h):a},Q.pullAt=th,Q.range=eu,Q.rangeRight=ei,Q.rearg=Ih,Q.reject=function Uu(a,s){return(sn(a)?qn:mu)(a,Yu(Gt(s,3)))},Q.remove=function nh(a,s){var h=[];if(!a||!a.length)return h;var P=-1,j=[],q=a.length;for(s=Gt(s,3);++P<q;){var de=a[P];s(de,P,a)&&(h.push(de),j.push(P))}return pc(a,j),h},Q.rest=function Mh(a,s){if("function"!=typeof a)throw new J(A);return dn(a,s=s===g?s:vn(s))},Q.reverse=Dl,Q.sampleSize=function Xs(a,s,h){return s=(h?gi(a,s,h):s===g)?1:vn(s),(sn(a)?qf:fd)(a,s)},Q.set=function Qs(a,s,h){return null==a?a:Bs(a,s,h)},Q.setWith=function Cp(a,s,h,P){return P="function"==typeof P?P:g,null==a?a:Bs(a,s,h,P)},Q.shuffle=function zu(a){return(sn(a)?ed:dd)(a)},Q.slice=function rh(a,s,h){var P=null==a?0:a.length;return P?(h&&"number"!=typeof h&&gi(a,s,h)?(s=0,h=P):(s=null==s?0:vn(s),h=h===g?P:vn(h)),Ni(a,s,h)):[]},Q.sortBy=Cs,Q.sortedUniq=function ch(a){return a&&a.length?mc(a):[]},Q.sortedUniqBy=function fh(a,s){return a&&a.length?mc(a,Gt(s,2)):[]},Q.split=function U(a,s,h){return h&&"number"!=typeof h&&gi(a,s,h)&&(s=h=g),(h=h===g?wn:h>>>0)?(a=Wn(a))&&("string"==typeof s||null!=s&&!wa(s))&&!(s=pr(s))&&oo(a)?Go(dr(a),0,h):a.split(s,h):[]},Q.spread=function kh(a,s){if("function"!=typeof a)throw new J(A);return s=null==s?0:mr(vn(s),0),dn(function(h){var P=h[s],j=Go(h,0,s);return P&&kt(j,P),Re(a,this,j)})},Q.tail=function dh(a){var s=null==a?0:a.length;return s?Ni(a,1,s):[]},Q.take=function hh(a,s,h){return a&&a.length?Ni(a,0,(s=h||s===g?1:vn(s))<0?0:s):[]},Q.takeRight=function ph(a,s,h){var P=null==a?0:a.length;return P?Ni(a,(s=P-(s=h||s===g?1:vn(s)))<0?0:s,P):[]},Q.takeRightWhile=function gh(a,s){return a&&a.length?Pu(a,Gt(s,3),!1,!0):[]},Q.takeWhile=function vh(a,s){return a&&a.length?Pu(a,Gt(s,3)):[]},Q.tap=function vi(a,s){return s(a),a},Q.throttle=function Lh(a,s,h){var P=!0,j=!0;if("function"!=typeof a)throw new J(A);return yr(h)&&(P="leading"in h?!!h.leading:P,j="trailing"in h?!!h.trailing:j),ff(a,s,{leading:P,maxWait:s,trailing:j})},Q.thru=Ys,Q.toArray=Ja,Q.toPairs=Ef,Q.toPairsIn=Pf,Q.toPath=function Mp(a){return sn(a)?Mt(a,Io):Di(a)?[a]:Pi(Ya(Wn(a)))},Q.toPlainObject=_f,Q.transform=function _p(a,s,h){var P=sn(a),j=P||_a(a)||ws(a);if(s=Gt(s,4),null==h){var q=a&&a.constructor;h=j?P?new q:[]:yr(a)&&po(q)?Ba(Fr(a)):{}}return(j?St:lo)(a,function(de,_e,Le){return s(h,de,_e,Le)}),h},Q.unary=function Oh(a){return Ks(a,1)},Q.union=ft,Q.unionBy=Fl,Q.unionWith=mh,Q.uniq=function Bu(a){return a&&a.length?_r(a):[]},Q.uniqBy=function Gp(a,s){return a&&a.length?_r(a,Gt(s,2)):[]},Q.uniqWith=function yh(a,s){return s="function"==typeof s?s:g,a&&a.length?_r(a,g,s):[]},Q.unset=function wp(a,s){return null==a||Hs(a,s)},Q.unzip=Zc,Q.unzipWith=xh,Q.update=function Sp(a,s,h){return null==a?a:xc(a,s,Iu(h))},Q.updateWith=function Tp(a,s,h,P){return P="function"==typeof P?P:g,null==a?a:xc(a,s,Iu(h),P)},Q.values=Ts,Q.valuesIn=function e(a){return null==a?[]:As(a,Ii(a))},Q.without=Qc,Q.words=Hn,Q.wrap=function hf(a,s){return Gl(Iu(s),a)},Q.xor=$s,Q.xorBy=qc,Q.xorWith=ys,Q.zip=Ka,Q.zipObject=function ef(a,s){return yl(a||[],s||[],du)},Q.zipObjectDeep=function ya(a,s){return yl(a||[],s||[],Bs)},Q.zipWith=Gn,Q.entries=Ef,Q.entriesIn=Pf,Q.extend=ep,Q.extendWith=Ss,Ft(Q,Q),Q.add=Lp,Q.attempt=In,Q.camelCase=o,Q.capitalize=u,Q.ceil=Af,Q.clamp=function t(a,s,h){return h===g&&(h=s,s=g),h!==g&&(h=(h=Yi(h))==h?h:0),s!==g&&(s=(s=Yi(s))==s?s:0),Uo(Yi(a),s,h)},Q.clone=function Nh(a){return Vr(a,4)},Q.cloneDeep=function pf(a){return Vr(a,5)},Q.cloneDeepWith=function gf(a,s){return Vr(a,5,s="function"==typeof s?s:g)},Q.cloneWith=function Dh(a,s){return Vr(a,4,s="function"==typeof s?s:g)},Q.conformsTo=function Fh(a,s){return null==s||Pn(a,s,Yr(s))},Q.deburr=c,Q.defaultTo=function zt(a,s){return null==a||a!=a?s:a},Q.divide=If,Q.endsWith=function v(a,s,h){a=Wn(a),s=pr(s);var P=a.length,j=h=h===g?P:Uo(vn(h),0,P);return(h-=s.length)>=0&&a.slice(h,j)==s},Q.eq=ho,Q.escape=function m(a){return(a=Wn(a))&&Wt.test(a)?a.replace(Qo,Qu):a},Q.escapeRegExp=function T(a){return(a=Wn(a))&&Lr.test(a)?a.replace(xi,"\\$&"):a},Q.every=function Jp(a,s,h){var P=sn(a)?Pt:nd;return h&&gi(a,s,h)&&(s=g),P(a,Gt(s,3))},Q.find=rf,Q.findIndex=Wc,Q.findKey=function op(a,s){return no(a,Gt(s,3),lo)},Q.findLast=Bl,Q.findLastIndex=$c,Q.findLastKey=function wf(a,s){return no(a,Gt(s,3),yu)},Q.floor=Mf,Q.forEach=Hl,Q.forEachRight=of,Q.forIn=function Kl(a,s){return null==a?a:cs(a,Gt(s,3),Ii)},Q.forInRight=function ap(a,s){return null==a?a:Ns(a,Gt(s,3),Ii)},Q.forOwn=function sp(a,s){return a&&lo(a,Gt(s,3))},Q.forOwnRight=function up(a,s){return a&&yu(a,Gt(s,3))},Q.get=Jl,Q.gt=Wl,Q.gte=Xu,Q.has=function fp(a,s){return null!=a&&Ml(a,s,rd)},Q.hasIn=Zl,Q.head=Yc,Q.identity=cn,Q.includes=function bh(a,s,h,P){a=Ai(a)?a:Ts(a),h=h&&!P?vn(h):0;var j=a.length;return h<0&&(h=mr(j+h,0)),Ku(a)?h<=j&&a.indexOf(s,h)>-1:!!j&&Ir(a,s,h)>-1},Q.indexOf=function $d(a,s,h){var P=null==a?0:a.length;if(!P)return-1;var j=null==h?0:vn(h);return j<0&&(j=mr(P+j,0)),Ir(a,s,j)},Q.inRange=function n(a,s,h){return s=Ko(s),h===g?(h=s,s=0):h=Ko(h),function ll(a,s,h){return a>=Wr(s,h)&&a<mr(s,h)}(a=Yi(a),s,h)},Q.invoke=pp,Q.isArguments=Ca,Q.isArray=sn,Q.isArrayBuffer=Vh,Q.isArrayLike=Ai,Q.isArrayLikeObject=kr,Q.isBoolean=function Bh(a){return!0===a||!1===a||Sr(a)&&$r(a)==ht},Q.isBuffer=_a,Q.isDate=vf,Q.isElement=function Hh(a){return Sr(a)&&1===a.nodeType&&!Zs(a)},Q.isEmpty=function jh(a){if(null==a)return!0;if(Ai(a)&&(sn(a)||"string"==typeof a||"function"==typeof a.splice||_a(a)||ws(a)||Ca(a)))return!a.length;var s=ri(a);if(s==un||s==Ke)return!a.size;if(ma(a))return!ds(a).length;for(var h in a)if(Ge.call(a,h))return!1;return!0},Q.isEqual=function Uh(a,s){return Ds(a,s)},Q.isEqualWith=function zh(a,s,h){var P=(h="function"==typeof h?h:g)?h(a,s):g;return P===g?Ds(a,s,g,h):!!P},Q.isError=$l,Q.isFinite=function Gh(a){return"number"==typeof a&&tl(a)},Q.isFunction=po,Q.isInteger=_s,Q.isLength=ii,Q.isMap=Yl,Q.isMatch=function mf(a,s){return a===s||Cu(a,s,Pl(s))},Q.isMatchWith=function Wh(a,s,h){return h="function"==typeof h?h:g,Cu(a,s,Pl(s),h)},Q.isNaN=function $h(a){return yf(a)&&a!=+a},Q.isNative=function Yh(a){if(kl(a))throw new Zt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return lc(a)},Q.isNil=function Kh(a){return null==a},Q.isNull=function Xh(a){return null===a},Q.isNumber=yf,Q.isObject=yr,Q.isObjectLike=Sr,Q.isPlainObject=Zs,Q.isRegExp=wa,Q.isSafeInteger=function Jh(a){return _s(a)&&a>=-vr&&a<=vr},Q.isSet=xf,Q.isString=Ku,Q.isSymbol=Di,Q.isTypedArray=ws,Q.isUndefined=function Zh(a){return a===g},Q.isWeakMap=function Qh(a){return Sr(a)&&ri(a)==mn},Q.isWeakSet=function qh(a){return Sr(a)&&"[object WeakSet]"==$r(a)},Q.join=function Xc(a,s){return null==a?"":uu.call(a,s)},Q.kebabCase=I,Q.last=wr,Q.lastIndexOf=function Kc(a,s,h){var P=null==a?0:a.length;if(!P)return-1;var j=P;return h!==g&&(j=(j=vn(h))<0?mr(P+j,0):Wr(j,P-1)),s==s?function Un(me,Xe,Be){for(var wt=Be+1;wt--;)if(me[wt]===Xe)return wt;return wt}(a,s,j):ji(a,di,j,!0)},Q.lowerCase=b,Q.lowerFirst=G,Q.lt=Xl,Q.lte=bf,Q.max=function kf(a){return a&&a.length?gu(a,cn,sl):g},Q.maxBy=function Es(a,s){return a&&a.length?gu(a,Gt(s,2),sl):g},Q.mean=function Lf(a){return ur(a,cn)},Q.meanBy=function Of(a,s){return ur(a,Gt(s,2))},Q.min=function Rf(a){return a&&a.length?gu(a,cn,Vs):g},Q.minBy=function Op(a,s){return a&&a.length?gu(a,Gt(s,2),Vs):g},Q.stubArray=xr,Q.stubFalse=tu,Q.stubObject=function Ep(){return{}},Q.stubString=function Pp(){return""},Q.stubTrue=function Ap(){return!0},Q.multiply=Sa,Q.nth=function Zd(a,s){return a&&a.length?dc(a,vn(s)):g},Q.noConflict=function Ct(){return l._===this&&(l._=Et),this},Q.noop=Hr,Q.now=Ut,Q.pad=function ee(a,s,h){a=Wn(a);var P=(s=vn(s))?Mr(a):0;if(!s||P>=s)return a;var j=(s-P)/2;return Us(ks(j),h)+a+Us(Na(j),h)},Q.padEnd=function oe(a,s,h){a=Wn(a);var P=(s=vn(s))?Mr(a):0;return s&&P<s?a+Us(s-P,h):a},Q.padStart=function Te(a,s,h){a=Wn(a);var P=(s=vn(s))?Mr(a):0;return s&&P<s?Us(s-P,h)+a:a},Q.parseInt=function Pe(a,s,h){return h||null==s?s=0:s&&(s=+s),Tn(Wn(a).replace(Ki,""),s||0)},Q.random=function r(a,s,h){if(h&&"boolean"!=typeof h&&gi(a,s,h)&&(s=h=g),h===g&&("boolean"==typeof s?(h=s,s=g):"boolean"==typeof a&&(h=a,a=g)),a===g&&s===g?(a=0,s=1):(a=Ko(a),s===g?(s=a,a=0):s=Ko(s)),a>s){var P=a;a=s,s=P}if(h||a%1||s%1){var j=nl();return Wr(a+j*(s-a+ae("1e-"+((j+"").length-1))),s)}return Tu(a,s)},Q.reduce=function uf(a,s,h){var P=sn(a)?Gr:Ps,j=arguments.length<3;return P(a,Gt(s,4),h,j,ga)},Q.reduceRight=function _h(a,s,h){var P=sn(a)?bn:Ps,j=arguments.length<3;return P(a,Gt(s,4),h,j,ac)},Q.repeat=function De(a,s,h){return s=(h?gi(a,s,h):s===g)?1:vn(s),hs(Wn(a),s)},Q.replace=function Ne(){var a=arguments,s=Wn(a[0]);return a.length<3?s:s.replace(a[1],a[2])},Q.result=function Tf(a,s,h){var P=-1,j=(s=zo(s,a)).length;for(j||(j=1,a=g);++P<j;){var q=null==a?g:a[Io(s[P])];q===g&&(P=j,q=h),a=po(q)?q.call(a):q}return a},Q.round=tg,Q.runInContext=me,Q.sample=function wh(a){return(sn(a)?Qf:gl)(a)},Q.size=function Ul(a){if(null==a)return 0;if(Ai(a))return Ku(a)?Mr(a):a.length;var s=ri(a);return s==un||s==Ke?a.size:ds(a).length},Q.snakeCase=L,Q.some=function ba(a,s,h){var P=sn(a)?Xn:hd;return h&&gi(a,s,h)&&(s=g),P(a,Gt(s,3))},Q.sortedIndex=function ih(a,s){return Eu(a,s)},Q.sortedIndexBy=function oh(a,s,h){return vl(a,s,Gt(h,2))},Q.sortedIndexOf=function ah(a,s){var h=null==a?0:a.length;if(h){var P=Eu(a,s);if(P<h&&ho(a[P],s))return P}return-1},Q.sortedLastIndex=function sh(a,s){return Eu(a,s,!0)},Q.sortedLastIndexBy=function uh(a,s,h){return vl(a,s,Gt(h,2),!0)},Q.sortedLastIndexOf=function lh(a,s){if(null!=a&&a.length){var P=Eu(a,s,!0)-1;if(ho(a[P],s))return P}return-1},Q.startCase=K,Q.startsWith=function ie(a,s,h){return a=Wn(a),h=null==h?0:Uo(vn(h),0,a.length),s=pr(s),a.slice(h,h+s.length)==s},Q.subtract=ng,Q.sum=function rg(a){return a&&a.length?ro(a,cn):0},Q.sumBy=function ig(a,s){return a&&a.length?ro(a,Gt(s,2)):0},Q.template=function pe(a,s,h){var P=Q.templateSettings;h&&gi(a,s,h)&&(s=g),a=Wn(a),s=Ss({},s,P,Rc);var _e,Le,j=Ss({},s.imports,P.imports,Rc),q=Yr(j),de=As(j,q),Qe=0,qe=s.interpolate||Ji,it="__p += '",_t=fa((s.escape||Ji).source+"|"+qe.source+"|"+(qe===yo?Ro:Ji).source+"|"+(s.evaluate||Ji).source+"|$","g"),Dt="//# sourceURL="+(Ge.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Fo+"]")+"\n";a.replace(_t,function(tn,Ln,Fn,go,Fi,vo){return Fn||(Fn=go),it+=a.slice(Qe,vo).replace(Zi,ou),Ln&&(_e=!0,it+="' +\n__e("+Ln+") +\n'"),Fi&&(Le=!0,it+="';\n"+Fi+";\n__p += '"),Fn&&(it+="' +\n((__t = ("+Fn+")) == null ? '' : __t) +\n'"),Qe=vo+tn.length,tn}),it+="';\n";var en=Ge.call(s,"variable")&&s.variable;if(en){if(Oo.test(en))throw new Zt("Invalid `variable` option passed into `_.template`")}else it="with (obj) {\n"+it+"\n}\n";it=(Le?it.replace(sr,""):it).replace(Sn,"$1").replace(Qa,"$1;"),it="function("+(en||"obj")+") {\n"+(en?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(_e?", __e = _.escape":"")+(Le?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+it+"return __p\n}";var _n=In(function(){return Dn(q,Dt+"return "+it).apply(g,de)});if(_n.source=it,$l(_n))throw _n;return _n},Q.times=function Ip(a,s){if((a=vn(a))<1||a>vr)return[];var h=wn,P=Wr(a,wn);s=Gt(s),a-=wn;for(var j=rs(P,s);++h<a;)s(h);return j},Q.toFinite=Ko,Q.toInteger=vn,Q.toLength=Cf,Q.toLower=function Me(a){return Wn(a).toLowerCase()},Q.toNumber=Yi,Q.toSafeInteger=function qp(a){return a?Uo(vn(a),-vr,vr):0===a?a:0},Q.toString=Wn,Q.toUpper=function Oe(a){return Wn(a).toUpperCase()},Q.trim=function Ue(a,s,h){if((a=Wn(a))&&(h||s===g))return ru(a);if(!a||!(s=pr(s)))return a;var P=dr(a),j=dr(s);return Go(P,Zu(P,j),iu(P,j)+1).join("")},Q.trimEnd=function st(a,s,h){if((a=Wn(a))&&(h||s===g))return a.slice(0,qr(a)+1);if(!a||!(s=pr(s)))return a;var P=dr(a);return Go(P,0,iu(P,dr(s))+1).join("")},Q.trimStart=function tt(a,s,h){if((a=Wn(a))&&(h||s===g))return a.replace(Ki,"");if(!a||!(s=pr(s)))return a;var P=dr(a);return Go(P,Zu(P,dr(s))).join("")},Q.truncate=function dt(a,s){var h=30,P="...";if(yr(s)){var j="separator"in s?s.separator:j;h="length"in s?vn(s.length):h,P="omission"in s?pr(s.omission):P}var q=(a=Wn(a)).length;if(oo(a)){var de=dr(a);q=de.length}if(h>=q)return a;var _e=h-Mr(P);if(_e<1)return P;var Le=de?Go(de,0,_e).join(""):a.slice(0,_e);if(j===g)return Le+P;if(de&&(_e+=Le.length-_e),wa(j)){if(a.slice(_e).search(j)){var Qe,qe=Le;for(j.global||(j=fa(j.source,Wn(qo.exec(j))+"g")),j.lastIndex=0;Qe=j.exec(qe);)var it=Qe.index;Le=Le.slice(0,it===g?_e:it)}}else if(a.indexOf(pr(j),_e)!=_e){var _t=Le.lastIndexOf(j);_t>-1&&(Le=Le.slice(0,_t))}return Le+P},Q.unescape=function yt(a){return(a=Wn(a))&&Xi.test(a)?a.replace(mo,Ti):a},Q.uniqueId=function kp(a){var s=++at;return Wn(a)+s},Q.upperCase=xt,Q.upperFirst=Lt,Q.each=Hl,Q.eachRight=of,Q.first=Yc,Ft(Q,function(){var a={};return lo(Q,function(s,h){Ge.call(Q.prototype,h)||(a[h]=s)}),a}(),{chain:!1}),Q.VERSION="4.17.21",St(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){Q[a].placeholder=Q}),St(["drop","take"],function(a,s){En.prototype[a]=function(h){h=h===g?1:mr(vn(h),0);var P=this.__filtered__&&!s?new En(this):this.clone();return P.__filtered__?P.__takeCount__=Wr(h,P.__takeCount__):P.__views__.push({size:Wr(h,wn),type:a+(P.__dir__<0?"Right":"")}),P},En.prototype[a+"Right"]=function(h){return this.reverse()[a](h).reverse()}}),St(["filter","map","takeWhile"],function(a,s){var h=s+1,P=1==h||3==h;En.prototype[a]=function(j){var q=this.clone();return q.__iteratees__.push({iteratee:Gt(j,3),type:h}),q.__filtered__=q.__filtered__||P,q}}),St(["head","last"],function(a,s){var h="take"+(s?"Right":"");En.prototype[a]=function(){return this[h](1).value()[0]}}),St(["initial","tail"],function(a,s){var h="drop"+(s?"":"Right");En.prototype[a]=function(){return this.__filtered__?new En(this):this[h](1)}}),En.prototype.compact=function(){return this.filter(cn)},En.prototype.find=function(a){return this.filter(a).head()},En.prototype.findLast=function(a){return this.reverse().find(a)},En.prototype.invokeMap=dn(function(a,s){return"function"==typeof a?new En(this):this.map(function(h){return co(h,a,s)})}),En.prototype.reject=function(a){return this.filter(Yu(Gt(a)))},En.prototype.slice=function(a,s){a=vn(a);var h=this;return h.__filtered__&&(a>0||s<0)?new En(h):(a<0?h=h.takeRight(-a):a&&(h=h.drop(a)),s!==g&&(h=(s=vn(s))<0?h.dropRight(-s):h.take(s-a)),h)},En.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},En.prototype.toArray=function(){return this.take(wn)},lo(En.prototype,function(a,s){var h=/^(?:filter|find|map|reject)|While$/.test(s),P=/^(?:head|last)$/.test(s),j=Q[P?"take"+("last"==s?"Right":""):s],q=P||/^find/.test(s);!j||(Q.prototype[s]=function(){var de=this.__wrapped__,_e=P?[1]:arguments,Le=de instanceof En,Qe=_e[0],qe=Le||sn(de),it=function(Ln){var Fn=j.apply(Q,kt([Ln],_e));return P&&_t?Fn[0]:Fn};qe&&h&&"function"==typeof Qe&&1!=Qe.length&&(Le=qe=!1);var _t=this.__chain__,Dt=!!this.__actions__.length,en=q&&!_t,_n=Le&&!Dt;if(!q&&qe){de=_n?de:new En(this);var tn=a.apply(de,_e);return tn.__actions__.push({func:Ys,args:[it],thisArg:g}),new Gi(tn,_t)}return en&&_n?a.apply(this,_e):(tn=this.thru(it),en?P?tn.value()[0]:tn.value():tn)})}),St(["pop","push","shift","sort","splice","unshift"],function(a){var s=ce[a],h=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",P=/^(?:pop|shift)$/.test(a);Q.prototype[a]=function(){var j=arguments;if(P&&!this.__chain__){var q=this.value();return s.apply(sn(q)?q:[],j)}return this[h](function(de){return s.apply(sn(de)?de:[],j)})}}),lo(En.prototype,function(a,s){var h=Q[s];if(h){var P=h.name+"";Ge.call(us,P)||(us[P]=[]),us[P].push({name:s,func:h})}}),us[Wa(g,2).name]=[{name:"wrapper",func:g}],En.prototype.clone=function Hf(){var a=new En(this.__wrapped__);return a.__actions__=Pi(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Pi(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Pi(this.__views__),a},En.prototype.reverse=function jf(){if(this.__filtered__){var a=new En(this);a.__dir__=-1,a.__filtered__=!0}else(a=this.clone()).__dir__*=-1;return a},En.prototype.value=function Uf(){var a=this.__wrapped__.value(),s=this.__dir__,h=sn(a),P=s<0,j=h?a.length:0,q=function Du(a,s,h){for(var P=-1,j=h.length;++P<j;){var q=h[P],de=q.size;switch(q.type){case"drop":a+=de;break;case"dropRight":s-=de;break;case"take":s=Wr(s,a+de);break;case"takeRight":a=mr(a,s-de)}}return{start:a,end:s}}(0,j,this.__views__),de=q.start,_e=q.end,Le=_e-de,Qe=P?_e:de-1,qe=this.__iteratees__,it=qe.length,_t=0,Dt=Wr(Le,this.__takeCount__);if(!h||!P&&j==Le&&Dt==Le)return bc(a,this.__actions__);var en=[];e:for(;Le--&&_t<Dt;){for(var _n=-1,tn=a[Qe+=s];++_n<it;){var Ln=qe[_n],go=Ln.type,Fi=(0,Ln.iteratee)(tn);if(2==go)tn=Fi;else if(!Fi){if(1==go)continue e;break e}}en[_t++]=tn}return en},Q.prototype.at=xa,Q.prototype.chain=function xs(){return Vl(this)},Q.prototype.commit=function Wp(){return new Gi(this.value(),this.__chain__)},Q.prototype.next=function tf(){this.__values__===g&&(this.__values__=Ja(this.value()));var a=this.__index__>=this.__values__.length;return{done:a,value:a?g:this.__values__[this.__index__++]}},Q.prototype.plant=function Yp(a){for(var s,h=this;h instanceof Os;){var P=Gc(h);P.__index__=0,P.__values__=g,s?j.__wrapped__=P:s=P;var j=P;h=h.__wrapped__}return j.__wrapped__=a,s},Q.prototype.reverse=function Xp(){var a=this.__wrapped__;if(a instanceof En){var s=a;return this.__actions__.length&&(s=new En(this)),(s=s.reverse()).__actions__.push({func:Ys,args:[Dl],thisArg:g}),new Gi(s,this.__chain__)}return this.thru(Dl)},Q.prototype.toJSON=Q.prototype.valueOf=Q.prototype.value=function Kp(){return bc(this.__wrapped__,this.__actions__)},Q.prototype.first=Q.prototype.head,Is&&(Q.prototype[Is]=function $p(){return this}),Q}();l._=Jn,(p=function(){return Jn}.call(W,f,W,E))!==g&&(E.exports=p)}.call(this)},19984:(E,W,f)=>{var p=f(84633),g=f(96517),w=f(92046),S=f(21503);E.exports=function x(A,k){return(S(A)?p:w)(A,g(k,3))}},10203:(E,W,f)=>{var p=f(85683),g=f(45184),w=f(96517);E.exports=function S(x,A){var k={};return A=w(A,3),g(x,function(M,F,H){p(k,F,A(M,F,H))}),k}},18176:(E,W,f)=>{var p=f(67308),g=f(31100),w=f(32608);E.exports=function S(x){return x&&x.length?p(x,w,g):void 0}},30535:(E,W,f)=>{var p=f(99850);function w(S,x){if("function"!=typeof S||null!=x&&"function"!=typeof x)throw new TypeError("Expected a function");var A=function(){var k=arguments,M=x?x.apply(this,k):k[0],F=A.cache;if(F.has(M))return F.get(M);var H=S.apply(this,k);return A.cache=F.set(M,H)||F,H};return A.cache=new(w.Cache||p),A}w.Cache=p,E.exports=w},80567:(E,W,f)=>{var p=f(73842),w=f(84944)(function(S,x,A){p(S,x,A)});E.exports=w},29439:(E,W,f)=>{var p=f(67308),g=f(99069),w=f(32608);E.exports=function S(x){return x&&x.length?p(x,w,g):void 0}},29525:(E,W,f)=>{var p=f(67308),g=f(96517),w=f(99069);E.exports=function S(x,A){return x&&x.length?p(x,g(A,2),w):void 0}},12552:E=>{E.exports=function W(){}},31710:(E,W,f)=>{var p=f(12119);E.exports=function(){return p.Date.now()}},16372:(E,W,f)=>{var p=f(83021),w=f(3975)(function(S,x){return null==S?{}:p(S,x)});E.exports=w},87495:(E,W,f)=>{var p=f(11847),g=f(39222),w=f(45352),S=f(68533);E.exports=function x(A){return w(A)?p(S(A)):g(A)}},90361:(E,W,f)=>{var g=f(97509)();E.exports=g},81337:(E,W,f)=>{var p=f(8745),g=f(43132),w=f(96517),S=f(13570),x=f(21503);E.exports=function A(k,M,F){var H=x(k)?p:S,O=arguments.length<3;return H(k,w(M,4),F,O,g)}},55637:(E,W,f)=>{var p=f(81172),g=f(28794),w=f(56507),S=f(30248),x=f(52315);E.exports=function M(F){if(null==F)return 0;if(w(F))return S(F)?x(F):F.length;var H=g(F);return"[object Map]"==H||"[object Set]"==H?F.size:p(F).length}},12906:(E,W,f)=>{var p=f(50686),g=f(6119),w=f(23269),S=f(93342),x=w(function(A,k){if(null==A)return[];var M=k.length;return M>1&&S(A,k[0],k[1])?k=[]:M>2&&S(k[0],k[1],k[2])&&(k=[k[0]]),g(A,p(k,1),[])});E.exports=x},49975:E=>{E.exports=function W(){return[]}},63580:E=>{E.exports=function W(){return!1}},12232:(E,W,f)=>{var p=f(51467),g=1/0;E.exports=function S(x){return x?(x=p(x))===g||x===-g?17976931348623157e292*(x<0?-1:1):x==x?x:0:0===x?x:0}},44401:(E,W,f)=>{var p=f(12232);E.exports=function g(w){var S=p(w),x=S%1;return S==S?x?S-x:S:0}},51467:(E,W,f)=>{var p=f(83348),g=f(25940),w=f(44129),x=/^[-+]0x[0-9a-f]+$/i,A=/^0b[01]+$/i,k=/^0o[0-7]+$/i,M=parseInt;E.exports=function F(H){if("number"==typeof H)return H;if(w(H))return NaN;if(g(H)){var O="function"==typeof H.valueOf?H.valueOf():H;H=g(O)?O+"":O}if("string"!=typeof H)return 0===H?H:+H;H=p(H);var X=A.test(H);return X||k.test(H)?M(H.slice(2),X?2:8):x.test(H)?NaN:+H}},8067:(E,W,f)=>{var p=f(31989),g=f(16555);E.exports=function w(S){return p(S,g(S))}},73943:(E,W,f)=>{var p=f(93935);E.exports=function g(w){return null==w?"":p(w)}},89416:(E,W,f)=>{var p=f(96837),g=f(78858),w=f(45184),S=f(96517),x=f(29519),A=f(21503),k=f(80891),M=f(75946),F=f(25940),H=f(48159);E.exports=function O(X,te,fe){var i=A(X),se=i||k(X)||H(X);if(te=S(te,4),null==fe){var ve=X&&X.constructor;fe=se?i?new ve:[]:F(X)&&M(ve)?g(x(X)):{}}return(se?p:w)(X,function(he,ne,xe){return te(fe,he,ne,xe)}),fe}},68921:(E,W,f)=>{var p=f(50686),g=f(23269),w=f(80707),S=f(21330),x=g(function(A){return w(p(A,1,S,!0))});E.exports=x},51541:(E,W,f)=>{var p=f(73943),g=0;E.exports=function w(S){var x=++g;return p(S)+x}},90377:(E,W,f)=>{var p=f(19179),g=f(118);E.exports=function w(S){return null==S?[]:p(S,g(S))}},21617:(E,W,f)=>{var p=f(89719),g=f(38645);E.exports=function w(S,x){return g(S||[],x||[],p)}},29610:function(E){E.exports=function(){var W="1.13.2",f="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},p=Array.prototype,g=Object.prototype,w="undefined"!=typeof Symbol?Symbol.prototype:null,S=p.push,x=p.slice,A=g.toString,k=g.hasOwnProperty,M="undefined"!=typeof ArrayBuffer,F="undefined"!=typeof DataView,H=Array.isArray,O=Object.keys,X=Object.create,te=M&&ArrayBuffer.isView,fe=isNaN,i=isFinite,se=!{toString:null}.propertyIsEnumerable("toString"),ve=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],he=Math.pow(2,53)-1;function ne(N,Z){return Z=null==Z?N.length-1:+Z,function(){for(var ae=Math.max(arguments.length-Z,0),ge=Array(ae),ke=0;ke<ae;ke++)ge[ke]=arguments[ke+Z];switch(Z){case 0:return N.call(this,ge);case 1:return N.call(this,arguments[0],ge);case 2:return N.call(this,arguments[0],arguments[1],ge)}var Se=Array(Z+1);for(ke=0;ke<Z;ke++)Se[ke]=arguments[ke];return Se[Z]=ge,N.apply(this,Se)}}function xe(N){var Z=typeof N;return"function"===Z||"object"===Z&&!!N}function Ae(N){return void 0===N}function Fe(N){return!0===N||!1===N||"[object Boolean]"===A.call(N)}function C(N){var Z="[object "+N+"]";return function(ae){return A.call(ae)===Z}}var He=C("String"),nt=C("Number"),et=C("Date"),ot=C("RegExp"),lt=C("Error"),pt=C("Symbol"),At=C("ArrayBuffer"),Xt=C("Function");"object"!=typeof Int8Array&&"function"!=typeof(f.document&&f.document.childNodes)&&(Xt=function(N){return"function"==typeof N||!1});var nn=Xt,vr=C("Object"),Ur=F&&vr(new DataView(new ArrayBuffer(8))),ze="undefined"!=typeof Map&&vr(new Map),wn=C("DataView"),tr=Ur?function(N){return null!=N&&nn(N.getInt8)&&At(N.buffer)}:wn,nr=H||C("Array");function Yn(N,Z){return null!=N&&k.call(N,Z)}var be=C("Arguments");!function(){be(arguments)||(be=function(N){return Yn(N,"callee")})}();var Je=be;function ut(N){return nt(N)&&fe(N)}function ht(N){return function(){return N}}function Rt(N){return function(Z){var ae=N(Z);return"number"==typeof ae&&ae>=0&&ae<=he}}function pn(N){return function(Z){return null==Z?void 0:Z[N]}}var kn=pn("byteLength"),or=Rt(kn),mi=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,un=M?function(N){return te?te(N)&&!tr(N):or(N)&&mi.test(A.call(N))}:ht(!1),Kt=pn("length");function B(N,Z){Z=function(l){for(var d={},y=l.length,_=0;_<y;++_)d[l[_]]=!0;return{contains:function(R){return!0===d[R]},push:function(R){return d[R]=!0,l.push(R)}}}(Z);var ae=ve.length,ge=N.constructor,ke=nn(ge)&&ge.prototype||g,Se="constructor";for(Yn(N,Se)&&!Z.contains(Se)&&Z.push(Se);ae--;)(Se=ve[ae])in N&&N[Se]!==ke[Se]&&!Z.contains(Se)&&Z.push(Se)}function z(N){if(!xe(N))return[];if(O)return O(N);var Z=[];for(var ae in N)Yn(N,ae)&&Z.push(ae);return se&&B(N,Z),Z}function re(N,Z){var ae=z(Z),ge=ae.length;if(null==N)return!ge;for(var ke=Object(N),Se=0;Se<ge;Se++){var l=ae[Se];if(Z[l]!==ke[l]||!(l in ke))return!1}return!0}function Ce(N){return N instanceof Ce?N:this instanceof Ce?void(this._wrapped=N):new Ce(N)}function We(N){return new Uint8Array(N.buffer||N,N.byteOffset||0,kn(N))}Ce.VERSION=W,Ce.prototype.valueOf=Ce.prototype.toJSON=Ce.prototype.value=function(){return this._wrapped},Ce.prototype.toString=function(){return String(this._wrapped)};var Ke="[object DataView]";function bt(N,Z,ae,ge){if(N===Z)return 0!==N||1/N==1/Z;if(null==N||null==Z)return!1;if(N!=N)return Z!=Z;var ke=typeof N;return("function"===ke||"object"===ke||"object"==typeof Z)&&function Se(l,d,y,_){l instanceof Ce&&(l=l._wrapped),d instanceof Ce&&(d=d._wrapped);var R=A.call(l);if(R!==A.call(d))return!1;if(Ur&&"[object Object]"==R&&tr(l)){if(!tr(d))return!1;R=Ke}switch(R){case"[object RegExp]":case"[object String]":return""+l==""+d;case"[object Number]":return+l!=+l?+d!=+d:0==+l?1/+l==1/d:+l==+d;case"[object Date]":case"[object Boolean]":return+l==+d;case"[object Symbol]":return w.valueOf.call(l)===w.valueOf.call(d);case"[object ArrayBuffer]":case Ke:return Se(We(l),We(d),y,_)}var D="[object Array]"===R;if(!D&&un(l)){if(kn(l)!==kn(d))return!1;if(l.buffer===d.buffer&&l.byteOffset===d.byteOffset)return!0;D=!0}if(!D){if("object"!=typeof l||"object"!=typeof d)return!1;var Y=l.constructor,le=d.constructor;if(Y!==le&&!(nn(Y)&&Y instanceof Y&&nn(le)&&le instanceof le)&&"constructor"in l&&"constructor"in d)return!1}_=_||[];for(var ue=(y=y||[]).length;ue--;)if(y[ue]===l)return _[ue]===d;if(y.push(l),_.push(d),D){if((ue=l.length)!==d.length)return!1;for(;ue--;)if(!bt(l[ue],d[ue],y,_))return!1}else{var Ie,Ve=z(l);if(ue=Ve.length,z(d).length!==ue)return!1;for(;ue--;)if(!Yn(d,Ie=Ve[ue])||!bt(l[Ie],d[Ie],y,_))return!1}return y.pop(),_.pop(),!0}(N,Z,ae,ge)}function Nt(N){if(!xe(N))return[];var Z=[];for(var ae in N)Z.push(ae);return se&&B(N,Z),Z}function Ht(N){var Z=Kt(N);return function(ae){if(null==ae)return!1;var ge=Nt(ae);if(Kt(ge))return!1;for(var ke=0;ke<Z;ke++)if(!nn(ae[N[ke]]))return!1;return N!==yi||!nn(ae[mn])}}var mn="forEach",gn=["clear","delete"],Qn=["get","has","set"],Tr=gn.concat(mn,Qn),yi=gn.concat(Qn),jn=["add"].concat(gn,mn,"has"),ar=ze?Ht(Tr):C("Map"),rr=ze?Ht(yi):C("WeakMap"),cr=ze?Ht(jn):C("Set"),Nr=C("WeakSet");function ai(N){for(var Z=z(N),ae=Z.length,ge=Array(ae),ke=0;ke<ae;ke++)ge[ke]=N[Z[ke]];return ge}function ir(N){for(var Z={},ae=z(N),ge=0,ke=ae.length;ge<ke;ge++)Z[N[ae[ge]]]=ae[ge];return Z}function sr(N){var Z=[];for(var ae in N)nn(N[ae])&&Z.push(ae);return Z.sort()}function Sn(N,Z){return function(ae){var ge=arguments.length;if(Z&&(ae=Object(ae)),ge<2||null==ae)return ae;for(var ke=1;ke<ge;ke++)for(var Se=arguments[ke],l=N(Se),d=l.length,y=0;y<d;y++){var _=l[y];Z&&void 0!==ae[_]||(ae[_]=Se[_])}return ae}}var Qa=Sn(Nt),mo=Sn(z),Qo=Sn(Nt,!0);function Xi(N){if(!xe(N))return{};if(X)return X(N);var Z=function(){};Z.prototype=N;var ae=new Z;return Z.prototype=null,ae}function Wt(N){return nr(N)?N:[N]}function Mo(N){return Ce.toPath(N)}function Ta(N,Z){for(var ae=Z.length,ge=0;ge<ae;ge++){if(null==N)return;N=N[Z[ge]]}return ae?N:void 0}function yo(N,Z,ae){var ge=Ta(N,Mo(Z));return Ae(ge)?ae:ge}function xo(N){return N}function zr(N){return N=mo({},N),function(Z){return re(Z,N)}}function Mi(N){return N=Mo(N),function(Z){return Ta(Z,N)}}function xi(N,Z,ae){if(void 0===Z)return N;switch(null==ae?3:ae){case 1:return function(ge){return N.call(Z,ge)};case 3:return function(ge,ke,Se){return N.call(Z,ge,ke,Se)};case 4:return function(ge,ke,Se,l){return N.call(Z,ge,ke,Se,l)}}return function(){return N.apply(Z,arguments)}}function Lr(N,Z,ae){return null==N?xo:nn(N)?xi(N,Z,ae):xe(N)&&!nr(N)?zr(N):Mi(N)}function Ki(N,Z){return Lr(N,Z,1/0)}function Er(N,Z,ae){return Ce.iteratee!==Ki?Ce.iteratee(N,Z):Lr(N,Z,ae)}function ko(){}function Ea(N,Z){return null==Z&&(Z=N,N=0),N+Math.floor(Math.random()*(Z-N+1))}Ce.toPath=Wt,Ce.iteratee=Ki;var si=Date.now||function(){return(new Date).getTime()};function Lo(N){var Z=function(Se){return N[Se]},ae="(?:"+z(N).join("|")+")",ge=RegExp(ae),ke=RegExp(ae,"g");return function(Se){return ge.test(Se=null==Se?"":""+Se)?Se.replace(ke,Z):Se}}var Oo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Jt=Lo(Oo),Ro=Lo(ir(Oo)),qo=Ce.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},ki=/(.)^/,Pa={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Aa=/\\|'|\r|\n|\u2028|\u2029/g;function Ia(N){return"\\"+Pa[N]}var qa=/^\s*(\w|\$)+\s*$/,es=0;function Ji(N,Z,ae,ge,ke){if(!(ge instanceof Z))return N.apply(ae,ke);var Se=Xi(N.prototype),l=N.apply(Se,ke);return xe(l)?l:Se}var Zi=ne(function(N,Z){var ae=Zi.placeholder,ge=function(){for(var ke=0,Se=Z.length,l=Array(Se),d=0;d<Se;d++)l[d]=Z[d]===ae?arguments[ke++]:Z[d];for(;ke<arguments.length;)l.push(arguments[ke++]);return Ji(N,ge,this,this,l)};return ge});Zi.placeholder=Ce;var ye=ne(function(N,Z,ae){if(!nn(N))throw new TypeError("Bind must be called on a function");var ge=ne(function(ke){return Ji(N,ge,Z,this,ae.concat(ke))});return ge}),Pr=Rt(Kt);function bi(N,Z,ae,ge){if(ge=ge||[],Z||0===Z){if(Z<=0)return ge.concat(N)}else Z=1/0;for(var ke=ge.length,Se=0,l=Kt(N);Se<l;Se++){var d=N[Se];if(Pr(d)&&(nr(d)||Je(d)))if(Z>1)bi(d,Z-1,ae,ge),ke=ge.length;else for(var y=0,_=d.length;y<_;)ge[ke++]=d[y++];else ae||(ge[ke++]=d)}return ge}var ea=ne(function(N,Z){var ae=(Z=bi(Z,!1,!1)).length;if(ae<1)throw new Error("bindAll must be passed function names");for(;ae--;){var ge=Z[ae];N[ge]=ye(N[ge],N)}return N}),gt=ne(function(N,Z,ae){return setTimeout(function(){return N.apply(null,ae)},Z)}),Li=Zi(gt,Ce,1);function br(N){return function(){return!N.apply(this,arguments)}}function Ci(N,Z){var ae;return function(){return--N>0&&(ae=Z.apply(this,arguments)),N<=1&&(Z=null),ae}}var ta=Zi(Ci,2);function Or(N,Z,ae){Z=Er(Z,ae);for(var ge,ke=z(N),Se=0,l=ke.length;Se<l;Se++)if(Z(N[ge=ke[Se]],ge,N))return ge}function ts(N){return function(Z,ae,ge){ae=Er(ae,ge);for(var ke=Kt(Z),Se=N>0?0:ke-1;Se>=0&&Se<ke;Se+=N)if(ae(Z[Se],Se,Z))return Se;return-1}}var Qi=ts(1),na=ts(-1);function bo(N,Z,ae,ge){for(var ke=(ae=Er(ae,ge,1))(Z),Se=0,l=Kt(N);Se<l;){var d=Math.floor((Se+l)/2);ae(N[d])<ke?Se=d+1:l=d}return Se}function Oi(N,Z,ae){return function(ge,ke,Se){var l=0,d=Kt(ge);if("number"==typeof Se)N>0?l=Se>=0?Se:Math.max(Se+d,l):d=Se>=0?Math.min(Se+1,d):Se+d+1;else if(ae&&Se&&d)return ge[Se=ae(ge,ke)]===ke?Se:-1;if(ke!=ke)return(Se=Z(x.call(ge,l,d),ut))>=0?Se+l:-1;for(Se=N>0?l:d-1;Se>=0&&Se<d;Se+=N)if(ge[Se]===ke)return Se;return-1}}var Ma=Oi(1,Qi,bo),No=Oi(-1,na);function Rr(N,Z,ae){var ge=(Pr(N)?Qi:Or)(N,Z,ae);if(void 0!==ge&&-1!==ge)return N[ge]}function ct(N,Z,ae){var ge,ke;if(Z=xi(Z,ae),Pr(N))for(ge=0,ke=N.length;ge<ke;ge++)Z(N[ge],ge,N);else{var Se=z(N);for(ge=0,ke=Se.length;ge<ke;ge++)Z(N[Se[ge]],Se[ge],N)}return N}function ui(N,Z,ae){Z=Er(Z,ae);for(var ge=!Pr(N)&&z(N),ke=(ge||N).length,Se=Array(ke),l=0;l<ke;l++){var d=ge?ge[l]:l;Se[l]=Z(N[d],d,N)}return Se}function ra(N){var Z=function(ae,ge,ke,Se){var l=!Pr(ae)&&z(ae),d=(l||ae).length,y=N>0?0:d-1;for(Se||(ke=ae[l?l[y]:y],y+=N);y>=0&&y<d;y+=N){var _=l?l[y]:y;ke=ge(ke,ae[_],_,ae)}return ke};return function(ae,ge,ke,Se){var l=arguments.length>=3;return Z(ae,xi(ge,Se,4),ke,l)}}var Do=ra(1),li=ra(-1);function fn(N,Z,ae){var ge=[];return Z=Er(Z,ae),ct(N,function(ke,Se,l){Z(ke,Se,l)&&ge.push(ke)}),ge}function Vi(N,Z,ae){Z=Er(Z,ae);for(var ge=!Pr(N)&&z(N),ke=(ge||N).length,Se=0;Se<ke;Se++){var l=ge?ge[Se]:Se;if(!Z(N[l],l,N))return!1}return!0}function ia(N,Z,ae){Z=Er(Z,ae);for(var ge=!Pr(N)&&z(N),ke=(ge||N).length,Se=0;Se<ke;Se++){var l=ge?ge[Se]:Se;if(Z(N[l],l,N))return!0}return!1}function Xr(N,Z,ae,ge){return Pr(N)||(N=ai(N)),("number"!=typeof ae||ge)&&(ae=0),Ma(N,Z,ae)>=0}var Bi=ne(function(N,Z,ae){var ge,ke;return nn(Z)?ke=Z:(Z=Mo(Z),ge=Z.slice(0,-1),Z=Z[Z.length-1]),ui(N,function(Se){var l=ke;if(!l){if(ge&&ge.length&&(Se=Ta(Se,ge)),null==Se)return;l=Se[Z]}return null==l?l:l.apply(Se,ae)})});function _i(N,Z){return ui(N,Mi(Z))}function yn(N,Z,ae){var ge,ke,Se=-1/0,l=-1/0;if(null==Z||"number"==typeof Z&&"object"!=typeof N[0]&&null!=N)for(var d=0,y=(N=Pr(N)?N:ai(N)).length;d<y;d++)null!=(ge=N[d])&&ge>Se&&(Se=ge);else Z=Er(Z,ae),ct(N,function(_,R,D){((ke=Z(_,R,D))>l||ke===-1/0&&Se===-1/0)&&(Se=_,l=ke)});return Se}var qi=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function It(N){return N?nr(N)?x.call(N):He(N)?N.match(qi):Pr(N)?ui(N,xo):ai(N):[]}function Kr(N,Z,ae){if(null==Z||ae)return Pr(N)||(N=ai(N)),N[Ea(N.length-1)];var ge=It(N),ke=Kt(ge);Z=Math.max(Math.min(Z,ke),0);for(var Se=ke-1,l=0;l<Z;l++){var d=Ea(l,Se),y=ge[l];ge[l]=ge[d],ge[d]=y}return ge.slice(0,Z)}function ci(N,Z){return function(ae,ge,ke){var Se=Z?[[],[]]:{};return ge=Er(ge,ke),ct(ae,function(l,d){var y=ge(l,d,ae);N(Se,l,y)}),Se}}var Cr=ci(function(N,Z,ae){Yn(N,ae)?N[ae].push(Z):N[ae]=[Z]}),oa=ci(function(N,Z,ae){N[ae]=Z}),Jr=ci(function(N,Z,ae){Yn(N,ae)?N[ae]++:N[ae]=1}),ns=ci(function(N,Z,ae){N[ae?0:1].push(Z)},!0);function Hi(N,Z,ae){return Z in ae}var aa=ne(function(N,Z){var ae={},ge=Z[0];if(null==N)return ae;nn(ge)?(Z.length>1&&(ge=xi(ge,Z[1])),Z=Nt(N)):(ge=Hi,Z=bi(Z,!1,!1),N=Object(N));for(var ke=0,Se=Z.length;ke<Se;ke++){var l=Z[ke],d=N[l];ge(d,l,N)&&(ae[l]=d)}return ae}),Co=ne(function(N,Z){var ae,ge=Z[0];return nn(ge)?(ge=br(ge),Z.length>1&&(ae=Z[1])):(Z=ui(bi(Z,!1,!1),String),ge=function(ke,Se){return!Xr(Z,Se)}),aa(N,ge,ae)});function sa(N,Z,ae){return x.call(N,0,Math.max(0,N.length-(null==Z||ae?1:Z)))}function ka(N,Z,ae){return null==N||N.length<1?null==Z||ae?void 0:[]:null==Z||ae?N[0]:sa(N,N.length-Z)}function eo(N,Z,ae){return x.call(N,null==Z||ae?1:Z)}var Ar=ne(function(N,Z){return Z=bi(Z,!0,!0),fn(N,function(ae){return!Xr(Z,ae)})}),La=ne(function(N,Z){return Ar(N,Z)});function fi(N,Z,ae,ge){Fe(Z)||(ge=ae,ae=Z,Z=!1),null!=ae&&(ae=Er(ae,ge));for(var ke=[],Se=[],l=0,d=Kt(N);l<d;l++){var y=N[l],_=ae?ae(y,l,N):y;Z&&!ae?(l&&Se===_||ke.push(y),Se=_):ae?Xr(Se,_)||(Se.push(_),ke.push(y)):Xr(ke,y)||ke.push(y)}return ke}var ua=ne(function(N){return fi(bi(N,!0,!0))});function Fo(N){for(var Z=N&&yn(N,Kt).length||0,ae=Array(Z),ge=0;ge<Z;ge++)ae[ge]=_i(N,ge);return ae}var Vn=ne(Fo);function Rn(N,Z){return N._chain?Ce(Z).chain():Z}function la(N){return ct(sr(N),function(Z){var ae=Ce[Z]=N[Z];Ce.prototype[Z]=function(){var ge=[this._wrapped];return S.apply(ge,arguments),Rn(this,ae.apply(Ce,ge))}}),Ce}ct(["pop","push","reverse","shift","sort","splice","unshift"],function(N){var Z=p[N];Ce.prototype[N]=function(){var ae=this._wrapped;return null!=ae&&(Z.apply(ae,arguments),"shift"!==N&&"splice"!==N||0!==ae.length||delete ae[0]),Rn(this,ae)}}),ct(["concat","join","slice"],function(N){var Z=p[N];Ce.prototype[N]=function(){var ae=this._wrapped;return null!=ae&&(ae=Z.apply(ae,arguments)),Rn(this,ae)}});var _o=la({__proto__:null,VERSION:W,restArguments:ne,isObject:xe,isNull:function(N){return null===N},isUndefined:Ae,isBoolean:Fe,isElement:function(N){return!(!N||1!==N.nodeType)},isString:He,isNumber:nt,isDate:et,isRegExp:ot,isError:lt,isSymbol:pt,isArrayBuffer:At,isDataView:tr,isArray:nr,isFunction:nn,isArguments:Je,isFinite:function(N){return!pt(N)&&i(N)&&!isNaN(parseFloat(N))},isNaN:ut,isTypedArray:un,isEmpty:function(N){if(null==N)return!0;var Z=Kt(N);return"number"==typeof Z&&(nr(N)||He(N)||Je(N))?0===Z:0===Kt(z(N))},isMatch:re,isEqual:function(N,Z){return bt(N,Z)},isMap:ar,isWeakMap:rr,isSet:cr,isWeakSet:Nr,keys:z,allKeys:Nt,values:ai,pairs:function(N){for(var Z=z(N),ae=Z.length,ge=Array(ae),ke=0;ke<ae;ke++)ge[ke]=[Z[ke],N[Z[ke]]];return ge},invert:ir,functions:sr,methods:sr,extend:Qa,extendOwn:mo,assign:mo,defaults:Qo,create:function(N,Z){var ae=Xi(N);return Z&&mo(ae,Z),ae},clone:function(N){return xe(N)?nr(N)?N.slice():Qa({},N):N},tap:function(N,Z){return Z(N),N},get:yo,has:function(N,Z){for(var ae=(Z=Mo(Z)).length,ge=0;ge<ae;ge++){var ke=Z[ge];if(!Yn(N,ke))return!1;N=N[ke]}return!!ae},mapObject:function(N,Z,ae){Z=Er(Z,ae);for(var ge=z(N),ke=ge.length,Se={},l=0;l<ke;l++){var d=ge[l];Se[d]=Z(N[d],d,N)}return Se},identity:xo,constant:ht,noop:ko,toPath:Wt,property:Mi,propertyOf:function(N){return null==N?ko:function(Z){return yo(N,Z)}},matcher:zr,matches:zr,times:function(N,Z,ae){var ge=Array(Math.max(0,N));Z=xi(Z,ae,1);for(var ke=0;ke<N;ke++)ge[ke]=Z(ke);return ge},random:Ea,now:si,escape:Jt,unescape:Ro,templateSettings:qo,template:function(N,Z,ae){!Z&&ae&&(Z=ae),Z=Qo({},Z,Ce.templateSettings);var ge=RegExp([(Z.escape||ki).source,(Z.interpolate||ki).source,(Z.evaluate||ki).source].join("|")+"|$","g"),ke=0,Se="__p+='";N.replace(ge,function(_,R,D,Y,le){return Se+=N.slice(ke,le).replace(Aa,Ia),ke=le+_.length,R?Se+="'+\n((__t=("+R+"))==null?'':_.escape(__t))+\n'":D?Se+="'+\n((__t=("+D+"))==null?'':__t)+\n'":Y&&(Se+="';\n"+Y+"\n__p+='"),_}),Se+="';\n";var l,d=Z.variable;if(d){if(!qa.test(d))throw new Error("variable is not a bare identifier: "+d)}else Se="with(obj||{}){\n"+Se+"}\n",d="obj";Se="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+Se+"return __p;\n";try{l=new Function(d,"_",Se)}catch(_){throw _.source=Se,_}var y=function(_){return l.call(this,_,Ce)};return y.source="function("+d+"){\n"+Se+"}",y},result:function(N,Z,ae){var ge=(Z=Mo(Z)).length;if(!ge)return nn(ae)?ae.call(N):ae;for(var ke=0;ke<ge;ke++){var Se=null==N?void 0:N[Z[ke]];void 0===Se&&(Se=ae,ke=ge),N=nn(Se)?Se.call(N):Se}return N},uniqueId:function(N){var Z=++es+"";return N?N+Z:Z},chain:function(N){var Z=Ce(N);return Z._chain=!0,Z},iteratee:Ki,partial:Zi,bind:ye,bindAll:ea,memoize:function(N,Z){var ae=function(ge){var ke=ae.cache,Se=""+(Z?Z.apply(this,arguments):ge);return Yn(ke,Se)||(ke[Se]=N.apply(this,arguments)),ke[Se]};return ae.cache={},ae},delay:gt,defer:Li,throttle:function(N,Z,ae){var ge,ke,Se,l,d=0;ae||(ae={});var y=function(){d=!1===ae.leading?0:si(),ge=null,l=N.apply(ke,Se),ge||(ke=Se=null)},_=function(){var R=si();d||!1!==ae.leading||(d=R);var D=Z-(R-d);return ke=this,Se=arguments,D<=0||D>Z?(ge&&(clearTimeout(ge),ge=null),d=R,l=N.apply(ke,Se),ge||(ke=Se=null)):ge||!1===ae.trailing||(ge=setTimeout(y,D)),l};return _.cancel=function(){clearTimeout(ge),d=0,ge=ke=Se=null},_},debounce:function(N,Z,ae){var ge,ke,Se,l,d,y=function(){var R=si()-ke;Z>R?ge=setTimeout(y,Z-R):(ge=null,ae||(l=N.apply(d,Se)),ge||(Se=d=null))},_=ne(function(R){return d=this,Se=R,ke=si(),ge||(ge=setTimeout(y,Z),ae&&(l=N.apply(d,Se))),l});return _.cancel=function(){clearTimeout(ge),ge=Se=d=null},_},wrap:function(N,Z){return Zi(Z,N)},negate:br,compose:function(){var N=arguments,Z=N.length-1;return function(){for(var ae=Z,ge=N[Z].apply(this,arguments);ae--;)ge=N[ae].call(this,ge);return ge}},after:function(N,Z){return function(){if(--N<1)return Z.apply(this,arguments)}},before:Ci,once:ta,findKey:Or,findIndex:Qi,findLastIndex:na,sortedIndex:bo,indexOf:Ma,lastIndexOf:No,find:Rr,detect:Rr,findWhere:function(N,Z){return Rr(N,zr(Z))},each:ct,forEach:ct,map:ui,collect:ui,reduce:Do,foldl:Do,inject:Do,reduceRight:li,foldr:li,filter:fn,select:fn,reject:function(N,Z,ae){return fn(N,br(Er(Z)),ae)},every:Vi,all:Vi,some:ia,any:ia,contains:Xr,includes:Xr,include:Xr,invoke:Bi,pluck:_i,where:function(N,Z){return fn(N,zr(Z))},max:yn,min:function(N,Z,ae){var ge,ke,Se=1/0,l=1/0;if(null==Z||"number"==typeof Z&&"object"!=typeof N[0]&&null!=N)for(var d=0,y=(N=Pr(N)?N:ai(N)).length;d<y;d++)null!=(ge=N[d])&&ge<Se&&(Se=ge);else Z=Er(Z,ae),ct(N,function(_,R,D){((ke=Z(_,R,D))<l||ke===1/0&&Se===1/0)&&(Se=_,l=ke)});return Se},shuffle:function(N){return Kr(N,1/0)},sample:Kr,sortBy:function(N,Z,ae){var ge=0;return Z=Er(Z,ae),_i(ui(N,function(ke,Se,l){return{value:ke,index:ge++,criteria:Z(ke,Se,l)}}).sort(function(ke,Se){var l=ke.criteria,d=Se.criteria;if(l!==d){if(l>d||void 0===l)return 1;if(l<d||void 0===d)return-1}return ke.index-Se.index}),"value")},groupBy:Cr,indexBy:oa,countBy:Jr,partition:ns,toArray:It,size:function(N){return null==N?0:Pr(N)?N.length:z(N).length},pick:aa,omit:Co,first:ka,head:ka,take:ka,initial:sa,last:function(N,Z,ae){return null==N||N.length<1?null==Z||ae?void 0:[]:null==Z||ae?N[N.length-1]:eo(N,Math.max(0,N.length-Z))},rest:eo,tail:eo,drop:eo,compact:function(N){return fn(N,Boolean)},flatten:function(N,Z){return bi(N,Z,!1)},without:La,uniq:fi,unique:fi,union:ua,intersection:function(N){for(var Z=[],ae=arguments.length,ge=0,ke=Kt(N);ge<ke;ge++){var Se=N[ge];if(!Xr(Z,Se)){var l;for(l=1;l<ae&&Xr(arguments[l],Se);l++);l===ae&&Z.push(Se)}}return Z},difference:Ar,unzip:Fo,transpose:Fo,zip:Vn,object:function(N,Z){for(var ae={},ge=0,ke=Kt(N);ge<ke;ge++)Z?ae[N[ge]]=Z[ge]:ae[N[ge][0]]=N[ge][1];return ae},range:function(N,Z,ae){null==Z&&(Z=N||0,N=0),ae||(ae=Z<N?-1:1);for(var ge=Math.max(Math.ceil((Z-N)/ae),0),ke=Array(ge),Se=0;Se<ge;Se++,N+=ae)ke[Se]=N;return ke},chunk:function(N,Z){if(null==Z||Z<1)return[];for(var ae=[],ge=0,ke=N.length;ge<ke;)ae.push(x.call(N,ge,ge+=Z));return ae},mixin:la,default:Ce});return _o._=_o,_o}()}}]);