"use strict";(self.webpackChunkcanvas_gamification_ui=self.webpackChunkcanvas_gamification_ui||[]).push([[169],{76169:(Jt,F,r)=>{r.r(F),r.d(F,{AdminModule:()=>Wt});var p=r(69808),c=r(78697),t=(r(52014),r(5e3));r(28634),r(95489),r(33186),r(73442);let Q=(()=>{let n=class{};return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({}),n})();var O=r(50284),S=r(45806),E=r(25635),b=r(14992),N=r(41840),h=r(71105),T=r(84443),I=r(95428),_=r(37080),w=r(93075),C=r(46693),d=r(56249),j=r(15411),x=r(22079),U=r(61279),H=r(84620),R=r(9419),V=r(9232),z=r(99848),B=r(43567),v=r(6741),K=r(75197),M=r(27221),D=r(40520),y=r(93514);let W=(()=>{class n{constructor(e,o){this.http=e,this.apiService=o}getQuestionCount(){const e=this.apiService.getURL("admin/question-count");return this.http.get(e).pipe((0,M.K)(this.apiService.handleError("Unable to get question counts",[])))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(D.eN),t.\u0275\u0275inject(y.s))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function G(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",15),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"div"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,o=t.\u0275\u0275nextContext().$implicit,a=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",a.getDifficultyPerCountLabel(e,o)," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(a.getDifficultyPerCountValue(e,o))}}function J(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"tui-island",12)(1,"h3",1),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"tui-ring-chart",13),t.\u0275\u0275template(4,G,4,2,"ng-template",null,14,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,o=t.\u0275\u0275reference(5),a=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.name," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("content",o)("value",a.getCountPerDifficultyValues(e.count_per_difficulty))}}function X(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",10),t.\u0275\u0275template(1,J,6,3,"tui-island",11),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.questionCountData)}}function Y(n,i){1&n&&(t.\u0275\u0275elementStart(0,"th",21),t.\u0275\u0275text(1," Name "),t.\u0275\u0275elementEnd())}function Z(n,i){1&n&&(t.\u0275\u0275elementStart(0,"th",21),t.\u0275\u0275text(1," Count "),t.\u0275\u0275elementEnd())}function q(n,i){1&n&&(t.\u0275\u0275elementStart(0,"th",21),t.\u0275\u0275text(1," Count Per Difficulty "),t.\u0275\u0275elementEnd())}function tt(n,i){1&n&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1," ,\xa0 "),t.\u0275\u0275elementEnd())}function et(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275template(2,tt,2,0,"span",7),t.\u0275\u0275elementContainerEnd()),2&n){const e=i.$implicit,o=i.index,a=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate2(" ",e.count," ",e.difficulty," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o!==a.count_per_difficulty.length-1)}}function nt(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"td",24),t.\u0275\u0275template(1,et,3,3,"ng-container",25),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.count_per_difficulty)}}function it(n,i){1&n&&(t.\u0275\u0275elementStart(0,"tr",22),t.\u0275\u0275template(1,nt,2,1,"td",23),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","count_per_difficulty"))}function ot(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"table",16)(1,"thead")(2,"tr",17),t.\u0275\u0275template(3,Y,2,0,"th",18),t.\u0275\u0275template(4,Z,2,0,"th",18),t.\u0275\u0275template(5,q,2,0,"th",18),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"tbody",19),t.\u0275\u0275template(7,it,2,1,"tr",20),t.\u0275\u0275elementEnd()()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("columns",e.questionCountDataHeader),t.\u0275\u0275advance(3),t.\u0275\u0275property("tuiHead","name"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","count"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","count_per_difficulty"),t.\u0275\u0275advance(1),t.\u0275\u0275property("data",e.questionCountData),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiRowOf",e.questionCountData)}}function at(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,X,2,1,"div",8),t.\u0275\u0275template(2,ot,8,6,"table",9),t.\u0275\u0275elementContainerEnd()),2&n){t.\u0275\u0275nextContext();const e=t.\u0275\u0275reference(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",0===e.activeItemIndex),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",1===e.activeItemIndex)}}let rt=(()=>{class n{constructor(e,o){this.questionCountService=e,this.changeDetector=o}ngOnInit(){this.questionCountService.getQuestionCount().subscribe(e=>{this.questionCountData=e,this.questionCountDataHeader=Object.keys(e[0]),this.openGraphDropdown=Array(e.length).fill(!1)})}ngAfterContentInit(){this.changeDetector.detectChanges()}getCountPerDifficultyValues(e){return e.map(o=>o.count)}getDifficultyPerCountValue(e,o){var a;return Number.isNaN(e)?"Questions":null===(a=o.count_per_difficulty[e])||void 0===a?void 0:a.difficulty}getDifficultyPerCountLabel(e,o){var a;return Number.isNaN(e)?o.count:null===(a=o.count_per_difficulty[e])||void 0===a?void 0:a.count}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(W),t.\u0275\u0275directiveInject(t.ChangeDetectorRef))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-question-count"]],decls:11,vars:3,consts:[[1,"tui-space_bottom-8"],[1,"tui-island__title"],[1,"tui-space_bottom-4"],["tabsComponent",""],["aria-label","Card View","tuiTab",""],["aria-label","Table View","tuiTab",""],[3,"overlay","showLoader"],[4,"ngIf"],["class","count-islands",4,"ngIf"],["class","count-table","tuiTable","",3,"columns",4,"ngIf"],[1,"count-islands"],["textAlign","center",4,"ngFor","ngForOf"],["textAlign","center"],[1,"tui-space_auto",3,"content","value"],["chartContent",""],[1,"tui-text_body-xl","tui-text_bold"],["tuiTable","",1,"count-table",3,"columns"],["tuiThGroup",""],["tuiTh","",4,"tuiHead"],["tuiTbody","",3,"data"],["tuiTr","",4,"tuiRow","tuiRowOf"],["tuiTh",""],["tuiTr",""],["tuiTd","",4,"tuiCell"],["tuiTd",""],[4,"ngFor","ngForOf"]],template:function(e,o){1&e&&(t.\u0275\u0275elementStart(0,"tui-island",0)(1,"h2",1),t.\u0275\u0275text(2,"Question Counts"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"tui-tabs",2,3)(5,"button",4),t.\u0275\u0275text(6,"Card View"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"button",5),t.\u0275\u0275text(8,"Table View"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"tui-loader",6),t.\u0275\u0275template(10,at,3,2,"ng-container",7),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275advance(9),t.\u0275\u0275property("overlay",!0)("showLoader",!o.questionCountData),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.questionCountData))},directives:[h.h,_.H9,_.yu,x.kM,p.O5,p.sg,V.i,c.c4,c.EE,c.DZ,c.Ws,c.jY,c.LU,c.fu,c.Bl,c.Kt],styles:[".count-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}.count-table[_ngcontent-%COMP%]{width:100%}"]}),n})();var lt=r(22307);let ct=(()=>{class n{constructor(e,o){this.http=e,this.apiService=o}getCategoryStats(){const e=this.apiService.getURL("admin/category-stats");return this.http.get(e).pipe((0,M.K)(this.apiService.handleError("Unable to get category stats",[])))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(D.eN),t.\u0275\u0275inject(y.s))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function st(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"tui-island")(1,"h3",0),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"p",12),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"p",12),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"p",12),t.\u0275\u0275text(8," Unknown success rate "),t.\u0275\u0275elementEnd()()),2&n){const e=i.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.category.name," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.category.description," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.category.question_count," Questions ")}}function pt(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",14),t.\u0275\u0275template(1,st,9,3,"tui-island",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"button",15),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e).$implicit.complete()}),t.\u0275\u0275text(3," Close "),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.children)}}function ut(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tui-island"),t.\u0275\u0275template(1,pt,4,1,"ng-template",null,11,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementStart(3,"h3",0),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"p",12),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"p",12),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"p",12),t.\u0275\u0275text(10," Unknown success rate "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"button",13),t.\u0275\u0275listener("click",function(){const l=t.\u0275\u0275restoreView(e).$implicit,s=t.\u0275\u0275reference(2);return t.\u0275\u0275nextContext(3).openCategoryStatsDialog(l.category.name,s)}),t.\u0275\u0275text(12," View Details "),t.\u0275\u0275elementEnd()()}if(2&n){const e=i.$implicit;t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",e.category.name," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.category.description," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.category.question_count," Questions ")}}function dt(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",9),t.\u0275\u0275template(1,ut,13,3,"tui-island",10),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.categoryStatsData)}}function mt(n,i){1&n&&(t.\u0275\u0275elementStart(0,"th",21),t.\u0275\u0275text(1," Category "),t.\u0275\u0275elementEnd())}function _t(n,i){1&n&&(t.\u0275\u0275elementStart(0,"th",21),t.\u0275\u0275text(1," Children "),t.\u0275\u0275elementEnd())}function gt(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"td",24),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.category.name," ")}}function ft(n,i){1&n&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1," ,\xa0 "),t.\u0275\u0275elementEnd())}function ht(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275template(2,ft,2,0,"span",6),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,o=i.index,a=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.category.name," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o!==a.children.length-1)}}function Ct(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"td",24),t.\u0275\u0275template(1,ht,3,2,"span",10),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.children)}}function xt(n,i){1&n&&(t.\u0275\u0275elementStart(0,"tr",22),t.\u0275\u0275template(1,gt,2,1,"td",23),t.\u0275\u0275template(2,Ct,2,1,"td",23),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","category"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","children"))}function vt(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"table",16)(1,"thead")(2,"tr",17),t.\u0275\u0275template(3,mt,2,0,"th",18),t.\u0275\u0275template(4,_t,2,0,"th",18),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"tbody",19),t.\u0275\u0275template(6,xt,3,2,"tr",20),t.\u0275\u0275elementEnd()()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("columns",e.categoryStatsDataHeader),t.\u0275\u0275advance(3),t.\u0275\u0275property("tuiHead","category"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","children"),t.\u0275\u0275advance(1),t.\u0275\u0275property("data",e.categoryStatsData),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiRowOf",e.categoryStatsData)}}function yt(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,dt,2,1,"div",7),t.\u0275\u0275template(2,vt,7,5,"table",8),t.\u0275\u0275elementContainerEnd()),2&n){t.\u0275\u0275nextContext();const e=t.\u0275\u0275reference(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",0===e.activeItemIndex),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",1===e.activeItemIndex)}}let St=(()=>{class n{constructor(e,o,a){this.categoryStatsService=e,this.changeDetector=o,this.dialogService=a}ngOnInit(){this.categoryStatsService.getCategoryStats().subscribe(e=>{this.categoryStatsData=e,this.categoryStatsDataHeader=Object.keys(e[0])})}ngAfterContentInit(){this.changeDetector.detectChanges()}openCategoryStatsDialog(e,o){this.dialogService.open(o,{closeable:!1,size:"l",label:e}).subscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(ct),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(lt.RO))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-category-stats"]],decls:11,vars:3,consts:[[1,"tui-island__title"],[1,"tui-space_bottom-4"],["tabsComponent",""],["aria-label","Card View","tuiTab",""],["aria-label","Table View","tuiTab",""],[3,"overlay","showLoader"],[4,"ngIf"],["class","stats-islands",4,"ngIf"],["class","stats-table","tuiTable","",3,"columns",4,"ngIf"],[1,"stats-islands"],[4,"ngFor","ngForOf"],["categoryDialog",""],[1,"tui-island__paragraph"],["appearance","flat","size","m","tuiButton","",1,"tui-island__footer-button",3,"click"],[1,"stats-islands","tui-space_bottom-4","tui-space_top-8"],["appearance","primary","size","m","tuiButton","",3,"click"],["tuiTable","",1,"stats-table",3,"columns"],["tuiThGroup",""],["tuiTh","",4,"tuiHead"],["tuiTbody","",3,"data"],["tuiTr","",4,"tuiRow","tuiRowOf"],["tuiTh",""],["tuiTr",""],["tuiTd","",4,"tuiCell"],["tuiTd",""]],template:function(e,o){1&e&&(t.\u0275\u0275elementStart(0,"tui-island")(1,"h2",0),t.\u0275\u0275text(2,"Category Stats"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"tui-tabs",1,2)(5,"button",3),t.\u0275\u0275text(6,"Card View"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"button",4),t.\u0275\u0275text(8,"Table View"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"tui-loader",5),t.\u0275\u0275template(10,yt,3,2,"ng-container",6),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275advance(9),t.\u0275\u0275property("overlay",!0)("showLoader",!o.categoryStatsData),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.categoryStatsData))},directives:[h.h,_.H9,_.yu,x.kM,p.O5,p.sg,C.v0,c.c4,c.EE,c.DZ,c.Ws,c.jY,c.LU,c.fu,c.Bl,c.Kt],styles:[".stats-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}.stats-dialog_islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(10rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}.stats-table[_ngcontent-%COMP%]{width:100%}"]}),n})(),Et=(()=>{class n{constructor(e,o){this.http=e,this.apiService=o}getCourses(){const e=this.apiService.getURL("admin/courses");return this.http.get(e).pipe((0,M.K)(this.apiService.handleError("Unable to get courses",[])))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(D.eN),t.\u0275\u0275inject(y.s))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var bt=r(49201);function Tt(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"tui-island")(1,"h3",5),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"p",6),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"p",6),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"p",6),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd()()),2&n){const e=i.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.name),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" URL: ",e.url," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" Start Date: ",e.start_date," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" End Date: ",e.end_date," ")}}let It=(()=>{class n{constructor(e,o){this.viewCoursesService=e,this.changeDetector=o}ngOnInit(){this.viewCoursesService.getCourses().subscribe(e=>{this.courseData=e})}ngAfterContentInit(){this.changeDetector.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Et),t.\u0275\u0275directiveInject(t.ChangeDetectorRef))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-view-courses"]],decls:6,vars:3,consts:[["position","right","sidebarId","adminSidebar","size","l"],[1,"tui-text_h6","tui-space_bottom-4","tui-space_top-6"],[3,"overlay","showLoader"],[1,"courses-islands","tui-space_bottom-6"],[4,"ngFor","ngForOf"],[1,"tui-island__title"],[1,"tui-island__paragraph"]],template:function(e,o){1&e&&(t.\u0275\u0275elementStart(0,"app-sidebar",0)(1,"h2",1),t.\u0275\u0275text(2,"Courses"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"tui-loader",2)(4,"div",3),t.\u0275\u0275template(5,Tt,9,4,"tui-island",4),t.\u0275\u0275elementEnd()()()),2&e&&(t.\u0275\u0275advance(3),t.\u0275\u0275property("overlay",!0)("showLoader",!o.courseData),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",o.courseData))},directives:[bt.k,x.kM,p.sg,h.h],styles:[".courses-islands[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}"]}),n})();function wt(n,i){if(1&n&&t.\u0275\u0275element(0,"tui-svg",9),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275classProp("export-icon_rotated",e.openExport)}}const Mt=function(){return["export","page-view"]},Dt=function(){return["export","action"]};function Ft(n,i){1&n&&(t.\u0275\u0275elementStart(0,"tui-data-list")(1,"a",10),t.\u0275\u0275text(2," Page Views "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"a",10),t.\u0275\u0275text(4," User Actions "),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("routerLink",t.\u0275\u0275pureFunction0(2,Mt)),t.\u0275\u0275advance(2),t.\u0275\u0275property("routerLink",t.\u0275\u0275pureFunction0(3,Dt)))}let Ot=(()=>{class n{constructor(){this.openExport=!1}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-admin"]],decls:16,vars:3,consts:[[1,"admin"],[1,"admin-content"],[1,"tui-container","tui-container_fullwidth"],[1,"flex","justify-between","items-center"],[1,"tui-text_h3","tui-space_vertical-10"],[3,"open","content","openChange"],["size","m","tuiButton","","type","button",3,"iconRight"],["exportDropdownIcon",""],["exportDropdownContent",""],["src","tuiIconChevronDown",1,"export-icon"],["tuiOption","",3,"routerLink"]],template:function(e,o){if(1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.\u0275\u0275text(5,"Admin"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"tui-hosted-dropdown",5),t.\u0275\u0275listener("openChange",function(l){return o.openExport=l}),t.\u0275\u0275elementStart(7,"button",6),t.\u0275\u0275text(8," Export "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(9,wt,1,2,"ng-template",null,7,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(11,Ft,5,4,"ng-template",null,8,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(13,"app-question-count")(14,"app-category-stats"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(15,"app-view-courses"),t.\u0275\u0275elementEnd()),2&e){const a=t.\u0275\u0275reference(10),l=t.\u0275\u0275reference(12);t.\u0275\u0275advance(6),t.\u0275\u0275property("open",o.openExport)("content",l),t.\u0275\u0275advance(1),t.\u0275\u0275property("iconRight",a)}},directives:[j.o1,C.v0,H.P,d.qi,d.vK,v.yS,rt,St,It],styles:[".admin[_ngcontent-%COMP%]{display:flex}@media screen and (max-width: 767px){.admin[_ngcontent-%COMP%]{flex-direction:column}}.admin-content[_ngcontent-%COMP%]{flex:1}.export-icon[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;transition-duration:.3s}.export-icon_rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}"]}),n})();var k=r(48558);function jt(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"button",12),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit;t.\u0275\u0275property("value",e),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e," ")}}function Ht(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"tui-data-list",10),t.\u0275\u0275template(1,jt,2,2,"button",11),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.fields)}}function Rt(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",7)(2,"tui-multi-select",8),t.\u0275\u0275listener("ngModelChange",function(a){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().selectedFields=a}),t.\u0275\u0275text(3," What fields do you want to export? "),t.\u0275\u0275template(4,Ht,2,1,"tui-data-list",9),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementContainerEnd()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",e.selectedFields)}}function Vt(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",7)(2,"tui-input",13),t.\u0275\u0275listener("ngModelChange",function(a){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().selectedSearch=a}),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementContainerEnd()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("tuiTextfieldCleaner",!0)("ngModel",e.selectedSearch),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.search," ")}}function kt(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tui-input-date",15),t.\u0275\u0275listener("ngModelChange",function(a){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext().$implicit;return t.\u0275\u0275nextContext().selectedFilters[l.key]=a}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext().$implicit,o=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngModel",o.selectedFilters[e.key]),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.name," ")}}function At(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tui-input-number",15),t.\u0275\u0275listener("ngModelChange",function(a){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext().$implicit;return t.\u0275\u0275nextContext().selectedFilters[l.key]=a}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext().$implicit,o=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngModel",o.selectedFilters[e.key]),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.name," ")}}function Pt(n,i){if(1&n&&t.\u0275\u0275element(0,"tui-data-list-wrapper",17),2&n){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("items",e.verbs)}}function Lt(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tui-select",15),t.\u0275\u0275listener("ngModelChange",function(a){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext().$implicit;return t.\u0275\u0275nextContext().selectedFilters[l.key]=a}),t.\u0275\u0275text(1),t.\u0275\u0275template(2,Pt,1,1,"tui-data-list-wrapper",16),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext().$implicit,o=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngModel",o.selectedFilters[e.key]),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.name," ")}}function $t(n,i){if(1&n&&t.\u0275\u0275element(0,"tui-data-list-wrapper",17),2&n){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("items",e.objectTypes)}}function Qt(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tui-select",15),t.\u0275\u0275listener("ngModelChange",function(a){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext().$implicit;return t.\u0275\u0275nextContext().selectedFilters[l.key]=a}),t.\u0275\u0275text(1),t.\u0275\u0275template(2,$t,1,1,"tui-data-list-wrapper",16),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext().$implicit,o=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngModel",o.selectedFilters[e.key]),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.name," ")}}function Nt(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",7),t.\u0275\u0275template(2,kt,2,2,"tui-input-date",14),t.\u0275\u0275template(3,At,2,2,"tui-input-number",14),t.\u0275\u0275template(4,Lt,3,2,"tui-select",14),t.\u0275\u0275template(5,Qt,3,2,"tui-select",14),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=i.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf","date"===e.type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","number"===e.type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","verb"===e.type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","objectType"===e.type)}}const Ut=function(){return["../.."]};let A=(()=>{class n{constructor(e){this.apiService=e,this.filters=[],this.selectedFields=[],this.selectedSearch="",this.selectedFilters={}}ngOnInit(){this.verbs=Object.values(k.nX),this.objectTypes=Object.values(k.Us),this.selectedFields=this.fields;for(const e of this.filters)this.selectedFilters[e.key]=null}getUrl(){var e;const o=new URLSearchParams({fields:null===(e=this.selectedFields)||void 0===e?void 0:e.join(","),search:this.selectedSearch});for(const a of this.filters){const l=this.selectedFilters[a.key];!l||o.set(a.key,"date"===a.type?new Date(l.toLocalNativeDate().getTime()).toISOString():l)}return this.apiService.getURL("export",this.url)+"?"+o.toString()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(y.s))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-export-snippet"]],inputs:{fields:"fields",url:"url",name:"name",search:"search",filters:"filters"},decls:11,vars:7,consts:[[1,"tui-container","tui-container_adaptive"],["appearance","flat","icon","tuiIconArrowLeft","aria-label","Back to Homepage","size","s","tuiButton","",1,"mt-3","-mb-3",3,"routerLink"],[1,"tui-form__header"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"tui-form__buttons"],["appearance","primary","size","m","tuiButton","",3,"href"],[1,"tui-form__row"],["aria-label","Fields",3,"ngModel","ngModelChange"],["tuiMultiSelectGroup","",4,"tuiDataList"],["tuiMultiSelectGroup",""],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],[3,"tuiTextfieldCleaner","ngModel","ngModelChange"],[3,"ngModel","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelChange"],[3,"items",4,"tuiDataList"],[3,"items"]],template:function(e,o){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"button",1),t.\u0275\u0275text(2," Back to Admin Dashboard "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",2),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(5,Rt,5,1,"ng-container",3),t.\u0275\u0275template(6,Vt,4,3,"ng-container",3),t.\u0275\u0275template(7,Nt,6,4,"ng-container",4),t.\u0275\u0275elementStart(8,"div",5)(9,"a",6),t.\u0275\u0275text(10," Download "),t.\u0275\u0275elementEnd()()()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("routerLink",t.\u0275\u0275pureFunction0(6,Ut)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" Export ",o.name," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.fields),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.search),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",o.filters),t.\u0275\u0275advance(2),t.\u0275\u0275property("href",o.getUrl(),t.\u0275\u0275sanitizeUrl))},directives:[C.v0,v.rH,p.O5,T.VT,w.NgControlStatus,w.NgModel,d.gX,d.qi,T.Qp,p.sg,d.vK,E.K3,E.wU,R.be,S.jL,S.k_,b.qS,b.g5,I.uJ,I.OI,O.eC],styles:[""]}),n})();const zt=function(){return["user","time_created","url"]},Bt=[{path:"export/page-view",component:(()=>{class n{constructor(){this.filters=[{key:"time_created__gt",name:"Viewed after",type:"date"},{key:"time_created__lt",name:"Viewed before",type:"date"},{key:"user",name:"User ID",type:"number"}]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-export-page-view-component"]],decls:1,vars:3,consts:[["url","page-view","name","Page Views","search","Search in the url",3,"fields","filters"]],template:function(e,o){1&e&&t.\u0275\u0275element(0,"app-export-snippet",0),2&e&&t.\u0275\u0275property("fields",t.\u0275\u0275pureFunction0(2,zt))("filters",o.filters)},directives:[A],styles:[""]}),n})()},{path:"export/action",component:(()=>{class n{constructor(){this.fields=["time_created","time_modified","actor","description","token_change","status","verb","object_type","object_id","data"],this.filters=[{key:"time_created__gt",name:"Acted after",type:"date"},{key:"time_created__lt",name:"Acted before",type:"date"},{key:"actor",name:"Actor user ID",type:"number"},{key:"verb",name:"Verb of the action",type:"verb"},{key:"object_type",name:"Type of the object",type:"objectType"},{key:"object_id",name:"Object ID",type:"number"}]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-export-action"]],decls:1,vars:2,consts:[["name","User Actions","url","action","search","Search in description and data",3,"fields","filters"]],template:function(e,o){1&e&&t.\u0275\u0275element(0,"app-export-snippet",0),2&e&&t.\u0275\u0275property("fields",o.fields)("filters",o.filters)},directives:[A],styles:[""]}),n})()},{path:"",component:Ot,canActivate:[K.a]}];let Kt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[v.Bz.forChild(Bt)],v.Bz]}),n})(),Wt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[Kt,p.ez,w.FormsModule,B.l,C.fN,d.pc,O.zX,z.p,Q,j.jh,S.hr,E.Qf,b._H,N.$K,h.y,x.dS,T.lm,V.R,U.Jy,I.Jy,H.E,c.jz,_.$$,R.cn]]}),n})()}}]);